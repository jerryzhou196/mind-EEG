/*! For license information please see main.e8af6276.js.LICENSE.txt */
!function(){var e={8377:function(e,t,n){var r=n(7424).default,a=n(7061).default,i=n(7156).default,o=n(6690).default,s=n(9728).default;!function(e,t,n){"use strict";var u={1:{name:"/m/01g317",id:1,displayName:"person"},2:{name:"/m/0199g",id:2,displayName:"bicycle"},3:{name:"/m/0k4j",id:3,displayName:"car"},4:{name:"/m/04_sv",id:4,displayName:"motorcycle"},5:{name:"/m/05czz6l",id:5,displayName:"airplane"},6:{name:"/m/01bjv",id:6,displayName:"bus"},7:{name:"/m/07jdr",id:7,displayName:"train"},8:{name:"/m/07r04",id:8,displayName:"truck"},9:{name:"/m/019jd",id:9,displayName:"boat"},10:{name:"/m/015qff",id:10,displayName:"traffic light"},11:{name:"/m/01pns0",id:11,displayName:"fire hydrant"},13:{name:"/m/02pv19",id:13,displayName:"stop sign"},14:{name:"/m/015qbp",id:14,displayName:"parking meter"},15:{name:"/m/0cvnqh",id:15,displayName:"bench"},16:{name:"/m/015p6",id:16,displayName:"bird"},17:{name:"/m/01yrx",id:17,displayName:"cat"},18:{name:"/m/0bt9lr",id:18,displayName:"dog"},19:{name:"/m/03k3r",id:19,displayName:"horse"},20:{name:"/m/07bgp",id:20,displayName:"sheep"},21:{name:"/m/01xq0k1",id:21,displayName:"cow"},22:{name:"/m/0bwd_0j",id:22,displayName:"elephant"},23:{name:"/m/01dws",id:23,displayName:"bear"},24:{name:"/m/0898b",id:24,displayName:"zebra"},25:{name:"/m/03bk1",id:25,displayName:"giraffe"},27:{name:"/m/01940j",id:27,displayName:"backpack"},28:{name:"/m/0hnnb",id:28,displayName:"umbrella"},31:{name:"/m/080hkjn",id:31,displayName:"handbag"},32:{name:"/m/01rkbr",id:32,displayName:"tie"},33:{name:"/m/01s55n",id:33,displayName:"suitcase"},34:{name:"/m/02wmf",id:34,displayName:"frisbee"},35:{name:"/m/071p9",id:35,displayName:"skis"},36:{name:"/m/06__v",id:36,displayName:"snowboard"},37:{name:"/m/018xm",id:37,displayName:"sports ball"},38:{name:"/m/02zt3",id:38,displayName:"kite"},39:{name:"/m/03g8mr",id:39,displayName:"baseball bat"},40:{name:"/m/03grzl",id:40,displayName:"baseball glove"},41:{name:"/m/06_fw",id:41,displayName:"skateboard"},42:{name:"/m/019w40",id:42,displayName:"surfboard"},43:{name:"/m/0dv9c",id:43,displayName:"tennis racket"},44:{name:"/m/04dr76w",id:44,displayName:"bottle"},46:{name:"/m/09tvcd",id:46,displayName:"wine glass"},47:{name:"/m/08gqpm",id:47,displayName:"cup"},48:{name:"/m/0dt3t",id:48,displayName:"fork"},49:{name:"/m/04ctx",id:49,displayName:"knife"},50:{name:"/m/0cmx8",id:50,displayName:"spoon"},51:{name:"/m/04kkgm",id:51,displayName:"bowl"},52:{name:"/m/09qck",id:52,displayName:"banana"},53:{name:"/m/014j1m",id:53,displayName:"apple"},54:{name:"/m/0l515",id:54,displayName:"sandwich"},55:{name:"/m/0cyhj_",id:55,displayName:"orange"},56:{name:"/m/0hkxq",id:56,displayName:"broccoli"},57:{name:"/m/0fj52s",id:57,displayName:"carrot"},58:{name:"/m/01b9xk",id:58,displayName:"hot dog"},59:{name:"/m/0663v",id:59,displayName:"pizza"},60:{name:"/m/0jy4k",id:60,displayName:"donut"},61:{name:"/m/0fszt",id:61,displayName:"cake"},62:{name:"/m/01mzpv",id:62,displayName:"chair"},63:{name:"/m/02crq1",id:63,displayName:"couch"},64:{name:"/m/03fp41",id:64,displayName:"potted plant"},65:{name:"/m/03ssj5",id:65,displayName:"bed"},67:{name:"/m/04bcr3",id:67,displayName:"dining table"},70:{name:"/m/09g1w",id:70,displayName:"toilet"},72:{name:"/m/07c52",id:72,displayName:"tv"},73:{name:"/m/01c648",id:73,displayName:"laptop"},74:{name:"/m/020lf",id:74,displayName:"mouse"},75:{name:"/m/0qjjc",id:75,displayName:"remote"},76:{name:"/m/01m2v",id:76,displayName:"keyboard"},77:{name:"/m/050k8",id:77,displayName:"cell phone"},78:{name:"/m/0fx9l",id:78,displayName:"microwave"},79:{name:"/m/029bxz",id:79,displayName:"oven"},80:{name:"/m/01k6s3",id:80,displayName:"toaster"},81:{name:"/m/0130jx",id:81,displayName:"sink"},82:{name:"/m/040b_t",id:82,displayName:"refrigerator"},84:{name:"/m/0bt_c3",id:84,displayName:"book"},85:{name:"/m/01x3z",id:85,displayName:"clock"},86:{name:"/m/02s195",id:86,displayName:"vase"},87:{name:"/m/01lsmm",id:87,displayName:"scissors"},88:{name:"/m/0kmg4",id:88,displayName:"teddy bear"},89:{name:"/m/03wvsk",id:89,displayName:"hair drier"},90:{name:"/m/012xff",id:90,displayName:"toothbrush"}},c=function(){function e(t,n){o(this,e),this.modelPath=n||"https://storage.googleapis.com/tfjs-models/savedmodel/".concat(this.getPrefix(t),"/model.json")}return s(e,[{key:"getPrefix",value:function(e){return"lite_mobilenet_v2"===e?"ssd".concat(e):"ssd_".concat(e)}},{key:"load",value:function(){var e=i(a().mark((function e(){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadGraphModel(this.modelPath);case 2:return this.model=e.sent,r=n.zeros([1,300,300,3],"int32"),e.next=6,this.model.executeAsync(r);case 6:return i=e.sent,e.next=9,Promise.all(i.map((function(e){return e.data()})));case 9:i.map((function(e){return e.dispose()})),r.dispose();case 11:case"end":return e.stop()}}),e,this)})));function r(){return e.apply(this,arguments)}return r}()},{key:"infer",value:function(){var e=i(a().mark((function e(t,i,o){var s,u,c,l,d,f,p,h,m,v,g,y,b;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.tidy((function(){return t instanceof n.Tensor||(t=n.browser.fromPixels(t)),n.expandDims(t)})),u=s.shape[1],c=s.shape[2],e.next=5,this.model.executeAsync(s);case 5:return l=e.sent,d=l[0].dataSync(),f=l[1].dataSync(),s.dispose(),n.dispose(l),p=this.calculateMaxScores(d,l[0].shape[1],l[0].shape[2]),h=r(p,2),m=h[0],v=h[1],g=n.getBackend(),"webgl"===n.getBackend()&&n.setBackend("cpu"),y=n.tidy((function(){var e=n.tensor2d(f,[l[1].shape[1],l[1].shape[3]]);return n.image.nonMaxSuppression(e,m,i,o,o)})),b=y.dataSync(),e.abrupt("return",(y.dispose(),g!==n.getBackend()&&n.setBackend(g),this.buildDetectedObjects(c,u,f,m,b,v)));case 13:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"buildDetectedObjects",value:function(e,t,n,r,a,i){for(var o=a.length,s=[],c=0;c<o;c++){for(var l=[],d=0;d<4;d++)l[d]=n[4*a[c]+d];var f=l[0]*t,p=l[1]*e,h=l[2]*t,m=l[3]*e;l[0]=p,l[1]=f,l[2]=m-p,l[3]=h-f,s.push({bbox:l,class:u[i[a[c]]+1].displayName,score:r[a[c]]})}return s}},{key:"calculateMaxScores",value:function(e,t,n){for(var r=[],a=[],i=0;i<t;i++){for(var o=Number.MIN_VALUE,s=-1,u=0;u<n;u++)e[i*n+u]>o&&(o=e[i*n+u],s=u);r[i]=o,a[i]=s}return[r,a]}},{key:"detect",value:function(){var e=i(a().mark((function e(t){var n,r,i=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:20,r=i.length>2&&void 0!==i[2]?i[2]:.5,e.abrupt("return",this.infer(t,n,r));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"dispose",value:function(){null!=this.model&&this.model.dispose()}}]),e}();e.ObjectDetection=c,e.load=i(a().mark((function e(){var t,r,i,o,s=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:{},null!=n){e.next=3;break}throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this model.");case 3:if(r=t.base||"lite_mobilenet_v2",i=t.modelUrl,-1!==["mobilenet_v1","mobilenet_v2","lite_mobilenet_v2"].indexOf(r)){e.next=6;break}throw new Error("ObjectDetection constructed with invalid base model ".concat(r,". Valid names are 'mobilenet_v1', 'mobilenet_v2' and 'lite_mobilenet_v2'."));case 6:return o=new c(r,i),e.next=9,o.load();case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),e.version="2.2.2",Object.defineProperty(e,"__esModule",{value:!0})}(t,n(2652),n(7105))},3193:function(e,t,n){"use strict";n.d(t,{H:function(){return a}});var r=n(7105);function a(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&r.util.assert("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors in the CPU backend.")}))}))}},8808:function(e,t,n){"use strict";n.r(t),n.d(t,{MathBackendCPU:function(){return v},shared:function(){return r},version_cpu:function(){return le}});var r={};n.r(r),n.d(r,{addImpl:function(){return y.EH},bincountImpl:function(){return b.W},bincountReduceImpl:function(){return b.i},ceilImpl:function(){return x.__},concatImpl:function(){return k.j},equalImpl:function(){return w.tW},expImpl:function(){return S.Ro},expm1Impl:function(){return C.OF},floorImpl:function(){return _.r6},gatherNdImpl:function(){return I.m},gatherV2Impl:function(){return T.i},greaterEqualImpl:function(){return N.HL},greaterImpl:function(){return E.o},lessEqualImpl:function(){return A.lx},lessImpl:function(){return O.rO},linSpaceImpl:function(){return R.b},logImpl:function(){return P.vX},maxImpl:function(){return D.B},maximumImpl:function(){return B.wS},minimumImpl:function(){return M.vP},multiplyImpl:function(){return F.$3},negImpl:function(){return L.uC},notEqualImpl:function(){return V.Gj},prodImpl:function(){return z.Qg},rangeImpl:function(){return Z.b},rsqrtImpl:function(){return U.zd},scatterImpl:function(){return j.N},sigmoidImpl:function(){return W.VY},simpleAbsImpl:function(){return g.bk},sliceImpl:function(){return G.rT},sparseFillEmptyRowsImpl:function(){return H.c},sparseReshapeImpl:function(){return q.U},sparseSegmentReductionImpl:function(){return X.V},sqrtImpl:function(){return K.zT},squaredDifferenceImpl:function(){return $},stridedSliceImpl:function(){return te.t},stringNGramsImpl:function(){return ne.A},stringSplitImpl:function(){return re.Q},stringToHashBucketFastImpl:function(){return ae.h},subImpl:function(){return ie.VY},tileImpl:function(){return oe.R},topKImpl:function(){return se.W},transposeImpl:function(){return ue.H},uniqueImpl:function(){return ce.S}});var a=n(7105),i=n(4165),o=n(5861),s=n(5671),u=n(3144),c=n(7326),l=n(1752),d=n(1120),f=n(136),p=n(9388),h=n(3193),m=a.kernel_impls.whereImpl,v=function(e){(0,f.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,s.Z)(this,n),(e=t.call(this)).blockSize=48,e.firstUse=!0,e.data=new a.DataStorage((0,c.Z)(e),(0,a.engine)()),e}return(0,u.Z)(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"write",value:function(e,t,n){this.firstUse&&(this.firstUse=!1,(0,a.env)().get("IS_NODE")&&a.backend_util.warn("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));var r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&a.util.isString(n[0])){var i=n.map((function(e){return a.util.encodeString(e)}));r=this.write(i,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}},{key:"refCount",value:function(e){return this.data.has(e)?this.data.get(e).refCount:0}},{key:"incRef",value:function(e){this.data.get(e).refCount++}},{key:"decRef",value:function(e){this.data.has(e)&&this.data.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}},{key:"numDataIds",value:function(){return this.data.numDataIds()}},{key:"read",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readSync",value:function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensorInfos;if("complex64"===n){var i=this.readSync(r.real.dataId),o=this.readSync(r.imag.dataId);return a.backend_util.mergeRealAndImagArrays(i,o)}return this.data.get(e).values}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId);if("string"===e.dtype)try{var n=t.map((function(e){return a.util.decodeString(e)}));return(0,a.buffer)(e.shape,e.dtype,n)}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return(0,a.buffer)(e.shape,e.dtype,t)}},{key:"makeOutput",value:function(e,t,n){return(0,a.engine)().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,e),this)}},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;var n=this.data.get(e),r=n.complexTensorInfos;null!=r&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"time",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.util.now(),t(),r=a.util.now()-n,e.abrupt("return",{kernelMs:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"memory",value:function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}},{key:"where",value:function(e){(0,h.H)([e],"where");var t=this.readSync(e.dataId);return m(e.shape,t)}},{key:"dispose",value:function(){}},{key:"floatPrecision",value:function(){return 32}},{key:"epsilon",value:function(){return(0,l.Z)((0,d.Z)(n.prototype),"epsilon",this).call(this)}}]),n}(a.KernelBackend);v.nextDataId=0;var g=n(6220),y=n(5589),b=n(3737),x=n(4351),k=n(6563),w=n(8116),S=n(6880),C=n(1354),_=n(7224),I=n(5648),T=n(2666),E=n(9075),N=n(6985),O=n(9813),A=n(8734),R=n(1491),P=n(8298),D=n(4771),B=n(9518),M=n(8094),F=n(8244),L=n(4569),V=n(1566),z=n(9120),Z=n(6284),U=n(8105),j=n(8567),W=n(294),G=n(2126),H=n(8337),q=n(3634),X=n(5440),K=n(6126),Y=n(9341),Q=n(9501),$=(0,Y.b)((function(e,t){var n=e-t;return n*n})),J=(0,Q.j)(a.SquaredDifference,$),ee={kernelName:a.SquaredDifference,backendName:"cpu",kernelFunc:J},te=n(7497),ne=n(8294),re=n(998),ae=n(1489),ie=n(1802),oe=n(7129),se=n(9516),ue=n(1103),ce=n(4242),le="3.19.0";(0,a.registerBackend)("cpu",(function(){return new v}),1);var de=n(1844),fe=(0,de.A)(a.Elu,(function(e){return e>=0?e:Math.exp(e)-1})),pe={kernelName:a.Elu,backendName:"cpu",kernelFunc:fe},he=n(9090);function me(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.alpha;(0,h.H)([i],"leakyRelu");for(var s=a.util.sizeFromShape(i.shape),u=n.data.get(i.dataId).values,c=a.util.getTypedArrayFromDType("float32",s),l=0;l<u.length;l++)c[l]=u[l]<0?o*u[l]:u[l];return n.makeTensorInfo(i.shape,"float32",c)}var ve={kernelName:a.LeakyRelu,backendName:"cpu",kernelFunc:me},ge=n(9439),ye=(0,Y.b)((function(e,t){return e<0?t*e:e}));function be(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha;(0,h.H)([r,a],"prelu");var i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=ye(r.shape,a.shape,i,o,"float32"),u=(0,ge.Z)(s,2),c=u[0],l=u[1];return n.makeTensorInfo(l,"float32",c)}var xe={kernelName:a.Prelu,backendName:"cpu",kernelFunc:be},ke=(0,de.A)(a.Relu,(function(e){return Math.max(0,e)})),we={kernelName:a.Relu,backendName:"cpu",kernelFunc:ke},Se=(0,de.A)(a.Relu6,(function(e){return Math.min(Math.max(0,e),6)})),Ce={kernelName:a.Relu6,backendName:"cpu",kernelFunc:Se};function _e(e,t,n,r,a){if("linear"===n)return(0,he.y)({inputs:{x:t},backend:e});if("relu"===n)return ke({inputs:{x:t},backend:e});if("elu"===n)return fe({inputs:{x:t},backend:e});if("relu6"===n)return Se({inputs:{x:t},backend:e});if("prelu"===n)return be({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return me({inputs:{x:t},backend:e,attrs:{alpha:a}});if("sigmoid"===n)return(0,W.XD)({inputs:{x:t},backend:e});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}function Ie(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.shape,s=a.util.sizeFromShape(i.shape),u=a.util.inferFromImplicitShape(o,s),c=a.util.sizeFromShape(u);a.util.assert(s===c,(function(){return"The new shape (".concat(u,") has ").concat(c," elements and the old ")+"shape (".concat(i.shape,") has ").concat(s," elements. The new shape and old ")+"shape must have the same number of elements."})),n.incRef(i.dataId);var l=n.data.get(i.dataId);if(null!=l.complexTensorInfos){var d=l.complexTensorInfos.real,f=l.complexTensorInfos.imag;d.shape=u,f.shape=u}return{dataId:i.dataId,shape:u,dtype:i.dtype}}var Te={kernelName:a.Reshape,backendName:"cpu",kernelFunc:Ie};function Ee(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.a,o=t.b,s=r.transposeA,u=r.transposeB;(0,h.H)([i,o],"matMul");var c=i.shape.length,l=o.shape.length,d=s?i.shape[c-2]:i.shape[c-1],f=u?o.shape[l-1]:o.shape[l-2],p=s?i.shape[c-1]:i.shape[c-2],m=u?o.shape[l-2]:o.shape[l-1],v=i.shape.slice(0,-2),g=o.shape.slice(0,-2),y=a.util.sizeFromShape(v),b=a.util.sizeFromShape(g),x=a.broadcast_util.assertAndGetBroadcastShape(i.shape.slice(0,-2),o.shape.slice(0,-2)).concat([p,m]);a.util.assert(d===f,(function(){return"Error in matMul: inner shapes (".concat(d,") and (")+"".concat(f,") of Tensors with shapes ").concat(i.shape," and ")+"".concat(o.shape," and transposeA=").concat(s)+" and transposeB=".concat(u," must match.")}));for(var k=u?[b,m,f]:[b,f,m],w=Ie({inputs:{x:i},backend:n,attrs:{shape:s?[y,d,p]:[y,p,d]}}),S=Ie({inputs:{x:o},backend:n,attrs:{shape:k}}),C=s?w.shape[1]:w.shape[2],_=s?w.shape[2]:w.shape[1],I=u?S.shape[1]:S.shape[2],T=Math.max(y,b),E=n.data.get(w.dataId).values,N=n.data.get(S.dataId).values,O=a.util.computeStrides(w.shape),A=a.util.computeStrides(S.shape),R=s?[O[0],1,O[1]]:[O[0],O[1],1],P=(0,ge.Z)(R,3),D=P[0],B=P[1],M=P[2],F=u?[1,A[1],A[0]]:[A[1],1,A[0]],L=(0,ge.Z)(F,3),V=L[0],z=L[1],Z=L[2],U=_*I,j=(0,a.buffer)([T,_,I],w.dtype),W=j.values,G=n.blockSize,H=0;H<T;H++)for(var q=0;q<_;q+=G)for(var X=0;X<I;X+=G)for(var K=0;K<C;K+=G)for(var Y=Math.min(q+G,_),Q=Math.min(X+G,I),$=Math.min(K+G,C),J=q;J<Y;J++)for(var ee=X;ee<Q;ee++){for(var te=0,ne=K;ne<$;ne++){var re=Math.min(H,y-1)*D,ae=Math.min(H,b-1)*Z;te+=E[re+J*B+ne*M]*N[ne*V+ee*z+ae]}W[H*U+(J*I+ee)]+=te}return n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(S),n.makeTensorInfo(x,j.dtype,j.values)}var Ne={kernelName:a.BatchMatMul,backendName:"cpu",kernelFunc:Ee};var Oe={kernelName:a._FusedMatMul,backendName:"cpu",kernelFunc:function(e){var t,n,r,a=e.inputs,i=e.backend,o=e.attrs,s=a.a,u=a.b,c=a.bias,l=a.preluActivationWeights,d=o.transposeA,f=o.transposeB,p=o.activation,h=o.leakyreluAlpha,m=[];t=Ee({inputs:{a:s,b:u},attrs:{transposeA:d,transposeB:f},backend:i}),c&&(n=(0,y.IH)({inputs:{a:t,b:c},backend:i}),m.push(t),t=n),p&&(r=_e(i,t,p,l,h),m.push(t),t=r);for(var v=0,g=m;v<g.length;v++){var b=g[v];i.disposeIntermediateTensorInfo(b)}return t}},Ae=(0,de.A)(a.Acos,(function(e){return Math.acos(e)})),Re={kernelName:a.Acos,backendName:"cpu",kernelFunc:Ae},Pe=(0,de.A)(a.Acosh,(function(e){return Math.acosh(e)})),De={kernelName:a.Acosh,backendName:"cpu",kernelFunc:Pe};var Be={kernelName:a.AddN,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t;(0,h.H)(t,"addN");for(var i=r.map((function(e){return n.data.get(e.dataId).values})),o=(0,a.buffer)(r[0].shape,r[0].dtype),s=o.values,u=0;u<r.length;u++)for(var c=i[u],l=0;l<s.length;l++)s[l]+=c[l];return n.makeTensorInfo(o.shape,o.dtype,o.values)}},Me=n(5257);var Fe={kernelName:a.All,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.axis,s=r.keepDims;(0,h.H)(i,"all");var u=a.util.parseAxisParam(o,i.shape),c=u,l=a.backend_util.getAxesPermutation(c,i.shape.length),d=i;null!=l&&(d=(0,Me.p)({inputs:{x:i},backend:n,attrs:{perm:l}}),c=a.backend_util.getInnerMostAxes(c.length,i.shape.length)),a.backend_util.assertAxesAreInnerMostDims("all",c,d.shape.length);for(var f=a.backend_util.computeOutAndReduceShapes(d.shape,c),p=(0,ge.Z)(f,2),m=p[0],v=p[1],g=a.util.sizeFromShape(v),y=a.util.makeZerosTypedArray(a.util.sizeFromShape(m),d.dtype),b=n.data.get(d.dataId).values,x=0;x<y.length;++x){for(var k=x*g,w=b[k],S=0;S<g;++S){var C=b[k+S];w=w&&C}y[x]=w}null!=l&&n.disposeIntermediateTensorInfo(d);var _=n.makeTensorInfo(m,d.dtype,y);if(s){var I=Ie({inputs:{x:_},backend:n,attrs:{shape:a.backend_util.expandShapeToKeepDim(m,u)}});return n.disposeIntermediateTensorInfo(_),I}return _}};var Le={kernelName:a.Any,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.axis,s=r.keepDims;(0,h.H)(i,"any");var u=a.util.parseAxisParam(o,i.shape),c=u,l=a.backend_util.getAxesPermutation(c,i.shape.length),d=i;null!=l&&(d=(0,Me.p)({inputs:{x:i},backend:n,attrs:{perm:l}}),c=a.backend_util.getInnerMostAxes(c.length,i.shape.length)),a.backend_util.assertAxesAreInnerMostDims("any",c,d.shape.length);for(var f=a.backend_util.computeOutAndReduceShapes(d.shape,c),p=(0,ge.Z)(f,2),m=p[0],v=p[1],g=a.util.sizeFromShape(v),y=a.util.makeZerosTypedArray(a.util.sizeFromShape(m),d.dtype),b=n.data.get(d.dataId).values,x=0;x<y.length;++x){for(var k=x*g,w=b[k],S=0;S<g;++S){var C=b[k+S];w=w||C}y[x]=w}null!=l&&n.disposeIntermediateTensorInfo(d);var _=n.makeTensorInfo(m,d.dtype,y);if(s){var I=Ie({inputs:{x:_},backend:n,attrs:{shape:a.backend_util.expandShapeToKeepDim(m,u)}});return n.disposeIntermediateTensorInfo(_),I}return _}};var Ve={kernelName:a.ArgMax,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.axis;(0,h.H)(i,"argMax");var s=a.util.parseAxisParam(o,i.shape),u=a.backend_util.getAxesPermutation(s,i.shape.length),c=i,l=[];null!=u&&(c=(0,Me.p)({inputs:{x:i},backend:n,attrs:{perm:u}}),l.push(c),s=a.backend_util.getInnerMostAxes(s.length,c.shape.length)),s=[s[0]],a.backend_util.assertAxesAreInnerMostDims("argMax",s,c.shape.length);for(var d=a.backend_util.computeOutAndReduceShapes(c.shape,s),f=(0,ge.Z)(d,2),p=f[0],m=f[1],v=a.util.sizeFromShape(p),g=a.util.makeZerosTypedArray(v,"int32"),y=a.util.sizeFromShape(m),b=n.data.get(c.dataId).values,x=0;x<g.length;++x){for(var k=x*y,w=b[k],S=0,C=0;C<y;++C){var _=b[k+C];_>w&&(w=_,S=C)}g[x]=S}return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(p,"int32",g)}};var ze={kernelName:a.ArgMin,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.axis;(0,h.H)(i,"argMin");var s=a.util.parseAxisParam(o,i.shape),u=a.backend_util.getAxesPermutation(s,i.shape.length),c=i,l=[];null!=u&&(c=(0,Me.p)({inputs:{x:i},backend:n,attrs:{perm:u}}),l.push(c),s=a.backend_util.getInnerMostAxes(s.length,c.shape.length)),s=[s[0]],a.backend_util.assertAxesAreInnerMostDims("argMin",s,c.shape.length);for(var d=a.backend_util.computeOutAndReduceShapes(c.shape,s),f=(0,ge.Z)(d,2),p=f[0],m=f[1],v=a.util.sizeFromShape(p),g=a.util.makeZerosTypedArray(v,"int32"),y=a.util.sizeFromShape(m),b=n.data.get(c.dataId).values,x=0;x<g.length;++x){for(var k=x*y,w=b[k],S=0,C=0;C<y;++C){var _=b[k+C];_<w&&(w=_,S=C)}g[x]=S}return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(p,"int32",g)}},Ze=(0,de.A)(a.Asin,(function(e){return Math.asin(e)})),Ue={kernelName:a.Asin,backendName:"cpu",kernelFunc:Ze},je=(0,de.A)(a.Asinh,(function(e){return Math.asinh(e)})),We={kernelName:a.Asinh,backendName:"cpu",kernelFunc:je},Ge=(0,de.A)(a.Atan,(function(e){return Math.atan(e)})),He={kernelName:a.Atan,backendName:"cpu",kernelFunc:Ge},qe=(0,Y.b)((function(e,t){return Math.atan2(e,t)})),Xe=(0,Q.j)(a.Atan2,qe),Ke={kernelName:a.Atan2,backendName:"cpu",kernelFunc:Xe},Ye=(0,de.A)(a.Atanh,(function(e){return Math.atanh(e)})),Qe={kernelName:a.Atanh,backendName:"cpu",kernelFunc:Ye};function $e(e,t,n,r,i,o){for(var s=i.strideHeight,u=i.strideWidth,c=i.dilationHeight,l=i.dilationWidth,d=i.effectiveFilterHeight,f=i.effectiveFilterWidth,p=i.padInfo.top,h=i.padInfo.left,m="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=(0,a.buffer)(i.outShape,n),g=v.values,y=i.outShape[1]*i.outShape[2]*i.outShape[3],b=i.outShape[2]*i.outShape[3],x=i.outShape[3],k=0;k<i.batchSize;++k)for(var w=k*y,S=k*r[0],C=0;C<i.inChannels;++C)for(var _=0;_<i.outHeight;++_)for(var I=_*s-p,T=Math.max(0,I),E=Math.min(i.inHeight,d+I),N=w+_*b,O=0;O<i.outWidth;++O){for(var A=O*u-h,R=Math.max(0,A),P=Math.min(i.inWidth,f+A),D=m,B=0,M=0,F=T;F<E;F+=c){for(var L=S+F*r[1],V=R;V<P;V+=l){var z=e[L+V*r[2]+C];"max"===o&&z>D?D=z:"avg"===o&&(B+=z,M++)}if(isNaN(D))break}g[N+O*x+C]="avg"===o?B/M:D}return v}function Je(e,t,n,r){for(var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=(0,a.buffer)(r.outShape,"int32"),u=r.strideHeight,c=r.strideWidth,l=r.dilationHeight,d=r.dilationWidth,f=r.effectiveFilterHeight,p=r.effectiveFilterWidth,h=r.padInfo.top,m=r.padInfo.left,v=(0,a.buffer)(t,n,e),g=0;g<r.batchSize;++g)for(var y=0;y<r.inChannels;++y)for(var b=0;b<r.outHeight;++b){for(var x=b*u-h,k=x;k<0;)k+=l;for(var w=Math.min(r.inHeight,f+x),S=0;S<r.outWidth;++S){for(var C=S*c-m,_=C;_<0;)_+=d;for(var I=Math.min(r.inWidth,p+C),T=Number.NEGATIVE_INFINITY,E=-1,N=k;N<w;N+=l)for(var O=N-x,A=_;A<I;A+=d){var R=A-C,P=v.get(g,N,A,y);P>T&&(T=P,E=i?o?((g*r.inHeight+N)*r.inWidth+A)*r.inChannels+y:(N*r.inWidth+A)*r.inChannels+y:O*p+R)}s.set(E,g,b,S,y)}}return s}function et(e,t,n,r,i,o){for(var s=i.strideDepth,u=i.strideHeight,c=i.strideWidth,l=i.dilationDepth,d=i.dilationHeight,f=i.dilationWidth,p=i.effectiveFilterDepth,h=i.effectiveFilterHeight,m=i.effectiveFilterWidth,v=i.padInfo.front,g=i.padInfo.top,y=i.padInfo.left,b="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,x=(0,a.buffer)(i.outShape,n),k=x.values,w=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],S=i.outShape[2]*i.outShape[3]*i.outShape[4],C=i.outShape[3]*i.outShape[4],_=i.outShape[4],I=0;I<i.batchSize;++I)for(var T=I*w,E=I*r[0],N=0;N<i.inChannels;++N)for(var O=0;O<i.outDepth;++O){for(var A=O*s-v,R=A;R<0;)R+=l;for(var P=Math.min(i.inDepth,p+A),D=T+O*S,B=0;B<i.outHeight;++B){for(var M=B*u-g,F=M;F<0;)F+=d;for(var L=Math.min(i.inHeight,h+M),V=D+B*C,z=0;z<i.outWidth;++z){for(var Z=z*c-y,U=Z;U<0;)U+=f;for(var j=Math.min(i.inWidth,m+Z),W=V+z*_,G=b,H=0,q=0,X=R;X<P;X+=l){for(var K=E+X*r[1],Y=F;Y<L;Y+=d){for(var Q=K+Y*r[2],$=U;$<j;$+=f){var J=e[Q+$*r[3]+N];if("max"===o&&J>G?G=J:"avg"===o&&(H+=J,q++),isNaN(G))break}if(isNaN(G))break}if(isNaN(G))break}k[W+N]="avg"===o?H/q:G}}}return x}var tt={kernelName:a.AvgPool,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x;(0,h.H)(i,"avgPool");var o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode;a.util.assert(a.backend_util.eitherStridesOrDilationsAreOne(s,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(s," and dilations '").concat(1,"'")}));var l,d=a.backend_util.computePool2DInfo(i.shape,o,s,1,u,c);if(1===d.filterWidth&&1===d.filterHeight&&a.util.arraysEqual(d.inShape,d.outShape))l=(0,he.y)({inputs:{x:i},backend:n});else{var f=n.data.get(i.dataId).values,p=a.util.computeStrides(i.shape),m=$e(f,i.shape,i.dtype,p,d,"avg");l=n.makeTensorInfo(d.outShape,i.dtype,m.values)}return l}};var nt={kernelName:a.AvgPool3D,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode,l=r.dataFormat;(0,h.H)(i,"avgPool3d");var d=a.backend_util.computePool3DInfo(i.shape,o,s,1,u,c,l),f=et(n.data.get(i.dataId).values,i.shape,i.dtype,a.util.computeStrides(i.shape),d,"avg");return n.makeTensorInfo(f.shape,"float32",f.values)}};var rt={kernelName:a.AvgPool3DGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.dy,o=t.input,s=r.filterSize,u=r.strides,c=r.pad,l=r.dimRoundingMode;(0,h.H)([i,o],"avgPool3DGrad");for(var d=a.backend_util.computePool3DInfo(o.shape,s,u,1,c,l),f=d.strideDepth,p=d.strideHeight,m=d.strideWidth,v=d.filterDepth,g=d.filterHeight,y=d.filterWidth,b=d.dilationDepth,x=d.dilationHeight,k=d.dilationWidth,w=d.effectiveFilterDepth,S=d.effectiveFilterHeight,C=d.effectiveFilterWidth,_=w-1-d.padInfo.front,I=C-1-d.padInfo.left,T=S-1-d.padInfo.top,E=(0,a.buffer)(o.shape,"float32"),N=1/(v*g*y),O=n.bufferSync(i),A=0;A<d.batchSize;++A)for(var R=0;R<d.inChannels;++R)for(var P=0;P<d.inDepth;++P)for(var D=0;D<d.inHeight;++D)for(var B=0;B<d.inWidth;++B){for(var M=P-_,F=D-T,L=B-I,V=0,z=0;z<w;z+=b){var Z=(M+z)/f;if(!(Z<0||Z>=d.outDepth||Math.floor(Z)!==Z))for(var U=0;U<S;U+=x){var j=(F+U)/p;if(!(j<0||j>=d.outHeight||Math.floor(j)!==j))for(var W=0;W<C;W+=k){var G=(L+W)/m;if(!(G<0||G>=d.outWidth||Math.floor(G)!==G))V+=O.get(A,Z,j,G,R)}}}E.set(V*N,A,P,D,B,R)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}};var at={kernelName:a.AvgPoolGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.dy,o=t.input,s=o;(0,h.H)([i,o],"avgPoolGrad");for(var u=r.filterSize,c=r.strides,l=r.pad,d=a.backend_util.computePool2DInfo(s.shape,u,c,1,l),f=d.strideHeight,p=d.strideWidth,m=d.filterHeight,v=d.filterWidth,g=d.dilationHeight,y=d.dilationWidth,b=d.effectiveFilterHeight,x=d.effectiveFilterWidth,k=x-1-d.padInfo.left,w=b-1-d.padInfo.top,S=(0,a.buffer)(s.shape,"float32"),C=1/(m*v),_=n.data.get(i.dataId).values,I=(0,a.buffer)(i.shape,"float32",_),T=0;T<d.batchSize;++T)for(var E=0;E<d.inChannels;++E)for(var N=0;N<d.inHeight;++N)for(var O=0;O<d.inWidth;++O){for(var A=N-w,R=O-k,P=0,D=0;D<b;D+=g){var B=(A+D)/f;if(!(B<0||B>=d.outHeight||Math.floor(B)!==B))for(var M=0;M<x;M+=y){var F=(R+M)/p;if(!(F<0||F>=d.outWidth||Math.floor(F)!==F))P+=I.get(T,B,F,E)}}S.set(P*C,T,N,O,E)}return n.makeTensorInfo(S.shape,S.dtype,S.values)}};var it={kernelName:a.FusedBatchNorm,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.scale,s=t.offset,u=t.mean,c=t.variance;a.util.assert(u.shape.length===c.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),a.util.assert(null==s||u.shape.length===s.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),a.util.assert(null==o||u.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),(0,h.H)([i,u,c,o,s],"batchNorm");var l=r.varianceEpsilon;null==l&&(l=.001);for(var d=n.data.get(i.dataId).values,f=n.data.get(u.dataId).values,p=n.data.get(c.dataId).values,m=o?n.data.get(o.dataId).values:new Float32Array([1]),v=s?n.data.get(s.dataId).values:new Float32Array([0]),g=new Float32Array(d.length),y=v.length,b=m.length,x=p.length,k=f.length,w=0,S=0,C=0,_=0,I=0;I<d.length;++I)g[I]=v[w++]+(d[I]-f[S++])*m[C++]/Math.sqrt(p[_++]+l),w>=y&&(w=0),S>=k&&(S=0),C>=b&&(C=0),_>=x&&(_=0);return n.makeTensorInfo(i.shape,i.dtype,g)}};var ot={kernelName:a.BatchToSpaceND,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.blockShape,s=r.crops;(0,h.H)([i],"batchToSpaceND");var u=o.reduce((function(e,t){return e*t})),c=a.backend_util.getReshaped(i.shape,o,u),l=a.backend_util.getPermuted(c.length,o.length),d=a.backend_util.getReshapedPermuted(i.shape,o,u),f=a.backend_util.getSliceBeginCoords(s,o.length),p=a.backend_util.getSliceSize(d,s,o.length),m=Ie({inputs:{x:i},backend:n,attrs:{shape:c}}),v=(0,Me.p)({inputs:{x:m},backend:n,attrs:{perm:l}}),g=Ie({inputs:{x:v},backend:n,attrs:{shape:d}}),y=(0,G.tP)({inputs:{x:g},backend:n,attrs:{begin:f,size:p}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),y}};var st={kernelName:a.Bincount,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,c=(0,b.W)(s,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}};var ut={kernelName:a.BroadcastArgs,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,i=t.s1,o=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,u=a.backend_util.assertAndGetBroadcastShape(Array.from(o),Array.from(s));return n.makeTensorInfo([u.length],"int32",Int32Array.from(u))}},ct=n(570),lt=(0,de.A)(a.ClipByValue,(function(e,t){var n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e})),dt={kernelName:a.ClipByValue,backendName:"cpu",kernelFunc:lt},ft=n(6545),pt={kernelName:a.ComplexAbs,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs.x,n=e.backend,r=new Float32Array(a.util.sizeFromShape(t.shape)),i=n.data.get(t.dataId),o=i.complexTensorInfos.real,s=i.complexTensorInfos.imag,u=n.data.get(o.dataId).values,c=n.data.get(s.dataId).values,l=0;l<u.length;l++){var d=u[l],f=c[l];r[l]=Math.hypot(d,f)}return n.makeOutput(r,t.shape,"float32")}};function ht(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var mt={kernelName:a.Imag,backendName:"cpu",kernelFunc:ht},vt=n(6241);function gt(e){var t=e.inputs,n=e.backend,r=e.attrs.axis,i=a.util.parseAxisParam(r,t[0].shape)[0],o=a.backend_util.computeOutShape(t.map((function(e){return e.shape})),i);if(0===a.util.sizeFromShape(o))return n.makeTensorInfo(o,t[0].dtype,[]);var s=t.filter((function(e){return a.util.sizeFromShape(e.shape)>0}));if(1===s.length)return(0,he.y)({inputs:{x:s[0]},backend:n});var u=s.map((function(e){return e.shape}));if(a.backend_util.assertParamsConsistent(u,i),"complex64"===s[0].dtype){var c=s.map((function(e){return(0,vt.k)({inputs:{input:e},backend:n})})),l=s.map((function(e){return ht({inputs:{input:e},backend:n})})),d=gt({inputs:c,backend:n,attrs:{axis:i}}),f=gt({inputs:l,backend:n,attrs:{axis:i}}),p=(0,ft.P)({inputs:{real:d,imag:f},backend:n});return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),p}var h=s.map((function(e){var t=a.util.sizeFromShape(e.shape.slice(i));return Ie({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),m=h.map((function(e){return{vals:n.data.get(e.dataId).values,shape:e.shape}}));o=a.backend_util.computeOutShape(h.map((function(e){return e.shape})),1);var v=1===h[0].shape[0],g=(0,k.j)(m,o,t[0].dtype,v),y=a.backend_util.computeOutShape(s.map((function(e){return e.shape})),i),b=n.makeTensorInfo(y,t[0].dtype,g);return h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),b}var yt={kernelName:a.Concat,backendName:"cpu",kernelFunc:gt};function bt(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.filter,s=r.strides,u=r.pad,c=r.dataFormat,l=r.dilations,d=r.dimRoundingMode;(0,h.H)([i,o],"conv2d");for(var f=a.backend_util.convertConv2DDataFormat(c),p=a.backend_util.computeConv2DInfo(i.shape,o.shape,s,l,u,d,!1,f),m=p.filterHeight,v=p.filterWidth,g=p.dilationHeight,y=p.dilationWidth,b=p.padInfo.left,x=p.padInfo.top,k="channelsLast"===p.dataFormat,w=new a.TensorBuffer(p.outShape,i.dtype),S=a.util.computeStrides(i.shape),C=a.util.computeStrides(o.shape),_=S[0],I=k?S[1]:S[2],T=k?S[2]:1,E=k?1:S[1],N=w.strides[0],O=k?w.strides[1]:w.strides[2],A=k?w.strides[2]:1,R=k?1:w.strides[1],P=n.data.get(i.dataId).values,D=n.data.get(o.dataId).values,B=w.values,M=0;M<p.batchSize;++M)for(var F=M*_,L=M*N,V=0;V<p.outHeight;++V)for(var z=L+V*O,Z=V*p.strideHeight-x,U=0;U<m;++U){var j=Z+U*g;if(!(j<0||j>=p.inHeight))for(var W=U*C[0],G=F+j*I,H=0;H<p.outWidth;++H)for(var q=z+H*A,X=H*p.strideWidth-b,K=0;K<v;++K){var Y=X+K*y;if(!(Y<0||Y>=p.inWidth))for(var Q=G+Y*T,$=W+K*C[1],J=0;J<p.inChannels;++J){for(var ee=P[Q+J*E],te=0;te<p.outChannels;++te)B[q+te*R]+=ee*D[$+te];$+=p.outChannels}}}return n.makeTensorInfo(w.shape,w.dtype,B)}var xt={kernelName:a.Conv2D,backendName:"cpu",kernelFunc:bt};var kt={kernelName:a.Conv2DBackpropFilter,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.dy,s=r.strides,u=r.pad,c=r.dataFormat,l=r.dimRoundingMode,d=r.filterShape;(0,h.H)([i,o],"conv2dBackpropFilter");for(var f=a.backend_util.convertConv2DDataFormat(c),p=a.backend_util.computeConv2DInfo(i.shape,d,s,1,u,l,!1,f),m=p.strideHeight,v=p.strideWidth,g=p.filterHeight,y=p.filterWidth,b="channelsLast"===p.dataFormat,x=new a.TensorBuffer(p.filterShape,"float32"),k=p.padInfo.left,w=p.padInfo.top,S=n.data.get(i.dataId).values,C=n.data.get(o.dataId).values,_=new a.TensorBuffer(i.shape,i.dtype,S),I=new a.TensorBuffer(o.shape,o.dtype,C),T=0;T<g;++T)for(var E=Math.max(0,Math.ceil((w-T)/m)),N=Math.min(p.outHeight,(p.inHeight+w-T)/m),O=0;O<y;++O)for(var A=Math.max(0,Math.ceil((k-O)/v)),R=Math.min(p.outWidth,(p.inWidth+k-O)/v),P=0;P<p.inChannels;++P)for(var D=0;D<p.outChannels;++D){for(var B=0,M=0;M<p.batchSize;++M)for(var F=E;F<N;++F)for(var L=T+F*m-w,V=A;V<R;++V){var z=O+V*v-k;B+=b?_.get(M,L,z,P)*I.get(M,F,V,D):_.get(M,P,L,z)*I.get(M,D,F,V)}x.set(B,T,O,P,D)}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};var wt={kernelName:a.Conv2DBackpropInput,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.dy,o=t.filter,s=r.inputShape,u=r.strides,c=r.pad,l=r.dataFormat,d=r.dimRoundingMode;(0,h.H)([i,o],"conv2dBackpropInput");var f=a.util.computeStrides(o.shape),p=a.util.computeStrides(i.shape),m=a.backend_util.convertConv2DDataFormat(l),v=a.backend_util.computeConv2DInfo(s,o.shape,u,1,c,d,!1,m),g=new a.TensorBuffer(v.inShape,"float32"),y=g.values,b=n.data.get(i.dataId).values,x=n.data.get(o.dataId).values,k=(0,ge.Z)(f,3),w=k[0],S=k[1],C=k[2],_=v.batchSize,I=v.filterHeight,T=v.filterWidth,E=v.inChannels,N=v.inHeight,O=v.inWidth,A=v.outChannels,R=v.outHeight,P=v.outWidth,D=v.strideHeight,B=v.strideWidth;m=v.dataFormat;for(var M=I-1-v.padInfo.top,F=T-1-v.padInfo.left,L="channelsLast"===m,V=g.strides[0],z=L?g.strides[1]:g.strides[2],Z=L?g.strides[2]:1,U=L?1:g.strides[1],j=p[0],W=L?p[1]:p[2],G=L?p[2]:1,H=L?1:p[1],q=0;q<_;++q)for(var X=0;X<E;++X)for(var K=0;K<N;++K)for(var Y=K-M,Q=Math.max(0,Math.ceil(Y/D)),$=Math.min(R,(I+Y)/D),J=0;J<O;++J){for(var ee=J-F,te=Math.max(0,Math.ceil(ee/B)),ne=Math.min(P,(T+ee)/B),re=0,ae=Q;ae<$;++ae)for(var ie=ae*D-Y,oe=te;oe<ne;++oe)for(var se=j*q+W*ae+G*oe,ue=w*(I-1-ie)+S*(T-1-(oe*B-ee))+C*X,ce=0;ce<A;++ce){re+=b[se+H*ce]*x[ue+ce]}y[V*q+z*K+Z*J+U*X]=re}return n.makeTensorInfo(g.shape,g.dtype,g.values)}};var St={kernelName:a.Conv3D,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.filter,s=r.strides,u=r.pad,c=r.dilations;(0,h.H)([i,o],"conv3d");for(var l=a.backend_util.computeConv3DInfo(i.shape,o.shape,s,c,u),d=l.filterDepth,f=l.filterHeight,p=l.filterWidth,m=l.dilationDepth,v=l.dilationHeight,g=l.dilationWidth,y=l.padInfo,b=y.front,x=y.left,k=y.top,w=new a.TensorBuffer(l.outShape,i.dtype),S=n.data.get(i.dataId).values,C=n.data.get(o.dataId).values,_=w.values,I=a.util.computeStrides(i.shape),T=a.util.computeStrides(o.shape),E=0;E<l.batchSize;++E)for(var N=E*I[0],O=E*w.strides[0],A=0;A<l.outDepth;++A)for(var R=O+A*w.strides[1],P=A*l.strideDepth-b,D=0;D<d;++D){var B=P+D*m;if(!(B<0||B>=l.inDepth))for(var M=D*T[0],F=N+B*I[1],L=0;L<l.outHeight;++L)for(var V=R+L*w.strides[2],z=L*l.strideHeight-k,Z=0;Z<f;++Z){var U=z+Z*v;if(!(U<0||U>=l.inHeight))for(var j=M+Z*T[1],W=F+U*I[2],G=0;G<l.outWidth;++G)for(var H=V+G*l.outChannels,q=G*l.strideWidth-x,X=0;X<p;++X){var K=q+X*g;if(!(K<0||K>=l.inWidth))for(var Y=j+X*T[2],Q=W+K*l.inChannels,$=Y,J=0;J<l.inChannels;++J){for(var ee=S[Q+J],te=0;te<l.outChannels;++te)_[H+te]+=ee*C[$+te];$+=l.outChannels}}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};var Ct={kernelName:a.Conv3DBackpropFilterV2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.dy,s=r.strides,u=r.pad,c=r.filterShape;(0,h.H)([i,o],"conv3dBackpropFilterV2");for(var l=a.util.computeStrides(i.shape),d=a.util.computeStrides(o.shape),f=a.backend_util.computeConv3DInfo(i.shape,c,s,1,u),p=f.strideDepth,m=f.strideHeight,v=f.strideWidth,g=f.filterDepth,y=f.filterHeight,b=f.filterWidth,x=new a.TensorBuffer(f.filterShape,"float32"),k=x.values,w=(0,ge.Z)(x.strides,4),S=w[0],C=w[1],_=w[2],I=w[3],T=n.data.get(o.dataId).values,E=(0,ge.Z)(d,4),N=E[0],O=E[1],A=E[2],R=E[3],P=n.data.get(i.dataId).values,D=(0,ge.Z)(l,4),B=D[0],M=D[1],F=D[2],L=D[3],V=f.padInfo.front,z=f.padInfo.left,Z=f.padInfo.top,U=0;U<g;++U)for(var j=Math.max(0,Math.ceil((V-U)/p)),W=Math.min(f.outDepth,(f.inDepth+V-U)/p),G=U*S,H=0;H<y;++H)for(var q=Math.max(0,Math.ceil((Z-H)/m)),X=Math.min(f.outHeight,(f.inHeight+Z-H)/m),K=H*C+G,Y=0;Y<b;++Y)for(var Q=Math.max(0,Math.ceil((z-Y)/v)),$=Math.min(f.outWidth,(f.inWidth+z-Y)/v),J=Y*_+K,ee=0;ee<f.inChannels;++ee)for(var te=ee*I+J,ne=0;ne<f.outChannels;++ne){for(var re=0,ae=0;ae<f.batchSize;++ae)for(var ie=ae*B,oe=ae*N,se=j;se<W;++se)for(var ue=(U+se*p-V)*M+ie,ce=se*O+oe,le=q;le<X;++le)for(var de=(H+le*m-Z)*F+ue,fe=le*A+ce,pe=Q;pe<$;++pe){var he=pe*R+fe;re+=P[(Y+pe*v-z)*L+de+ee]*T[he+ne]}k[te+ne]=re}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};var _t={kernelName:a.Conv3DBackpropInputV2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.dy,o=t.filter,s=r.pad,u=r.strides,c=r.inputShape;(0,h.H)([i],"conv3dBackpropInputV2");for(var l=a.util.computeStrides(i.shape),d=a.util.computeStrides(o.shape),f=a.backend_util.computeConv3DInfo(c,o.shape,u,1,s),p=new a.TensorBuffer(f.inShape,"float32"),m=p.values,v=(0,ge.Z)(p.strides,4),g=v[0],y=v[1],b=v[2],x=v[3],k=n.data.get(i.dataId).values,w=(0,ge.Z)(l,4),S=w[0],C=w[1],_=w[2],I=w[3],T=n.data.get(o.dataId).values,E=(0,ge.Z)(d,4),N=E[0],O=E[1],A=E[2],R=E[3],P=f.batchSize,D=f.filterDepth,B=f.filterHeight,M=f.filterWidth,F=f.inChannels,L=f.inDepth,V=f.inHeight,z=f.inWidth,Z=f.outChannels,U=f.outDepth,j=f.outHeight,W=f.outWidth,G=f.strideDepth,H=f.strideHeight,q=f.strideWidth,X=D-1-f.padInfo.front,K=B-1-f.padInfo.top,Y=M-1-f.padInfo.left,Q=0;Q<P;++Q)for(var $=0;$<F;++$)for(var J=0;J<L;++J)for(var ee=J-X,te=Math.max(0,Math.ceil(ee/G)),ne=Math.min(U,(D+ee)/G),re=0;re<V;++re)for(var ae=re-K,ie=Math.max(0,Math.ceil(ae/H)),oe=Math.min(j,(B+ae)/H),se=0;se<z;++se){for(var ue=se-Y,ce=Math.max(0,Math.ceil(ue/q)),le=Math.min(W,(M+ue)/q),de=0,fe=te;fe<ne;++fe)for(var pe=fe*G-ee,he=ie;he<oe;++he)for(var me=he*H-ae,ve=ce;ve<le;++ve)for(var ye=S*Q+C*fe+_*he+I*ve,be=N*(D-1-pe)+O*(B-1-me)+A*(M-1-(ve*q-ue))+R*$,xe=0;xe<Z;++xe){de+=k[ye+xe]*T[be+xe]}m[g*Q+y*J+b*re+x*se+$]=de}return n.makeTensorInfo(p.shape,p.dtype,p.values)}},It=(0,de.A)(a.Cos,(function(e){return Math.cos(e)})),Tt={kernelName:a.Cos,backendName:"cpu",kernelFunc:It},Et=(0,de.A)(a.Cosh,(function(e){return Math.cosh(e)})),Nt={kernelName:a.Cosh,backendName:"cpu",kernelFunc:Et};var Ot={kernelName:a.CropAndResize,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,i=t.image,o=t.boxes,s=t.boxInd,u=r.cropSize,c=r.method,l=r.extrapolationValue,d=(0,ge.Z)(i.shape,4),f=d[0],p=d[1],h=d[2],m=d[3],v=o.shape[0],g=(0,ge.Z)(u,2),y=g[0],b=g[1],x=(0,a.buffer)([v,y,b,m],"float32"),k=n.data.get(o.dataId).values,w=n.data.get(s.dataId).values,S=n.data.get(i.dataId).values,C=a.util.computeStrides(i.shape),_=a.util.computeStrides(x.shape),I=0;I<v;I++){var T=4*I,E=k[T],N=k[T+1],O=k[T+2],A=k[T+3],R=w[I];if(!(R>=f))for(var P=y>1?(O-E)*(p-1)/(y-1):0,D=b>1?(A-N)*(h-1)/(b-1):0,B=0;B<y;B++){var M=y>1?E*(p-1)+B*P:.5*(E+O)*(p-1);if(M<0||M>p-1)for(var F=0;F<b;F++)for(var L=0;L<m;L++){var V=L+F*_[2]+B*_[1]+I*_[0];x.values[V]=l}else if("bilinear"===c)for(var z=Math.floor(M),Z=Math.ceil(M),U=M-z,j=0;j<b;j++){var W=b>1?N*(h-1)+j*D:.5*(N+A)*(h-1);if(W<0||W>h-1)for(var G=0;G<m;G++){var H=G+j*_[2]+B*_[1]+I*_[0];x.values[H]=l}else for(var q=Math.floor(W),X=Math.ceil(W),K=W-q,Y=0;Y<m;Y++){var Q=Y+q*C[2]+z*C[1]+R*C[0],$=S[Q],J=S[Q=Y+X*C[2]+z*C[1]+R*C[0]],ee=S[Q=Y+q*C[2]+Z*C[1]+R*C[0]],te=$+(J-$)*K,ne=ee+(S[Q=Y+X*C[2]+Z*C[1]+R*C[0]]-ee)*K;Q=Y+j*_[2]+B*_[1]+I*_[0],x.values[Q]=te+(ne-te)*U}}else for(var re=0;re<b;++re){var ae=b>1?N*(h-1)+re*D:.5*(N+A)*(h-1);if(ae<0||ae>h-1)for(var ie=0;ie<m;ie++){var oe=ie+re*_[2]+B*_[1]+I*_[0];x.values[oe]=l}else for(var se=Math.round(ae),ue=Math.round(M),ce=0;ce<m;ce++){var le=ce+se*C[2]+ue*C[1]+R*C[0],de=ce+re*_[2]+B*_[1]+I*_[0];x.values[de]=S[le]}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};var At={kernelName:a.Cumprod,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.axis,s=r.exclusive,u=r.reverse;(0,h.H)(i,"cumprod");var c=a.backend_util.getAxesPermutation([o],i.shape.length),l=i;null!=c&&(l=(0,Me.p)({inputs:{x:i},backend:n,attrs:{perm:c}}));var d=a.backend_util.getInnerMostAxes(1,i.shape.length)[0];if(d!==l.shape.length-1)throw new Error("backend.cumprod in CPU expects an inner-most "+"axis=".concat(l.shape.length-1," but got axis=").concat(d));for(var f=(0,a.upcastType)(l.dtype,"int32"),p=a.util.makeOnesTypedArray(a.util.sizeFromShape(l.shape),f),m=n.data.get(l.dataId).values,v=l.shape[l.shape.length-1],g=u?function(e,t){return e+v-t-1}:function(e,t){return e+t},y=0;y<m.length;y+=v)for(var b=0;b<v;b++){var x=g(y,b);if(0===b)p[x]=s?1:m[x];else{var k=g(y,b-1);p[x]=s?m[k]*p[k]:m[x]*p[k]}}var w=n.makeTensorInfo(l.shape,f,p);if(null!=c){var S=a.backend_util.getUndoAxesPermutation(c),C=(0,Me.p)({inputs:{x:w},backend:n,attrs:{perm:S}});return n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(l),C}return w}};var Rt={kernelName:a.Cumsum,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.axis,s=r.exclusive,u=r.reverse;(0,h.H)(i,"cumsum");var c=a.backend_util.getAxesPermutation([o],i.shape.length),l=i;null!=c&&(l=(0,Me.p)({inputs:{x:i},backend:n,attrs:{perm:c}}));var d=a.backend_util.getInnerMostAxes(1,i.shape.length)[0];if(d!==l.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most "+"axis=".concat(l.shape.length-1," but got axis=").concat(d));for(var f=(0,a.upcastType)(l.dtype,"int32"),p=a.util.makeZerosTypedArray(a.util.sizeFromShape(l.shape),f),m=n.data.get(l.dataId).values,v=l.shape[l.shape.length-1],g=u?function(e,t){return e+v-t-1}:function(e,t){return e+t},y=0;y<m.length;y+=v)for(var b=0;b<v;b++){var x=g(y,b);if(0===b)p[x]=s?0:m[x];else{var k=g(y,b-1);p[x]=s?m[k]+p[k]:m[x]+p[k]}}var w=n.makeTensorInfo(l.shape,f,p);if(null!=c){var S=a.backend_util.getUndoAxesPermutation(c),C=(0,Me.p)({inputs:{x:w},backend:n,attrs:{perm:S}});return n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(l),C}return w}};var Pt={kernelName:a.DenseBincount,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,l=(0,b.W)(u,c,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,l)}if(2===a.shape.length){var d=n.bufferSync(a),f=n.bufferSync(i),p=(0,b.i)(d,f,o,s);return n.makeTensorInfo(p.shape,i.dtype,p.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}};var Dt={kernelName:a.DepthToSpace,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.blockSize,s=r.dataFormat;a.util.assert("NHWC"===s,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(s)}));for(var u=i.shape[0],c=i.shape[1],l=i.shape[2],d=i.shape[3],f=c*o,p=l*o,h=d/(o*o),m=n.data.get(i.dataId).values,v=new Float32Array(u*f*p*h),g=0,y=0;y<u;++y)for(var b=0;b<f;++b)for(var x=Math.floor(b/o),k=b%o,w=0;w<p;++w)for(var S=Math.floor(w/o),C=(k*o+w%o)*h,_=0;_<h;++_){var I=_+C+d*(S+l*(x+c*y));v[g++]=m[I]}return n.makeTensorInfo([u,f,p,h],i.dtype,v)}};function Bt(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.filter,s=r.strides,u=r.pad,c=r.dilations,l=r.dimRoundingMode;(0,h.H)([i,o],"depthwiseConv2DNative");var d=a.util.computeStrides(i.shape),f=a.util.computeStrides(o.shape),p=c;null==p&&(p=[1,1]),a.util.assert(a.backend_util.eitherStridesOrDilationsAreOne(s,p),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(s," and dilations '").concat(p,"'")}));for(var m=a.backend_util.computeConv2DInfo(i.shape,o.shape,s,p,u,l,!0),v=m.filterHeight,g=m.filterWidth,y=m.dilationHeight,b=m.dilationWidth,x=m.padInfo,k=x.left,w=x.top,S=m.outChannels/m.inChannels,C=new a.TensorBuffer(m.outShape,i.dtype),_=n.data.get(i.dataId).values,I=n.data.get(o.dataId).values,T=C.values,E=0;E<m.batchSize;++E)for(var N=E*d[0],O=E*C.strides[0],A=0;A<m.outHeight;++A)for(var R=O+A*C.strides[1],P=A*m.strideHeight-w,D=0;D<v;++D){var B=P+D*y;if(!(B<0||B>=m.inHeight))for(var M=D*f[0],F=N+B*d[1],L=0;L<m.outWidth;++L)for(var V=R+L*C.strides[2],z=L*m.strideWidth-k,Z=0;Z<g;++Z){var U=z+Z*b;if(!(U<0||U>=m.inWidth))for(var j=M+Z*f[1],W=F+U*m.inChannels,G=V,H=j,q=0;q<m.inChannels;++q){for(var X=_[W+q],K=0;K<S;++K)T[G+K]+=X*I[H+K];G+=S,H+=S}}}return n.makeTensorInfo(C.shape,C.dtype,C.values)}var Mt={kernelName:a.DepthwiseConv2dNative,backendName:"cpu",kernelFunc:Bt};var Ft={kernelName:a.DepthwiseConv2dNativeBackpropFilter,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.dy,s=r.strides,u=r.dilations,c=r.pad,l=r.dimRoundingMode,d=r.filterShape;(0,h.H)([i,o],"depthwiseConv2dNativeBackpropFilter");for(var f=a.backend_util.computeConv2DInfo(i.shape,d,s,u,c,l,!0),p=f.strideHeight,m=f.strideWidth,v=f.filterHeight,g=f.filterWidth,y=new a.TensorBuffer(f.filterShape,"float32"),b=f.padInfo.left,x=f.padInfo.top,k=f.outChannels/f.inChannels,w=n.data.get(i.dataId).values,S=new a.TensorBuffer(i.shape,i.dtype,w),C=n.data.get(o.dataId).values,_=new a.TensorBuffer(o.shape,o.dtype,C),I=0;I<v;++I)for(var T=Math.max(0,Math.ceil((x-I)/p)),E=Math.min(f.outHeight,(f.inHeight+x-I)/p),N=0;N<g;++N)for(var O=Math.max(0,Math.ceil((b-N)/m)),A=Math.min(f.outWidth,(f.inWidth+b-N)/m),R=0;R<f.outChannels;++R){for(var P=Math.trunc(R/k),D=R%k,B=0,M=0;M<f.batchSize;++M)for(var F=T;F<E;++F)for(var L=I+F*p-x,V=O;V<A;++V){var z=N+V*m-b;B+=S.get(M,L,z,P)*_.get(M,F,V,R)}y.set(B,I,N,P,D)}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};var Lt={kernelName:a.DepthwiseConv2dNativeBackpropInput,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.dy,o=t.filter,s=r.strides,u=r.dilations,c=r.pad,l=r.dimRoundingMode,d=r.inputShape;(0,h.H)([i,o],"depthwiseConv2DNativeBackpropInput");for(var f=a.util.computeStrides(i.shape),p=a.util.computeStrides(o.shape),m=a.backend_util.computeConv2DInfo(d,o.shape,s,u,c,l,!0),v=new a.TensorBuffer(m.inShape,"float32"),g=v.values,y=(0,ge.Z)(v.strides,3),b=y[0],x=y[1],k=y[2],w=n.data.get(i.dataId).values,S=(0,ge.Z)(f,3),C=S[0],_=S[1],I=S[2],T=n.data.get(o.dataId).values,E=(0,ge.Z)(p,3),N=E[0],O=E[1],A=E[2],R=m.batchSize,P=m.filterHeight,D=m.filterWidth,B=m.inChannels,M=m.inHeight,F=m.inWidth,L=m.outChannels,V=m.outHeight,z=m.outWidth,Z=m.strideHeight,U=m.strideWidth,j=P-1-m.padInfo.top,W=D-1-m.padInfo.left,G=L/B,H=0;H<R;++H)for(var q=0;q<B;++q)for(var X=0;X<M;++X)for(var K=X-j,Y=Math.max(0,Math.ceil(K/Z)),Q=Math.min(V,(P+K)/Z),$=0;$<F;++$){for(var J=$-W,ee=Math.max(0,Math.ceil(J/U)),te=Math.min(z,(D+J)/U),ne=0,re=Y;re<Q;++re)for(var ae=re*Z-K,ie=ee;ie<te;++ie)for(var oe=C*H+_*re+I*ie,se=N*(P-1-ae)+O*(D-1-(ie*U-J))+A*q,ue=0;ue<G;++ue){ne+=w[oe+(q*G+ue)]*T[se+ue]}g[b*H+x*X+k*$+q]=ne}return n.makeTensorInfo(v.shape,v.dtype,v.values)}},Vt=n(3433);var zt={kernelName:a.Diag,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=t.x,i=a.util.sizeFromShape(r.shape),o=n.data.get(r.dataId).values,s=(0,a.buffer)([i,i],r.dtype),u=s.values,c=0;c<o.length;c++)u[c*i+c]=o[c];var l=[].concat((0,Vt.Z)(r.shape),(0,Vt.Z)(r.shape));return n.makeTensorInfo(l,s.dtype,s.values)}},Zt={kernelName:a.Dilation2D,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.filter,s=r.strides,u=r.pad,c=r.dilations,l=n,d=l.data.get(i.dataId).values,f=i.shape.length,p=l.data.get(o.dataId).values,h=o.shape.length,m=a.backend_util.computeDilation2DInfo(i.shape,o.shape,s,u,"NHWC",c),v=m.batchSize,g=m.inHeight,y=m.inWidth,b=m.inChannels,x=m.outHeight,k=m.outWidth,w=m.padInfo,S=m.strideHeight,C=m.strideWidth,_=m.filterHeight,I=m.filterWidth,T=m.dilationHeight,E=m.dilationWidth,N=m.outShape,O=a.util.sizeFromShape(N),A=N.length,R=a.util.getArrayFromDType(i.dtype,O),P=0;P<v;++P)for(var D=0;D<x;++D)for(var B=D*S-w.top,M=0;M<k;++M)for(var F=M*C-w.left,L=0;L<b;++L){for(var V=Number.MIN_SAFE_INTEGER,z=0;z<_;++z){var Z=B+z*T;if(Z>=0&&Z<g)for(var U=0;U<I;++U){var j=F+U*E;if(j>=0&&j<y){var W=a.util.locToIndex([P,Z,j,L],f,a.util.computeStrides(i.shape)),G=a.util.locToIndex([z,U,L],h,a.util.computeStrides(o.shape)),H=d[W]+p[G];H>V&&(V=H)}}}R[a.util.locToIndex([P,D,M,L],A,a.util.computeStrides(N))]=V}return{dataId:l.write(a.util.toTypedArray(R,i.dtype),N,i.dtype),shape:N,dtype:i.dtype}}},Ut={kernelName:a.Dilation2DBackpropFilter,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.filter,s=t.dy,u=r.strides,c=r.pad,l=r.dilations,d=n,f=a.util.toNestedArray(i.shape,d.data.get(i.dataId).values),p=a.util.toNestedArray(o.shape,d.data.get(o.dataId).values),h=a.backend_util.computeDilation2DInfo(i.shape,o.shape,u,c,"NHWC",l),m=h.batchSize,v=h.inHeight,g=h.inWidth,y=h.inChannels,b=h.outHeight,x=h.outWidth,k=h.padInfo,w=h.strideHeight,S=h.strideWidth,C=h.filterHeight,_=h.filterWidth,I=h.dilationHeight,T=h.dilationWidth,E=h.outShape;a.util.assert(s.rank===E.length,(function(){return"Error in ".concat(a.Dilation2DBackpropFilter,", dy ")+"must have the same rank as output ".concat(E.length,", but got ")+"".concat(s.rank)}));for(var N=a.util.toNestedArray(E,d.data.get(s.dataId).values),O=a.util.makeZerosNestedTypedArray(o.shape,o.dtype),A=0;A<m;++A)for(var R=0;R<b;++R)for(var P=R*w-k.top,D=0;D<x;++D)for(var B=D*S-k.left,M=0;M<y;++M){for(var F=Number.MIN_SAFE_INTEGER,L=0,V=0,z=0;z<C;++z){var Z=P+z*I;if(Z>=0&&Z<v)for(var U=0;U<_;++U){var j=B+U*T;if(j>=0&&j<g){var W=f[A][Z][j][M]+p[z][U][M];W>F&&(F=W,L=z,V=U)}}}O[L][V][M]+=N[A][R][D][M]}return{dataId:d.write(a.util.toTypedArray(O,i.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}},jt={kernelName:a.Dilation2DBackpropInput,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.filter,s=t.dy,u=r.strides,c=r.pad,l=r.dilations,d=n,f=a.util.toNestedArray(i.shape,d.data.get(i.dataId).values),p=a.util.toNestedArray(o.shape,d.data.get(o.dataId).values),h=a.backend_util.computeDilation2DInfo(i.shape,o.shape,u,c,"NHWC",l),m=h.batchSize,v=h.inHeight,g=h.inWidth,y=h.inChannels,b=h.outHeight,x=h.outWidth,k=h.padInfo,w=h.strideHeight,S=h.strideWidth,C=h.filterHeight,_=h.filterWidth,I=h.dilationHeight,T=h.dilationWidth,E=h.outShape;a.util.assert(s.rank===E.length,(function(){return"Error in ".concat(a.Dilation2DBackpropInput,", dy ")+"must have the same rank as output ".concat(E.length,", but got ")+"".concat(s.rank)}));for(var N=a.util.toNestedArray(E,d.data.get(s.dataId).values),O=a.util.makeZerosNestedTypedArray(i.shape,i.dtype),A=0;A<m;++A)for(var R=0;R<b;++R)for(var P=R*w-k.top,D=0;D<x;++D)for(var B=D*S-k.left,M=0;M<y;++M){for(var F=Number.MIN_SAFE_INTEGER,L=P<0?0:P,V=B<0?0:B,z=0;z<C;++z){var Z=P+z*I;if(Z>=0&&Z<v)for(var U=0;U<_;++U){var j=B+U*T;if(j>=0&&j<g){var W=f[A][Z][j][M]+p[z][U][M];W>F&&(F=W,L=Z,V=j)}}}O[A][L][V][M]+=N[A][R][D][M]}return{dataId:d.write(a.util.toTypedArray(O,i.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},Wt=n(7762),Gt=n(4842);function Ht(e){var t,n=e.inputs,r=e.backend,i=e.attrs,o=n.x,s=i.axis,u=i.keepDims;(0,h.H)(o,"sum");var c=(t="bool"===o.dtype?(0,ct.p)({inputs:{x:o},backend:r,attrs:{dtype:"int32"}}):(0,he.y)({inputs:{x:o},backend:r})).shape.length,l=a.util.parseAxisParam(s,t.shape),d=a.backend_util.getAxesPermutation(l,c),f=l,p=t;null!=d&&(p=(0,Me.p)({inputs:{x:t},backend:r,attrs:{perm:d}}),f=a.backend_util.getInnerMostAxes(f.length,c)),a.backend_util.assertAxesAreInnerMostDims("sum",f,p.shape.length);for(var m=a.backend_util.computeOutAndReduceShapes(p.shape,f),v=(0,ge.Z)(m,2),g=v[0],y=v[1],b=a.backend_util.upcastType(p.dtype,"int32"),x=(0,Gt.l)(r,g,b),k=a.util.sizeFromShape(y),w=r.data.get(x.dataId).values,S=r.data.get(p.dataId).values,C=0;C<w.length;++C){for(var _=C*k,I=0,T=0;T<k;++T)I+=S[_+T];w[C]=I}if(u){var E=x;x=Ie({inputs:{x:x},backend:r,attrs:{shape:a.backend_util.expandShapeToKeepDim(x.shape,l)}}),r.disposeIntermediateTensorInfo(E)}return r.disposeIntermediateTensorInfo(t),null!=d&&r.disposeIntermediateTensorInfo(p),x}var qt={kernelName:a.Sum,backendName:"cpu",kernelFunc:Ht};var Xt={kernelName:a.Einsum,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.equation,i=t,o=a.backend_util.decodeEinsumEquation(r,i.length),s=o.allDims,u=o.summedDims,c=o.idDims;a.backend_util.checkEinsumDimSizes(s.length,c,i);for(var l=a.backend_util.getEinsumComputePath(u,c),d=l.path,f=l.steps,p=f.length,h=null,m=s.length,v=[],g=0;g<p;++g){var y,b=(0,Wt.Z)(f[g]);try{for(b.s();!(y=b.n()).done;){var x=y.value,k=a.backend_util.getEinsumPermutation(m,c[x]),w=k.permutationIndices,S=k.expandDims,C=void 0;a.backend_util.isIdentityPermutation(w)?C=i[x]:(C=(0,Me.p)({inputs:{x:i[x]},backend:n,attrs:{perm:w}}),v.push(C));for(var _=C.shape.slice(),I=0;I<S.length;++I)_.splice(S[I],0,1);a.util.arraysEqual(C.shape,_)||(C=Ie({inputs:{x:C},backend:n,attrs:{shape:_}}),v.push(C)),null===h?h=C:(h=(0,F.Jp)({inputs:{a:C,b:h},backend:n}),v.push(h))}}catch(O){b.e(O)}finally{b.f()}g<p-1&&(d[g]>=0&&(h=Ht({inputs:{x:h},backend:n,attrs:{axis:d[g]-(s.length-m),keepDims:!1}}),v.push(h)),m--)}for(var T=0,E=v;T<E.length;T++){var N=E[T];N!==h&&n.disposeIntermediateTensorInfo(N)}return h}};var Kt={kernelName:a.EluGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,i=t.y;(0,h.H)([r,i],"eluGrad");for(var o=new Float32Array(a.util.sizeFromShape(i.shape)),s=n.data.get(i.dataId).values,u=n.data.get(r.dataId).values,c=0;c<s.length;++c){var l=s[c];o[c]=l>=1?u[c]:u[c]*(l+1)}return n.makeTensorInfo(i.shape,"float32",o)}},Yt=a.backend_util.ERF_P,Qt=a.backend_util.ERF_A1,$t=a.backend_util.ERF_A2,Jt=a.backend_util.ERF_A3,en=a.backend_util.ERF_A4,tn=a.backend_util.ERF_A5,nn=(0,de.A)(a.Erf,(function(e){var t=Math.sign(e),n=Math.abs(e),r=1/(1+Yt*n);return t*(1-((((tn*r+en)*r+Jt)*r+$t)*r+Qt)*r*Math.exp(-n*n))})),rn={kernelName:a.Erf,backendName:"cpu",kernelFunc:nn};function an(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.input,o=r.dim,s=i.shape.length,u=i.shape.slice(),c=o;return o<0&&(a.util.assert(-(s+1)<=o,(function(){return"Axis must be in the interval [".concat(-(s+1),", ").concat(s,"]")})),c=s+o+1),u.splice(c,0,1),Ie({inputs:{x:i},backend:n,attrs:{shape:u}})}var on={kernelName:a.ExpandDims,backendName:"cpu",kernelFunc:an},sn=(0,Y.b)((function(e,t){return e/t})),un=(0,Q.j)(a.RealDiv,sn),cn={kernelName:a.RealDiv,backendName:"cpu",kernelFunc:un};function ln(e,t,n){for(var r=e.shape,i=r[0],o=r[1],s=n.data.get(e.dataId),u=s.complexTensorInfos.real,c=s.complexTensorInfos.imag,l=[i,o],d=a.util.sizeFromShape(l),f=a.util.getTypedArrayFromDType("float32",d),p=a.util.getTypedArrayFromDType("float32",d),h=0;h<i;h++){for(var m=(0,G.tP)({inputs:{x:u},backend:n,attrs:{begin:[h,0],size:[1,o]}}),v=(0,G.tP)({inputs:{x:c},backend:n,attrs:{begin:[h,0],size:[1,o]}}),g=(0,ft.P)({inputs:{real:m,imag:v},backend:n}),y=dn(g,t,n),b=y.real,x=y.imag,k=a.backend_util.mergeRealAndImagArrays(b,x),w=0;w<o;w++){var S=a.backend_util.getComplexWithIndex(k,w);f[h*o+w]=S.real,p[h*o+w]=S.imag}n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g)}var C=n.makeTensorInfo(l,"float32",f),_=n.makeTensorInfo(l,"float32",p),I=(0,ft.P)({inputs:{real:C,imag:_},backend:n});return n.disposeIntermediateTensorInfo(C),n.disposeIntermediateTensorInfo(_),I}function dn(e,t,n){var r=a.util.sizeFromShape(e.shape),i=n.data.get(e.dataId),o=n.data.get(i.complexTensorInfos.real.dataId).values,s=n.data.get(i.complexTensorInfos.imag.dataId).values;if(0===((y=r)&y-1)){var u=fn(o,s,r,t,n),c=[e.shape[0],e.shape[1]];if(t){var l=n.makeTensorInfo(c,"float32",u.real),d=n.makeTensorInfo(c,"float32",u.imag),f=n.makeTensorInfo([],"float32",a.util.createScalarValue(r,"float32")),p=(0,he.y)({inputs:{x:f},backend:n}),h=cn.kernelFunc({inputs:{a:l,b:f},backend:n}),m=cn.kernelFunc({inputs:{a:d,b:p},backend:n}),v=n.data.get(h.dataId).values,g=n.data.get(m.dataId).values;return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),{real:v,imag:g}}return u}var y,b=function(e,t,n){for(var r=new Float32Array(2*t),i=0;i<t;i++){for(var o=0,s=0,u=0;u<t;u++){var c=a.backend_util.exponent(i*u,t,n),l=a.backend_util.getComplexWithIndex(e,u);o+=l.real*c.real-l.imag*c.imag,s+=l.real*c.imag+l.imag*c.real}n&&(o/=t,s/=t),a.backend_util.assignToTypedArray(r,o,s,i)}return r}(a.backend_util.mergeRealAndImagArrays(o,s),r,t);return a.backend_util.splitRealAndImagArrays(b)}function fn(e,t,n,r,i){if(1===n)return{real:e,imag:t};var o=a.backend_util.mergeRealAndImagArrays(e,t),s=n/2,u=a.backend_util.complexWithEvenIndex(o),c=u.real,l=u.imag,d=[c.length],f=i.makeTensorInfo(d,"float32",c),p=i.makeTensorInfo(d,"float32",l),h=(0,ft.P)({inputs:{real:f,imag:p},backend:i}),m=a.backend_util.complexWithOddIndex(o),v=m.real,g=m.imag,b=[v.length],x=i.makeTensorInfo(b,"float32",v),k=i.makeTensorInfo(b,"float32",g),w=(0,ft.P)({inputs:{real:x,imag:k},backend:i}),S=fn(c,l,s,r,i),C=S.real,_=S.imag,I=[C.length],T=i.makeTensorInfo(I,"float32",C),E=i.makeTensorInfo(I,"float32",_),N=(0,ft.P)({inputs:{real:T,imag:E},backend:i}),O=fn(v,g,s,r,i),A=O.real,R=O.imag,P=[A.length],D=i.makeTensorInfo(P,"float32",A),B=i.makeTensorInfo(P,"float32",R),M=(0,ft.P)({inputs:{real:D,imag:B},backend:i}),L=a.backend_util.exponents(n,r),V=[L.real.length],z=i.makeTensorInfo(V,"float32",L.real),Z=i.makeTensorInfo(V,"float32",L.imag),U=(0,ft.P)({inputs:{real:z,imag:Z},backend:i}),j=(0,F.Jp)({inputs:{a:U,b:M},backend:i}),W=(0,y.IH)({inputs:{a:N,b:j},backend:i}),G=(0,ie.lu)({inputs:{a:N,b:j},backend:i}),H=(0,vt.k)({inputs:{input:W},backend:i}),q=(0,vt.k)({inputs:{input:G},backend:i}),X=ht({inputs:{input:W},backend:i}),K=ht({inputs:{input:G},backend:i}),Y=gt({inputs:[H,q],backend:i,attrs:{axis:0}}),Q=gt({inputs:[X,K],backend:i,attrs:{axis:0}}),$=i.data.get(Y.dataId).values,J=i.data.get(Q.dataId).values;return i.disposeIntermediateTensorInfo(f),i.disposeIntermediateTensorInfo(p),i.disposeIntermediateTensorInfo(h),i.disposeIntermediateTensorInfo(x),i.disposeIntermediateTensorInfo(k),i.disposeIntermediateTensorInfo(w),i.disposeIntermediateTensorInfo(T),i.disposeIntermediateTensorInfo(E),i.disposeIntermediateTensorInfo(N),i.disposeIntermediateTensorInfo(D),i.disposeIntermediateTensorInfo(B),i.disposeIntermediateTensorInfo(M),i.disposeIntermediateTensorInfo(z),i.disposeIntermediateTensorInfo(Z),i.disposeIntermediateTensorInfo(U),i.disposeIntermediateTensorInfo(j),i.disposeIntermediateTensorInfo(W),i.disposeIntermediateTensorInfo(G),i.disposeIntermediateTensorInfo(H),i.disposeIntermediateTensorInfo(X),i.disposeIntermediateTensorInfo(q),i.disposeIntermediateTensorInfo(K),i.disposeIntermediateTensorInfo(Y),i.disposeIntermediateTensorInfo(Q),{real:$,imag:J}}var pn={kernelName:a.FFT,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,i=a.util.sizeFromShape(r.shape),o=r.shape[r.shape.length-1],s=Ie({inputs:{x:r},backend:n,attrs:{shape:[i/o,o]}}),u=ln(s,!1,n),c=Ie({inputs:{x:u},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(u),c}};function hn(e){var t=e.backend,n=e.attrs,r=n.shape,i=n.value,o=n.dtype||a.util.inferDtype(i),s=a.util.getArrayFromDType(o,a.util.sizeFromShape(r));return function(e,t,n){e.fill(t)}(s,i),t.makeTensorInfo(r,o,s)}var mn={kernelName:a.Fill,backendName:"cpu",kernelFunc:hn};var vn={kernelName:a.FlipLeftRight,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=(e.attrs,e.backend),r=t.image,i=n,o=a.util.getTypedArrayFromDType(r.dtype,a.util.sizeFromShape(r.shape)),s=(0,ge.Z)(r.shape,4),u=s[0],c=s[1],l=s[2],d=s[3],f=i.data.get(r.dataId).values,p=0;p<u;p++)for(var h=p*l*c*d,m=0;m<c;m++)for(var v=m*(l*d),g=0;g<l;g++)for(var y=g*d,b=0;b<d;b++){var x=Math.round(l-g-1),k=h+v+y+b,w=f[k];if(x>=0&&x<l)w=f[h+v+x*d+b];o[k]=w}return{dataId:i.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},gn=(0,Y.b)((function(e,t){return Math.floor(e/t)})),yn=(0,Q.j)(a.FloorDiv,gn,null,"int32"),bn={kernelName:a.FloorDiv,backendName:"cpu",kernelFunc:yn};var xn={kernelName:a.FusedConv2D,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dataFormat,d=r.dilations,f=r.dimRoundingMode,p=r.activation,h=r.leakyreluAlpha,m=bt({inputs:{x:a,filter:i},backend:n,attrs:{strides:u,pad:c,dataFormat:l,dilations:d,dimRoundingMode:f}});if(o){var v=m;if("NCHW"===l&&1===o.shape.length&&1!==o.shape[0]){var g=Ie({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});m=(0,y.IH)({inputs:{a:m,b:g},backend:n}),n.disposeIntermediateTensorInfo(g)}else m=(0,y.IH)({inputs:{a:m,b:o},backend:n});n.disposeIntermediateTensorInfo(v)}if(p){var b=m;if("NCHW"===l&&"prelu"===p&&1===s.shape.length&&1!==s.shape[0]){var x=Ie({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});m=_e(n,m,p,x,h),n.disposeIntermediateTensorInfo(x)}else m=_e(n,m,p,s,h);n.disposeIntermediateTensorInfo(b)}return m}};var kn={kernelName:a.FusedDepthwiseConv2D,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dataFormat,d=r.dilations,f=r.dimRoundingMode,p=r.activation,h=r.leakyreluAlpha,m=Bt({inputs:{x:a,filter:i},backend:n,attrs:{strides:u,pad:c,dataFormat:l,dilations:d,dimRoundingMode:f}});if(o){var v=m;m=(0,y.IH)({inputs:{a:m,b:o},backend:n}),n.disposeIntermediateTensorInfo(v)}if(p){var g=m;m=_e(n,m,p,s,h),n.disposeIntermediateTensorInfo(g)}return m}};var wn={kernelName:a.GatherNd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,i=t.indices,o=a.util.sizeFromShape(r.shape),s=i.shape,u=s[s.length-1],c=a.backend_util.prepareAndValidate(r,i),l=(0,ge.Z)(c,4),d=l[0],f=l[1],p=l[2],h=l[3];if(0===f)return n.makeTensorInfo(d,r.dtype,[]);var m=n.data.get(i.dataId).values,v=n.bufferSync(r),g=(0,I.m)(m,v,r.dtype,f,u,p,h,r.shape,o);return n.makeTensorInfo(d,r.dtype,g.values)}};var Sn={kernelName:a.GatherV2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.indices,s=r.axis,u=r.batchDims;(0,h.H)([i,o],"gatherV2");for(var c=a.util.parseAxisParam(s,i.shape)[0],l=n.data.get(o.dataId).values,d=i.shape[c],f=function(e){var t=l[e];a.util.assert(t<=d-1&&t>=0,(function(){return"GatherV2: the index value ".concat(t," is not in [0, ").concat(d-1,"]")}))},p=0;p<l.length;++p)f(p);var m=u;null==u&&(m=0);var v=a.util.sizeFromShape(o.shape),g=a.backend_util.segment_util.collectGatherOpShapeInfo(i,o,c,m),y=Ie({inputs:{x:i},backend:n,attrs:{shape:[g.batchSize,g.outerSize,g.dimSize,g.sliceSize]}}),b=Ie({inputs:{x:o},backend:n,attrs:{shape:[g.batchSize,v/g.batchSize]}}),x=[g.batchSize,g.outerSize,v/g.batchSize,g.sliceSize],k=n.bufferSync(b),w=n.bufferSync(y),S=(0,T.i)(w,k,x);return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),n.makeTensorInfo(g.outputShape,S.dtype,S.values)}};var Cn={kernelName:a.IFFT,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,i=a.util.sizeFromShape(r.shape),o=r.shape[r.shape.length-1],s=Ie({inputs:{x:r},backend:n,attrs:{shape:[i/o,o]}}),u=ln(s,!0,n),c=Ie({inputs:{x:u},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(u),c}},_n=(0,de.A)(a.IsFinite,(function(e){return Number.isFinite(e)?1:0}),"bool"),In={kernelName:a.IsFinite,backendName:"cpu",kernelFunc:_n},Tn=(0,de.A)(a.IsInf,(function(e){return Math.abs(e)===1/0?1:0}),"bool"),En={kernelName:a.IsInf,backendName:"cpu",kernelFunc:Tn},Nn=(0,de.A)(a.IsNan,(function(e){return Number.isNaN(e)?1:0}),"bool"),On={kernelName:a.IsNan,backendName:"cpu",kernelFunc:Nn};var An={kernelName:a.LinSpace,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.num,o=(0,R.b)(r,a,i);return t.makeTensorInfo([o.length],"float32",o)}},Rn=(0,de.A)(a.Log1p,(function(e){return Math.log1p(e)})),Pn={kernelName:a.Log1p,backendName:"cpu",kernelFunc:Rn},Dn=(0,Y.b)((function(e,t){return e&&t})),Bn=(0,Q.j)(a.LogicalAnd,Dn,null,"bool"),Mn={kernelName:a.LogicalAnd,backendName:"cpu",kernelFunc:Bn},Fn=(0,de.A)(a.LogicalNot,(function(e){return e?0:1}),"bool"),Ln={kernelName:a.LogicalNot,backendName:"cpu",kernelFunc:Fn},Vn=(0,Y.b)((function(e,t){return e||t})),zn=(0,Q.j)(a.LogicalOr,Vn,null,"bool"),Zn={kernelName:a.LogicalOr,backendName:"cpu",kernelFunc:zn};var Un={kernelName:a.LRN,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.depthRadius,s=r.bias,u=r.alpha,c=r.beta;(0,h.H)(i,"LRN");var l=i.shape[3],d=l-1,f=n.data.get(i.dataId).values,p=a.util.sizeFromShape(i.shape),m=new Float32Array(p);function v(e){for(var t=e%l,n=e-t+Math.max(0,t-o),r=e-t+Math.min(t+o,d),a=0;n<=r;n++){var i=f[n];a+=i*i}return a}for(var g=0;g<p;g++){var y=v(g),b=f[g]*Math.pow(s+u*y,-c);m[g]=b}return n.makeTensorInfo(i.shape,i.dtype,m)}};var jn={kernelName:a.LRNGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.y,s=t.dy,u=r.depthRadius,c=r.bias,l=r.alpha,d=r.beta;(0,h.H)(s,"LRNGrad");for(var f=a.util.sizeFromShape(s.shape),p=s.shape[3],m=n.data.get(s.dataId).values,v=n.data.get(i.dataId).values,g=n.data.get(o.dataId).values,y=new Float32Array(f),b=f,x=0;x<b;x++){for(var k=x%p,w=x-k+Math.max(0,k-u),S=x-k+Math.min(p,k+u+1),C=0,_=w;_<S;_++)C+=Math.pow(v[_],2);C=l*C+c;for(var I=w;I<S;I++){var T=-2*l*d*v[I]*g[x]/C;x===I&&(T+=Math.pow(C,-d)),T*=m[x],y[I]+=T}}return n.makeTensorInfo(s.shape,i.dtype,y)}};function Wn(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.reductionIndices,s=r.keepDims,u=n,c=i.shape,l=c.length,d=a.util.parseAxisParam(o,c),f=d,p=a.backend_util.getAxesPermutation(f,l),m=u.data.get(i.dataId).values;if(null!=p){for(var v=new Array(l),g=0;g<v.length;g++)v[g]=c[p[g]];m=(0,ue.H)(m,c,i.dtype,p,v),f=a.backend_util.getInnerMostAxes(f.length,l),c=v}(0,h.H)(i,"max"),a.backend_util.assertAxesAreInnerMostDims("max",f,l);var y=a.backend_util.computeOutAndReduceShapes(c,f),b=(0,ge.Z)(y,2),x=b[0],k=b[1],w=a.util.sizeFromShape(k),S=(0,D.B)(m,w,x,i.dtype),C=u.write(S,x,i.dtype),_=x;s&&(_=v=a.backend_util.expandShapeToKeepDim(x,d));return{dataId:C,shape:_,dtype:i.dtype}}var Gn={kernelName:a.Max,backendName:"cpu",kernelFunc:Wn};var Hn={kernelName:a.MaxPool,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x;(0,h.H)(i,"maxPool");var o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode;a.util.assert(a.backend_util.eitherStridesOrDilationsAreOne(s,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(s," and dilations '").concat(1,"'")}));var l,d=a.backend_util.computePool2DInfo(i.shape,o,s,1,u,c);if(1===d.filterWidth&&1===d.filterHeight&&a.util.arraysEqual(d.inShape,d.outShape))l=(0,he.y)({inputs:{x:i},backend:n});else{var f=n.data.get(i.dataId).values,p=a.util.computeStrides(i.shape),m=$e(f,i.shape,i.dtype,p,d,"max");l=n.makeTensorInfo(d.outShape,i.dtype,m.values)}return l}};var qn={kernelName:a.MaxPool3D,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode,l=r.dataFormat;(0,h.H)(i,"maxPool3d");var d=a.backend_util.computePool3DInfo(i.shape,o,s,1,u,c,l),f=et(n.data.get(i.dataId).values,i.shape,i.dtype,a.util.computeStrides(i.shape),d,"max");return n.makeTensorInfo(f.shape,"float32",f.values)}};var Xn={kernelName:a.MaxPool3DGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.dy,o=t.input,s=r.filterSize,u=r.strides,c=r.pad,l=r.dimRoundingMode;(0,h.H)([i,o],"maxPool3DGrad");for(var d=a.backend_util.computePool3DInfo(o.shape,s,u,1,c,l),f=function(e,t){for(var n=(0,a.buffer)(t.outShape,"int32"),r=t.strideDepth,i=t.strideHeight,o=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,c=t.dilationWidth,l=t.effectiveFilterDepth,d=t.effectiveFilterHeight,f=t.effectiveFilterWidth,p=t.padInfo.front,h=t.padInfo.top,m=t.padInfo.left,v=0;v<t.batchSize;++v)for(var g=0;g<t.inChannels;++g)for(var y=0;y<t.outDepth;++y){for(var b=y*r-p,x=b;x<0;)x+=s;for(var k=Math.min(t.inDepth,l+b),w=0;w<t.outHeight;++w){for(var S=w*i-h,C=S;C<0;)C+=u;for(var _=Math.min(t.inHeight,d+S),I=0;I<t.outWidth;++I){for(var T=I*o-m,E=T;E<0;)E+=c;for(var N=Math.min(t.inWidth,f+T),O=Number.NEGATIVE_INFINITY,A=-1,R=x;R<k;R+=s)for(var P=R-b,D=C;D<_;D+=u)for(var B=D-S,M=E;M<N;M+=c){var F=M-T,L=e.get(v,R,D,M,g);L>=O&&(O=L,A=P*d*f+B*d+F)}n.set(A,v,y,w,I,g)}}}return n}(n.bufferSync(o),d),p=d.strideDepth,m=d.strideHeight,v=d.strideWidth,g=d.dilationDepth,y=d.dilationHeight,b=d.dilationWidth,x=d.effectiveFilterDepth,k=d.effectiveFilterHeight,w=d.effectiveFilterWidth,S=x-1-d.padInfo.front,C=w-1-d.padInfo.left,_=k-1-d.padInfo.top,I=(0,a.buffer)(o.shape,"float32"),T=n.bufferSync(i),E=0;E<d.batchSize;++E)for(var N=0;N<d.inChannels;++N)for(var O=0;O<d.inDepth;++O)for(var A=0;A<d.inHeight;++A)for(var R=0;R<d.inWidth;++R){for(var P=O-S,D=A-_,B=R-C,M=0,F=0;F<x;F+=g){var L=(P+F)/p;if(!(L<0||L>=d.outDepth||Math.floor(L)!==L))for(var V=0;V<k;V+=y){var z=(D+V)/m;if(!(z<0||z>=d.outHeight||Math.floor(z)!==z))for(var Z=0;Z<w;Z+=b){var U=(B+Z)/v;if(!(U<0||U>=d.outWidth||Math.floor(U)!==U)){var j=x*k*w-1-f.get(E,L,z,U,N)===F*k*w+V*w+Z?1:0;if(0!==j)M+=T.get(E,L,z,U,N)*j}}}}I.set(M,E,O,A,R,N)}return n.makeTensorInfo(I.shape,I.dtype,I.values)}};var Kn={kernelName:a.MaxPoolGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.dy,o=t.input,s=t.output,u=o;(0,h.H)([o,s],"maxPoolGrad");for(var c=r.filterSize,l=r.strides,d=r.pad,f=r.dimRoundingMode,p=a.backend_util.computePool2DInfo(u.shape,c,l,1,d,f),m=n.data.get(u.dataId).values,v=(0,a.buffer)(p.outShape,u.dtype,Je(m,u.shape,u.dtype,p).values),g=p.strideHeight,y=p.strideWidth,b=p.dilationHeight,x=p.dilationWidth,k=p.effectiveFilterHeight,w=p.effectiveFilterWidth,S=w-1-p.padInfo.left,C=k-1-p.padInfo.top,_=(0,a.buffer)(u.shape,"float32"),I=n.data.get(i.dataId).values,T=(0,a.buffer)(i.shape,"float32",I),E=0;E<p.batchSize;++E)for(var N=0;N<p.inChannels;++N)for(var O=0;O<p.inHeight;++O)for(var A=0;A<p.inWidth;++A){for(var R=O-C,P=A-S,D=0,B=0;B<k;B+=b){var M=(R+B)/g;if(!(M<0||M>=p.outHeight||Math.floor(M)!==M))for(var F=0;F<w;F+=x){var L=(P+F)/y;if(!(L<0||L>=p.outWidth||Math.floor(L)!==L)){var V=k*w-1-v.get(E,M,L,N)===B*w+F?1:0;if(0!==V)D+=T.get(E,M,L,N)*V}}}_.set(D,E,O,A,N)}return n.makeTensorInfo(_.shape,_.dtype,_.values)}};var Yn={kernelName:a.MaxPoolWithArgmax,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,i=t.x,o=n.filterSize,s=n.strides,u=n.pad,c=n.includeBatchInIndex,l=r;(0,h.H)(i,"MaxPoolWithArgmax");var d=l.data.get(i.dataId).values,f=a.backend_util.computePool2DInfo(i.shape,o,s,[1,1],u),p=function(e,t,n,r,i){var o=$e(e,0,n,a.util.computeStrides(t),i,"max"),s=Je(e,t,n,i,!0,r);return[o.values,s.values]}(d,i.shape,i.dtype,c,f),m=(0,ge.Z)(p,2),v=m[0],g=m[1],y=l.write(v,f.outShape,i.dtype),b=l.write(g,f.outShape,i.dtype);return[{dataId:y,shape:f.outShape,dtype:i.dtype},{dataId:b,shape:f.outShape,dtype:"int32"}]}};var Qn={kernelName:a.Mean,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.axis,s=r.keepDims,u=a.util.parseAxisParam(o,i.shape),c=a.backend_util.computeOutAndReduceShapes(i.shape,u)[1],l=a.util.sizeFromShape(c),d=[],f=n.makeTensorInfo([],"float32",new Float32Array([l]));d.push(f);var p=(0,ct.p)({inputs:{x:i},backend:n,attrs:{dtype:"float32"}});d.push(p);var h=un({inputs:{a:p,b:f},backend:n});d.push(h);var m=Ht({inputs:{x:h},backend:n,attrs:{axis:o,keepDims:s}});return d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}};var $n={kernelName:a.Min,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.axis,s=r.keepDims;(0,h.H)(i,"min");var u=a.util.parseAxisParam(o,i.shape),c=u,l=a.backend_util.getAxesPermutation(c,i.shape.length),d=i;null!=l&&(d=(0,Me.p)({inputs:{x:i},backend:n,attrs:{perm:l}}),c=a.backend_util.getInnerMostAxes(c.length,i.shape.length)),a.backend_util.assertAxesAreInnerMostDims("min",c,d.shape.length);for(var f=a.backend_util.computeOutAndReduceShapes(d.shape,c),p=(0,ge.Z)(f,2),m=p[0],v=p[1],g=a.util.sizeFromShape(v),y=a.util.makeZerosTypedArray(a.util.sizeFromShape(m),d.dtype),b=n.data.get(d.dataId).values,x=0;x<y.length;++x){for(var k=x*g,w=b[k],S=0;S<g;++S){var C=b[k+S];(Number.isNaN(C)||C<w)&&(w=C)}y[x]=w}null!=l&&n.disposeIntermediateTensorInfo(d);var _=n.makeTensorInfo(m,d.dtype,y);if(s){var I=Ie({inputs:{x:_},backend:n,attrs:{shape:a.backend_util.expandShapeToKeepDim(m,u)}});return n.disposeIntermediateTensorInfo(_),I}return _}};var Jn={kernelName:a.MirrorPad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.paddings,s=r.mode;(0,h.H)(i,"mirrorPad");for(var u=o.map((function(e,t){return e[0]+i.shape[t]+e[1]})),c=o.map((function(e){return e[0]})),l=o.map((function(e,t){return e[0]+i.shape[t]})),d="reflect"===s?0:1,f=n.data.get(i.dataId).values,p=i.shape.length,m=a.util.computeStrides(i.shape),v=a.util.sizeFromShape(u),g=u.length,y=a.util.computeStrides(u),b=a.util.getTypedArrayFromDType(i.dtype,v),x=0;x<v;x++){for(var k=a.util.indexToLoc(x,g,y),w=0;w<g;w++)k[w]<c[w]?k[w]=2*c[w]-k[w]-d:k[w]>=l[w]&&(k[w]=2*(l[w]-1)-k[w]+d);k=k.map((function(e,t){return e-c[t]}));var S=a.util.locToIndex(k,p,m);b[x]=f[S]}return{dataId:n.write(b,u,i.dtype),shape:u,dtype:i.dtype}}},er=(0,Y.b)((function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})),tr=(0,Q.j)(a.Mod,er),nr={kernelName:a.Mod,backendName:"cpu",kernelFunc:tr},rr=n(6699);function ar(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.logits,o=r.dim,s=i.shape.length,u=o;if(-1===u&&(u=s-1),u!==s-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(s," and dim was ").concat(u));var c=a.util.parseAxisParam([u],i.shape),l=Wn({inputs:{x:i},backend:n,attrs:{reductionIndices:c,keepDims:!1}}),d=a.backend_util.expandShapeToKeepDim(l.shape,c),f=Ie({inputs:{x:l},backend:n,attrs:{shape:d}}),p=(0,ie.lu)({inputs:{a:i,b:f},backend:n}),h=(0,S.Qq)({inputs:{x:p},backend:n}),m=Ht({inputs:{x:h},backend:n,attrs:{axis:c,keepDims:!1}}),v=Ie({inputs:{x:m},backend:n,attrs:{shape:d}}),g=un({inputs:{a:h,b:v},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),g}var ir={kernelName:a.Softmax,backendName:"cpu",kernelFunc:ar};var or={kernelName:a.Multinomial,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.logits,o=r.numSamples,s=r.seed,u=r.normalized;(0,h.H)(i,"multinomial");for(var c=u?i:ar({inputs:{logits:i},backend:n,attrs:{dim:-1}}),l=c.shape[0],d=c.shape[1],f=n.data.get(c.dataId).values,p=[l,o],m=a.util.makeZerosTypedArray(a.util.sizeFromShape(p),"int32"),v=0;v<l;++v){var g=v*d,y=new Float32Array(d-1);y[0]=f[g];for(var b=1;b<y.length;++b)y[b]=y[b-1]+f[g+b];for(var x=rr.alea(s.toString()),k=v*o,w=0;w<o;++w){var S=x();m[k+w]=y.length;for(var C=0;C<y.length;C++)if(S<y[C]){m[k+w]=C;break}}}return u||n.disposeIntermediateTensorInfo(c),n.makeTensorInfo(p,"int32",m)}},sr=a.kernel_impls.nonMaxSuppressionV3Impl;var ur={kernelName:a.NonMaxSuppressionV3,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold;(0,h.H)(a,"NonMaxSuppression");var c=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,d=sr(c,l,o,s,u).selectedIndices;return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},cr=a.kernel_impls.nonMaxSuppressionV4Impl;var lr={kernelName:a.NonMaxSuppressionV4,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.padToMaxOutputSize;(0,h.H)(a,"NonMaxSuppressionPadded");var l=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,f=cr(l,d,o,s,u,c),p=f.selectedIndices,m=f.validOutputs;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([m]))]}},dr=a.kernel_impls.nonMaxSuppressionV5Impl;var fr={kernelName:a.NonMaxSuppressionV5,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.softNmsSigma;(0,h.H)(a,"NonMaxSuppressionWithScore");var l=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,f=dr(l,d,o,s,u,c),p=f.selectedIndices,m=f.selectedScores;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([m.length],"float32",new Float32Array(m))]}};var pr={kernelName:a.OneHot,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.indices,o=r.depth,s=r.onValue,u=r.offValue;(0,h.H)(i,"oneHot");var c=a.util.sizeFromShape(i.shape),l=new Float32Array(c*o);l.fill(u);for(var d=n.data.get(i.dataId).values,f=0;f<c;++f)d[f]>=0&&d[f]<o&&(l[f*o+d[f]]=s);return n.makeTensorInfo([].concat((0,Vt.Z)(i.shape),[o]),"int32",l)}};function hr(e){var t=e.inputs,n=e.backend,r=t.x;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){var a=(0,vt.k)({inputs:{input:r},backend:n}),i=hr({inputs:{x:a},backend:n}),o=ht({inputs:{input:r},backend:n}),s=hr({inputs:{x:o},backend:n}),u=(0,ft.P)({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}return hn({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var mr={kernelName:a.ZerosLike,backendName:"cpu",kernelFunc:hr};var vr={kernelName:a.OnesLike,backendName:"cpu",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===a.dtype){var i=(0,vt.k)({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),s=ht({inputs:{input:a},backend:r}),u=hr({inputs:{x:s},backend:r}),c=(0,ft.P)({inputs:{real:o,imag:u},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),c}return hn({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}})}};function gr(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return an({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var i=t[0].shape,o=t[0].dtype;t.forEach((function(e){a.util.assertShapesMatch(i,e.shape,"All tensors passed to stack must have matching shapes"),a.util.assert(o===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var s=[],u=gt({inputs:t.map((function(e){var t=an({inputs:{input:e},backend:n,attrs:{dim:r}});return s.push(t),t})),backend:n,attrs:{axis:r}});return s.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),u}var yr={kernelName:a.Pack,backendName:"cpu",kernelFunc:gr};var br={kernelName:a.PadV2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.paddings,s=r.constantValue;(0,h.H)(i,"pad");var u=o.map((function(e,t){return e[0]+i.shape[t]+e[1]})),c=o.map((function(e){return e[0]})),l=n.data.get(i.dataId).values,d=a.util.sizeFromShape(i.shape),f=i.shape.length,p=a.util.computeStrides(i.shape),m=a.util.sizeFromShape(u),v=u.length,g=a.util.computeStrides(u),y=a.util.getTypedArrayFromDType(i.dtype,m);0!==s&&y.fill(s);for(var b=0;b<d;b++){var x=a.util.indexToLoc(b,f,p).map((function(e,t){return e+c[t]}));y[a.util.locToIndex(x,v,g)]=l[b]}return{dataId:n.write(y,u,i.dtype),shape:u,dtype:i.dtype}}},xr=(0,Y.b)((function(e,t){return Math.pow(e,t)})),kr=(0,Q.j)(a.Pow,xr),wr={kernelName:a.Pow,backendName:"cpu",kernelFunc:kr};var Sr={kernelName:a.Range,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.dtype,o=n.step,s=(0,Z.b)(r,a,o,i);return t.makeTensorInfo([s.length],i,s)}},Cr=(0,de.A)(a.Reciprocal,(function(e){return 1/e})),_r={kernelName:a.Reciprocal,backendName:"cpu",kernelFunc:Cr};var Ir={kernelName:a.ResizeBilinear,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.images,o=r.alignCorners,s=r.halfPixelCenters,u=r.size;(0,h.H)(i,"resizeBilinear");for(var c=a.util.computeStrides(i.shape),l=(0,ge.Z)(u,2),d=l[0],f=l[1],p=(0,ge.Z)(i.shape,4),m=p[0],v=p[1],g=p[2],y=p[3],b=n.data.get(i.dataId).values,x=new Float32Array(a.util.sizeFromShape([m,d,f,y])),k=[o&&d>1?v-1:v,o&&f>1?g-1:g],w=[o&&d>1?d-1:d,o&&f>1?f-1:f],S=0,C=k[0]/w[0],_=k[1]/w[1],I=0;I<m;I++)for(var T=0;T<d;T++){var E=void 0;E=s?C*(T+.5)-.5:C*T;for(var N=Math.max(0,Math.floor(E)),O=E-N,A=Math.min(v-1,Math.ceil(E)),R=I*c[0]+N*c[1],P=I*c[0]+A*c[1],D=0;D<f;D++){var B=void 0;B=s?_*(D+.5)-.5:_*D;for(var M=Math.max(0,Math.floor(B)),F=B-M,L=Math.min(g-1,Math.ceil(B)),V=R+M*c[2],z=P+M*c[2],Z=R+L*c[2],U=P+L*c[2],j=0;j<y;j++){var W=b[V+j],G=b[z+j],H=W+(b[Z+j]-W)*F,q=H+(G+(b[U+j]-G)*F-H)*O;x[S++]=q}}}return n.makeTensorInfo([m,d,f,y],"float32",x)}};var Tr={kernelName:a.ResizeBilinearGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.images,o=t.dy,s=r.alignCorners;(0,h.H)([o,i],"resizeBilinearGrad");for(var u=a.util.computeStrides(i.shape),c=(0,ge.Z)(i.shape,4),l=c[0],d=c[1],f=c[2],p=c[3],m=(0,ge.Z)(o.shape,3),v=m[1],g=m[2],y=new Float32Array(l*d*f*p),b=[s&&v>1?d-1:d,s&&g>1?f-1:f],x=[s&&v>1?v-1:v,s&&g>1?g-1:g],k=b[0]/x[0],w=b[1]/x[1],S=n.data.get(o.dataId).values,C=0,_=0;_<l;_++)for(var I=_*u[0],T=0;T<v;T++)for(var E=T*k,N=Math.floor(E),O=Math.min(Math.ceil(E),d-1),A=I+N*u[1],R=I+O*u[1],P=E-N,D=1-P,B=0;B<g;B++)for(var M=B*w,F=Math.floor(M),L=Math.min(Math.ceil(M),f-1),V=M-F,z=1-V,Z=A+F*u[2],U=A+L*u[2],j=R+F*u[2],W=R+L*u[2],G=D*z,H=D*V,q=P*z,X=P*V,K=0;K<p;K++){var Y=S[C++];y[Z+K]+=Y*G,y[U+K]+=Y*H,y[j+K]+=Y*q,y[W+K]+=Y*X}return n.makeTensorInfo([l,f,d,p],"float32",y)}};var Er={kernelName:a.ResizeNearestNeighbor,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.images,o=r.alignCorners,s=r.halfPixelCenters,u=r.size;(0,h.H)(i,"resizeNearestNeighbor");for(var c=a.util.computeStrides(i.shape),l=(0,ge.Z)(u,2),d=l[0],f=l[1],p=(0,ge.Z)(i.shape,4),m=p[0],v=p[1],g=p[2],y=p[3],b=n.data.get(i.dataId).values,x=new Float32Array(m*d*f*y),k=[o&&d>1?v-1:v,o&&f>1?g-1:g],w=[o&&d>1?d-1:d,o&&f>1?f-1:f],S=k[0]/w[0],C=k[1]/w[1],_=0,I=0;I<m;I++)for(var T=I*c[0],E=0;E<d;E++){var N=s?S*(E+.5):S*E,O=Math.min(v-1,o?Math.round(N):Math.floor(N));s&&(O=Math.max(0,O));for(var A=T+O*c[1],R=0;R<f;R++){var P=s?C*(R+.5):C*R,D=Math.min(g-1,o?Math.round(P):Math.floor(P));s&&(D=Math.max(0,D));for(var B=A+D*c[2],M=0;M<y;M++){var F=b[B+M];x[_++]=F}}}return n.makeTensorInfo([m,d,f,y],i.dtype,x)}};var Nr={kernelName:a.ResizeNearestNeighborGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.images,o=t.dy,s=r.alignCorners;(0,h.H)([o,i],"resizeNearestNeighborGrad");for(var u=a.util.computeStrides(i.shape),c=a.util.computeStrides(o.shape),l=(0,ge.Z)(i.shape,4),d=l[0],f=l[1],p=l[2],m=l[3],v=(0,ge.Z)(o.shape,3),g=v[1],y=v[2],b=new Float32Array(d*f*p*m),x=n.data.get(o.dataId).values,k=[s&&g>1?f-1:f,s&&y>1?p-1:p],w=[s&&g>1?g-1:g,s&&y>1?y-1:y],S=k[0]/w[0],C=k[1]/w[1],_=1/S,I=1/C,T=2*Math.ceil(_)+2,E=2*Math.ceil(I)+2,N=0;N<d;N++)for(var O=N*u[0],A=0;A<f;A++)for(var R=O+A*u[1],P=Math.floor(A*_),D=Math.floor(P-T/2),B=0;B<p;B++)for(var M=R+B*u[2],F=Math.floor(B*I),L=Math.floor(F-E/2),V=0;V<m;V++){for(var z=0,Z=0;Z<T;Z++){var U=Z+D;if(!(U<0||U>=g)){var j=O+U*c[1],W=U*S;if(A===Math.min(f-1,s?Math.round(W):Math.floor(W)))for(var G=0;G<E;G++){var H=G+L;if(!(H<0||H>=y)){var q=j+H*c[2],X=H*C;B===Math.min(p-1,s?Math.round(X):Math.floor(X))&&(z+=x[q+V])}}}}b[M+V]=z}return n.makeTensorInfo(i.shape,i.dtype,b)}};var Or={kernelName:a.Reverse,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.dims;(0,h.H)(i,"reverse");var s=i.shape.length,u=a.util.parseAxisParam(o,i.shape);if(0===s)return(0,he.y)({inputs:{x:i},backend:n});for(var c=new a.TensorBuffer(i.shape,i.dtype),l=n.bufferSync(i),d=function(e){var t=c.indexToLoc(e),n=t.slice();u.forEach((function(e){return n[e]=i.shape[e]-1-n[e]})),c.set.apply(c,[l.get.apply(l,(0,Vt.Z)(n))].concat((0,Vt.Z)(t)))},f=0;f<c.size;f++)d(f);return n.makeTensorInfo(c.shape,c.dtype,c.values)}},Ar={kernelName:a.RotateWithOffset,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.attrs,r=e.backend,i=t.image,o=n.radians,s=n.fillValue,u=n.center,c=r,l=a.util.getTypedArrayFromDType(i.dtype,a.util.sizeFromShape(i.shape)),d=(0,ge.Z)(i.shape,4),f=d[0],p=d[1],h=d[2],m=d[3],v=a.backend_util.getImageCenter(u,p,h),g=(0,ge.Z)(v,2),y=g[0],b=g[1],x=Math.sin(o),k=Math.cos(o),w=c.data.get(i.dataId).values,S=0;S<f;S++)for(var C=S*h*p*m,_=0;_<p;_++)for(var I=_*(h*m),T=0;T<h;T++)for(var E=T*m,N=0;N<m;N++){var O=[f,_,T,N],A=O[2],R=O[1],P=(A-y)*k-(R-b)*x,D=(A-y)*x+(R-b)*k;P=Math.round(P+y),D=Math.round(D+b);var B=s;if("number"!==typeof s&&(B=3===N?255:s[N]),P>=0&&P<h&&D>=0&&D<p)B=w[C+D*(h*m)+P*m+N];l[C+I+E+N]=B}return{dataId:c.write(l,i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},Rr=(0,de.A)(a.Round,(function(e){var t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1})),Pr={kernelName:a.Round,backendName:"cpu",kernelFunc:Rr};var Dr={kernelName:a.ScatterNd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.indices,o=t.updates,s=r.shape,u=a.backend_util.calculateShapes(o,i,s),c=u.sliceRank,l=u.numUpdates,d=u.sliceSize,f=u.strides,p=u.outputSize,h=n.bufferSync(i),m=n.bufferSync(o),v=(0,j.N)(h,m,s,p,d,l,c,f,0,!0);return n.makeTensorInfo(s,v.dtype,v.values)}};function Br(e,t){for(var n=0,r=e.length,a=0;n<r;)e[a=Math.floor((n+r)/2)]<t?n=a+1:r=a;return r}function Mr(e,t){for(var n=0,r=e.length,a=0;n<r;)e[a=Math.floor((n+r)/2)]<=t?n=a+1:r=a;return r}var Fr={kernelName:a.SearchSorted,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.sortedSequence,o=t.values,s=r.side,u=function(e,t,n,r,i,o){for(var s=a.util.getArrayFromDType("int32",n*i),u=0;u<n;++u)for(var c=e.slice(u*r,(u+1)*r),l=u*i,d=0;d<i;++d)s[l+d]="left"===o?Br(c,t[d+l]):Mr(c,t[d+l]);return s}(n.data.get(i.dataId).values,n.data.get(o.dataId).values,i.shape[0],i.shape[1],o.shape[1],s);return n.makeTensorInfo(o.shape,"int32",u)}};var Lr={kernelName:a.Select,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,i=t.t,o=t.e;(0,h.H)([r,i,o],"select");for(var s=r.shape.length,u=n.data.get(r.dataId).values,c=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values,d=(0,a.upcastType)(i.dtype,o.dtype),f=a.util.makeZerosTypedArray(a.util.sizeFromShape(i.shape),d),p=0,m=0===s||s>1||1===i.shape.length?1:a.util.sizeFromShape(i.shape.slice(1)),v=0;v<u.length;v++)for(var g=0;g<m;g++)1===u[v]?f[p++]=c[v]:f[p++]=l[v];return n.makeTensorInfo(i.shape,d,f)}},Vr=a.backend_util.SELU_SCALEALPHA,zr=a.backend_util.SELU_SCALE,Zr=(0,de.A)(a.Selu,(function(e){return e>=0?zr*e:Vr*(Math.exp(e)-1)})),Ur={kernelName:a.Selu,backendName:"cpu",kernelFunc:Zr},jr=(0,de.A)(a.Sign,(function(e){return e<0?-1:e>0?1:0})),Wr={kernelName:a.Sign,backendName:"cpu",kernelFunc:jr},Gr=(0,de.A)(a.Sin,(function(e){return Math.sin(e)})),Hr={kernelName:a.Sin,backendName:"cpu",kernelFunc:Gr},qr=(0,de.A)(a.Sinh,(function(e){return Math.sinh(e)})),Xr={kernelName:a.Sinh,backendName:"cpu",kernelFunc:qr},Kr=Math.log(1.1920928955078125e-7)+2,Yr=(0,de.A)(a.Softplus,(function(e){var t=e>-Kr,n=e<Kr,r=Math.exp(e);return n?r:t?e:Math.log(1+r)})),Qr={kernelName:a.Softplus,backendName:"cpu",kernelFunc:Yr};var $r={kernelName:a.SpaceToBatchND,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.blockShape,s=r.paddings;(0,h.H)([i],"spaceToBatchND");var u=a.util.sizeFromShape(o),c=[[0,0]];c.push.apply(c,(0,Vt.Z)(s));for(var l=1+o.length;l<i.shape.length;++l)c.push([0,0]);var d=br.kernelFunc({inputs:{x:i},backend:n,attrs:{paddings:c,constantValue:0}}),f=a.backend_util.getReshaped(d.shape,o,u,!1),p=a.backend_util.getPermuted(f.length,o.length,!1),m=a.backend_util.getReshapedPermuted(d.shape,o,u,!1),v=Ie({inputs:{x:d},backend:n,attrs:{shape:f}}),g={x:v},y={perm:p},b=(0,Me.p)({inputs:g,backend:n,attrs:y}),x=Ie({inputs:{x:b},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(b),x}};var Jr={kernelName:a.SparseFillEmptyRows,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,i=t.denseShape,o=t.defaultValue;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n        ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n        ".concat(a.shape));if(0!==o.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(o.shape));var s=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values[0],d=(0,H.c)(s,r.shape,r.dtype,u,a.dtype,c,l),f=(0,ge.Z)(d,5),p=f[0],h=f[1],m=f[2],v=f[3],g=f[4];return[n.makeTensorInfo(h,r.dtype,p),n.makeTensorInfo([h[0]],a.dtype,m),n.makeTensorInfo([v.length],"bool",new Uint8Array(v.map((function(e){return Number(e)})))),n.makeTensorInfo([g.length],r.dtype,new Int32Array(g))]}};var ea={kernelName:a.SparseReshape,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,i=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=Array.from(n.data.get(a.dataId).values),s=n.data.get(r.dataId).values,u=Array.from(n.data.get(i.dataId).values),c=(0,q.U)(s,r.shape,r.dtype,o,u),l=(0,ge.Z)(c,3),d=l[0],f=l[1],p=l[2];return[n.makeTensorInfo(f,r.dtype,d),n.makeTensorInfo([p.length],i.dtype,new Int32Array(p))]}};var ta={kernelName:a.SparseSegmentMean,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n          ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n          ".concat(i.shape));if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");var o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,c=(0,X.V)(o,r.shape,r.dtype,s,u,!0),l=(0,ge.Z)(c,2),d=l[0],f=l[1];return n.makeTensorInfo(f,r.dtype,d)}};var na={kernelName:a.SparseSegmentSum,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n         ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n         ".concat(i.shape));if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");var o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,c=(0,X.V)(o,r.shape,r.dtype,s,u),l=(0,ge.Z)(c,2),d=l[0],f=l[1];return n.makeTensorInfo(f,r.dtype,d)}};var ra={kernelName:a.SparseToDense,backendName:"cpu",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,i=e.attrs,o=n.sparseIndices,s=n.sparseValues,u=n.defaultValue,c=i.outputShape,l=a.backend_util.calculateShapes(s,o,c),d=l.sliceRank,f=l.numUpdates,p=l.sliceSize,h=l.strides,m=l.outputSize,v=!1,g=r.bufferSync(o);switch(s.dtype){case"bool":var y=r.bufferSync(s),b=Boolean(r.data.get(u.dataId).values[0]);t=(0,j.N)(g,y,c,m,p,f,d,h,b,v);break;case"float32":var x=r.bufferSync(s),k=r.data.get(u.dataId).values[0];t=(0,j.N)(g,x,c,m,p,f,d,h,k,v);break;case"int32":var w=r.bufferSync(s),S=r.data.get(u.dataId).values[0];t=(0,j.N)(g,w,c,m,p,f,d,h,S,v);break;case"string":var C=r.bufferSync(s),_=a.util.decodeString(r.data.get(u.dataId).values[0]);t=(0,j.N)(g,C,c,m,p,f,d,h,_,v);break;default:throw new Error("Unsupported type ".concat(s.dtype))}return r.makeTensorInfo(c,t.dtype,t.values)}};var aa={kernelName:a.SplitV,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.numOrSizeSplits,s=r.axis,u=a.util.parseAxisParam(s,i.shape)[0],c=a.backend_util.prepareSplitSize(i,o,u),l=new Array(i.shape.length).fill(0),d=i.shape.slice();return c.map((function(e){var t=(0,Vt.Z)(d);t[u]=e;var r=(0,G.tP)({inputs:{x:i},backend:n,attrs:{begin:l,size:t}});return l[u]+=e,r}))}},ia={kernelName:a.Square,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n;(0,h.H)(r,"square");for(var i=a.data.get(r.dataId).values,o=new Float32Array(i.length),s=0;s<i.length;++s){var u=i[s];o[s]=u*u}return{dataId:a.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},oa=(0,de.A)(a.Step,(function(e,t){var n=t;return isNaN(e)?NaN:e>0?1:n.alpha})),sa={kernelName:a.Step,backendName:"cpu",kernelFunc:oa};var ua={kernelName:a.StridedSlice,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.begin,s=r.end,u=r.strides,c=r.beginMask,l=r.endMask,d=r.ellipsisMask,f=r.newAxisMask,p=r.shrinkAxisMask;(0,h.H)(i,"stridedSlice");var m,v=a.slice_util.sliceInfo(i.shape,o,s,u,c,l,d,f,p),g=v.finalShapeSparse,y=v.finalShape,b=v.isIdentity,x=v.sliceDim0,k=v.isSimpleSlice,w=v.begin,S=v.end,C=v.strides;if(b)m=Ie({inputs:{x:i},backend:n,attrs:{shape:y}});else if(x||k){a.util.assert(i.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(i.shape.length)}));var _=a.slice_util.computeOutShape(w,S,C),I=(0,G.tP)({inputs:{x:i},backend:n,attrs:{begin:w,size:_}});m=Ie({inputs:{x:I},backend:n,attrs:{shape:y}}),n.disposeIntermediateTensorInfo(I)}else{var T=n.bufferSync(i),E=(0,te.t)(g,T,C,w);m=n.makeTensorInfo(y,E.dtype,E.values)}return m}};var ca={kernelName:a.StringNGrams,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,i=r.nGramWidths,o=r.leftPad,s=r.rightPad,u=r.padWidth,c=r.preserveShortSequences,l=t.data,d=t.dataSplits,f=n.data.get(l.dataId).values,p=n.data.get(d.dataId).values,h=(0,ne.A)(f,p,a,i,o,s,u,c),m=(0,ge.Z)(h,2),v=m[0],g=m[1];return[n.makeTensorInfo([v.length],"string",v),n.makeTensorInfo(d.shape,"int32",g)]}};var la={kernelName:a.StringSplit,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,i=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));var o=n.data.get(a.dataId).values,s=n.data.get(i.dataId).values[0],u=(0,re.Q)(o,s,r),c=(0,ge.Z)(u,3),l=c[0],d=c[1],f=c[2],p=d.length;return[n.makeTensorInfo([p,2],"int32",l),n.makeTensorInfo([p],"string",d),n.makeTensorInfo([2],"int32",new Int32Array(f))]}};var da={kernelName:a.StringToHashBucketFast,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var i=n.data.get(a.dataId).values,o=(0,ae.h)(i,r);return n.makeTensorInfo(a.shape,"int32",o)}},fa=(0,de.A)(a.Tan,(function(e){return Math.tan(e)})),pa={kernelName:a.Tan,backendName:"cpu",kernelFunc:fa},ha=(0,de.A)(a.Tanh,(function(e){return Math.tanh(e)})),ma={kernelName:a.Tanh,backendName:"cpu",kernelFunc:ha};var va={kernelName:a.Tile,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;(0,h.H)(a,"tile");var o=(0,oe.R)(n.bufferSync(a),i);return n.makeTensorInfo(o.shape,o.dtype,o.values)}};var ga={kernelName:a.TopK,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted;(0,h.H)(a,"topk");var s=n.data.get(a.dataId).values,u=(0,se.W)(s,a.shape,a.dtype,i,o),c=(0,ge.Z)(u,2),l=c[0],d=c[1];return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(d.shape,d.dtype,d.values)]}};var ya={kernelName:a.Transform,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,i=t.image,o=t.transforms,s=n.interpolation,u=n.fillMode,c=n.fillValue,l=n.outputShape,d=(0,ge.Z)(i.shape,4),f=d[0],p=d[1],h=d[2],m=d[3],v=null!=l?l:[p,h],g=(0,ge.Z)(v,2),y=g[0],b=g[1],x=[f,y,b,m],k=a.util.computeStrides(i.shape),w=k[0],S=k[1],C=k[2],_=a.util.getTypedArrayFromDType(i.dtype,a.util.sizeFromShape(x));_.fill(c);for(var I=r.data.get(i.dataId).values,T=r.data.get(o.dataId).values,E=0;E<f;++E){for(var N=1===o.shape[0]?T:T.subarray(8*E,8*E+8),O=0;O<y;++O)for(var A=0;A<b;++A)for(var R=0;R<m;++R){var P=void 0,D=N[6]*A+N[7]*O+1;if(0!==D){var B=(N[0]*A+N[1]*O+N[2])/D,M=(N[3]*A+N[4]*O+N[5])/D,F=ba(B,h,u),L=ba(M,p,u);switch(s){case"nearest":P=ka(I,p,h,w,S,C,E,L,F,R,c);break;case"bilinear":P=wa(I,p,h,w,S,C,E,L,F,R,c);break;default:throw new Error("Error in Transform: Expect 'nearest' or "+"'bilinear', but got ".concat(s))}_[E*w+O*S+A*C+R]=P}}return r.makeTensorInfo(x,i.dtype,_)}return{dataId:r.write(_,x,i.dtype),shape:i.shape,dtype:i.dtype}}};function ba(e,t,n){switch(n){case"reflect":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=2*t;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-t?n+r:-n-1}else if(n>t-1)if(t<=1)n=0;else{var i=2*t;(n-=i*Math.trunc(n/i))>=t&&(n=i-n-1)}return a.util.clamp(0,n,t-1)}(e,t);case"wrap":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=t-1;n+=t*(Math.trunc(-n/r)+1)}else if(n>t-1)if(t<=1)n=0;else{var i=t-1;n-=t*Math.trunc(n/i)}return a.util.clamp(0,n,t-1)}(e,t);case"nearest":return function(e,t){return a.util.clamp(0,e,t-1)}(e,t);default:return function(e,t){return e}(e)}}function xa(e,t,n,r,a,i,o,s,u,c,l){return 0<=s&&s<t&&0<=u&&u<n?e[o*r+s*a+u*i+c]:l}function ka(e,t,n,r,a,i,o,s,u,c,l){return xa(e,t,n,r,a,i,o,Math.round(s),Math.round(u),c,l)}function wa(e,t,n,r,a,i,o,s,u,c,l){var d=Math.floor(s),f=Math.floor(u),p=d+1,h=f+1;return(p-s)*((h-u)*xa(e,t,n,r,a,i,o,d,f,c,l)+(u-f)*xa(e,t,n,r,a,i,o,d,h,c,l))+(s-d)*((h-u)*xa(e,t,n,r,a,i,o,p,f,c,l)+(u-f)*xa(e,t,n,r,a,i,o,p,h,c,l))}var Sa={kernelName:a.Unique,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;(0,h.H)(i,"unique");var o=r.data.get(i.dataId).values,s=(0,ce.S)(o,a,i.shape,i.dtype),u=s.outputValues,c=s.outputShape,l=s.indices;return[r.makeTensorInfo(c,i.dtype,u),r.makeTensorInfo([l.length],"int32",l)]}};var Ca={kernelName:a.Unpack,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a.shape.length,s=a.shape[i],u=new Array(o-1),c=0,l=0;l<o;l++)l!==i&&(u[c++]=a.shape[l]);var d=new Array(o).fill(0),f=a.shape.slice();f[i]=1;for(var p=new Array(s),h=0;h<p.length;h++){d[i]=h;var m=(0,G.tP)({inputs:{x:a},backend:n,attrs:{begin:d,size:f}});p[h]=Ie({inputs:{x:m},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(m)}return p}};for(var _a={kernelName:a.UnsortedSegmentSum,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.segmentIds,s=r.numSegments;(0,h.H)(i,"unsortedSegmentSum");for(var u=[],c=[],l=i.shape.length-o.shape.length,d=o,f=0;f<l;++f){var p=an({inputs:{input:d},backend:n,attrs:{dim:f+1}});d=p,c.push(p)}for(var m=0;m<s;++m){var v=a.util.createScalarValue(m,"int32"),g=n.makeTensorInfo([],"int32",v),y=(0,w.Dg)({inputs:{a:g,b:d},backend:n}),b=(0,ct.p)({inputs:{x:y},backend:n,attrs:{dtype:"float32"}}),x=(0,F.Jp)({inputs:{a:b,b:i},backend:n}),k=Ht({inputs:{x:x},backend:n,attrs:{axis:0,keepDims:!1}});u.push(k),c.push(g),c.push(y),c.push(b),c.push(x),c.push(k)}var S=gr({inputs:u,backend:n,attrs:{axis:0}});return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),S}},Ia=0,Ta=[Oe,g.fC,Re,De,y.j4,Be,Fe,Le,Ve,ze,Ue,We,He,Ke,Qe,tt,nt,rt,at,Ne,it,ot,st,ut,ct.M,x.y2,dt,ft.z,pt,yt,xt,kt,wt,St,Ct,_t,Tt,Nt,Ot,At,Rt,Pt,Dt,Mt,Ft,Lt,zt,Zt,Ut,jt,Xt,pe,Kt,w.Kx,rn,S.SX,on,C.Vu,pn,mn,vn,_.Ao,bn,xn,kn,wn,Sn,E.Ce,N.V,he.I,Cn,mt,In,En,On,ve,O.zh,A.m3,An,P.xM,Pn,Mn,Ln,Zn,Un,jn,Gn,B.eJ,Hn,qn,Xn,Kn,Yn,Qn,$n,M.u0,Jn,nr,or,F.f$,L.AF,ur,lr,fr,V.nP,pr,vr,yr,br,wr,xe,z.Iz,Sr,vt.O,cn,_r,we,Ce,Te,Ir,Tr,Er,Nr,Or,Ar,Pr,U.FY,Dr,Fr,Lr,Ur,W.BP,Wr,Hr,Xr,G.C6,ir,Qr,$r,Jr,ea,ta,na,ra,aa,K.cz,ia,ee,sa,ua,ca,la,da,ie.GR,qt,pa,ma,va,ga,ya,Me.b,Sa,Ca,_a,mr];Ia<Ta.length;Ia++){var Ea=Ta[Ia];(0,a.registerKernel)(Ea)}},6220:function(e,t,n){"use strict";n.d(t,{bk:function(){return i},fC:function(){return o}});var r=n(7105),a=n(3193);function i(e){for(var t=new Float32Array(e.length),n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}var o={kernelName:r.Abs,backendName:"cpu",kernelFunc:function(e){var t=e.inputs.x,n=e.backend;(0,a.H)(t,"abs");var o=new Float32Array(r.util.sizeFromShape(t.shape));return o=i(n.data.get(t.dataId).values),n.makeOutput(o,t.shape,t.dtype)}}},5589:function(e,t,n){"use strict";n.d(t,{EH:function(){return o},IH:function(){return u},j4:function(){return c}});var r=n(7105),a=n(9341),i=n(9501),o=(0,a.b)((function(e,t){return e+t})),s=(0,i.H)((function(e,t,n,r){return{real:e+n,imag:t+r}})),u=(0,i.j)(r.Add,o,s),c={kernelName:r.Add,backendName:"cpu",kernelFunc:u}},3737:function(e,t,n){"use strict";n.d(t,{W:function(){return a},i:function(){return i}});var r=n(7105);function a(e,t,n,a,i){for(var o=r.util.sizeFromShape(a),s=r.util.makeZerosTypedArray(i,n),u=0;u<e.length;u++){var c=e[u];if(c<0)throw new Error("Input x must be non-negative!");c>=i||(s[c]+=o>0?t[u]:1)}return s}function i(e,t,n){for(var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=e.shape[0],o=e.shape[1],s=(0,r.buffer)([i,n],t.dtype),u=0;u<i;u++)for(var c=0;c<o;c++){var l=e.get(u,c);if(l<0)throw new Error("Input x must be non-negative!");l>=n||(a?s.set(1,u,l):t.size>0?s.set(s.get(u,l)+t.get(u,c),u,l):s.set(s.get(u,l)+1,u,l))}return s}},570:function(e,t,n){"use strict";n.d(t,{M:function(){return d},p:function(){return l}});var r=n(9439),a=n(7105),i=n(9341),o=n(4842),s=n(6545),u=n(9090),c=n(6241);function l(e){var t=e.inputs,n=e.backend,d=e.attrs,f=t.x,p=d.dtype;if("complex64"===p){if("complex64"===f.dtype)return(0,u.y)({inputs:{x:f},backend:n});var h=(0,o.l)(n,f.shape,f.dtype),m=l({inputs:{x:f},backend:n,attrs:{dtype:"float32"}}),v=(0,s.P)({inputs:{real:m,imag:h},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),v}if("complex64"===f.dtype){var g=(0,c.k)({inputs:{input:f},backend:n}),y=l({inputs:{x:g},backend:n,attrs:{dtype:p}});return n.disposeIntermediateTensorInfo(g),y}if(!a.util.hasEncodingLoss(f.dtype,p)){var b=(0,u.y)({inputs:{x:f},backend:n});return{dataId:b.dataId,shape:b.shape,dtype:p}}if("int32"===p){var x=n.data.get(f.dataId).values,k=Int32Array.from(x);return n.makeTensorInfo(f.shape,"int32",k)}if("bool"===p){var w=n.data.get(f.dataId).values,S=a.util.toTypedArray([0],f.dtype),C=(0,i.b)((function(e,t){return e!==t?1:0}))(f.shape,[],w,S,"bool"),_=(0,r.Z)(C,2),I=_[0],T=_[1];return n.makeTensorInfo(T,"bool",I)}throw new Error("Error in Cast: failed to cast ".concat(f.dtype," to ").concat(p))}var d={kernelName:a.Cast,backendName:"cpu",kernelFunc:l}},4351:function(e,t,n){"use strict";n.d(t,{__:function(){return o},y2:function(){return u}});var r=n(7105),a=n(422),i=n(1844),o=(0,a.a)((function(e){return Math.ceil(e)})),s=(0,i.O)(r.Ceil,o),u={kernelName:r.Ceil,backendName:"cpu",kernelFunc:s}},6545:function(e,t,n){"use strict";function r(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",o)},s}n.d(t,{P:function(){return r},z:function(){return a}});var a={kernelName:n(7105).Complex,backendName:"cpu",kernelFunc:r}},6563:function(e,t,n){"use strict";n.d(t,{j:function(){return a}});var r=n(7105);function a(e,t,n,a){var i=r.util.getArrayFromDType(n,r.util.sizeFromShape(t));if(a&&"string"!==n){var o=0;e.forEach((function(e){var t=r.util.sizeFromShape(e.shape);i.set(e.vals,o),o+=t}))}else{var s=0;e.forEach((function(e){for(var a="string"===n?r.backend_util.fromUint8ToStringArray(e.vals):e.vals,o=0,u=0;u<e.shape[0];++u)for(var c=u*t[1]+s,l=0;l<e.shape[1];++l)i[c+l]=a[o++];s+=e.shape[1]}))}return i}},8116:function(e,t,n){"use strict";n.d(t,{Dg:function(){return s},Kx:function(){return u},tW:function(){return o}});var r=n(7105),a=n(9341),i=n(9501),o=(0,a.b)((function(e,t){return e===t?1:0})),s=(0,i.j)(r.Equal,o,null,"bool"),u={kernelName:r.Equal,backendName:"cpu",kernelFunc:s}},6880:function(e,t,n){"use strict";n.d(t,{Qq:function(){return s},Ro:function(){return o},SX:function(){return u}});var r=n(7105),a=n(422),i=n(1844),o=(0,a.a)((function(e){return Math.exp(e)})),s=(0,i.O)(r.Exp,o,"float32"),u={kernelName:r.Exp,backendName:"cpu",kernelFunc:s}},1354:function(e,t,n){"use strict";n.d(t,{OF:function(){return o},Vu:function(){return u}});var r=n(7105),a=n(422),i=n(1844),o=(0,a.a)((function(e){return Math.expm1(e)})),s=(0,i.O)(r.Expm1,o),u={kernelName:r.Expm1,backendName:"cpu",kernelFunc:s}},7224:function(e,t,n){"use strict";n.d(t,{Ao:function(){return u},r6:function(){return o}});var r=n(7105),a=n(422),i=n(1844),o=(0,a.a)((function(e){return Math.floor(e)})),s=(0,i.O)(r.Floor,o),u={kernelName:r.Floor,backendName:"cpu",kernelFunc:s}},5648:function(e,t,n){"use strict";n.d(t,{m:function(){return i}});var r=n(3433),a=n(7105);function i(e,t,n,i,o,s,u,c,l){for(var d=(0,a.buffer)([i,s],n),f=0;f<i;f++){for(var p=[],h=0,m=0;m<o;m++){var v=e[f*o+m];h+=v*u[m],p.push(v)}if(h<0||h>=l/s)throw new Error("Invalid indices: ".concat(p," does not index into ").concat(c));for(var g=0;g<s;g++)d.values[f*s+g]=t.get.apply(t,(0,r.Z)(t.indexToLoc(h*s+g)))}return d}},2666:function(e,t,n){"use strict";n.d(t,{i:function(){return a}});var r=n(7105);function a(e,t,n){for(var a=(0,r.buffer)(n,e.dtype),i=0;i<a.size;++i){var o=a.indexToLoc(i).slice(),s=o[0],u=o[2],c=t.locToIndex([s,u]);o[2]=t.values[c];var l=e.locToIndex(o);0<=l&&l<e.values.length&&(a.values[i]=e.values[l])}return a}},9075:function(e,t,n){"use strict";n.d(t,{Ce:function(){return u},o:function(){return o}});var r=n(7105),a=n(9341),i=n(9501),o=(0,a.b)((function(e,t){return e>t?1:0})),s=(0,i.j)(r.Greater,o,null,"bool"),u={kernelName:r.Greater,backendName:"cpu",kernelFunc:s}},6985:function(e,t,n){"use strict";n.d(t,{HL:function(){return o},V:function(){return u}});var r=n(7105),a=n(9341),i=n(9501),o=(0,a.b)((function(e,t){return e>=t?1:0})),s=(0,i.j)(r.GreaterEqual,o,null,"bool"),u={kernelName:r.GreaterEqual,backendName:"cpu",kernelFunc:s}},9090:function(e,t,n){"use strict";function r(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}n.d(t,{I:function(){return a},y:function(){return r}});var a={kernelName:n(7105).Identity,backendName:"cpu",kernelFunc:r}},9813:function(e,t,n){"use strict";n.d(t,{rO:function(){return o},zh:function(){return u}});var r=n(7105),a=n(9341),i=n(9501),o=(0,a.b)((function(e,t){return e<t?1:0})),s=(0,i.j)(r.Less,o,null,"bool"),u={kernelName:r.Less,backendName:"cpu",kernelFunc:s}},8734:function(e,t,n){"use strict";n.d(t,{lx:function(){return o},m3:function(){return u}});var r=n(7105),a=n(9341),i=n(9501),o=(0,a.b)((function(e,t){return e<=t?1:0})),s=(0,i.j)(r.LessEqual,o,null,"bool"),u={kernelName:r.LessEqual,backendName:"cpu",kernelFunc:s}},1491:function(e,t,n){"use strict";n.d(t,{b:function(){return a}});var r=n(7105);function a(e,t,n){var a=(t-e)/(n-1),i=r.util.makeZerosTypedArray(n,"float32");i[0]=e;for(var o=1;o<i.length;o++)i[o]=i[o-1]+a;return i}},8298:function(e,t,n){"use strict";n.d(t,{vX:function(){return o},xM:function(){return u}});var r=n(7105),a=n(422),i=n(1844),o=(0,a.a)((function(e){return Math.log(e)})),s=(0,i.O)(r.Log,o),u={kernelName:r.Log,backendName:"cpu",kernelFunc:s}},4771:function(e,t,n){"use strict";n.d(t,{B:function(){return a}});var r=n(7105);function a(e,t,n,a){for(var i=r.util.getTypedArrayFromDType(a,r.util.sizeFromShape(n)),o=0;o<i.length;++o){for(var s=o*t,u=e[s],c=0;c<t;++c){var l=e[s+c];(Number.isNaN(l)||l>u)&&(u=l)}i[o]=u}return i}},9518:function(e,t,n){"use strict";n.d(t,{eJ:function(){return u},wS:function(){return o}});var r=n(7105),a=n(9341),i=n(9501),o=(0,a.b)((function(e,t){return Math.max(e,t)})),s=(0,i.j)(r.Maximum,o),u={kernelName:r.Maximum,backendName:"cpu",kernelFunc:s}},8094:function(e,t,n){"use strict";n.d(t,{u0:function(){return u},vP:function(){return o}});var r=n(7105),a=n(9341),i=n(9501),o=(0,a.b)((function(e,t){return Math.min(e,t)})),s=(0,i.j)(r.Minimum,o),u={kernelName:r.Minimum,backendName:"cpu",kernelFunc:s}},8244:function(e,t,n){"use strict";n.d(t,{$3:function(){return o},Jp:function(){return u},f$:function(){return c}});var r=n(7105),a=n(9341),i=n(9501),o=(0,a.b)((function(e,t){return e*t})),s=(0,i.H)((function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})),u=(0,i.j)(r.Multiply,o,s),c={kernelName:r.Multiply,backendName:"cpu",kernelFunc:u}},4569:function(e,t,n){"use strict";n.d(t,{AF:function(){return u},uC:function(){return s}});var r=n(9439),a=n(7105),i=n(3193),o=n(8244);function s(e,t,n){var r=a.util.createScalarValue(-1,n);return(0,o.$3)([],t,r,e,n)}var u={kernelName:a.Neg,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.x;(0,i.H)(a,"neg");var o=s(n.data.get(a.dataId).values,a.shape,a.dtype),u=(0,r.Z)(o,2),c=u[0],l=u[1];return n.makeTensorInfo(l,a.dtype,c)}}},1566:function(e,t,n){"use strict";n.d(t,{Gj:function(){return o},nP:function(){return u}});var r=n(7105),a=n(9341),i=n(9501),o=(0,a.b)((function(e,t){return e!==t?1:0})),s=(0,i.j)(r.NotEqual,o,null,"bool"),u={kernelName:r.NotEqual,backendName:"cpu",kernelFunc:s}},9120:function(e,t,n){"use strict";n.d(t,{Iz:function(){return u},Qg:function(){return s}});var r=n(9439),a=n(7105),i=n(3193),o=n(5257);function s(e,t,n,i){for(var o=a.backend_util.computeOutAndReduceShapes(e,i),s=(0,r.Z)(o,2),u=s[0],c=s[1],l=(0,a.upcastType)(t,"int32"),d=a.util.makeZerosTypedArray(a.util.sizeFromShape(u),l),f=a.util.sizeFromShape(c),p=0;p<d.length;++p){for(var h=p*f,m=1,v=0;v<f;++v)m*=n[h+v];d[p]=m}return{outVals:d,outShape:u,outDtype:l}}var u={kernelName:a.Prod,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,u=t.x,c=r.axis,l=r.keepDims;(0,i.H)(u,"prod");var d=u.shape.length,f=a.util.parseAxisParam(c,u.shape),p=a.backend_util.getAxesPermutation(f,d),h=f,m=u,v=[];null!=p&&(m=(0,o.p)({inputs:{x:u},backend:n,attrs:{perm:p}}),v.push(m),h=a.backend_util.getInnerMostAxes(h.length,d));var g=n.data.get(m.dataId).values,y=s(m.shape,m.dtype,g,h),b=y.outVals,x=y.outShape,k=y.outDtype,w=x;return l&&(w=a.backend_util.expandShapeToKeepDim(x,f)),v.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(w,k,b)}}},6284:function(e,t,n){"use strict";n.d(t,{b:function(){return a}});var r=n(7105);function a(e,t,n,a){if(e===t||e<t&&n<0||t<e&&n>1)return r.util.makeZerosTypedArray(0,a);var i=Math.abs(Math.ceil((t-e)/n)),o=r.util.makeZerosTypedArray(i,a);t<e&&1===n&&(n=-1),o[0]=e;for(var s=1;s<o.length;s++)o[s]=o[s-1]+n;return o}},6241:function(e,t,n){"use strict";function r(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}n.d(t,{O:function(){return a},k:function(){return r}});var a={kernelName:n(7105).Real,backendName:"cpu",kernelFunc:r}},8105:function(e,t,n){"use strict";n.d(t,{FY:function(){return u},zd:function(){return o}});var r=n(7105),a=n(422),i=n(1844),o=(0,a.a)((function(e){return 1/Math.sqrt(e)})),s=(0,i.O)(r.Rsqrt,o),u={kernelName:r.Rsqrt,backendName:"cpu",kernelFunc:s}},8567:function(e,t,n){"use strict";n.d(t,{N:function(){return a}});var r=n(7105);function a(e,t,n,a,i,o,s,u,c,l){var d=[a/i,i],f=e.values,p=t.values;if(0===a)return(0,r.buffer)(n,t.dtype);var h=(0,r.buffer)(d,t.dtype);"string"===typeof c||"number"===typeof c?h.values.fill(c):"boolean"===typeof c&&h.values.fill(+c);for(var m=0;m<o;m++){for(var v=[],g=0,y=0;y<s;y++){var b=f[m*s+y];v.push(b),g+=b*u[y]}if(g<0||g>=a/i)throw new Error("Invalid indices: ".concat(v," does not index into ").concat(n));for(var x=0;x<i;x++)l?h.values[g*i+x]+=p[m*i+x]:h.values[g*i+x]=0===t.rank?p[0]:p[m*i+x]}return h}},294:function(e,t,n){"use strict";n.d(t,{BP:function(){return u},VY:function(){return o},XD:function(){return s}});var r=n(7105),a=n(422),i=n(1844),o=(0,a.a)((function(e){return 1/(1+Math.exp(-e))})),s=(0,i.A)(r.Sigmoid,(function(e){return 1/(1+Math.exp(-e))})),u={kernelName:r.Sigmoid,backendName:"cpu",kernelFunc:s}},2126:function(e,t,n){"use strict";n.d(t,{C6:function(){return c},rT:function(){return s},tP:function(){return u}});var r=n(9439),a=n(3433),i=n(7105),o=n(3193);function s(e,t,n,r,o){var s=i.slice_util.isSliceContinous(r,t,n),u=i.util.sizeFromShape(n),c=i.util.computeStrides(r);if(s){var l=i.slice_util.computeFlatOffset(t,c);return"string"===o?e.slice(l,l+u):e.subarray(l,l+u)}for(var d="string"===o?i.backend_util.fromUint8ToStringArray(e):e,f=(0,i.buffer)(r,o,d),p=(0,i.buffer)(n,o),h=0;h<p.size;++h){var m=p.indexToLoc(h),v=m.map((function(e,n){return e+t[n]}));p.set.apply(p,[f.get.apply(f,(0,a.Z)(v))].concat((0,a.Z)(m)))}return"string"===o?i.backend_util.fromStringArrayToUint8(p.values):p.values}function u(e){var t=e.inputs,n=e.backend,a=e.attrs,u=t.x,c=a.begin,l=a.size;(0,o.H)(u,"slice");var d=i.slice_util.parseSliceParams(u,c,l),f=(0,r.Z)(d,2),p=f[0],h=f[1];i.slice_util.assertParamsValid(u,p,h);var m=s(n.data.get(u.dataId).values,p,h,u.shape,u.dtype);return n.makeTensorInfo(h,u.dtype,m)}var c={kernelName:i.Slice,backendName:"cpu",kernelFunc:u}},8337:function(e,t,n){"use strict";n.d(t,{c:function(){return a}});var r=n(7105);function a(e,t,n,a,i,o,s){var u=t[0],c=o[0],l=new Array(c),d=new Array(u),f=t[1];if(0===c){if(0!==u)throw new Error(r.backend_util.getSparseFillEmptyRowsIndicesDenseShapeMismatch(u));return[r.util.getArrayFromDType(n,0),[0,f],r.util.getArrayFromDType(i,0),l,d]}for(var p=!0,h=0,m=new Array(c).fill(0),v=0;v<u;++v){var g=e[v*f];if(g<0)throw new Error(r.backend_util.getSparseFillEmptyRowsNegativeIndexErrorMessage(v,g));if(g>=c)throw new Error(r.backend_util.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(v,g,c));++m[g],p=p&&g>=h,h=g}for(var y=!0,b=0;b<c;++b){var x=0===m[b];l[b]=x,y=y&&!x,m[b]=Math.max(m[b],1),b>0&&(m[b]+=m[b-1])}if(y&&p){for(var k=e,w=a,S=0;S<u;++S)d[S]=S;return[k,[u,f],w,l,d]}for(var C=m[c-1],_=r.util.getArrayFromDType(n,C*f),I=r.util.getArrayFromDType(i,C),T=new Array(c).fill(0),E=0;E<u;++E){var N=e[E*f],O=T[N],A=(0===N?0:m[N-1])+O;T[N]++;for(var R=0;R<f;++R)_[A*f+R]=e[E*f+R];I[A]=a[E],d[E]=A}for(var P=0;P<c;++P){if(0===T[P]){var D=0===P?0:m[P-1];_[D*f+0]=P;for(var B=1;B<f;++B)_[D*f+B]=0;I[D]=s}}return[_,[C,f],I,l,d]}},3634:function(e,t,n){"use strict";n.d(t,{U:function(){return a}});var r=n(7105);function a(e,t,n,a,i){for(var o=r.util.sizeFromShape(a),s=t[0],u=i.length,c=[],l=1,d=-1,f=0;f<u;++f){var p=i[f];if(-1===p){if(-1!==d)throw new Error(r.backend_util.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(d,f));d=f,c.push(1)}else{if(p<0)throw new Error(r.backend_util.getSparseReshapeNegativeOutputDimErrorMessage(f,p));l*=p,c.push(p)}}if(-1!==d){if(l<=0)throw new Error(r.backend_util.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());var h=Math.trunc(o/l);if(l*h!==o)throw new Error(r.backend_util.getSparseReshapeInputOutputMultipleErrorMessage(a,c));c[d]=h}if(r.util.sizeFromShape(c)!==o)throw new Error(r.backend_util.getSparseReshapeInputOutputMismatchErrorMessage(a,c));var m=a.length,v=[];if(m>0){v[m-1]=1;for(var g=m-2;g>=0;--g)v[g]=v[g+1]*a[g+1]}var y=[];if(u>0){y[u-1]=1;for(var b=u-2;b>=0;--b)y[b]=y[b+1]*c[b+1]}for(var x=r.util.getArrayFromDType(n,s*u),k=0;k<s;++k){for(var w=0,S=0;S<m;++S)w+=e[k*m+S]*v[S];for(var C=0;C<u;++C)x[k*u+C]=Math.trunc(w/y[C]),w%=y[C]}return[x,[s,u],c]}},5440:function(e,t,n){"use strict";n.d(t,{V:function(){return a}});var r=n(7105);function a(e,t,n,a,i){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,u=a.length,c=[t[0],e.length/t[0]],l=c[1],d=u>0?i[u-1]+1:0,f=d;if(f<0)throw new Error(r.backend_util.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());var p=t.slice();p[0]=f;var h=p.reduce((function(e,t){return e*t}),1),m=r.util.getArrayFromDType(n,h);if(0===u)return f>0&&m.fill(s),[m,p];if(f<=0)throw new Error(r.backend_util.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());for(var v=0,g=1,y=0,b=i[v];;){var x=0;if(g<u){if(b===(x=i[g])){++g;continue}if(b>=x)throw new Error(r.backend_util.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(b<0||b>=f)throw new Error(r.backend_util.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(b,f));b>y&&m.fill(s,y*l,b*l);for(var k=v;k<g;++k){var w=a[k];if(w<0||w>=c[0])throw new Error(r.backend_util.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(k,a[k],c[0]));for(var S=0;S<l;S++)m[b*l+S]+=e[w*l+S]}if(o)for(var C=0;C<l;C++)m[b*l+C]/=g-v;if(v=g,y=b+1,b=x,++g>u)break}return y<f&&m.fill(s,y*l,f*l),[m,p]}},6126:function(e,t,n){"use strict";n.d(t,{cz:function(){return u},zT:function(){return o}});var r=n(7105),a=n(422),i=n(1844),o=(0,a.a)((function(e){return Math.sqrt(e)})),s=(0,i.A)(r.Sqrt,(function(e){return Math.sqrt(e)})),u={kernelName:r.Sqrt,backendName:"cpu",kernelFunc:s}},7497:function(e,t,n){"use strict";n.d(t,{t:function(){return i}});var r=n(3433),a=n(7105);function i(e,t,n,i){for(var o=(0,a.buffer)(e,t.dtype),s=0;s<o.size;s++){for(var u=o.indexToLoc(s),c=new Array(u.length),l=0;l<c.length;l++)c[l]=u[l]*n[l]+i[l];o.set.apply(o,[t.get.apply(t,c)].concat((0,r.Z)(u)))}return o}},8294:function(e,t,n){"use strict";n.d(t,{A:function(){return s}});var r=n(5671),a=n(3144),i=n(7105),o=function(){function e(t,n,a,o,s,u){(0,r.Z)(this,e),this.separator=i.util.encodeString(t),this.nGramWidths=n,this.leftPad=i.util.encodeString(a),this.rightPad=i.util.encodeString(o),this.padWidth=s,this.preserveShort=u}return(0,a.Z)(e,[{key:"getPadWidth",value:function(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}},{key:"getNumNGrams",value:function(e,t){var n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}},{key:"createNGrams",value:function(e,t,n,r,a,i){for(var o=this,s=function(s){var u=o.getPadWidth(i),c=Math.max(0,u-s),l=Math.max(0,u-(a-(s+1))),d=i-(c+l),f=t+(c>0?0:s-u),p=0;p+=c*o.leftPad.length;for(var h=0;h<d;++h)p+=e[f+h].length;p+=l*o.rightPad.length,p+=(c+l+d-1)*o.separator.length,n[r+s]=new Uint8Array(p);for(var m=n[r+s],v=0,g=function(e){return e.forEach((function(e){return m[v++]=e}))},y=0;y<c;++y)g(o.leftPad),g(o.separator);for(var b=0;b<d-1;++b)g(e[f+b]),g(o.separator);if(d>0){g(e[f+d-1]);for(var x=0;x<l;++x)g(o.separator),g(o.rightPad)}else{for(var k=0;k<l-1;++k)g(o.rightPad),g(o.separator);g(o.rightPad)}},u=0;u<a;++u)s(u)}},{key:"compute",value:function(e,t){var n=this,r=e.length,a=t.length;if(a>0){var o=t[0];if(0!==o)throw new Error("First split value must be 0, got ".concat(o));for(var s=1;s<a;++s){var u=t[s]>=o;if(!(u=u&&t[s]<=r))throw new Error("Invalid split value ".concat(t[s],", must be in [").concat(o,", ").concat(r,"]"));o=t[s]}if(o!==r)throw new Error("Last split value must be data size. Expected ".concat(r,", got ").concat(o))}var c=a-1,l=i.util.getArrayFromDType("int32",a);if(0===r||0===a){for(var d=new Array(r),f=0;f<=c;++f)l[f]=0;return[d,l]}l[0]=0;for(var p=function(e){var r=t[e]-t[e-1],a=0;n.nGramWidths.forEach((function(e){a+=n.getNumNGrams(r,e)})),n.preserveShort&&r>0&&0===a&&(a=1),l[e]=l[e-1]+a},h=1;h<=c;++h)p(h);for(var m=new Array(l[c]),v=function(r){var a=t[r],i=l[r];if(n.nGramWidths.forEach((function(o){var s=t[r+1]-t[r],u=n.getNumNGrams(s,o);n.createNGrams(e,a,m,i,u,o),i+=u})),n.preserveShort&&i===l[r]){var o=t[r+1]-t[r];if(0===o)return"continue";var s=o+2*n.padWidth;n.createNGrams(e,a,m,i,1,s)}},g=0;g<c;++g)v(g);return[m,l]}}]),e}();function s(e,t,n,r,a,i,s,u){return new o(n,r,a,i,s,u).compute(e,t)}},998:function(e,t,n){"use strict";n.d(t,{Q:function(){return i}});var r=n(7105);function a(e,t,n,r){if(e.length)if(0!==t.length)if(1!==t.length){for(var a=0,i=0;i<e.length+1;i++)if(i===e.length||-1!==t.indexOf(e[i])){var o=e.subarray(a,i);n&&0===o.length||r.push(o),a=i+1}}else{for(var s=t[0],u=e.indexOf(s);-1!==u;){var c=e.subarray(0,u);n&&0===c.length||r.push(c),u=(e=e.subarray(u+1)).indexOf(s)}n&&0===e.length||r.push(e)}else for(var l=0;l<e.length;++l)r.push(e.subarray(l,l+1))}function i(e,t,n){for(var i=e.length,o=[],s=0,u=0,c=new Array(i),l=0;l<i;++l){var d=o.length;a(e[l],t,n,o);var f=o.length-d;c[l]=f,s+=f,u=Math.max(u,f)}for(var p=r.util.getArrayFromDType("int32",2*s),h=new Array(s),m=[i,u],v=0,g=0;g<i;++g)for(var y=0;y<c[g];++y)p[2*v]=g,p[2*v+1]=y,h[v]=o[v],++v;return[p,h,m]}},1489:function(e,t,n){"use strict";n.d(t,{h:function(){return a}});var r=n(7105);function a(e,t){for(var n=r.util.getArrayFromDType("int32",e.length),a=0;a<e.length;++a)n[a]=r.util.fingerPrint64(e[a]).modulo(t).getLowBitsUnsigned();return n}},1802:function(e,t,n){"use strict";n.d(t,{GR:function(){return c},VY:function(){return o},lu:function(){return u}});var r=n(7105),a=n(9341),i=n(9501),o=(0,a.b)((function(e,t){return e-t})),s=(0,i.H)((function(e,t,n,r){return{real:e-n,imag:t-r}})),u=(0,i.j)(r.Sub,o,s),c={kernelName:r.Sub,backendName:"cpu",kernelFunc:u}},7129:function(e,t,n){"use strict";n.d(t,{R:function(){return a}});var r=n(7105);function a(e,t){for(var n=new Array(e.rank),a=0;a<n.length;a++)n[a]=e.shape[a]*t[a];for(var i=(0,r.buffer)(n,e.dtype),o=0;o<i.values.length;++o){for(var s=i.indexToLoc(o),u=new Array(e.rank),c=0;c<u.length;c++)u[c]=s[c]%e.shape[c];var l=e.locToIndex(u);i.values[o]=e.values[l]}return i}},9516:function(e,t,n){"use strict";n.d(t,{W:function(){return o}});var r=n(7105),a=function(e,t){var n=t.value-e.value;return 0===n?e.index-t.index:n};function i(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;o>n;){if(o-n>600){var s=o-n+1,u=t-n+1,c=Math.log(s),l=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*l*(s-l)/s)*Math.sign(u-s/2),f=Math.max(n,Math.floor(t-u*l/s+d)),p=Math.min(o,Math.floor(t+(s-u)*l/s+d));i(e,t,f,p)}var h=e[t],m=n,v=o;for(r.util.swap(e,n,t),a(e[o],h)>0&&r.util.swap(e,n,o);m<v;){for(r.util.swap(e,m,v),m++,v--;a(e[m],h)<0;)m+=1;for(;a(e[v],h)>0;)v-=1}0===a(e[n],h)?r.util.swap(e,n,v):(v+=1,r.util.swap(e,v,o)),v<=t&&(n=v+1),t<=v&&(o=v-1)}}function o(e,t,n,o,s){for(var u=t[t.length-1],c=e.length/u,l=u,d=r.util.getTypedArrayFromDType(n,c*o),f=r.util.getTypedArrayFromDType("int32",c*o),p=function(t){var n=t*l,r=e.subarray(n,n+l),u=new Array(r.length);r.forEach((function(e,t){return u[t]={value:e,index:t}})),o<u.length&&(i(u,o),u=u.slice(0,o)),s&&u.sort(a);for(var c=t*o,p=d.subarray(c,c+o),h=f.subarray(c,c+o),m=0;m<o;m++)p[m]=u[m].value,h[m]=u[m].index},h=0;h<c;h++)p(h);var m=t.slice();return m[m.length-1]=o,[(0,r.buffer)(m,n,d),(0,r.buffer)(m,"int32",f)]}},5257:function(e,t,n){"use strict";n.d(t,{b:function(){return s},p:function(){return o}});var r=n(7105),a=n(3193),i=n(1103);function o(e){var t=e.inputs,n=e.attrs,r=e.backend,o=t.x,s=n.perm;(0,a.H)(o,"transpose");for(var u=o.shape.length,c=new Array(u),l=0;l<c.length;l++)c[l]=o.shape[s[l]];var d=r.data.get(o.dataId).values,f=(0,i.H)(d,o.shape,o.dtype,s,c);return{dataId:r.write(f,c,o.dtype),shape:c,dtype:o.dtype}}var s={kernelName:r.Transpose,backendName:"cpu",kernelFunc:o}},1103:function(e,t,n){"use strict";n.d(t,{H:function(){return a}});var r=n(7105);function a(e,t,n,a,i){for(var o=t.length,s=r.util.sizeFromShape(t),u=r.util.computeStrides(t),c=r.util.computeStrides(i),l=r.util.getTypedArrayFromDType(n,r.util.sizeFromShape(i)),d=0;d<s;++d){for(var f=r.util.indexToLoc(d,o,u),p=new Array(f.length),h=0;h<p.length;h++)p[h]=f[a[h]];l[r.util.locToIndex(p,o,c)]=e[d]}return l}},4242:function(e,t,n){"use strict";n.d(t,{S:function(){return a}});var r=n(7105);function a(e,t,n,a){for(var i=r.util.parseAxisParam(t,n)[0],o=[1,n[0],1],s=0;s<i;s++)o[0]*=n[s];o[1]=n[i];for(var u=i+1;u<n.length;u++)o[2]*=n[u];for(var c={},l=new Int32Array(n[i]),d=new r.TensorBuffer(o,a,e),f=[],p=1===o[0]&&1===o[2],h=0;h<n[i];h++){var m=void 0;if(p)m=e[h].toString();else{for(var v=[],g=0;g<o[0];g++)for(var y=0;y<o[2];y++)v.push(d.get(g,h,y));m=v.join(",")}if(void 0!==c[m])l[h]=c[m];else{var b=Object.keys(c).length;c[m]=b,l[h]=b,f.push(h)}}var x=o.slice();x[1]=Object.keys(c).length;var k=new r.TensorBuffer(x,a);f.forEach((function(e,t){for(var n=0;n<o[0];n++)for(var r=0;r<o[2];r++)k.set(d.get(n,e,r),n,t,r)}));var w=n.slice();return w[i]=x[1],{outputValues:k.values,outputShape:w,indices:l}}},9341:function(e,t,n){"use strict";n.d(t,{b:function(){return a}});var r=n(7105);function a(e){return function(t,n,a,i,o){var s=r.backend_util.assertAndGetBroadcastShape(t,n),u=s.length,c=r.util.computeStrides(s),l=r.util.sizeFromShape(s),d=r.util.getTypedArrayFromDType(o,l),f=t.length,p=n.length,h=r.util.computeStrides(t),m=r.util.computeStrides(n),v=r.backend_util.getBroadcastDims(t,s),g=r.backend_util.getBroadcastDims(n,s);if(v.length+g.length===0)for(var y=0;y<d.length;++y)d[y]=e(a[y%a.length],i[y%i.length]);else for(var b=function(t){var n=r.util.indexToLoc(t,u,c),o=n.slice(-f);v.forEach((function(e){return o[e]=0}));var s=r.util.locToIndex(o,f,h),l=n.slice(-p);g.forEach((function(e){return l[e]=0}));var y=r.util.locToIndex(l,p,m);d[t]=e(a[s],i[y])},x=0;x<d.length;++x)b(x);return[d,s]}}},9501:function(e,t,n){"use strict";n.d(t,{H:function(){return c},j:function(){return u}});var r=n(9439),a=n(7105),i=n(3193),o=n(570),s=n(6545);function u(e,t,n,u){return null==n?function(n){var o=n.inputs,s=n.backend,c=o.a,l=o.b,d=s;(0,i.H)([c,l],e);var f=d.data.get(c.dataId).values,p=d.data.get(l.dataId).values,h="string"===c.dtype?a.backend_util.fromUint8ToStringArray(f):f,m="string"===c.dtype?a.backend_util.fromUint8ToStringArray(p):p,v=u||c.dtype,g=t(c.shape,l.shape,h,m,v),y=(0,r.Z)(g,2),b=y[0],x=y[1];return d.makeTensorInfo(x,v,b)}:function(e){var a=e.inputs,i=e.backend,c=a.a,l=a.b,d=i;if("complex64"===c.dtype||"complex64"===l.dtype){var f=(0,o.p)({inputs:{x:c},backend:d,attrs:{dtype:"complex64"}}),p=d.data.get(f.dataId),h=p.complexTensorInfos.real,m=p.complexTensorInfos.imag,v=d.data.get(h.dataId).values,g=d.data.get(m.dataId).values,y=(0,o.p)({inputs:{x:l},backend:d,attrs:{dtype:"complex64"}}),b=d.data.get(y.dataId),x=b.complexTensorInfos.real,k=b.complexTensorInfos.imag,w=d.data.get(x.dataId).values,S=d.data.get(k.dataId).values,C=n(c.shape,l.shape,v,g,w,S),_=(0,r.Z)(C,3),I=_[0],T=_[1],E=_[2],N=d.makeTensorInfo(E,"float32",I),O=d.makeTensorInfo(E,"float32",T),A=(0,s.P)({inputs:{real:N,imag:O},backend:d});return d.disposeIntermediateTensorInfo(f),d.disposeIntermediateTensorInfo(y),d.disposeIntermediateTensorInfo(N),d.disposeIntermediateTensorInfo(O),A}var R=d.data.get(c.dataId).values,P=d.data.get(l.dataId).values,D=u||c.dtype,B=t(c.shape,l.shape,R,P,D),M=(0,r.Z)(B,2),F=M[0],L=M[1];return d.makeTensorInfo(L,D,F)}}function c(e){return function(t,n,r,i,o,s){var u=a.backend_util.assertAndGetBroadcastShape(t,n),c=a.util.sizeFromShape(u),l=u.length,d=a.util.computeStrides(u),f=a.util.getTypedArrayFromDType("float32",c),p=a.util.getTypedArrayFromDType("float32",c),h=a.backend_util.getBroadcastDims(t,u),m=a.backend_util.getBroadcastDims(n,u),v=a.backend_util.mergeRealAndImagArrays(r,i),g=a.backend_util.mergeRealAndImagArrays(o,s),y=t.length,b=a.util.computeStrides(t),x=n.length,k=a.util.computeStrides(n);if(h.length+m.length===0)for(var w=0;w<f.length;w++){var S=w%v.length,C=w%g.length,_=e(v[2*S],v[2*S+1],g[2*C],g[2*C+1]);f[w]=_.real,p[w]=_.imag}else for(var I=function(t){var n=a.util.indexToLoc(t,l,d),r=n.slice(-y);h.forEach((function(e){return r[e]=0}));var i=a.util.locToIndex(r,y,b),o=n.slice(-x);m.forEach((function(e){return o[e]=0}));var s=a.util.locToIndex(o,x,k),u=e(v[2*i],v[2*i+1],g[2*s],g[2*s+1]);f[t]=u.real,p[t]=u.imag},T=0;T<f.length;T++)I(T);return[f,p,u]}}},422:function(e,t,n){"use strict";n.d(t,{a:function(){return a}});var r=n(7105);function a(e){return function(t,n,a){for(var i=r.util.getTypedArrayFromDType(n,t.length),o=0;o<t.length;++o)i[o]=e(t[o],a);return i}}},1844:function(e,t,n){"use strict";n.d(t,{A:function(){return i},O:function(){return o}});var r=n(7105),a=n(3193);function i(e,t,n){return function(i){var o=i.inputs,s=i.attrs,u=i.backend,c=o.x;if((0,a.H)(c,e),"string"===c.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");for(var l=u,d=l.data.get(c.dataId).values,f=r.util.sizeFromShape(c.shape),p=n||c.dtype,h=r.util.getArrayFromDType(p,f),m=0;m<f;++m)h[m]=t(d[m],s);return l.makeTensorInfo(c.shape,p,h)}}function o(e,t,n){return function(r){var i=r.inputs,o=r.attrs,s=r.backend,u=i.x;if((0,a.H)(u,e),"string"===u.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");var c=s,l=c.data.get(u.dataId).values,d=n||u.dtype,f=t(l,d,o);return c.makeTensorInfo(u.shape,d,f)}}},4842:function(e,t,n){"use strict";n.d(t,{l:function(){return i}});var r=n(7105),a=n(6545);function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){var o=i(e,t,"float32"),s=i(e,t,"float32");return(0,a.P)({inputs:{real:o,imag:s},backend:e})}var u=r.util.makeZerosTypedArray(r.util.sizeFromShape(t),n);return e.makeTensorInfo(t,n,u)}},8832:function(e,t,n){"use strict";n.r(t),n.d(t,{GPGPUContext:function(){return Rt},MathBackendWebGL:function(){return Lr},forceHalfFloat:function(){return zr},gpgpu_util:function(){return a},setWebGLContext:function(){return x},version_webgl:function(){return Vr},webgl:function(){return Zr},webgl_util:function(){return r}});var r={};n.r(r),n.d(r,{assertNotComplex:function(){return ke},bindCanvasToFramebuffer:function(){return Q},bindColorTextureToFramebuffer:function(){return $},bindTextureToProgramUniformSampler:function(){return Y},bindTextureUnit:function(){return H},bindVertexBufferToProgramAttribute:function(){return G},callAndCheck:function(){return I},canBeRepresented:function(){return T},createFragmentShader:function(){return A},createFramebuffer:function(){return W},createProgram:function(){return M},createStaticIndexBuffer:function(){return z},createStaticVertexBuffer:function(){return V},createTexture:function(){return U},createVertexShader:function(){return O},getBatchDim:function(){return ae},getExtensionOrThrow:function(){return N},getFramebufferErrorMessage:function(){return te},getMaxTexturesInShader:function(){return pe},getNumChannels:function(){return Z},getProgramUniformLocation:function(){return K},getProgramUniformLocationOrThrow:function(){return X},getRowsCols:function(){return ie},getShapeAs3D:function(){return oe},getTextureShapeFromLogicalShape:function(){return se},getWebGLDisjointQueryTimerVersion:function(){return he},getWebGLErrorMessage:function(){return E},getWebGLMaxTextureSize:function(){return le},hasExtension:function(){return me},isCapableOfRenderingToFloatTexture:function(){return ge},isDownloadFloatTextureEnabled:function(){return ye},isReshapeFree:function(){return ce},isWebGLFenceEnabled:function(){return xe},isWebGLVersionEnabled:function(){return ve},linkProgram:function(){return F},logShaderSourceAndInfoLog:function(){return B},resetMaxTextureSize:function(){return de},resetMaxTexturesInShader:function(){return fe},unbindColorTextureFromFramebuffer:function(){return J},unbindTextureUnit:function(){return q},validateFramebuffer:function(){return ee},validateProgram:function(){return L},validateTextureSize:function(){return j}});var a={};n.r(a),n.d(a,{bindVertexProgramAttributeStreams:function(){return Ct},createBufferFromOutputTexture:function(){return Tt},createFloat16MatrixTexture:function(){return gt},createFloat16PackedMatrixTexture:function(){return St},createFloat32MatrixTexture:function(){return mt},createIndexBuffer:function(){return ft},createPackedMatrixTexture:function(){return kt},createUnsignedBytesMatrixTexture:function(){return bt},createVertexBuffer:function(){return dt},createVertexShader:function(){return lt},downloadByteEncodedFloatMatrixFromOutputTexture:function(){return Nt},downloadFloat32MatrixFromBuffer:function(){return Et},downloadMatrixFromPackedOutputTexture:function(){return At},downloadPackedMatrixFromBuffer:function(){return Ot},getInternalFormatForFloat16MatrixTexture:function(){return vt},getInternalFormatForFloat16PackedMatrixTexture:function(){return wt},getInternalFormatForFloat32MatrixTexture:function(){return ht},getInternalFormatForPackedMatrixTexture:function(){return xt},getInternalFormatForUnsignedBytesMatrixTexture:function(){return yt},uploadDenseMatrixToTexture:function(){return _t},uploadPixelDataToTexture:function(){return It}});var i,o,s,u=n(7105),c=n(9439),l=n(4165),d=n(3433),f=n(5861),p=n(5671),h=n(3144),m=n(7326),v=n(136),g=n(9388),y={},b={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function x(e,t){y[e]=t}function k(e,t){if(!(e in y)||null!=t){var n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var n=null==t?function(e){if("undefined"!==typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e):t;if(n.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete y[e]}),!1),1===e)return n.getContext("webgl",b)||n.getContext("experimental-webgl",b);return n.getContext("webgl2",b)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;y[e]=n}var r=y[e];return null==r||r.isContextLost()?(delete y[e],k(e)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),y[e])}function w(e,t){return[t,e]}function S(e){var t=u.util.sizeFromShape(e),n=Math.ceil(t/4);return u.util.sizeToSquarishShape(n)}function C(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function _(e,t){var n,r,a,i,o,s,c,l,d,f,p=e;return 2===(0,u.env)().getNumber("WEBGL_VERSION")?(n=p.R32F,r=p.R16F,a=p.RGBA16F,i=p.RGBA32F,o=p.RED,c=4,l=1,d=p.HALF_FLOAT,f=p.FLOAT,s=p.RGBA8):(n=e.RGBA,r=e.RGBA,a=e.RGBA,i=p.RGBA,o=e.RGBA,c=4,l=4,d=null!=t?t.HALF_FLOAT_OES:null,f=e.FLOAT,s=e.RGBA),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:s,downloadUnpackNumChannels:c,defaultNumChannels:l,textureTypeHalfFloat:d,textureTypeFloat:f}}function I(e,t){var n=t();return(0,u.env)().getBool("DEBUG")&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+E(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(i||(i={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(o||(o={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(s||(s={}));function T(e){return!!((0,u.env)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function E(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}function N(e,t){return ne(e,(function(){return e.getExtension(t)}),'Extension "'+t+'" not supported on this browser.')}function O(e,t){var n=ne(e,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(I(e,(function(){return e.shaderSource(n,t)})),I(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function A(e,t){var n=ne(e,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(I(e,(function(){return e.shaderSource(n,t)})),I(e,(function(){return e.compileShader(n)})),(0,u.env)().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw B(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}var R,P,D=/ERROR: [0-9]+:([0-9]+):/g;function B(e,t){var n=D.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);for(var r=+n[1],a=e.split("\n"),i=a.length.toString().length+2,o=a.map((function(e,t){return u.util.rightPad((t+1).toString(),i)+e})),s=0,c=0;c<o.length;c++)s=Math.max(o[c].length,s);var l=o.slice(0,r-1),d=o.slice(r-1,r),f=o.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(u.util.rightPad(d[0],s)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(f.join("\n"))}function M(e){return ne(e,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}function F(e,t){if(I(e,(function(){return e.linkProgram(t)})),!(0,u.env)().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function L(e,t){if(I(e,(function(){return e.validateProgram(t)})),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function V(e,t){var n=ne(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return I(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),I(e,(function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}function z(e,t){var n=ne(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return I(e,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)})),I(e,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}function Z(){return 2===(0,u.env)().getNumber("WEBGL_VERSION")?1:4}function U(e){return ne(e,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}function j(e,t){var n=(0,u.env)().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n){var a="[".concat(e,"x").concat(t,"]"),i="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+a+" greater than WebGL maximum on this browser / GPU "+i+".")}}function W(e){return ne(e,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}function G(e,t,n,r,a,i,o){var s=e.getAttribLocation(t,n);return-1!==s&&(I(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),I(e,(function(){return e.vertexAttribPointer(s,a,e.FLOAT,!1,i,o)})),I(e,(function(){return e.enableVertexAttribArray(s)})),!0)}function H(e,t,n){re(e,n),I(e,(function(){return e.activeTexture(e.TEXTURE0+n)})),I(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)}))}function q(e,t){re(e,t),I(e,(function(){return e.activeTexture(e.TEXTURE0+t)})),I(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function X(e,t,n){return ne(e,(function(){return e.getUniformLocation(t,n)}),'uniform "'+n+'" not present in program.')}function K(e,t,n){return e.getUniformLocation(t,n)}function Y(e,t,n,r){I(e,(function(){return H(e,t,r)})),I(e,(function(){return e.uniform1i(n,r)}))}function Q(e){I(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)})),I(e,(function(){return e.viewport(0,0,e.canvas.width,e.canvas.height)})),I(e,(function(){return e.scissor(0,0,e.canvas.width,e.canvas.height)}))}function $(e,t,n){I(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),I(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}))}function J(e,t){I(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)})),I(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function ee(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+te(e,t))}function te(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}function ne(e,t,n){var r=I(e,(function(){return t()}));if(null==r)throw new Error(n);return r}function re(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){var a="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(a,"."))}}function ae(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return u.util.sizeFromShape(e.slice(0,e.length-t))}function ie(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function oe(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[ae(e)].concat((0,d.Z)(ie(e)))),t}function se(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,u.env)().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(n*=2,1===(e=e.map((function(t,n){return n>=e.length-2?u.util.nearestLargerEven(e[n]):e[n]}))).length&&(e=[2,e[0]])),2!==e.length){var r=u.util.squeezeShape(e);e=r.newShape}var a=u.util.sizeFromShape(e);if(e.length<=1&&a<=n)return[1,a];if(2===e.length&&e[0]<=n&&e[1]<=n)return e;if(3===e.length&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){var i=ae(e),o=2,s=2;if(e.length){var l=ie(e),d=(0,c.Z)(l,2);o=d[0],s=d[1]}return a=i*(o/2)*(s/2),u.util.sizeToSquarishShape(a).map((function(e){return 2*e}))}return u.util.sizeToSquarishShape(a)}function ue(e){return e%2===0}function ce(e,t){if(e=e.slice(-2),t=t.slice(-2),u.util.arraysEqual(e,t))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(ue(n)&&ue(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&ue(e[0])&&ue(t[0])}function le(e){if(null==R){var t=k(e);R=t.getParameter(t.MAX_TEXTURE_SIZE)}return R}function de(){R=null}function fe(){P=null}function pe(e){if(null==P){var t=k(e);P=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,P)}function he(e){if(0===e)return 0;var t=k(e);return me(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:me(t,"EXT_disjoint_timer_query")?1:0}function me(e,t){return null!=e.getExtension(t)}function ve(e){try{if(null!=k(e))return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function ge(e){if(0===e)return!1;var t=k(e);if(1===e){if(!me(t,"OES_texture_float"))return!1}else if(!me(t,"EXT_color_buffer_float"))return!1;return be(t)}function ye(e){if(0===e)return!1;var t=k(e);if(1!==e){if(me(t,"EXT_color_buffer_float"))return be(t);var n="EXT_color_buffer_half_float";if(me(t,n)){var r=t.getExtension(n);return function(e,t){var n=_(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);var a=1,i=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,a,i,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(o),s}(t,r)}return!1}return!!me(t,"OES_texture_float")&&(!!me(t,"WEBGL_color_buffer_float")&&be(t))}function be(e){var t=_(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function xe(e){return 2===e&&null!=k(e).fenceSync}function ke(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&u.util.assert("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors ")+"in the WebGL backend."}))}))}var we=(0,u.env)();function Se(){var e,t,n,r,a,i,o,s,c,l;return 2===(0,u.env)().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",i="outputColor",o="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",c="",l="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",o="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",c="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",l="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:c,defineRound:l}}function Ce(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=u.util.computeStrides(t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / ").concat(t),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(t):"index -= ".concat(e[a]," * ").concat(t);return"".concat(i,"; ").concat(o,";")})).join("")}function _e(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=u.util.computeStrides(t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / outShapeStrides[").concat(a,"]"),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * outShapeStrides[").concat(a,"]"):"index -= ".concat(e[a]," * outShapeStrides[").concat(a,"]");return"".concat(i,"; ").concat(o,";")})).join("")}function Ie(e,t){var n=e.length,r=e.map((function(e){return"".concat(t,"[").concat(e,"]")})),a=new Array(n-1);a[n-2]=r[n-1];for(var i=n-3;i>=0;--i)a[i]="(".concat(a[i+1]," * ").concat(r[i+1],")");return a}function Te(e){var t=u.util.computeStrides(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}we.registerFlag("HAS_WEBGL",(function(){return we.getNumber("WEBGL_VERSION")>0})),we.registerFlag("WEBGL_VERSION",(function(){return ve(2)?2:ve(1)?1:0})),we.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(function(){return!1})),we.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===we.get("WEBGL_VERSION")})),we.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),we.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),we.registerFlag("WEBGL_PACK",(function(){return we.getBool("HAS_WEBGL")})),we.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return we.getBool("WEBGL_PACK")})),we.registerFlag("WEBGL_PACK_CLIP",(function(){return we.getBool("WEBGL_PACK")})),we.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return we.getBool("WEBGL_PACK")})),we.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return we.getBool("WEBGL_PACK")})),we.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return we.getBool("WEBGL_PACK")})),we.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return we.getBool("WEBGL_PACK")})),we.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return we.getBool("WEBGL_PACK")})),we.registerFlag("WEBGL_PACK_REDUCE",(function(){return we.getBool("WEBGL_PACK")})),we.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return we.getBool("WEBGL_PACK")})),we.registerFlag("WEBGL_CONV_IM2COL",(function(){return we.getBool("WEBGL_PACK")})),we.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return le(we.getNumber("WEBGL_VERSION"))})),we.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return pe(we.getNumber("WEBGL_VERSION"))})),we.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=we.getNumber("WEBGL_VERSION");return 0===e?0:he(e)})),we.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return we.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!u.device_util.isMobile()})),we.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return ge(we.getNumber("WEBGL_VERSION"))})),we.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!we.getBool("WEBGL_FORCE_F16_TEXTURES")&&we.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),we.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return ye(we.getNumber("WEBGL_VERSION"))})),we.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return xe(we.getNumber("WEBGL_VERSION"))})),we.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return we.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),we.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(function(){return-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(e,"."))})),we.registerFlag("WEBGL_FLUSH_THRESHOLD",(function(){return u.device_util.isMobile()?1:-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+"manual flush) or at least 0, but got ".concat(e,"."))})),we.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 128})),we.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(function(){return!1})),we.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 1e5})),we.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(function(){return 128}));var Ee="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",Ne=u.backend_util.getBroadcastDims;function Oe(e,t,n){var r=[];if(e.forEach((function(e){var t=u.util.sizeFromShape(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(r.push("uniform sampler2D ".concat(e.name,";")),r.push("uniform int offset".concat(e.name,";"))),n.enableShapeUniforms){switch(Ke(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape).uniformShape.length){case 1:r.push("uniform int ".concat(e.name,"Shape;"));break;case 2:r.push("uniform ivec2 ".concat(e.name,"Shape;"));break;case 3:r.push("uniform ivec3 ".concat(e.name,"Shape;"));break;case 4:r.push("uniform ivec4 ".concat(e.name,"Shape;"))}r.push("uniform ivec2 ".concat(e.name,"TexShape;"))}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((function(e){r.push("uniform ".concat(e.type," ").concat(e.name).concat(e.arrayIndex?"[".concat(e.arrayIndex,"]"):"",";"))}));var a,i,o=r.join("\n"),s=e.map((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a="";a+=n?Re(e,r):Ae(e,r);var i=e.shapeInfo.logicalShape,o=t.logicalShape;i.length<=o.length&&(a+=n?He(e,t):qe(e,t));return a}(e,t,n.packedInputs,n.enableShapeUniforms)})).join("\n"),c=t.texShape,l=Se(),d=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(l),f=function(e){return"".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(Pe,"\n    ").concat(De,"\n    ").concat(Be,"\n  ")}(l);return t.isPacked?(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===r[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(r[1],".0);\n      }\n    ");if(1===r[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(r[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      return 2 * (resTexRC.x * ").concat(r[1]," + resTexRC.y);\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(u.util.arraysEqual(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(r[0],", ").concat(r[1],"));\n      }\n    ");var a=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[2]/2),i=a*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";for(var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[e.length-1]/2),i=a*Math.ceil(e[e.length-2]/2),o=i,s="",u="b, r, c",c=2;c<e.length-1;c++)o*=e[e.length-c-1],s="\n      int b".concat(c," = index / ").concat(o,";\n      index -= b").concat(c," * ").concat(o,";\n    ")+s,u="b".concat(c,", ")+u;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      ").concat(s,"\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec").concat(e.length,"(").concat(u,");\n    }\n  ")}(e,t,n)}}(t.logicalShape,c,n.enableShapeUniforms),i=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(l)):(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    ");if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){if(u.util.arraysEqual(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    ");if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ");if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ");if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n){var r=_e(["r","c","d"],e);return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(r,"\n    return ivec3(r, c, d);\n  }\n")}var a=Ce(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t,n);case 4:return function(e,t,n){if(n){var r=_e(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(r,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}var a=Ce(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t,n);case 5:return function(e,t){var n=Ce(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){var n=Ce(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,c,n.enableShapeUniforms),i=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(l)),n.packedInputs&&(f+=Me),[f,d,i,o,a,s,n.userCode].join("\n")}function Ae(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.shapeInfo.logicalShape;switch(n.length){case 0:return Le(e,t);case 1:return Ve(e,t);case 2:return ze(e,t);case 3:return Ze(e,t);case 4:return Ue(e,t);case 5:return je(e);case 6:return We(e);default:throw new Error("".concat(n.length,"-D input sampling")+" is not yet supported")}}function Re(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=Se();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,i=Se();if(t)return"\n    vec4 ".concat(r,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ");var o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return"\n    vec4 ".concat(r,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(o[0],", ").concat(o[1],", index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=i[0],s=i[1],c=Se();if(null!=i&&u.util.arraysEqual(n,i))return t?"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n\n        return ").concat(c.texture2D,"(").concat(r,", uv);\n      }\n    "):"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n\n        return ").concat(c.texture2D,"(").concat(r,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(a,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(c.texture2D,"(").concat(r,", uv);\n    }\n  ");var l=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],d=Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(d,", ").concat(l[0],", ").concat(l[1],", row, col);\n      return ").concat(c.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);case 3:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(1===n[0]){var s=[1,2],u=Ye(e,n.slice(1)),c=["b","row","col"];return"\n        ".concat(Re(u,t),"\n        vec4 ").concat(a,"(int b, int row, int col) {\n          return ").concat(a,"(").concat(Qe(c,s),");\n        }\n      ")}var l=Se();if(t)return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ");var d=o[0],f=o[1],p=Math.ceil(n[2]/2),h=p*Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(d,", ").concat(f,", ").concat(h,", ").concat(p,", b, row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);default:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=Se();if(t)return"\n    vec4 ".concat(r,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ");for(var i=e.shapeInfo.logicalShape,o=i.length,s=e.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],c=u[0],l=u[1],d=Math.ceil(i[o-1]/2),f=d*Math.ceil(i[o-2]/2),p="int b, int row, int col",h="b * ".concat(f," + (row / 2) * ").concat(d," + (col / 2)"),m=2;m<o-1;m++)p="int b".concat(m,", ")+p,f*=i[o-m-1],h="b".concat(m," * ").concat(f," + ")+h;return"\n    vec4 ".concat(r,"(").concat(p,") {\n      int index = ").concat(h,";\n      int texR = index / ").concat(l,";\n      int texC = index - texR * ").concat(l,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(l,", ").concat(c,");\n      return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t)}}var Pe="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",De="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Be="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Me="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function Fe(e){return"offset".concat(e)}function Le(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(r,"() {return ").concat(n,";}");var a=(0,c.Z)(e.shapeInfo.texShape,2),i=a[0],o=a[1];if(1===i&&1===o)return"\n      float ".concat(r,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=Fe(n);if(t)return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");var u=(0,c.Z)(e.shapeInfo.texShape,2),l=u[0],d=u[1];return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(l,", ").concat(d,", ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function Ve(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int index) {\n        ").concat(Ge(e),"\n      }\n    ");var a=e.shapeInfo.texShape,i=a[0],o=a[1];if(1===o&&1===i)return"\n      float ".concat(r,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=Fe(n);return 1===o?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / ").concat(i,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):1===i?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / ").concat(o,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):t?"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  "):"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(i,", ").concat(o,", index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function ze(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape;if(null!=i&&u.util.arraysEqual(n,i)){if(t)return"\n      float ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var o=i[0],s=i[1];return"\n    float ".concat(a,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}var c=u.util.squeezeShape(n),l=c.newShape,d=c.keptDims,f=l;if(f.length<n.length){var p=Ye(e,f);return"\n      ".concat(Ae(p,t),"\n      float ").concat(a,"(int row, int col) {\n        return ").concat(a,"(").concat(Qe(["row","col"],d),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(Ge(e),"\n      }\n    ");var h=i[0],m=i[1],v=Fe(r);return 1===m?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(r,"TexShape[0]));\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(h,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):1===h?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(r,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(m,".0, 0.5);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):t?"\n      float ".concat(a,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(r,"Shape[1] + col + ").concat(v,";\n        vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n  float ".concat(a,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(v,";\n    vec2 uv = uvFromFlat(").concat(h,", ").concat(m,", index);\n    return sampleTexture(").concat(r,", uv);\n  }\n")}function Ze(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],o=n[2],s=u.util.squeezeShape(n),c=s.newShape,l=s.keptDims,d=c;if(d.length<n.length){var f=Ye(e,d);return"\n        ".concat(Ae(f,t),"\n        float ").concat(a,"(int row, int col, int depth) {\n          return ").concat(a,"(").concat(Qe(["row","col","depth"],l),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(i,", ").concat(o,", 1)));\n        ").concat(Ge(e),"\n      }\n    ");var p=e.shapeInfo.texShape,h=p[0],m=p[1],v=e.shapeInfo.flatOffset;if(m===i&&null==v)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        int stride1 = ").concat(r,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n        float ".concat(a,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(o,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(m,".0, ").concat(h,".0);\n          return sampleTexture(").concat(r,", uv);\n        }\n      ");if(m===o&&null==v)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(r,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(m,".0, ").concat(h,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");var g=Fe(r);return t?"\n    float ".concat(a,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(r,"Shape[1] * ").concat(r,"Shape[2];\n      int stride1 = ").concat(r,"Shape[2];\n      int index = row * ").concat(i," + col * ").concat(o," + depth + ").concat(g,";\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n      return sampleTexture(").concat(r,", uv);\n    }\n    "):"\n      float ".concat(a,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(i," + col * ").concat(o," + depth + ").concat(g,";\n        vec2 uv = uvFromFlat(").concat(h,", ").concat(m,", index);\n        return sampleTexture(").concat(r,", uv);\n      }\n  ")}function Ue(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],o=n[2]*i,s=n[1]*o,c=u.util.squeezeShape(n),l=c.newShape,d=c.keptDims;if(l.length<n.length){var f=Ye(e,l);return"\n      ".concat(Ae(f,t),"\n      float ").concat(a,"(int row, int col, int depth, int depth2) {\n        return ").concat(a,"(").concat(Qe(["row","col","depth","depth2"],d),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(s,", ").concat(o,", ").concat(i,", 1)));\n        ").concat(Ge(e),"\n      }\n    ");var p=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,m=h[0],v=h[1],g="int stride2 = ".concat(r,"Shape[3];"),y="int stride1 = ".concat(r,"Shape[2] * stride2;"),b="int stride0 = ".concat(r,"Shape[1] * stride1;");if(v===s&&null==p)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        ").concat(g,"\n        ").concat(y,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(o,", ").concat(i,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(v,".0, ").concat(m,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");if(v===i&&null==p)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(r,"Shape[1] * ").concat(r,"Shape[2], ").concat(r,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(v,".0, ").concat(m,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var x=Fe(r);return t?"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(g,"\n      ").concat(y,"\n      ").concat(b,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index + ").concat(x,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(o," +\n          depth * ").concat(i," + depth2;\n      vec2 uv = uvFromFlat(").concat(m,", ").concat(v,", index + ").concat(x,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}function je(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],i=t[3]*a,o=t[2]*i,s=t[1]*o,c=u.util.squeezeShape(t),l=c.newShape,d=c.keptDims;if(l.length<t.length){var f=Ye(e,l);return"\n      ".concat(Ae(f),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(Qe(["row","col","depth","depth2","depth3"],d),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(s,", ").concat(o,", ").concat(i,", ").concat(a,")) +\n          depth3;\n        ").concat(Ge(e),"\n      }\n    ");var p=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,m=h[0],v=h[1];if(v===s&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(o,", ").concat(i,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(v,".0, ").concat(m,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(v===a&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(v,".0, ").concat(m,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var g=Fe(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(o," + depth * ").concat(i," +\n          depth2 * ").concat(a," + depth3 + ").concat(g,";\n      vec2 uv = uvFromFlat(").concat(m,", ").concat(v,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function We(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=u.util.squeezeShape(t),i=a.newShape,o=a.keptDims;if(i.length<t.length){var s=Ye(e,i);return"\n      ".concat(Ae(s),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(Qe(["row","col","depth","depth2","depth3","depth4"],o),");\n      }\n    ")}var c=t[5],l=t[4]*c,d=t[3]*l,f=t[2]*d,p=t[1]*f;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(p,", ").concat(f,", ").concat(d,", ").concat(l,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(c,", 1)));\n        ").concat(Ge(e),"\n      }\n    ");var h=e.shapeInfo.flatOffset,m=e.shapeInfo.texShape,v=m[0],g=m[1];if(g===p&&null==h)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(f,", ").concat(d,", ").concat(l,", ").concat(c,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(g,".0, ").concat(v,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(g===c&&null==h)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(g,".0, ").concat(v,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var y=Fe(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(p," + col * ").concat(f," + depth * ").concat(d," +\n          depth2 * ").concat(l," + depth3 * ").concat(c," + depth4 + ").concat(y,";\n      vec2 uv = uvFromFlat(").concat(v,", ").concat(g,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function Ge(e){var t=e.name,n=u.util.sizeFromShape(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function He(e,t){var n,r=e.name,a=r.charAt(0).toUpperCase()+r.slice(1),i="get"+a+"AtOutCoords",o=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,c=Ne(e.shapeInfo.logicalShape,t.logicalShape),l=Xe(s),d=s-o,f=["x","y","z","w","u","v"];n=0===o?"":s<2&&c.length>=1?"coords = 0;":c.map((function(e){return"coords.".concat(f[e+d]," = 0;")})).join("\n");var p="";p=s<2&&o>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(f[t+d])})).join(", ");var h="return outputValue;",m=1===u.util.sizeFromShape(e.shapeInfo.logicalShape),v=1===u.util.sizeFromShape(t.logicalShape);if(1!==o||m||v){if(m&&!v)h=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(c.length){var g=o-2,y=o-1;c.indexOf(g)>-1&&c.indexOf(y)>-1?h="return vec4(outputValue.x);":c.indexOf(g)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":c.indexOf(y)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}}else h="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(i,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(n,"\n      vec4 outputValue = get").concat(a,"(").concat(p,");\n      ").concat(h,"\n    }\n  ")}function qe(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=t.texShape,o=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,c=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===c&&null==e.shapeInfo.flatOffset&&u.util.arraysEqual(o,i))return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");var l,d=Xe(c),f=Ne(e.shapeInfo.logicalShape,t.logicalShape),p=c-s,h=["x","y","z","w","u","v"];l=0===s?"":c<2&&f.length>=1?"coords = 0;":f.map((function(e){return"coords.".concat(h[e+p]," = 0;")})).join("\n");var m="";return m=c<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(h[t+p])})).join(", "),"\n    float ".concat(a,"() {\n      ").concat(d," coords = getOutputCoords();\n      ").concat(l,"\n      return get").concat(r,"(").concat(m,");\n    }\n  ")}function Xe(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function Ke(e,t,n){var r=u.util.squeezeShape(t),a=r.newShape,i=r.keptDims,o=t.length,s=e&&3===o&&1===t[0],c=s?t.slice(1):a,l=!e&&o>1&&!u.util.arraysEqual(t,n)&&a.length<o||s;return{useSqueezeShape:l,uniformShape:l?c:t,keptDims:i}}function Ye(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function Qe(e,t){return t.map((function(t){return e[t]})).join(", ")}function $e(e,t,n,r){var a=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),i=a.map((function(e){return e.shapeInfo})),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=Oe(a,o,t),c=A(e.gl,s),l=e.createProgram(c);return(0,u.env)().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:c,source:s,webGLProgram:l,inShapeInfos:i,outShapeInfo:o,uniformLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,inShapesLocations:null,inTexShapesLocations:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:Object.assign({program:t,fragmentShader:c,source:s,webGLProgram:l,inShapeInfos:i,outShapeInfo:o},Je(e,t,l))}function Je(e,t,n){var r,a,i,o,s={},c={},l={},d=[],f=null;o=e.getUniformLocation(n,"NAN",!1),1===(0,u.env)().getNumber("WEBGL_VERSION")&&(f=e.getUniformLocation(n,"INFINITY",!1));for(var p=!1,h=0;h<t.variableNames.length;h++){var m=t.variableNames[h];s[m]=e.getUniformLocation(n,m,p),s["offset".concat(m)]=e.getUniformLocation(n,"offset".concat(m),p),t.enableShapeUniforms&&(c["".concat(m,"Shape")]=e.getUniformLocation(n,"".concat(m,"Shape"),p),l["".concat(m,"TexShape")]=e.getUniformLocation(n,"".concat(m,"TexShape"),p))}return t.enableShapeUniforms&&(r=e.getUniformLocation(n,"outShape",p),i=e.getUniformLocation(n,"outShapeStrides",p),a=e.getUniformLocation(n,"outTexShape",p)),t.customUniforms&&t.customUniforms.forEach((function(t,r){d[r]=e.getUniformLocation(n,t.name,p)})),{uniformLocations:s,customUniformLocations:d,infLoc:f,nanLoc:o,inShapesLocations:c,inTexShapesLocations:l,outShapeLocation:r,outShapeStridesLocation:i,outTexShapeLocation:a}}function et(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but ")+"was executed with ".concat(t.length," inputs"));e.forEach((function(e,n){var r=e.logicalShape,a=t[n],i=a.shape;if(!u.util.arraysEqual(r,i))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(r," and ").concat(i," must match"));if(!e.isUniform||!a.isUniform){var o=e.texShape,s=a.isUniform?null:a.texData.texShape;if(!u.util.arraysEqual(o,s))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(o," and ").concat(s," must match"))}}))}function tt(e,t,n,r,a){t.program.enableShapeUniforms||(et(t.inShapeInfos,n),et([t.outShapeInfo],[r]));var i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(i.texture,o[0],o[1]):e.setOutputMatrixTexture(i.texture,o[0],o[1]),e.setProgram(t.webGLProgram),1===(0,u.env)().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,r){var a=t.program.variableNames[r],i=t.uniformLocations[a],o=t.uniformLocations["offset".concat(a)],s=t.inShapesLocations["".concat(a,"Shape")],c=t.inTexShapesLocations["".concat(a,"TexShape")];if(s){var l=Ke(t.program.packedInputs,n.shape,n.texData.texShape).uniformShape;switch(l.length){case 1:e.gl.uniform1iv(s,new Int32Array(l));break;case 2:e.gl.uniform2iv(s,new Int32Array(l));break;case 3:e.gl.uniform3iv(s,new Int32Array(l));break;case 4:e.gl.uniform4iv(s,new Int32Array(l))}}if(c&&e.gl.uniform2i(c,n.texData.texShape[0],n.texData.texShape[1]),null!=i)if(n.isUniform)if(u.util.sizeFromShape(n.shape)<2)e.gl.uniform1f(i,n.uniformValues[0]);else{var d=n.uniformValues;d instanceof Float32Array||(d=new Float32Array(d)),e.gl.uniform1fv(i,d)}else null!=n.texData.slice&&null!=o&&e.gl.uniform1i(o,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture.texture,i,r)}));var s=t.outShapeLocation;if(s)switch(r.shape.length){case 1:e.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(s,new Int32Array(r.shape))}if(t.outShapeStridesLocation){var c=u.util.computeStrides(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(c));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(c));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(c))}}t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&a&&t.program.customUniforms.forEach((function(n,r){var i=t.customUniformLocations[r],o=a[r];if("float"===n.type)e.gl.uniform1fv(i,o);else if("vec2"===n.type)e.gl.uniform2fv(i,o);else if("vec3"===n.type)e.gl.uniform3fv(i,o);else if("vec4"===n.type)e.gl.uniform4fv(i,o);else if("int"===n.type)e.gl.uniform1iv(i,o);else if("ivec2"===n.type)e.gl.uniform2iv(i,o);else if("ivec3"===n.type)e.gl.uniform3iv(i,o);else{if("ivec4"!==n.type)throw Error("uniform type ".concat(n.type," is not supported yet."));e.gl.uniform4iv(i,o)}})),e.executeProgram()}function nt(e,t,n){var r="";t.concat(n).forEach((function(t){var a=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){var i=t.texData.texShape,o=Ke(e.packedInputs,t.shape,i),s=o.useSqueezeShape,c=o.uniformShape,l=o.keptDims,d="",f="",p="";if(1===c.length&&e.packedInputs){var h=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];d="".concat(h[0]>1,"_").concat(h[1]>1)}else if(2!==c.length||e.packedInputs){if(c.length>2&&!e.packedInputs){var m=u.util.computeStrides(c);p="".concat(m[0]===i[1],"_").concat(m[m.length-1]===i[1])}}else f="".concat(c[0]>1,"_").concat(c[1]>1);var v=t.shape.length,g=2===c.length&&u.util.arraysEqual(t.shape,i),y=1===u.util.sizeFromShape(t.shape),b=u.backend_util.getBroadcastDims(t.shape,n.shape),x=!e.packedInputs&&v===n.shape.length&&u.util.arraysEqual(i,n.texData.texShape),k=e.packedInputs||c.length>2?"":"".concat(i[0]>1,"_").concat(i[1]>1);r+="".concat(v,"_").concat(x,"_").concat(s?l:"","_").concat(c.length,"_").concat(y,"_").concat(b,"_").concat(g,"_").concat(d,"_").concat(f,"_").concat(p,"_").concat(k,"_").concat(a)}else{var w=t.isUniform?"uniform":t.texData.texShape;r+="".concat(t.shape,"_").concat(w,"_").concat(a)}}));var a=e.userCode,i=e.constructor.name;return i+="_"+r+"_"+a+"".concat((0,u.env)().getNumber("WEBGL_VERSION"))}function rt(e){return(0,u.env)().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}var at=(0,h.Z)((function e(t){(0,p.Z)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=i.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=Se();this.outputShape=t,this.enableShapeUniforms=rt(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?_e(["r","c","d"],t):Ce(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),it=(0,h.Z)((function e(t){(0,p.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=i.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=Se();this.outputShape=t,this.enableShapeUniforms=rt(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?_e(["r","c","d"],t):Ce(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),ot=(0,h.Z)((function e(t){(0,p.Z)(this,e),this.variableNames=["A"],this.outTexUsage=o.DOWNLOAD;var n=Se();this.outputShape=t,this.userCode="\n      ".concat(Ee,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),st=(0,h.Z)((function e(t){(0,p.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=o.DOWNLOAD;var n=Se();this.outputShape=t,this.userCode="\n      ".concat(Ee,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),ut=(0,h.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,p.Z)(this,e),this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=Se();this.outputShape=t,this.enableShapeUniforms=rt(this.outputShape.length);var a="result";n&&(a="floor(result * 255. + 0.5)"),this.userCode="\n      ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":Te(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / texShape[1];\n        int c = imod(flatIndex, texShape[1]);\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n        vec4 values = ").concat(r.texture2D,"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ").concat(r.output," = vec4(").concat(a,", 0., 0., 0.);\n      }\n    ")})),ct=(0,h.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,p.Z)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=Se();this.outputShape=t,this.enableShapeUniforms=rt(this.outputShape.length);var a="",i="result";n&&(i="floor(result * 255. + 0.5)");for(var o=0;o<=1;o++)for(var s=0;s<=1;s++){var u=2*o+s;a+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(s," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(t[2]),") {\n          localCoords[2] += ").concat(s,";\n          if (localCoords[1] + ").concat(o," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(t[1]),") {\n            localCoords[1] += ").concat(o,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(r.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(u,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(u,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(u,"] = values[2];\n            } else {\n              result[").concat(u,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":Te(t),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(a,"\n\n          ").concat(r.output," = ").concat(i,";\n        }\n    ")}));function lt(e){var t=Se();return O(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function dt(e){return V(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function ft(e){return z(e,new Uint16Array([0,1,2,2,1,3]))}function pt(e,t,n,r,a,i){j(t,n);var o=U(e),s=e.TEXTURE_2D;return I(e,(function(){return e.bindTexture(s,o)})),I(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),I(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),I(e,(function(){return e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)})),I(e,(function(){return e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)})),1===(0,u.env)().getNumber("WEBGL_VERSION")?I(e,(function(){return e.texImage2D(s,0,r,t,n,0,a,i,null)})):I(e,(function(){return e.texStorage2D(s,1,r,t,n)})),I(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),{texture:o,texShape:[n,t]}}function ht(e){return e.internalFormatFloat}function mt(e,t,n,r){var a=w(t,n),i=(0,c.Z)(a,2);return pt(e,i[0],i[1],ht(r),r.textureFormatFloat,e.FLOAT)}function vt(e){return e.internalFormatHalfFloat}function gt(e,t,n,r){var a=w(t,n),i=(0,c.Z)(a,2);return pt(e,i[0],i[1],vt(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function yt(e){return e.downloadTextureFormat}function bt(e,t,n,r){var a=w(t,n),i=(0,c.Z)(a,2);return pt(e,i[0],i[1],yt(r),e.RGBA,e.UNSIGNED_BYTE)}function xt(e){return e.internalFormatPackedFloat}function kt(e,t,n,r){var a=C(t,n),i=(0,c.Z)(a,2);return pt(e,i[0],i[1],xt(r),e.RGBA,e.FLOAT)}function wt(e){return e.internalFormatPackedHalfFloat}function St(e,t,n,r){var a=C(t,n),i=(0,c.Z)(a,2);return pt(e,i[0],i[1],wt(r),e.RGBA,r.textureTypeHalfFloat)}function Ct(e,t,n){return I(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),G(e,t,"clipSpacePos",n,3,20,0)&&G(e,t,"uv",n,2,20,12)}function _t(e,t,n,r,a,i){var o,s,c;I(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),a instanceof Uint8Array?(o=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,c=e.RGBA):(o=new Float32Array(n*r*4),s=e.FLOAT,c=i.internalFormatPackedFloat),o.set(a),2===(0,u.env)().getNumber("WEBGL_VERSION")?I(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,s,o)})):I(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,c,n,r,0,e.RGBA,s,o)})),I(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function It(e,t,n){I(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),n.data instanceof Uint8Array?2===(0,u.env)().getNumber("WEBGL_VERSION")?I(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)})):I(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)})):2===(0,u.env)().getNumber("WEBGL_VERSION")?I(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)})):I(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)})),I(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function Tt(e,t,n,r){var a=e.createBuffer();I(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)}));var i=16*t*n;return I(e,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)})),I(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)})),I(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),a}function Et(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function Nt(e,t,n,r){var a=w(t,n),i=(0,c.Z)(a,2),o=i[0],s=i[1],u=new Uint8Array(t*n*4);return I(e,(function(){return e.readPixels(0,0,o,s,r.downloadTextureFormat,e.UNSIGNED_BYTE,u)})),new Float32Array(u.buffer)}function Ot(e,t,n,r,a,i,o,s){var u=e,l=new Float32Array(function(e,t){var n=C(e,t),r=(0,c.Z)(n,2);return r[0]*r[1]*4}(i,o));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}function At(e,t,n){var r=new Float32Array(t*n*4);return I(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)})),r}var Rt=function(){function e(t){(0,p.Z)(this,e),this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=(0,u.env)().getNumber("WEBGL_VERSION");null!=t?(this.gl=t,x(n,t)):this.gl=k(n);var r="WEBGL_color_buffer_float",a="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===(0,u.env)().getNumber("WEBGL_VERSION")){var i="OES_texture_half_float";if(this.textureFloatExtension=N(this.gl,"OES_texture_float"),me(this.gl,i))this.textureHalfFloatExtension=N(this.gl,i);else if((0,u.env)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),me(this.gl,a))this.colorBufferHalfFloatExtension=N(this.gl,a);else if((0,u.env)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",me(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!me(this.gl,a))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(a)}this.vertexBuffer=dt(this.gl),this.indexBuffer=ft(this.gl),this.framebuffer=W(this.gl),this.textureConfig=_(this.gl,this.textureHalfFloatExtension)}return(0,h.Z)(e,[{key:"debug",get:function(){return(0,u.env)().getBool("DEBUG")}},{key:"dispose",value:function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;I(t,(function(){return t.finish()})),I(t,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),I(t,(function(){return t.deleteFramebuffer(e.framebuffer)})),I(t,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),I(t,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),I(t,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}}},{key:"createFloat32MatrixTexture",value:function(e,t){return this.throwIfDisposed(),mt(this.gl,e,t,this.textureConfig)}},{key:"createFloat16MatrixTexture",value:function(e,t){return this.throwIfDisposed(),gt(this.gl,e,t,this.textureConfig)}},{key:"createUnsignedBytesMatrixTexture",value:function(e,t){return this.throwIfDisposed(),bt(this.gl,e,t,this.textureConfig)}},{key:"uploadPixelDataToTexture",value:function(e,t){this.throwIfDisposed(),It(this.gl,e,t)}},{key:"uploadDenseMatrixToTexture",value:function(e,t,n,r){this.throwIfDisposed(),_t(this.gl,e,t,n,r,this.textureConfig)}},{key:"createFloat16PackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),St(this.gl,e,t,this.textureConfig)}},{key:"createPackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),kt(this.gl,e,t,this.textureConfig)}},{key:"deleteMatrixTexture",value:function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(J(this.gl,this.framebuffer),this.outputTexture=null),I(this.gl,(function(){return t.gl.deleteTexture(e)}))}},{key:"downloadByteEncodedFloatMatrixFromOutputTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return Nt(r.gl,t,n,r.textureConfig)}))}},{key:"downloadPackedMatrixFromBuffer",value:function(e,t,n,r,a,i){return Ot(this.gl,e,0,0,0,a,i,this.textureConfig)}},{key:"downloadFloat32MatrixFromBuffer",value:function(e,t){return Et(this.gl,e,t)}},{key:"createBufferFromTexture",value:function(e,t,n){this.bindTextureToFrameBuffer(e);var r=Tt(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}},{key:"createAndWaitForFence",value:function(){var e=this.createFence(this.gl);return this.pollFence(e)}},{key:"createFence",value:function(e){var t,n,r=this;if((0,u.env)().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=a.clientWaitSync(i,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=i}else(0,u.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,(0,u.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}}},{key:"downloadMatrixFromPackedTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return At(r.gl,t,n)}))}},{key:"createProgram",value:function(e){var t=this;this.throwIfDisposed();var n=this.gl;null==this.vertexShader&&(this.vertexShader=lt(n));var r=M(n);return I(n,(function(){return n.attachShader(r,t.vertexShader)})),I(n,(function(){return n.attachShader(r,e)})),F(n,r),this.debug&&L(n,r),this.vertexAttrsAreBound||(this.setProgram(r),this.vertexAttrsAreBound=Ct(n,this.program,this.vertexBuffer)),r}},{key:"deleteProgram",value:function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&I(this.gl,(function(){return t.gl.deleteProgram(e)}))}},{key:"setProgram",value:function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&L(this.gl,this.program),I(this.gl,(function(){return t.gl.useProgram(e)}))}},{key:"getUniformLocation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?X(this.gl,e,t):K(this.gl,e,t)}},{key:"getAttributeLocation",value:function(e,t){var n=this;return this.throwIfDisposed(),I(this.gl,(function(){return n.gl.getAttribLocation(e,t)}))}},{key:"getUniformLocationNoThrow",value:function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}},{key:"setInputMatrixTexture",value:function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),Y(this.gl,e,t,n)}},{key:"setOutputMatrixTexture",value:function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}},{key:"setOutputPackedMatrixTexture",value:function(e,t,n){this.throwIfDisposed();var r=C(t,n),a=(0,c.Z)(r,2),i=a[0],o=a[1];this.setOutputMatrixTextureDriver(e,i,o)}},{key:"setOutputMatrixWriteRegion",value:function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}},{key:"setOutputPackedMatrixWriteRegion",value:function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}},{key:"debugValidate",value:function(){null!=this.program&&L(this.gl,this.program),ee(this.gl)}},{key:"executeProgram",value:function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),I(e,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))}},{key:"blockUntilAllProgramsCompleted",value:function(){var e=this;this.throwIfDisposed(),I(this.gl,(function(){return e.gl.finish()}))}},{key:"getQueryTimerExtension",value:function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=N(this.gl,2===(0,u.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}},{key:"getQueryTimerExtensionWebGL2",value:function(){return this.getQueryTimerExtension()}},{key:"getQueryTimerExtensionWebGL1",value:function(){return this.getQueryTimerExtension()}},{key:"beginQuery",value:function(){if(2===(0,u.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a}},{key:"endQuery",value:function(){if(2!==(0,u.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}}},{key:"waitForQueryAndGetTime",value:function(){var e=(0,f.Z)((0,l.Z)().mark((function e(t){var n=this;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.util.repeatedTry((function(){return n.disposed||n.isQueryAvailable(t,(0,u.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}));case 2:return e.abrupt("return",this.getQueryTime(t,(0,u.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getQueryTime",value:function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}},{key:"isQueryAvailable",value:function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}var i=this.getQueryTimerExtensionWebGL1(),o=i.getQueryObjectEXT(e,i.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}},{key:"pollFence",value:function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))}},{key:"pollItems",value:function(){for(var e=function(e){for(var t=0;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t){(0,this.itemsToPoll[t].resolveFn)()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}},{key:"addItemToPoll",value:function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||u.util.repeatedTry((function(){return n.pollItems(),0===n.itemsToPoll.length}))}},{key:"bindTextureToFrameBuffer",value:function(e){this.throwIfDisposed(),$(this.gl,e,this.framebuffer),this.debug&&ee(this.gl)}},{key:"unbindTextureToFrameBuffer",value:function(){null!=this.outputTexture?($(this.gl,this.outputTexture,this.framebuffer),this.debug&&ee(this.gl)):J(this.gl,this.framebuffer)}},{key:"downloadMatrixDriver",value:function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n}},{key:"setOutputMatrixTextureDriver",value:function(e,t,n){this.throwIfDisposed();var r=this.gl;$(r,e,this.framebuffer),this.debug&&ee(r),this.outputTexture=e,I(r,(function(){return r.viewport(0,0,t,n)})),I(r,(function(){return r.scissor(0,0,t,n)}))}},{key:"setOutputMatrixWriteRegionDriver",value:function(e,t,n,r){var a=this;this.throwIfDisposed(),I(this.gl,(function(){return a.gl.scissor(e,t,n,r)}))}},{key:"throwIfDisposed",value:function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}},{key:"throwIfNoProgram",value:function(){if(null==this.program)throw new Error("No GPU program is currently set.")}}]),e}();var Pt=n(5589),Dt=n(3737),Bt=n(4351),Mt=n(6563),Ft=n(8116),Lt=n(6880),Vt=n(1354),zt=n(7224),Zt=n(5648),Ut=n(2666),jt=n(9075),Wt=n(6985),Gt=n(9813),Ht=n(8734),qt=n(1491),Xt=n(8298),Kt=n(4771),Yt=n(9518),Qt=n(8094),$t=n(8244),Jt=n(4569),en=n(1566),tn=n(9120),nn=n(6284),rn=n(8105),an=n(8567),on=n(294),sn=n(6220),un=n(2126),cn=n(8337),ln=n(3634),dn=n(5440),fn=n(6126),pn=n(7497),hn=n(8294),mn=n(998),vn=n(1489),gn=n(1802),yn=n(7129),bn=n(9516),xn=n(1103),kn=n(4242),wn=Pt.EH,Sn=Dt.W,Cn=Dt.i,_n=Bt.__,In=Mt.j,Tn=Ft.tW,En=Lt.Ro,Nn=Vt.OF,On=zt.r6,An=Zt.m,Rn=Ut.i,Pn=jt.o,Dn=Wt.HL,Bn=Gt.rO,Mn=Ht.lx,Fn=qt.b,Ln=Xt.vX,Vn=Kt.B,zn=Yt.wS,Zn=Qt.vP,Un=$t.$3,jn=Jt.uC,Wn=en.Gj,Gn=tn.Qg,Hn=nn.b,qn=rn.zd,Xn=an.N,Kn=on.VY,Yn=sn.bk,Qn=un.rT,$n=cn.c,Jn=ln.U,er=dn.V,tr=fn.zT,nr=pn.t,rr=hn.A,ar=mn.Q,ir=vn.h,or=gn.VY,sr=yn.R,ur=bn.W,cr=xn.H,lr=kn.S;function dr(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return"".concat(e,".").concat(t)}))}function fr(e,t){return 1===t?[e]:dr(e,t)}var pr=function(){function e(t){if((0,p.Z)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=rt(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=fr("rc",this.rank),r=Xe(this.rank),a=this.getOutOfBoundsCondition(n),i=this.getSetup(n),o=this.getOutput(n);this.userCode="\n        void main() {\n          ".concat(r," rc = getOutputCoords();\n\n          if(").concat(a,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(i,"\n\n            setOutput(vec4(").concat(o,"));\n          }\n        }\n      ")}}return(0,h.Z)(e,[{key:"getSourceCoordsArr",value:function(e){for(var t=[],n=0;n<=1;n++)for(var r=0;r<=1;r++){for(var a="".concat(0===n?"r":"rp1",", ").concat(0===r?"c":"cp1"),i=2;i<this.rank;i++)a="".concat(e[e.length-1-i],",")+a;t.push(a)}return t}},{key:"getOutOfBoundsCondition",value:function(e){if(1===this.rank)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);for(var t="",n=this.rank-2;n<this.rank;n++)t+="".concat(e[n]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(n,"]"):this.outputShape[n]),n<this.rank-1&&(t+="||");return t}},{key:"getSetup",value:function(e){if(1===this.rank)return"";var t=e.slice(-2),n=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],r=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(t[0],";\n      int c = ").concat(t[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(n,";\n      bool rEdge = rp1 >= ").concat(r,";\n    ")}},{key:"getOutput",value:function(e){var t=this.getSourceCoordsArr(e);if(1===this.rank){var n=this.enableShapeUniforms?"outShape":this.outputShape[0];return"getA(rc), (rc + 1 >= ".concat(n," ? 0. : getA(rc + 1)), 0, 0")}return"getA(".concat(t[0],"),\n            cEdge ? 0. : getA(").concat(t[1],"),\n            rEdge ? 0. : getA(").concat(t[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(t[3],")")}}]),e}(),hr=(0,h.Z)((function e(t,n){(0,p.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=rt(this.outputShape.length);for(var r="",a=0;a<4;a++){var i="thisRC = rc;";a%2===1&&(i+="thisRC.z += 1;"),a>1&&(i+="thisRC.y += 1;"),r+="\n        ".concat(i,"\n        ").concat(a>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(a,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(a>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(e,t){var n=t?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=e.map((function(e,t){return t})),a=Ie(r,t);return a.map((function(t,r){var i="int ".concat(e[r]," = ").concat(n," / ").concat(a[r]),o=r===a.length-1?"int ".concat(e[r+1]," = ").concat(n," - ").concat(e[r]," * ").concat(a[r]):"index -= ".concat(e[r]," * ").concat(a[r]);return"".concat(i,"; ").concat(o,";")})).join("")}(["r","c","d"],"inputShape"):Ce(["r","c","d"],e);return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(n,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":Te(t),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":t[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":t[2],";\n\n        ").concat(r,"\n\n        setOutput(result);\n      }\n    ")}));var mr=function(){function e(t){(0,p.Z)(this,e),this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return(0,h.Z)(e,[{key:"acquireTexture",value:function(e,t,n){var r=gr(t,n),a=yr(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);var i,o=vr(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();var u=this.freeTextures[a].shift();return this.usedTextures[a].push(u),u}return r===s.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===s.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===s.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===s.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===s.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(i),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),i}},{key:"releaseTexture",value:function(e,t,n,r){if(null!=this.freeTextures){var a=gr(n,r),i=yr(t,a,r);i in this.freeTextures||(this.freeTextures[i]=[]);var o=vr(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=(0,u.env)().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=o):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;var c=this.usedTextures[i],l=c.indexOf(e);if(l<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c.splice(l,1),this.log()}}},{key:"log",value:function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));var t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}}},{key:"numBytesAllocated",get:function(){return this._numBytesAllocated}},{key:"numBytesFree",get:function(){return this._numBytesFree}},{key:"getNumUsedTextures",value:function(){return this.numUsedTextures}},{key:"getNumFreeTextures",value:function(){return this.numFreeTextures}},{key:"dispose",value:function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}]),e}();function vr(e,t,n,r,a){var i,o=function(e,t){switch(e){case s.PACKED_2X2_FLOAT32:return xt(t);case s.PACKED_2X2_FLOAT16:return wt(t);case s.UNPACKED_FLOAT32:return ht(t);case s.UNPACKED_FLOAT16:return vt(t);case s.PACKED_4X1_UNSIGNED_BYTE:return yt(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,r);if(a){var u=C(e[0],e[1]),l=(0,c.Z)(u,2);i=l[0]*l[1]}else{var d=w(e[0],e[1]),f=(0,c.Z)(d,2);i=f[0]*f[1]}var p=function(e,t){var n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(t))}(n,o);return i*p}function gr(e,t){if(e===o.UPLOAD)return s.PACKED_2X2_FLOAT32;if(e===o.RENDER||null==e)return function(e){return(0,u.env)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?s.PACKED_2X2_FLOAT32:s.UNPACKED_FLOAT32:e?s.PACKED_2X2_FLOAT16:s.UNPACKED_FLOAT16}(t);if(e===o.DOWNLOAD||e===o.PIXELS)return s.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function yr(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}var br=(0,h.Z)((function e(t,n){(0,p.Z)(this,e),this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=rt(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),xr="if (isnan(x)) return x;",kr="return x;",wr="return abs(x);";var Sr="return (x >= 0.0) ? x : (exp(x) - 1.0);",Cr=xr+"\n  return (x < 0.0) ? 0.0 : x;\n",_r=xr+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",Ir="return x;",Tr="return 1.0 / (1.0 + exp(-1.0 * x));",Er="return x;",Nr="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",Or="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",Ar="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",Rr="return 1.0 / (1.0 + exp(-1.0 * x));",Pr=(0,h.Z)((function e(t,n){(0,p.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=rt(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),Dr=(0,h.Z)((function e(t){(0,p.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=rt(this.outputShape.length);var n=t.length,r=fr("rc",n),a=Xe(n),i=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(n,r),o=r.slice(-2),s=n<=1?"rc":"vec2(".concat(o.join(","),")");this.userCode="\n      void main() {\n        ".concat(a," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(i,");\n\n        setOutput(getChannel(packedInput, ").concat(s,"));\n      }\n    ")})),Br=u.kernel_impls.whereImpl,Mr={};var Fr=(0,u.env)().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");var Lr=function(e){(0,v.Z)(n,e);var t=(0,g.Z)(n);function n(e){var r,a,i;if((0,p.Z)(this,n),(r=t.call(this)).pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.lastGlFlushTime=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!(0,u.env)().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null!=e){if(e instanceof Rt)a=e;else{var o=k((0,u.env)().getNumber("WEBGL_VERSION"),e);a=new Rt(o)}r.binaryCache={},r.gpgpuCreatedLocally=!1}else{var s=k((0,u.env)().getNumber("WEBGL_VERSION"));a=new Rt(s),r.binaryCache=((i=(0,u.env)().getNumber("WEBGL_VERSION"))in Mr||(Mr[i]={}),Mr[i]),r.gpgpuCreatedLocally=!0}return r.gpgpu=a,r.canvas=r.gpgpu.gl.canvas,r.textureManager=new mr(r.gpgpu),r.numMBBeforeWarning=null==(0,u.env)().global.screen?1024:(0,u.env)().global.screen.height*(0,u.env)().global.screen.width*window.devicePixelRatio*600/1024/1024,r.texData=new u.DataStorage((0,m.Z)(r),(0,u.engine)()),r}return(0,h.Z)(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"numDataIds",value:function(){return this.texData.numDataIds()-this.pendingDeletes}},{key:"write",value:function(e,t,n){if(((0,u.env)().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||(0,u.env)().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:o.UPLOAD,refCount:1}),r}},{key:"refCount",value:function(e){return this.texData.has(e)?this.texData.get(e).refCount:0}},{key:"incRef",value:function(e){this.texData.get(e).refCount++}},{key:"decRef",value:function(e){this.texData.has(e)&&this.texData.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){if((0,u.env)().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:o.UPLOAD,refCount:a})}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"readSync",value:function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,a=t.complexTensorInfos,i=t.slice,o=t.shape,s=t.isPacked;if(null!=i){var c;c=s?new Pr(o,Ir):new br(o,Ir);var l=this.runWebGLProgram(c,[{dataId:e,shape:o,dtype:r}],r),d=this.readSync(l.dataId);return this.disposeIntermediateTensorInfo(l),d}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var f,p,h=null!=this.activeTimers;if(h&&(f=u.util.now()),"complex64"===r){var m=this.readSync(a.real.dataId),v=this.readSync(a.imag.dataId);p=u.backend_util.mergeRealAndImagArrays(m,v)}else p=this.getValuesFromTexture(e);return h&&(this.downloadWaitMs+=u.util.now()-f),this.convertAndCacheOnCPU(e,p)}},{key:"read",value:function(){var e=(0,f.Z)((0,l.Z)().mark((function e(t){var n,r,a,i,o,s,c,f,p,h,m,v,g,y,b,x,k,w,C,_,T,E,N;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pendingRead.has(t)){e.next=3;break}return n=this.pendingRead.get(t),e.abrupt("return",new Promise((function(e){return n.push(e)})));case 3:if(r=this.texData.get(t),a=r.values,i=r.shape,o=r.slice,s=r.dtype,c=r.complexTensorInfos,f=r.isPacked,null==o){e.next=11;break}return p=f?new Pr(i,Ir):new br(i,Ir),h=this.runWebGLProgram(p,[{dataId:t,shape:i,dtype:s}],s),m=this.read(h.dataId),this.disposeIntermediateTensorInfo(h),e.abrupt("return",m);case 11:if(null==a){e.next=13;break}return e.abrupt("return",this.convertAndCacheOnCPU(t));case 13:if(!(0,u.env)().getBool("DEBUG")){e.next=16;break}if((0,u.env)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")||2!==(0,u.env)().getNumber("WEBGL_VERSION")){e.next=16;break}throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");case 16:if(v=null,"complex64"!==s&&(0,u.env)().get("WEBGL_BUFFER_SUPPORTED")&&(g=this.decode(t),b=this.texData.get(g.dataId),v=(y=this.gpgpu).createBufferFromTexture.apply(y,[b.texture.texture].concat((0,d.Z)(S(i))))),this.pendingRead.set(t,[]),"complex64"===s){e.next=22;break}return e.next=22,this.gpgpu.createAndWaitForFence();case 22:if("complex64"!==s){e.next=31;break}return e.next=25,Promise.all([this.read(c.real.dataId),this.read(c.imag.dataId)]);case 25:k=e.sent,w=k[0],C=k[1],x=u.backend_util.mergeRealAndImagArrays(w,C),e.next=32;break;case 31:null==v?x=this.getValuesFromTexture(t):(_=u.util.sizeFromShape(i),x=this.gpgpu.downloadFloat32MatrixFromBuffer(v,_));case 32:return null!=g&&this.disposeIntermediateTensorInfo(g),null!=v&&I(T=this.gpgpu.gl,(function(){return T.deleteBuffer(v)})),E=this.convertAndCacheOnCPU(t,x),N=this.pendingRead.get(t),this.pendingRead.delete(t),N.forEach((function(e){return e(E)})),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&(0,u.engine)().removeDataId(t,this),this.pendingDeletes--),e.abrupt("return",E);case 40:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readToGPU",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.texData.get(e),r=n.values,a=n.shape,i=n.slice,o=n.dtype,s=n.isPacked,c=n.texture;if("complex64"===o)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=i){var l;l=s?new Pr(a,Ir):new br(a,Ir);var d=this.runWebGLProgram(l,[{dataId:e,shape:a,dtype:o}],o),f=this.readToGPU(d,t);return this.disposeIntermediateTensorInfo(d),f}if(null==c)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");var p=this.decode(e,t.customTexShape),h=(0,u.engine)().makeTensorFromTensorInfo(p),m=this.texData.get(p.dataId);return Object.assign({tensorRef:h},m.texture)}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId);if("string"===e.dtype)try{var n=t.map((function(e){return u.util.decodeString(e)}));return(0,u.buffer)(e.shape,e.dtype,n)}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return(0,u.buffer)(e.shape,e.dtype,t)}},{key:"checkNumericalProblems",value:function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!T(n)){if((0,u.env)().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(n," cannot be represented on this device."))}}}},{key:"getValuesFromTexture",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.isPacked,i=u.util.sizeFromShape(n);if((0,u.env)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var o,s=this.decode(e),c=this.texData.get(s.dataId),l=(o=this.gpgpu).downloadMatrixFromPackedTexture.apply(o,[c.texture.texture].concat((0,d.Z)(S(n)))).subarray(0,i);return this.disposeIntermediateTensorInfo(s),l}var f=(0,u.env)().getBool("WEBGL_PACK")&&!0===a,p=f?oe(n):n,h=f?new st(p):new ot(p),m=this.runWebGLProgram(h,[{shape:p,dtype:r,dataId:e}],"float32"),v=this.texData.get(m.dataId),g=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(v.texture.texture,v.texShape[0],v.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(m),g}},{key:"timerAvailable",value:function(){return(0,u.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}},{key:"time",value:function(e){var t=this,n=this.activeTimers,r=[],a=!1;null==this.programTimersStack?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,e();var i=u.util.flatten(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),o=u.util.flatten(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e}));this.activeTimers=n,a&&(this.programTimersStack=null);var s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(0,f.Z)((0,l.Z)().mark((function e(){var n;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((0,u.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=8;break}return e.next=3,Promise.all(i);case 3:n=e.sent,s.kernelMs=u.util.sum(n),s.getExtraProfileInfo=function(){return n.map((function(e,t){return{name:o[t],ms:e}})).map((function(e){return"".concat(e.name,": ").concat(e.ms)})).join(", ")},e.next=9;break;case 8:s.kernelMs={error:"WebGL query timers are not supported in this environment."};case 9:return t.uploadWaitMs=0,t.downloadWaitMs=0,e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})))()}},{key:"memory",value:function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}},{key:"startTimer",value:function(){return(0,u.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:u.util.now(),endMs:null}}},{key:"endTimer",value:function(e){return(0,u.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=u.util.now(),e)}},{key:"getQueryTime",value:function(){var e=(0,f.Z)((0,l.Z)().mark((function e(t){var n;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((0,u.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=2;break}return e.abrupt("return",this.gpgpu.waitForQueryAndGetTime(t));case 2:return n=t,e.abrupt("return",n.endMs-n.startMs);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);var n=this.texData.get(e),r=n.complexTensorInfos;return null!=r&&(this.disposeData(r.real.dataId,t),this.disposeData(r.imag.dataId,t)),this.texData.delete(e),!0}},{key:"releaseGPUData",value:function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,a=t.texShape,i=t.usage,o=t.isPacked,s=t.slice,u=s&&s.origDataId||e,c=this.dataRefCount.get(u);c>1?this.dataRefCount.set(u,c-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,i,o)));var l=this.texData.get(e);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null}},{key:"getTexture",value:function(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}},{key:"getDataInfo",value:function(e){return this.texData.get(e)}},{key:"shouldExecuteOnCPU",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fr;return(0,u.env)().getBool("WEBGL_CPU_FORWARD")&&e.every((function(e){return null==t.texData.get(e.dataId).texture&&u.util.sizeFromShape(e.shape)<n}))}},{key:"getGPGPUContext",value:function(){return this.gpgpu}},{key:"where",value:function(e){u.backend_util.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return Br(e.shape,t)}},{key:"packedUnaryOp",value:function(e,t,n){var r=new Pr(e.shape,t),a=this.compileAndRun(r,[e],n);return(0,u.engine)().makeTensorFromTensorInfo(a)}},{key:"abs",value:function(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){var t=Yn(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if((0,u.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,wr,e.dtype);var n=new br(e.shape,wr),r=this.compileAndRun(n,[e]);return(0,u.engine)().makeTensorFromTensorInfo(r)}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&u.util.isString(n[0])){var a=n.map((function(e){return u.util.encodeString(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}},{key:"makeOutput",value:function(e,t,n){return(0,u.engine)().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}},{key:"unpackTensor",value:function(e){var t=new Dr(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}},{key:"packTensor",value:function(e){var t=new pr(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}},{key:"packedReshape",value:function(e,t){var n=[ae(e.shape)].concat((0,d.Z)(ie(e.shape))),r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[ae(t)].concat((0,d.Z)(ie(t))),i=new hr(a,n),o=[n],s=this.runWebGLProgram(i,[r],e.dtype,o,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}},{key:"decode",value:function(e,t){var n=this.texData.get(e),r=n.isPacked,a=n.shape,i=n.dtype;if(null!=t){var o=u.util.sizeFromShape(a),s=t[0]*t[1]*4;u.util.assert(o<=s,(function(){return"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."}))}var c,l=oe(a);c=r?new it(l):new at(l);var d=[null!=t?t:S(l)];return{dtype:i,shape:a,dataId:this.runWebGLProgram(c,[{shape:l,dtype:i,dataId:e}],i,d,!0,t).dataId}}},{key:"runWebGLProgram",value:function(e,t,n,r){var a=this,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5?arguments[5]:void 0,c=this.makeTensorInfo(e.outputShape,n),l=this.texData.get(c.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===i.DENSE){var d=null!=s?s:S(e.outputShape);l.texShape=d.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(l.usage=e.outTexUsage),0===u.util.sizeFromShape(c.shape))return l.values=u.util.getTypedArrayFromDType(c.dtype,0),c;var f=[],p=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=a.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&u.util.sizeFromShape(t.shape)<=(0,u.env)().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(a.uploadToGPU(t.dataId),!!n.isPacked!==!!e.packedInputs)t=n.isPacked?a.unpackTensor(t):a.packTensor(t),f.push(t),n=a.texData.get(t.dataId);else if(n.isPacked&&!ce(n.shape,t.shape)){var r=t,i=t.shape;t.shape=n.shape,t=a.packedReshape(t,i),f.push(t),n=a.texData.get(t.dataId),r.shape=i}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(c.dataId);var h,m={shape:c.shape,texData:l,isUniform:!1},v=nt(e,p,m),g=this.getAndSaveBinary(v,(function(){return $e(a.gpgpu,e,p,m)})),y=null!=this.activeTimers;y&&(h=this.startTimer()),(0,u.env)().get("ENGINE_COMPILE_ONLY")||tt(this.gpgpu,g,p,m,r),f.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),y&&(h=this.endTimer(h),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(h)}));var b=(0,u.env)().get("WEBGL_FLUSH_THRESHOLD");if(b>0){var x=u.util.now();x-this.lastGlFlushTime>b&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=x)}if(!(0,u.env)().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&!1===o){var k=this.unpackTensor(c);return this.disposeIntermediateTensorInfo(c),k}return c}},{key:"compileAndRun",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n=n||t[0].dtype;var i=this.runWebGLProgram(e,t,n,r,a);return i}},{key:"getAndSaveBinary",value:function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}},{key:"getTextureManager",value:function(){return this.textureManager}},{key:"dispose",value:function(){var e=this;if(!this.disposed){if(!(0,u.env)().getBool("IS_TEST"))Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]}));this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}},{key:"floatPrecision",value:function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=(0,u.tidy)((function(){if(!(0,u.env)().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=(0,u.env)().getBool("DEBUG");(0,u.env)().set("DEBUG",!1);var n=e.abs((0,u.scalar)(1e-8)).dataSync()[0];if((0,u.env)().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"uploadToGPU",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.values,i=t.texture,s=t.usage,l=t.isPacked;if(null==i){var d,f=null!=this.activeTimers;f&&(d=u.util.now());var p=t.texShape;if(null==p&&(p=se(n,l),t.texShape=p),null!=a){var h,m=oe(n),v=p[1],g=p[0],y=a instanceof Uint8Array||a instanceof Uint8ClampedArray;if(l||!y){var b=C(p[0],p[1]),x=(0,c.Z)(b,2);v=x[0],g=x[1]}h=l?new ct(m,y):new ut(m,y);var k=y?[g,v]:p,w=this.makeTensorInfo(k,r),S=this.texData.get(w.dataId);S.usage=y?o.PIXELS:o.UPLOAD,S.texShape=k,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(w.dataId),v,g,a);var _=[[g,v]],I=this.runWebGLProgram(h,[w],r,_,!0),T=this.texData.get(I.dataId);t.texShape=T.texShape,t.isPacked=T.isPacked,t.usage=T.usage,(0,u.env)().get("ENGINE_COMPILE_ONLY")?this.disposeData(I.dataId):(t.texture=T.texture,t.values=null,this.texData.delete(I.dataId)),this.disposeIntermediateTensorInfo(w),f&&(this.uploadWaitMs+=u.util.now()-d)}else{var E=this.acquireTexture(p,s,r,l);t.texture=E}}}},{key:"convertAndCacheOnCPU",value:function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype ".concat(t))}(t,r)),n.values}},{key:"acquireTexture",value:function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(a," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)}},{key:"computeBytes",value:function(e,t){return e[0]*e[1]*u.util.bytesPerElement(t)}},{key:"checkCompileCompletion",value:function(){for(var e=0,t=Object.entries(this.binaryCache);e<t.length;e++){var n=(0,c.Z)(t[e],2)[1];this.checkCompletion_(n)}}},{key:"checkCompileCompletionAsync",value:function(){var e=(0,f.Z)((0,l.Z)().mark((function e(){var t,n,r,a,i,o,s,u,d=this;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],!this.gpgpu.parallelCompilationExtension){e.next=6;break}for(n=0,r=Object.entries(this.binaryCache);n<r.length;n++)a=(0,c.Z)(r[n],2),i=a[1],t.push(this.checkCompletionAsync_(i));return e.abrupt("return",Promise.all(t));case 6:for(o=function(){var e=(0,c.Z)(u[s],2)[1],n=new Promise((function(t){try{d.checkCompletion_(e),t(!0)}catch(n){throw n}}));t.push(n)},s=0,u=Object.entries(this.binaryCache);s<u.length;s++)o();return e.abrupt("return",Promise.all(t));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkCompletionAsync_",value:function(){var e=(0,f.Z)((0,l.Z)().mark((function e(t){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)){e.next=4;break}return e.abrupt("return",this.checkCompletion_(t));case 4:return e.next=6,(0,u.nextFrame)();case 6:return e.abrupt("return",this.checkCompletionAsync_(t));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkCompletion_",value:function(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw B(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}},{key:"getUniformLocations",value:function(){for(var e=0,t=Object.entries(this.binaryCache);e<t.length;e++){var n=(0,c.Z)(t[e],2)[1],r=Je(this.gpgpu,n.program,n.webGLProgram),a=r.uniformLocations,i=r.customUniformLocations,o=r.infLoc,s=r.nanLoc,u=r.inShapesLocations,l=r.inTexShapesLocations,d=r.outShapeLocation,f=r.outShapeStridesLocation,p=r.outTexShapeLocation;n.uniformLocations=a,n.customUniformLocations=i,n.infLoc=o,n.nanLoc=s,n.inShapesLocations=u,n.inTexShapesLocations=l,n.outShapeLocation=d,n.outShapeStridesLocation=f,n.outTexShapeLocation=p}}}]),n}(u.KernelBackend);Lr.nextDataId=0;var Vr="3.19.0";function zr(){(0,u.env)().set("WEBGL_FORCE_F16_TEXTURES",!0)}u.device_util.isBrowser()&&(0,u.registerBackend)("webgl",(function(){return new Lr}),2);var Zr={forceHalfFloat:zr},Ur=(0,h.Z)((function e(t,n,r){(0,p.Z)(this,e),this.variableNames=["A","B"],this.outputShape=u.backend_util.assertAndGetBroadcastShape(n,r),this.enableShapeUniforms=rt(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")})),jr=(0,h.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,p.Z)(this,e),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=u.backend_util.assertAndGetBroadcastShape(n,r);var i=this.outputShape.length;this.enableShapeUniforms=rt(i);var o="";if(a)if(0===i||1===u.util.sizeFromShape(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{var s=Xe(i);if(o="\n          ".concat(s," coords = getOutputCoords();\n        "),1===i)this.enableShapeUniforms?o+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":o+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{var c=fr("coords",i);this.enableShapeUniforms?o+="\n            bool nextRowOutOfBounds =\n              (".concat(c[i-2]," + 1) >= outShape[").concat(i," - 2];\n            bool nextColOutOfBounds =\n              (").concat(c[i-1]," + 1) >= outShape[").concat(i," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):o+="\n            bool nextRowOutOfBounds =\n              (".concat(c[i-2]," + 1) >= ").concat(this.outputShape[i-2],";\n            bool nextColOutOfBounds =\n              (").concat(c[i-1]," + 1) >= ").concat(this.outputShape[i-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(o,"\n\n        setOutput(result);\n      }\n    ")}));function Wr(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var Gr={kernelName:u.Identity,backendName:"webgl",kernelFunc:Wr};function Hr(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),s=Wr({inputs:{x:r},backend:n}),u=Wr({inputs:{x:a},backend:n});return o.complexTensorInfos={real:s,imag:u},i}var qr={kernelName:u.Complex,backendName:"webgl",kernelFunc:Hr},Xr="return (a < 0.) ? b * a : a;",Kr="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var Yr={kernelName:u.LeakyRelu,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.alpha,o=n.makeTensorInfo([],"float32",u.util.createScalarValue(i,"float32")),s=(0,u.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new jr(Kr,a.shape,o.shape):new Ur(Xr,a.shape,o.shape),c=n.runWebGLProgram(s,[a,o],"float32");return n.disposeIntermediateTensorInfo(o),c}},Qr="return (a < 0.) ? b * a : a;",$r="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var Jr={kernelName:u.Prelu,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,i=(0,u.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new jr($r,r.shape,a.shape):new Ur(Qr,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],"float32")}};function ea(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.cpuKernelImpl,a=e.dtype;return function(e){var i,o=e.inputs,s=e.backend,c=o.x,l=s,d=a||c.dtype;if(l.shouldExecuteOnCPU([c])&&null!=r){var f=l.texData.get(c.dataId),p=r(f.values,d);return l.makeTensorInfo(c.shape,d,p)}return i=(0,u.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new Pr(c.shape,n):new br(c.shape,t),l.runWebGLProgram(i,[c],d)}}function ta(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.checkOutOfBounds,a=void 0!==r&&r,i=e.supportsComplex,o=void 0!==i&&i,s=e.cpuKernelImpl,l=e.dtype;return function(e){var r=e.inputs,i=e.backend,d=r.a,f=r.b,p=i;if(o&&"complex64"===d.dtype){var h=p.texData.get(d.dataId),m=p.texData.get(f.dataId),v=[[h.complexTensorInfos.real,m.complexTensorInfos.real],[h.complexTensorInfos.imag,m.complexTensorInfos.imag]].map((function(e){var n=(0,c.Z)(e,2),r=n[0],a=n[1],i={dataId:r.dataId,dtype:r.dtype,shape:d.shape},o={dataId:a.dataId,dtype:a.dtype,shape:f.shape},s=new Ur(t,d.shape,f.shape);return p.runWebGLProgram(s,[i,o],(0,u.upcastType)(r.dtype,a.dtype))})),g=(0,c.Z)(v,2),y=g[0],b=g[1],x=Hr({inputs:{real:y,imag:b},backend:p});return p.disposeIntermediateTensorInfo(y),p.disposeIntermediateTensorInfo(b),x}var k,w=l||(0,u.upcastType)(d.dtype,f.dtype);if(("string"===d.dtype||"string"===f.dtype||p.shouldExecuteOnCPU([d,f]))&&null!=s){var S=p.texData.get(d.dataId).values,C=p.texData.get(f.dataId).values,_="string"===d.dtype?u.backend_util.fromUint8ToStringArray(S):S,I="string"===d.dtype?u.backend_util.fromUint8ToStringArray(C):C,T=s(d.shape,f.shape,_,I,w),E=(0,c.Z)(T,2),N=E[0],O=E[1],A=p.makeTensorInfo(O,w);return p.texData.get(A.dataId).values=N,A}return k=(0,u.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new jr(n,d.shape,f.shape,a):new Ur(t,d.shape,f.shape),p.runWebGLProgram(k,[d,f],w)}}function na(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return t?Er:kr;if("relu"===e)return t?Or:Cr;if("elu"===e)return t?Nr:Sr;if("relu6"===e)return t?Ar:_r;if("prelu"===e)return t?$r:Qr;if("leakyrelu"===e)return t?Kr:Xr;if("sigmoid"===e)return t?Rr:Tr;throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}var ra=(0,h.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];(0,p.Z)(this,e),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=rt(this.outputShape.length);var l=a?t[1]:t[2],d=Math.ceil(l/2),f=a?"i * 2, rc.y":"rc.y, i * 2",h=i?"rc.z, i * 2":"i * 2, rc.z",m=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],v=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],g="",y="";s&&(g=u?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(s,"\n        }"):c?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(s,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(s,"\n        }"),y="result = activation(result);");var b=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");var x="rc.x",k="rc.x";t[0]<n[0]?x="int(min(float(rc.x), ".concat(t[0]-1,".))"):n[0]<t[0]&&(k="int(min(float(rc.x), ".concat(n[0]-1,".))")),this.userCode="\n      ".concat(g,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(d,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ").concat(d,"; i++) {\n          int batchA = ").concat(x,";\n          int batchB = ").concat(k,";\n          vec4 a = getMatrixA(batchA, ").concat(f,");\n          vec4 b = getMatrixB(batchB, ").concat(h,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(m[0]," * ").concat(v[0],");\n          result += (").concat(m[1]," * ").concat(v[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(b,"\n\n        ").concat(y,"\n\n        setOutput(result);\n      }\n    ")})),aa="return areal * breal - aimag * bimag;",ia="return areal * bimag + aimag * breal;",oa=(0,h.Z)((function e(t,n,r){(0,p.Z)(this,e),this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=u.backend_util.assertAndGetBroadcastShape(n,r),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")})),sa="return a * b;";function ua(e){var t,n=e.inputs,r=e.backend,a=n.a,i=n.b,o=u.backend_util.upcastType(a.dtype,i.dtype);if("complex64"===a.dtype){var s=r.texData.get(a.dataId),l=r.texData.get(i.dataId),d=new oa(aa,a.shape,i.shape),f=new oa(ia,a.shape,i.shape),p=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:a.shape},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:a.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:i.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:i.shape}],h=r.runWebGLProgram(d,p,"float32"),m=r.runWebGLProgram(f,p,"float32"),v=Hr({inputs:{real:h,imag:m},backend:r});return r.disposeIntermediateTensorInfo(h),r.disposeIntermediateTensorInfo(m),v}if(r.shouldExecuteOnCPU([a,i])){var g=r.texData.get(a.dataId),y=r.texData.get(i.dataId),b=Un(a.shape,i.shape,g.values,y.values,o),x=(0,c.Z)(b,2),k=x[0],w=x[1],S=r.makeTensorInfo(w,o);return r.texData.get(S.dataId).values=k,S}return t=(0,u.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new jr(sa,a.shape,i.shape):new Ur(sa,a.shape,i.shape),r.runWebGLProgram(t,[a,i],o)}var ca={kernelName:u.Multiply,backendName:"webgl",kernelFunc:ua};function la(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.shape,o=n,s=u.util.sizeFromShape(a.shape),c=u.util.inferFromImplicitShape(i,s),l=u.util.sizeFromShape(c);u.util.assert(s===l,(function(){return"The new shape (".concat(c,") has ").concat(l," elements and the old ")+"shape (".concat(a.shape,") has ").concat(s," elements. The new shape and old ")+"shape must have the same number of elements."}));var f=o.texData.get(a.dataId);return!f.isPacked||ce(a.shape,c)||null!==f.texture&&ce(f.shape,c)?(o.incRef(a.dataId),{dataId:a.dataId,shape:c,dtype:a.dtype}):function(e,t,n){var r=[ae(e.shape)].concat((0,d.Z)(ie(e.shape))),a={dtype:e.dtype,shape:r,dataId:e.dataId},i=[ae(t)].concat((0,d.Z)(ie(t))),o=new hr(i,r),s=[r],u=n.runWebGLProgram(o,[a],e.dtype,s,!0);return{dataId:u.dataId,shape:t,dtype:u.dtype}}(a,c,o)}var da={kernelName:u.Reshape,backendName:"webgl",kernelFunc:la},fa=(0,h.Z)((function e(t,n){(0,p.Z)(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var s=4*Math.floor(r/4),c=r%4,l="sumValue += dot(values, ones);";if(null!=n){var d=1/n;l="sumValue += dot(values * ".concat(u.util.isInt(d)?d.toPrecision(2):d,", ones);")}var f="";i%r>0&&(f="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(f,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===c,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(l,"\n        } else if (").concat(2===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(l,"\n        } else if (").concat(3===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(l,"\n        }\n        setOutput(sumValue);\n      }\n    ")})),pa=(0,h.Z)((function e(t,n){(0,p.Z)(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var s="0.0",u="";"prod"===n?s="1.0":"min"===n?(s="1.0 / 1e-20",u="min"):"max"===n&&(s="-1.0 / 1e-20",u="max");var c="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===n?c="sumValue":"prod"===n?c="prodValue":"all"===n?c="allValue":"any"===n&&(c="anyValue");var l=4*Math.floor(r/4),d=r%4,f="\n      if (".concat("sum"===n,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===n,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(u,"(values, minMaxValue);\n        if (").concat("min"===n," || ").concat("max"===n,") {\n          minMaxValue = ").concat(u,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),h="vec4";"all"===n?(s="1.0",f="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",h="bvec4"):"any"===n&&(s="0.0",f="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",h="bvec4");var m="";i%r>0&&(m="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(s,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(m,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        vec4 minMaxValue = vec4(").concat(s,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(l,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(f,"\n        }\n\n        int inIdx = inOffset + ").concat(l,";\n        if (").concat(1===d,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(f,"\n        } else if (").concat(2===d,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(f,"\n        } else if (").concat(3===d,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(f,"\n        }\n        setOutput(").concat(c,");\n      }\n    ")}));function ha(e,t,n,r){for(var a=function(e){for(var t=[];0===t.length||1!==t[t.length-1].outSize;){var n=t.length?t[t.length-1].outSize:e[1],r=u.backend_util.computeOptimalWindowSize(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape),i=e,o=0;o<a.length;o++){var s,c=a[o],l=c.inSize,d=c.windowSize,f=c.outSize,p=void 0;p="mean"===n?0===o?new fa({windowSize:d,inSize:l,batchSize:e.shape[0],outSize:f},l):new fa({windowSize:d,inSize:l,batchSize:e.shape[0],outSize:f}):new pa({windowSize:d,inSize:l,batchSize:e.shape[0],outSize:f},n),s=i,i=r.runWebGLProgram(p,[i],t),s.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(s)}return i}var ma=(0,h.Z)((function e(t,n){(0,p.Z)(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];this.outputShape=r,this.rank=r.length;var i=Xe(this.rank),o=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(n);this.userCode="\n    void main() {\n      ".concat(i," resRC = getOutputCoords();\n      setOutput(getA(").concat(o,"));\n    }\n    ")}));var va=(0,h.Z)((function e(t,n){(0,p.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));for(var i=Xe(this.rank),o=dr("rc",this.rank),s=new Array(this.rank),u=0;u<n.length;u++)s[n[u]]=o[u];var c="vec2(".concat(s.slice(-2).join(),")"),l="++".concat(o[this.rank-1]," < ").concat(r[this.rank-1]),d="getChannel(getA(".concat(s.join(),"), ").concat(c,")");this.userCode="\n    void main() {\n      ".concat(i," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(d,";\n      if(").concat(l,") {\n        result[1] = ").concat(d,";\n      }\n      --").concat(o[this.rank-1],";\n      if(++").concat(o[this.rank-2]," < ").concat(r[this.rank-2],") {\n        result[2] = ").concat(d,";\n        if(").concat(l,") {\n          result[3] = ").concat(d,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}));function ga(e,t,n){var r=(0,u.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new va(e.shape,t):new ma(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function ya(e){var t=e.inputs,n=e.backend,r=e.attrs;return function(e,t,n,r){var a=t,i=e.shape.length,o=u.util.parseAxisParam(a,e.shape),s=o,l=u.backend_util.getAxesPermutation(s,i),d=null!=l,f=e;d&&(f=ga(e,l,r),s=u.backend_util.getInnerMostAxes(s.length,i)),u.backend_util.assertAxesAreInnerMostDims("sum",s,i);var p=u.backend_util.computeOutAndReduceShapes(f.shape,s),h=(0,c.Z)(p,2),m=h[0],v=h[1],g=m;n&&(g=u.backend_util.expandShapeToKeepDim(m,o));var y=u.util.sizeFromShape(v),b=la({inputs:{x:f},attrs:{shape:[u.util.sizeFromShape(e.shape)/y,y]},backend:r}),x=ha(b,(0,u.sumOutType)(e.dtype),"sum",r),k=la({inputs:{x:x},attrs:{shape:g},backend:r});return r.disposeIntermediateTensorInfo(b),r.disposeIntermediateTensorInfo(x),d&&r.disposeIntermediateTensorInfo(f),k}(t.x,r.axis,r.keepDims,n)}var ba={kernelName:u.Sum,backendName:"webgl",kernelFunc:ya};function xa(e){for(var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.perm,s=r,u=i.shape.length,c=new Array(u),l=0;l<c.length;l++)c[l]=i.shape[o[l]];if(s.shouldExecuteOnCPU([i])){var d=s.texData.get(i.dataId).values,f=cr(d,i.shape,i.dtype,o,c);t=s.makeTensorInfo(c,i.dtype),s.texData.get(t.dataId).values=f}else t=ga(i,o,s);return t}var ka={kernelName:u.Transpose,backendName:"webgl",kernelFunc:xa};function wa(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,i=e.backend,o=e.bias,s=void 0===o?null:o,c=e.preluActivationWeights,l=void 0===c?null:c,d=e.leakyreluAlpha,f=void 0===d?0:d,p=e.activation,h=void 0===p?null:p,m=t.shape.length,v=n.shape.length,g=r?t.shape[m-2]:t.shape[m-1],y=a?n.shape[v-1]:n.shape[v-2],b=r?t.shape[m-1]:t.shape[m-2],x=a?n.shape[v-2]:n.shape[v-1],k=t.shape.slice(0,-2),w=n.shape.slice(0,-2),S=u.util.sizeFromShape(k),C=u.util.sizeFromShape(w),_=u.broadcast_util.assertAndGetBroadcastShape(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([b,x]);u.util.assert(g===y,(function(){return"Error in matMul: inner shapes (".concat(g,") and (")+"".concat(y,") of Tensors with shapes ").concat(t.shape," and ")+"".concat(n.shape," and transposeA=").concat(r)+" and transposeB=".concat(a," must match.")}));var I,T=r?[S,g,b]:[S,b,g],E=a?[C,x,y]:[C,y,x],N=la({inputs:{x:t},backend:i,attrs:{shape:T}}),O=la({inputs:{x:n},backend:i,attrs:{shape:E}}),A=[N,O],R=Math.max(S,C),P=r?N.shape[1]:N.shape[2],D=null!=s,B=null!=l,M="leakyrelu"===h,F=null!=h?na(h,!0):null;if((1===b||1===x)&&P>1e3&&!1===(D||B||M||null!=F)){var L=N,V=O;r&&(L=xa({inputs:{x:N},backend:i,attrs:{perm:[0,2,1]}}),A.push(L)),a&&(V=xa({inputs:{x:O},backend:i,attrs:{perm:[0,2,1]}}),A.push(V));var z=1===x,Z=L;1!==x&&(Z=la({inputs:{x:L},backend:i,attrs:{shape:[R,P,1]}}),A.push(Z));var U=1===x?2:1,j=V;z&&(j=la({inputs:{x:V},backend:i,attrs:{shape:[R,1,P]}}),A.push(j));var W=ua({inputs:{a:Z,b:j},backend:i});I=ya({inputs:{x:W},backend:i,attrs:{axis:U,keepDims:!0}}),A.push(W)}else{var G=(0,u.upcastType)(t.dtype,n.dtype),H=new ra(T,E,[R,b,x],r,a,D,F,B,M),q=[N,O];if(null!=s&&q.push(s),B&&q.push(l),M){var X=i.makeTensorInfo([],"float32",u.util.createScalarValue(f,"float32"));q.push(X),A.push(X)}I=i.runWebGLProgram(H,q,G)}var K=la({inputs:{x:I},backend:i,attrs:{shape:_}});A.push(I);for(var Y=0,Q=A;Y<Q.length;Y++){var $=Q[Y];i.disposeIntermediateTensorInfo($)}return K}var Sa={kernelName:u._FusedMatMul,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=t.bias,s=t.preluActivationWeights,u=r.transposeA,c=r.transposeB,l=r.activation;return wa({a:a,b:i,transposeA:u,transposeB:c,backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:r.leakyreluAlpha,activation:l})}},Ca="return abs(x);";var _a={kernelName:u.Abs,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])&&"complex64"!==a.dtype){var i=r.texData.get(a.dataId),o=Yn(i.values);return r.makeTensorInfo(a.shape,a.dtype,o)}return t=(0,u.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new Pr(a.shape,Ca):new br(a.shape,Ca),r.runWebGLProgram(t,[a],a.dtype)}},Ia=ea({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),Ta={kernelName:u.Acos,backendName:"webgl",kernelFunc:Ia},Ea=ea({opSnippet:"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),Na={kernelName:u.Acosh,backendName:"webgl",kernelFunc:Ea},Oa="return a + b;",Aa=ta({opSnippet:Oa,packedOpSnippet:Oa,supportsComplex:!0,cpuKernelImpl:wn}),Ra={kernelName:u.Add,backendName:"webgl",kernelFunc:Aa},Pa=(0,h.Z)((function e(t,n){(0,p.Z)(this,e),this.outputShape=[],this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        float result = ").concat(a,";\n        setOutput(result);\n      }\n    ")})),Da=(0,h.Z)((function e(t,n){(0,p.Z)(this,e),this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        vec4 result = ").concat(a,";\n        setOutput(result);\n      }\n    ")}));var Ba={kernelName:u.AddN,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n;if(1===a.length)return Wr({inputs:{x:a[0]},backend:r});if(a.length>(0,u.env)().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var i=Math.floor(a.length/2),o=e({inputs:a.slice(0,i),backend:r}),s=e({inputs:a.slice(i),backend:r});return e({inputs:[o,s],backend:r})}var c=a.map((function(e){return e.dtype})).reduce((function(e,t){return(0,u.upcastType)(e,t)})),l=a.map((function(e){return e.shape})),d=(0,u.env)().getBool("WEBGL_PACK")?new Da(a[0].shape,l):new Pa(a[0].shape,l);return r.runWebGLProgram(d,a,c)}};var Ma={kernelName:u.All,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,l=u.util.parseAxisParam(i,a.shape),d=l,f=u.backend_util.getAxesPermutation(d,s),p=a;null!=f&&(p=xa({inputs:{x:a},backend:n,attrs:{perm:f}}),d=u.backend_util.getInnerMostAxes(d.length,s)),u.backend_util.assertAxesAreInnerMostDims("all",d,s);var h,m=u.backend_util.computeOutAndReduceShapes(p.shape,d),v=(0,c.Z)(m,2),g=v[0],y=v[1],b=la({inputs:{x:p},backend:n,attrs:{shape:[-1,u.util.sizeFromShape(y)]}}),x=ha(b,b.dtype,"all",n);return h=la(o?{inputs:{x:x},backend:n,attrs:{shape:u.backend_util.expandShapeToKeepDim(g,l)}}:{inputs:{x:x},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(x),null!=f&&n.disposeIntermediateTensorInfo(p),h}};var Fa={kernelName:u.Any,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,l=u.util.parseAxisParam(i,a.shape),d=l,f=u.backend_util.getAxesPermutation(d,s),p=a;null!=f&&(p=xa({inputs:{x:a},backend:n,attrs:{perm:f}}),d=u.backend_util.getInnerMostAxes(d.length,s)),u.backend_util.assertAxesAreInnerMostDims("any",d,s);var h,m=u.backend_util.computeOutAndReduceShapes(p.shape,d),v=(0,c.Z)(m,2),g=v[0],y=v[1],b=la({inputs:{x:p},backend:n,attrs:{shape:[-1,u.util.sizeFromShape(y)]}}),x=ha(b,b.dtype,"any",n);return h=la(o?{inputs:{x:x},backend:n,attrs:{shape:u.backend_util.expandShapeToKeepDim(g,l)}}:{inputs:{x:x},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(x),null!=f&&n.disposeIntermediateTensorInfo(p),h}},La=(0,h.Z)((function e(t,n,r){(0,p.Z)(this,e),this.variableNames=["A"];var a=t.windowSize,i=t.batchSize,o=t.outSize;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];var s="max"===n?">":"<",u=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(a,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          int inIdx = ").concat(u,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(s," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")})),Va=(0,h.Z)((function e(t,n,r,a){(0,p.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,u.util.assert(t.length>2,(function(){return"Packed arg".concat(r.charAt(0).toUpperCase()+r.slice(1)," supports only inputs with rank above 2.")}));var i=t[t.length-1],o=Math.ceil(i/n);this.outputShape=t.slice(0,-1),o>1&&this.outputShape.push(o),a||this.variableNames.push("bestIndicesA");var s,c,l=this.outputShape,d=l.length,f=Xe(d),h=fr("coords",d);if(1===o){var m=Xe(c=d+1);s="\n        ".concat(m," sourceLocR = ").concat(m,"(").concat(h.join(),", 0);\n        ++").concat(h[d-1],";\n        ").concat(m," sourceLocG = ").concat(m,"(").concat(h.join(),", 0);\n        ++").concat(h[d-2],";\n        ").concat(m," sourceLocA = ").concat(m,"(").concat(h.join(),", 0);\n        --").concat(h[d-1],";\n        ").concat(m," sourceLocB = ").concat(m,"(").concat(h.join(),", 0);\n        --").concat(h[d-2],";")}else c=d,s="\n        ".concat(f," sourceLocR = coords;\n        ++").concat(h[d-1],";\n        ").concat(f," sourceLocG = coords;\n        ++").concat(h[d-2],";\n        ").concat(f," sourceLocA = coords;\n        --").concat(h[d-1],";\n        ").concat(f," sourceLocB = coords;\n        --").concat(h[d-2],";");var v=["x","y","z","w","u","v"].slice(0,c),g="."+v[c-1],y=v.map((function(e){return"int "+e})),b=fr("sourceLocR",c-1).concat("inIdx.r"),x=fr("sourceLocG",c-1).concat("inIdx.g"),k=fr("sourceLocB",c-1).concat("inIdx.b"),w=fr("sourceLocA",c-1).concat("inIdx.a"),S="max"===r?"greaterThan":"lessThan",C=a?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(b.join(),"),\n                             getBestIndicesAChannel(").concat(x.join(),"),\n                             getBestIndicesAChannel(").concat(k.join(),"),\n                             getBestIndicesAChannel(").concat(w.join(),")));"),_="vec4(\n            getAChannel(".concat(b.join(),"),\n            hasNextCol ? getAChannel(").concat(x.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(k.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(w.join(),") : 0.)"),I=a?"":"\n      float getBestIndicesAChannel(".concat(y.join(),") {\n        return getChannel(getBestIndicesA(").concat(v.join(),"),\n                                          vec2(").concat(v.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(y.join(),") {\n        return getChannel(getA(").concat(v.join(),"),\n                               vec2(").concat(v.slice(-2).join(),"));\n      }\n      ").concat(I,"\n      void main() {\n        ").concat(f," coords = getOutputCoords();\n        bool hasNextCol = ").concat(h[d-1]," < ").concat(l[d-1]-1,";\n        bool hasNextRow = ").concat(h[d-2]," < ").concat(l[d-2]-1,";\n        ").concat(s,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(g,", sourceLocG").concat(g,",\n          sourceLocB").concat(g,", sourceLocA").concat(g,") * ").concat(n,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(_,";\n\n        for (int i = 0; i < ").concat(n,"; i++) {\n          inIdx = srcIdx;\n          ").concat(C,"\n          vec4 candidate = ").concat(_,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(S,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}));function za(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.shape[0],i=t.shape[1];null!=r&&(a=r.shape[0],i=r.shape[1]);var o=u.backend_util.computeOptimalWindowSize(i),s={windowSize:o,inSize:i,batchSize:a,outSize:Math.ceil(i/o)},c=new La(s,n,null==r),l=[t];null!=r&&l.push(r);var d=e.runWebGLProgram(c,l,"int32");if(1===d.shape[1])return d;var f=za(e,t,n,d);return e.disposeIntermediateTensorInfo(d),f}function Za(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=null!=r?r.shape:t.shape,i=a[a.length-1],o=u.backend_util.computeOptimalWindowSize(i),s=new Va(a,o,n,null==r),c=null==r?[t]:[t,r],l=e.runWebGLProgram(s,c,"int32");if(l.shape.length===t.shape.length){var d=Za(e,t,n,l);return e.disposeIntermediateTensorInfo(l),d}return l}function Ua(e,t,n,r){var a=[n];if(u.backend_util.assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.shape.length),!(0,u.env)().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){var i=[],o=e.texData.get(t.dataId),s=t;null!==o&&o.isPacked&&(s=e.unpackTensor(t),i.push(s));var l=u.backend_util.computeOutAndReduceShapes(s.shape,a),d=(0,c.Z)(l,2),f=d[0],p=d[1],h=u.util.sizeFromShape(p),m=la({inputs:{x:s},backend:e,attrs:{shape:[-1,h]}});i.push(m);var v=za(e,m,r);i.push(v);var g=la({inputs:{x:v},backend:e,attrs:{shape:f}});return i.forEach((function(t){return e.disposeIntermediateTensorInfo(t)})),g}return Za(e,t,r)}var ja={kernelName:u.ArgMax,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=u.util.parseAxisParam(i,a.shape),s=u.backend_util.getAxesPermutation(o,a.shape.length),c=a,l=[];null!=s&&(c=xa({inputs:{x:a},backend:n,attrs:{perm:s}}),l.push(c),o=u.backend_util.getInnerMostAxes(o.length,c.shape.length)),u.backend_util.assertAxesAreInnerMostDims("argMax",[o[0]],c.shape.length);var d=Ua(n,c,o[0],"max");return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),d}};var Wa={kernelName:u.ArgMin,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=u.util.parseAxisParam(i,a.shape),s=u.backend_util.getAxesPermutation(o,a.shape.length),c=a,l=[];null!=s&&(c=xa({inputs:{x:a},backend:n,attrs:{perm:s}}),l.push(c),o=u.backend_util.getInnerMostAxes(o.length,c.shape.length)),u.backend_util.assertAxesAreInnerMostDims("argMin",[o[0]],c.shape.length);var d=Ua(n,c,o[0],"min");return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),d}},Ga=ea({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),Ha={kernelName:u.Asin,backendName:"webgl",kernelFunc:Ga},qa=ea({opSnippet:"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));"}),Xa={kernelName:u.Asinh,backendName:"webgl",kernelFunc:qa},Ka=ea({opSnippet:"if (isnan(x)) return x;\n  return atan(x);\n"}),Ya={kernelName:u.Atan,backendName:"webgl",kernelFunc:Ka},Qa=ta({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),$a={kernelName:u.Atan2,backendName:"webgl",kernelFunc:Qa},Ja=ea({opSnippet:"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),ei={kernelName:u.Atanh,backendName:"webgl",kernelFunc:Ja},ti=(0,h.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if((0,p.Z)(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideHeight,u=t.strideWidth,c=t.dilationHeight,l=t.dilationWidth,d=t.effectiveFilterHeight,f=t.effectiveFilterWidth,h=t.padInfo.top,m=t.padInfo.left;this.outputShape=t.outShape;var v="avg"===n,g="((batch  * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),y="(xR * ".concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),b="0.0";if(v||(b="-1.0 / 1e-20"),r){var x=">=";this.userCode="\n        const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n        const ivec2 pads = ivec2(").concat(h,", ").concat(m,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(d,";\n              wR += ").concat(c,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(f,";\n                wC += ").concat(l,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(x," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(a?i?g:y:"wR * ".concat(f," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var k="max",w="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(w="avgValue / count");var S=4*Math.floor(o/4),C=o%4,_="\n      if (".concat(v,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(k,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n      const ivec2 pads = ivec2(").concat(h,", ").concat(m,");\n      const float initializationValue = ").concat(b,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(b,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(d,";\n            wR += ").concat(c,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(S,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(l,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              getValue(batch, xR, xC + 3 * ").concat(l,", d)\n            );\n\n            ").concat(_,"\n          }\n\n          int xC = xCCorner + ").concat(S,";\n          if (").concat(1===C,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(_,"\n          } else if (").concat(2===C,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(_,"\n          } else if (").concat(3===C,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              initializationValue\n            );\n\n            ").concat(_,"\n          }\n        }\n        setOutput(").concat(w,");\n      }\n    ")}})),ni=(0,h.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if((0,p.Z)(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideDepth,u=t.strideHeight,c=t.strideWidth,l=t.dilationDepth,d=t.dilationHeight,f=t.dilationWidth,h=t.effectiveFilterDepth,m=t.effectiveFilterHeight,v=t.effectiveFilterWidth,g=t.padInfo.front,y=t.padInfo.top,b=t.padInfo.left;this.outputShape=t.outShape;var x="avg"===n,k="0.0";if(x||(k="-1.0 / 1e-20"),r){var w=">=";this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(s,", ").concat(u,", ").concat(c,");\n        const ivec3 pads = ivec3(").concat(g,", ").concat(y,", ").concat(b,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(h,";\n              wD += ").concat(l,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(m,";\n                wR += ").concat(d,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(v,";\n                  wC += ").concat(f,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(w," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(a?i?"(((batch * ".concat(t.inDepth," + xD) * ").concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"((xD * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"wD * ".concat(m," * ").concat(v," +\n                      wR * ").concat(v," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var S="max",C="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(C="avgValue / count");var _=4*Math.floor(o/4),I=o%4,T="\n      if (".concat(x,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(S,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(s,", ").concat(u,", ").concat(c,");\n      const ivec3 pads = ivec3(").concat(g,", ").concat(y,", ").concat(b,");\n      const float initializationValue = ").concat(k,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(k,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(h,";\n            wD += ").concat(l,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(m,";\n            wR += ").concat(d,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(_,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(f,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(f,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(f,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(f,", ch)\n              );\n\n              ").concat(T,"\n            }\n\n            int xC = xCCorner + ").concat(_,";\n            if (").concat(1===I,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(T,"\n            } else if (").concat(2===I,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(f,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(T,"\n            } else if (").concat(3===I,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(f,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(f,", ch),\n                initializationValue\n              );\n\n              ").concat(T,"\n            }\n          }\n          setOutput(").concat(C,");\n        }\n      }\n    ")}}));var ri={kernelName:u.AvgPool,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;ke(a,"avgPool");var i=r.filterSize,o=r.strides,s=r.pad,c=r.dimRoundingMode;u.util.assert(u.backend_util.eitherStridesOrDilationsAreOne(o,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var l=u.backend_util.computePool2DInfo(a.shape,i,o,1,s,c);if(1===l.filterWidth&&1===l.filterHeight&&u.util.arraysEqual(l.inShape,l.outShape))return Wr({inputs:{x:a},backend:n});var d=new ti(l,"avg",!1);return n.runWebGLProgram(d,[a],"float32")}};var ai={kernelName:u.AvgPool3D,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,c=r.dimRoundingMode,l=r.dataFormat,d=u.backend_util.computePool3DInfo(a.shape,i,o,[1,1,1],s,c,l),f=new ni(d,"avg",!1);return n.runWebGLProgram(f,[a],"float32")}},ii=(0,h.Z)((function e(t){(0,p.Z)(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterHeight,c=t.effectiveFilterWidth,l=u-1-t.padInfo.top,d=c-1-t.padInfo.left,f=1/(n*r);this.userCode="\n      const ivec2 pads = ivec2(".concat(l,", ").concat(d,");\n      const float avgMultiplier = float(").concat(f,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(u,";\n            wR += ").concat(o,") {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(c,";\n            wC+= ").concat(s,") {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),oi=(0,h.Z)((function e(t){(0,p.Z)(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,d=t.effectiveFilterDepth,f=t.effectiveFilterHeight,h=t.effectiveFilterWidth,m=d-1-t.padInfo.front,v=f-1-t.padInfo.top,g=h-1-t.padInfo.left,y=1/(n*r*a);this.userCode="\n      const ivec3 pads = ivec3(".concat(m,", ").concat(v,", ").concat(g,");\n      const float avgMultiplier = float(").concat(y,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(d,";\n            wD += ").concat(u,") {\n          float dyD = float(dyDCorner + wD) / ").concat(i,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(f,";\n              wR += ").concat(c,") {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(h,";\n                wC += ").concat(l,") {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var si={kernelName:u.AvgPool3DGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,c=r.pad,l=r.dimRoundingMode,d=u.backend_util.computePool3DInfo(i.shape,o,s,[1,1,1],c,l),f=new oi(d);return n.runWebGLProgram(f,[a],i.dtype)}};var ui={kernelName:u.AvgPoolGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;ke([a,i],"avgPoolGrad");var s=r.filterSize,c=r.strides,l=r.pad,d=u.backend_util.computePool2DInfo(o.shape,s,c,1,l),f=new ii(d);return n.runWebGLProgram(f,[a],o.dtype)}};var ci={kernelName:u.BatchMatMul,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return wa({a:t.a,b:t.b,transposeA:r.transposeA,transposeB:r.transposeB,backend:n})}},li=(0,h.Z)((function e(t,n,r,a,i,o){(0,p.Z)(this,e),this.outputShape=[],this.variableNames=["x","mean","variance"],u.backend_util.assertAndGetBroadcastShape(t,n),u.backend_util.assertAndGetBroadcastShape(t,r);var s="0.0";null!=a&&(u.backend_util.assertAndGetBroadcastShape(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var c="1.0";null!=i&&(u.backend_util.assertAndGetBroadcastShape(t,i),this.variableNames.push("scale"),c="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(s,";\n        float scale = ").concat(c,";\n        float inv = scale * inversesqrt(variance + float(").concat(o,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")})),di=(0,h.Z)((function e(t,n,r,a,i,o){(0,p.Z)(this,e),this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],u.backend_util.assertAndGetBroadcastShape(t,n),u.backend_util.assertAndGetBroadcastShape(t,r);var s="vec4(0.0)";null!=a&&(u.backend_util.assertAndGetBroadcastShape(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var c="vec4(1.0)";null!=i&&(u.backend_util.assertAndGetBroadcastShape(t,i),this.variableNames.push("scale"),c="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = ".concat(s,";\n        vec4 scale = ").concat(c,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(o,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")})),fi={kernelName:u.FusedBatchNorm,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.mean,o=t.variance,s=t.offset,c=t.scale;u.util.assert(i.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),u.util.assert(null==s||i.shape.length===s.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),u.util.assert(null==c||i.shape.length===c.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var l=r.varianceEpsilon;null==l&&(l=.001);var d=[a,i,o],f=null;null!=s&&(f=s.shape,d.push(s));var p=null;null!=c&&(p=c.shape,d.push(c));var h=(0,u.env)().getBool("WEBGL_PACK_NORMALIZATION")?new di(a.shape,i.shape,o.shape,f,p,l):new li(a.shape,i.shape,o.shape,f,p,l);return n.runWebGLProgram(h,d,d[0].dtype)}},pi=(0,h.Z)((function e(t){(0,p.Z)(this,e),this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n=Xe(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var r,a=function(e){if(1===e)return"sourceLoc";if(e<=6)return hi.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank),i=t.map((function(e,t){return"sourceLoc.".concat(hi[t]," = start[").concat(t,"] + coords.").concat(hi[t],";")}));r="\n        ".concat(n," sourceLoc;\n        ").concat(n," coords = getOutputCoords();\n        ").concat(i.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(r,"\n        setOutput(getSource(").concat(a,"));\n      }\n    ")})),hi=["x","y","z","w","u","v"];var mi=(0,h.Z)((function e(t){(0,p.Z)(this,e),this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var n=Xe(this.rank),r=fr("coords",this.rank),a=fr("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":"vec2(".concat(a.slice(-2).join(),")"),o="getChannel(getSource(".concat(a.join(),"), ").concat(i,")"),s="\n      result.x = ".concat(o,";\n      if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n        ++").concat(a[this.rank-1],";\n        result.y = ").concat(o,";\n        --").concat(a[this.rank-1],";\n      }\n    "),u=1===this.rank?"":"\n      --".concat(r[this.rank-1],";\n      if (++").concat(r[this.rank-2]," < ").concat(t[this.rank-2],") {\n        ++").concat(a[this.rank-2],";\n        result.z = ").concat(o,";\n        if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n          ++").concat(a[this.rank-1],";\n          result.w = ").concat(o,";\n        }\n      }\n    "),c=this.rank<=4?"sourceLoc = coords +\n            ".concat(n,"(").concat(t.map((function(e,t){return"start[".concat(t,"]")})).join(),");"):t.map((function(e,t){return"".concat(a[t]," = ").concat(r[t]," + start[").concat(t,"];")})).join("\n");this.userCode="\n      void main() {\n        ".concat(n," coords = getOutputCoords();\n        ").concat(n," sourceLoc;\n        ").concat(c,"\n        vec4 result = vec4(0.);\n        ").concat(s,"\n        ").concat(u,"\n        setOutput(result);\n      }\n    ")}));function vi(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.size,s=u.slice_util.parseSliceParams(a,i,o),l=(0,c.Z)(s,2),d=l[0],f=l[1];if(u.slice_util.assertParamsValid(a,d,f),0===u.util.sizeFromShape(f))return n.makeTensorInfo(f,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||"string"===a.dtype){var p=n.texData.get(a.dataId),h=Qn(p.values,d,f,a.shape,a.dtype);return n.makeTensorInfo(f,a.dtype,h)}var m=n.texData.get(a.dataId).isPacked,v=u.slice_util.isSliceContinous(a.shape,d,f);if(m||!v){var g=(0,u.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new mi(f):new pi(f),y=[d];return n.runWebGLProgram(g,[a],a.dtype,y)}return n.uploadToGPU(a.dataId),function(e,t,n,r){var a=r.texData.get(e.dataId),i=r.makeTensorInfo(n,e.dtype),o=r.texData.get(i.dataId);Object.assign(o,a),o.refCount=1,o.shape=n,o.dtype=e.dtype;var s=u.slice_util.computeFlatOffset(t,u.util.computeStrides(e.shape));a.slice&&(s+=a.slice.flatOffset),o.slice={flatOffset:s,origDataId:a.slice&&a.slice.origDataId||e.dataId};var c=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,c+1),i}(a,d,f,n)}var gi={kernelName:u.Slice,backendName:"webgl",kernelFunc:vi},yi={kernelName:u.BatchToSpaceND,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops;u.util.assert(a.shape.length<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),c=u.backend_util.getReshaped(a.shape,i,s),l=u.backend_util.getPermuted(c.length,i.length),d=u.backend_util.getReshapedPermuted(a.shape,i,s),f=u.backend_util.getSliceBeginCoords(o,i.length),p=u.backend_util.getSliceSize(d,o,i.length),h=[],m=la({inputs:{x:a},backend:n,attrs:{shape:c}}),v=xa({inputs:{x:m},backend:n,attrs:{perm:l}}),g=la({inputs:{x:v},backend:n,attrs:{shape:d}}),y=vi({inputs:{x:g},backend:n,attrs:{begin:f,size:p}});return h.push(m),h.push(v),h.push(g),h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),y}};var bi={kernelName:u.Bincount,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=n.readSync(a.dataId),u=n.readSync(i.dataId),c=Sn(s,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}};var xi={kernelName:u.BroadcastArgs,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,i=n.readSync(r.dataId),o=n.readSync(a.dataId),s=u.backend_util.assertAndGetBroadcastShape(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},ki=ta({opSnippet:"return float(a != b);",cpuKernelImpl:Wn,dtype:"bool"}),wi={kernelName:u.NotEqual,backendName:"webgl",kernelFunc:ki};function Si(e){var t=e.inputs,n=e.backend,r=t.input;return Wr({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}var Ci={kernelName:u.Real,backendName:"webgl",kernelFunc:Si};var _i={kernelName:u.Cast,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=t.attrs,i=n.x,o=a.dtype;if("complex64"===o){if("complex64"===i.dtype)return Wr({inputs:{x:i},backend:r});var s=u.zeros(i.shape),c=e({inputs:{x:i},backend:r,attrs:{dtype:"float32"}}),l=Hr({inputs:{real:c,imag:s},backend:r});return s.dispose(),r.disposeIntermediateTensorInfo(c),l}if("complex64"===i.dtype){var d=Si({inputs:{input:i},backend:r}),f=e({inputs:{x:d},backend:r,attrs:{dtype:o}});return r.disposeIntermediateTensorInfo(d),f}if(!u.util.hasEncodingLoss(i.dtype,o)){var p=Wr({inputs:{x:i},backend:r});return{dataId:p.dataId,shape:p.shape,dtype:o}}if("int32"===o)return function(e,t){var n=new br(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(i,r);if("bool"===o){var h=r.makeTensorInfo([],"bool",u.util.getTypedArrayFromDType("bool",1)),m=ki({inputs:{a:i,b:h},backend:r});return r.disposeIntermediateTensorInfo(h),m}throw new Error("Error in Cast: failed to cast ".concat(i.dtype," to ").concat(o))}},Ii="return ceil(x);",Ti=ea({opSnippet:Ii,packedOpSnippet:Ii,cpuKernelImpl:_n}),Ei={kernelName:u.Ceil,backendName:"webgl",kernelFunc:Ti},Ni=(0,h.Z)((function e(t){(0,p.Z)(this,e),this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "})),Oi=(0,h.Z)((function e(t){(0,p.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}));var Ai={kernelName:u.ClipByValue,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.clipValueMin,s=a.clipValueMax;t=(0,u.env)().getBool("WEBGL_PACK_CLIP")?new Oi(i.shape):new Ni(i.shape);var c=[[o],[s]];return r.runWebGLProgram(t,[i],i.dtype,c)}},Ri=(0,h.Z)((function e(t){(0,p.Z)(this,e),this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}));function Pi(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}var Di={kernelName:u.ComplexAbs,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n.texData.get(r.dataId),i=new Ri(r.shape),o=[Pi(r,a.complexTensorInfos.real),Pi(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}},Bi=(0,h.Z)((function e(t){(0,p.Z)(this,e),this.outputShape=[],this.outputShape=u.backend_util.computeOutShape(t,1),this.variableNames=t.map((function(e,t){return"T".concat(t)}));var n=new Array(t.length-1);n[0]=t[0][1];for(var r=1;r<n.length;r++)n[r]=n[r-1]+t[r][1];for(var a=["if (yC < ".concat(n[0],") setOutput(getT0(yR, yC));")],i=1;i<n.length;i++){var o=n[i-1];a.push("else if (yC < ".concat(n[i],") ")+"setOutput(getT".concat(i,"(yR, yC-").concat(o,"));"))}var s=n.length,c=n[n.length-1];a.push("else setOutput(getT".concat(s,"(yR, yC-").concat(c,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(a.join("\n        "),"\n      }\n    ")})),Mi=(0,h.Z)((function e(t,n){(0,p.Z)(this,e),this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=u.backend_util.computeOutShape(t,n);var r=this.outputShape,a=r.length,i=Xe(a),o=fr("coords",a),s=["x","y","z","w","u","v"].slice(0,a);this.variableNames=t.map((function(e,t){return"T".concat(t)}));var c=new Array(t.length-1);c[0]=t[0][n];for(var l=1;l<c.length;l++)c[l]=c[l-1]+t[l][n];for(var d=s[n],f=s.slice(-2),h=s.join(),m="if (".concat(d," < ").concat(c[0],") {\n        return getChannel(\n            getT0(").concat(h,"), vec2(").concat(f.join(),"));\n        }"),v=1;v<c.length;v++){var g=c[v-1];m+="\n        if (".concat(d," < ").concat(c[v],"  && ").concat(d," >= ").concat(c[v-1],") {\n          return getChannel(\n            getT").concat(v,"(").concat(Fi(s,d,g),"),\n            vec2(").concat(Fi(f,d,g),"));\n        }")}var y=c.length,b=c[c.length-1];m+="\n        return getChannel(\n          getT".concat(y,"(").concat(Fi(s,d,b),"),\n          vec2(").concat(Fi(f,d,b),"));"),this.userCode="\n      float getValue(".concat(s.map((function(e){return"int "+e})),") {\n        ").concat(m,"\n      }\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(o,"), 0., 0., 0.);\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," + 1;\n        if (").concat(o[a-1]," < ").concat(r[a-1],") {\n          result.g = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-2]," = ").concat(o[a-2]," + 1;\n        if (").concat(o[a-2]," < ").concat(r[a-2],") {\n          result.a = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," - 1;\n        if (").concat(o[a-2]," < ").concat(r[a-2]," &&\n            ").concat(o[a-1]," < ").concat(r[a-1],") {\n          result.b = getValue(").concat(o,");\n        }\n        setOutput(result);\n      }\n    ")}));function Fi(e,t,n){var r=e.indexOf(t);return e.map((function(e,t){return t===r?"".concat(e," - ").concat(n):e})).join()}function Li(e){var t=e.inputs,n=e.backend,r=t.input;return Wr({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}var Vi={kernelName:u.Imag,backendName:"webgl",kernelFunc:Li};function zi(e,t,n){var r=e[0].dtype;if("complex64"===r){var a=e.map((function(e){return Si({inputs:{input:e},backend:n})})),i=e.map((function(e){return Li({inputs:{input:e},backend:n})})),o=zi(a,t,n),s=zi(i,t,n),c=Hr({inputs:{real:o,imag:s},backend:n});return a.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),c}var l=n.shouldExecuteOnCPU(e);if("string"===r&&(l=!0),l){var d=e.map((function(e){var r=u.util.sizeFromShape(e.shape.slice(t));return la({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),f=d.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}})),p=u.backend_util.computeOutShape(d.map((function(e){return e.shape})),1),h=1===d[0].shape[0],m=In(f,p,r,h),v=u.backend_util.computeOutShape(e.map((function(e){return e.shape})),t),g=n.makeTensorInfo(v,r,m);return d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}var y=(0,u.env)().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(e.length>y){for(var b=[],x=0;x<e.length;x+=y){var k=e.slice(x,x+y);b.push(zi(k,t,n))}for(var w=zi(b,t,n),S=0,C=b;S<C.length;S++){var _=C[S];n.disposeIntermediateTensorInfo(_)}return w}if((0,u.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){var I=new Mi(e.map((function(e){return e.shape})),t);return n.runWebGLProgram(I,e,r)}var T=function(e,t,n){var r=u.backend_util.computeOutShape(e.map((function(e){return e.shape})),t);return{tensors2D:e.map((function(e){return la({inputs:{x:e},attrs:{shape:[-1,u.util.sizeFromShape(e.shape.slice(t))]},backend:n})})),outShape:r}}(e,t,n),E=T.tensors2D,N=T.outShape,O=new Bi(E.map((function(e){return e.shape}))),A=n.runWebGLProgram(O,E,r);E.forEach((function(e){return n.disposeIntermediateTensorInfo(e)}));var R=la({inputs:{x:A},attrs:{shape:N},backend:n});return n.disposeIntermediateTensorInfo(A),R}function Zi(e){var t=e.inputs,n=e.backend,r=e.attrs.axis,a=u.util.parseAxisParam(r,t[0].shape)[0],i=u.backend_util.computeOutShape(t.map((function(e){return e.shape})),a);if(0===u.util.sizeFromShape(i))return n.makeTensorInfo(i,t[0].dtype,[]);var o=t.filter((function(e){return u.util.sizeFromShape(e.shape)>0}));if(1===o.length)return Wr({inputs:{x:o[0]},backend:n});var s=o.map((function(e){return e.shape}));return u.backend_util.assertParamsConsistent(s,a),zi(o,a,n)}var Ui={kernelName:u.Concat,backendName:"webgl",kernelFunc:Zi},ji=(0,h.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,p.Z)(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,c=t.strideWidth,l=t.dilationHeight,d=t.dilationWidth,f=t.filterHeight,h=t.filterWidth,m=4*Math.floor(t.inChannels/4),v=t.inChannels%4,g="channelsLast"===t.dataFormat,y=g?1:2,b=g?2:3,x=g?3:1,k="",w="";r&&(k=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),w="result = activation(result);");var S=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(k,"\n\n      const ivec2 strides = ivec2(").concat(u,", ").concat(c,");\n      const ivec2 pads = ivec2(").concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(x,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(y,"], coords[").concat(b,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(f,"; wR++) {\n          int xR = xRCorner + wR * ").concat(l,";\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(h,"; wC++) {\n            int xC = xCCorner + wC * ").concat(d,";\n\n            if (xC < 0 || xC >= ").concat(t.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(m,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(g,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===v,") {\n\n              if (").concat(g,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(m,") *\n                    getW(wR, wC, ").concat(m,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(m,", xR, xC) *\n                    getW(wR, wC, ").concat(m,", d2);\n              }\n\n            } else if (").concat(2===v,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(m,", d2),\n                getW(wR, wC, ").concat(m," + 1, d2)\n              );\n\n              if (").concat(g,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(m,"),\n                  getX(batch, xR, xC, ").concat(m," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(m,", xR, xC),\n                  getX(batch, ").concat(m," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===v,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(m,", d2),\n                getW(wR, wC, ").concat(m," + 1, d2),\n                getW(wR, wC, ").concat(m," + 2, d2)\n              );\n\n              if (").concat(g,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(m,"),\n                  getX(batch, xR, xC, ").concat(m," + 1),\n                  getX(batch, xR, xC, ").concat(m," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(m,", xR, xC),\n                  getX(batch, ").concat(m," + 1, xR, xC),\n                  getX(batch, ").concat(m," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(S,"\n        ").concat(w,"\n        setOutput(result);\n      }\n    ")})),Wi=(0,h.Z)((function e(t){(0,p.Z)(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,r=t.padInfo.top,a=t.padInfo.left,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,d=t.filterDepth,f=t.filterHeight,h=t.filterWidth,m=4*Math.floor(t.inChannels/4),v=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(i,", ").concat(o,", ").concat(s,");\n      const ivec3 pads = ivec3(").concat(n,", ").concat(r,", ").concat(a,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(d,"; wF++) {\n          int xF = xFCorner + wF * ").concat(u,";\n\n          if (xF < 0 || xF >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(f,"; wR++) {\n            int xR = xRCorner + wR * ").concat(c,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(h,"; wC++) {\n              int xC = xCCorner + wC * ").concat(l,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(m,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===v,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(m,") *\n                  getW(wF, wR, wC, ").concat(m,", d2);\n              } else if (").concat(2===v,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(m,"),\n                  getX(batch, xF, xR, xC, ").concat(m," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(m,", d2),\n                  getW(wF, wR, wC, ").concat(m," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===v,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(m,"),\n                  getX(batch, xF, xR, xC, ").concat(m," + 1),\n                  getX(batch, xF, xR, xC, ").concat(m," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(m,", d2),\n                  getW(wF, wR, wC, ").concat(m," + 1, d2),\n                  getW(wF, wR, wC, ").concat(m," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),Gi=(0,h.Z)((function e(t,n){(0,p.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=rt(this.outputShape.length);for(var r=n.dataFormat,a=Se(),i="channelsLast"===r,o=i?1:2,s=i?2:3,u=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":"if(blockIndex < ".concat(t[2]," && pos < ").concat(t[1],") {"),c="",l=0;l<=1;l++)for(var d=0;d<=1;d++)c+="\n          blockIndex = rc.z + ".concat(d,";\n          pos = rc.y + ").concat(l,";\n\n          ").concat(u,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(o,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(s,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(i,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*l+d,"] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*l+d,"] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(c,"\n\n        ").concat(a.output," = result;\n      }\n    ")}));function Hi(e,t){var n=e.length;return n>=3?[].concat((0,d.Z)(e.slice(0,-3)),t?[e[n-3]*e[n-2],e[n-1]]:[e[n-3],e[n-2]*e[n-1]]):!t&&1===n&&e[0]>1?[e[0],1]:null}function qi(e){var t,n=e.x,r=e.filter,a=e.convInfo,i=e.backend,o=e.bias,s=void 0===o?null:o,c=e.preluActivationWeights,l=void 0===c?null:c,d=e.leakyreluAlpha,f=void 0===d?0:d,p=e.activation,h=void 0===p?null:p,m=n.shape,v=i.texData.get(n.dataId),g=a.inChannels,y=m[0]*m[1]*m[2],b=a.outChannels,x="channelsLast"===a.dataFormat,k=[];if(null!=l){var w=Hi(l.shape,x);null!=w&&(l=la({inputs:{x:l},backend:i,attrs:{shape:w}}),k.push(l))}if(null!=s){var S=Hi(s.shape,x);null!=S&&(s=la({inputs:{x:s},backend:i,attrs:{shape:S}}),k.push(s))}if(!((1===y||1===b)&&g>1e3)&&v.isPacked&&x&&null!=v.texture&&m[2]%2!==0&&u.util.arraysEqual(v.shape.slice(-3),m.slice(-3))){var C=m[0]*m[1]*(m[2]+1),_={dataId:n.dataId,shape:[1,C,a.inChannels],dtype:n.dtype},I=v.shape;v.shape=v.shape.slice(),v.shape[v.shape.length-2]++,u.util.assert(ce(v.shape,_.shape),(function(){return"packed reshape ".concat(v.shape," to ").concat(_.shape," isn't free")}));var T=la({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}});k.push(T);var E=wa({a:_,b:T,backend:i,transposeA:!1,transposeB:false,bias:s,activation:h,preluActivationWeights:l,leakyreluAlpha:f}),N=i.texData.get(E.dataId);u.util.assert(N.isPacked,(function(){return"batchMatMul result is expected to be packed"})),v.shape=I,N.shape=a.outShape,(t=Wr({inputs:{x:E},backend:i})).shape=a.outShape,k.push(E)}else{var O=a.outHeight*a.outWidth,A=la({inputs:{x:n},backend:i,attrs:{shape:x?[a.batchSize,O,a.inChannels]:[a.batchSize,a.inChannels,O]}}),R=la({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}}),P=wa({a:x?A:R,b:x?R:A,transposeA:!x,transposeB:false,backend:i,bias:s,activation:h,preluActivationWeights:l,leakyreluAlpha:f});t=la({inputs:{x:P},backend:i,attrs:{shape:a.outShape}}),k.push(A),k.push(R),k.push(P)}for(var D=0,B=k;D<B.length;D++){var M=B[D];i.disposeIntermediateTensorInfo(M)}return t}function Xi(e){var t=e.x,n=e.filter,r=e.convInfo,a=e.backend,i=e.bias,o=void 0===i?null:i,s=e.preluActivationWeights,c=void 0===s?null:s,l=e.leakyreluAlpha,d=void 0===l?0:l,f=e.activation,p=void 0===f?null:f,h=r.filterWidth,m=r.filterHeight,v=r.inChannels,g=r.outWidth,y=r.outHeight,b="channelsLast"===r.dataFormat,x=h*m*v,k=y*g,w=[r.batchSize,x,k],S=[];if(null!=c){var C=Hi(c.shape,b);null!=C&&(c=la({inputs:{x:c},backend:a,attrs:{shape:C}}),S.push(c))}if(null!=o){var _=Hi(o.shape,b);null!=_&&(o=la({inputs:{x:o},backend:a,attrs:{shape:_}}),S.push(o))}var I=la({inputs:{x:n},backend:a,attrs:{shape:[1,x,u.util.sizeFromShape(n.shape)/x]}});S.push(I);var T=new Gi(w,r),E=[t.shape,[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inChannels],[r.filterWidth*r.inChannels],[r.outWidth]],N=a.runWebGLProgram(T,[t],"float32",E),O=la({inputs:{x:N},backend:a,attrs:{shape:w}});S.push(N),S.push(O);var A=null!=o,R=null!=c,P="leakyrelu"===p,D=p?na(p,!0):null,B=new ra(b?O.shape:I.shape,b?I.shape:O.shape,b?[r.batchSize,k,r.outChannels]:[r.batchSize,r.outChannels,k],!0,!1,A,D,R,P),M=b?[O,I]:[I,O];if(o&&M.push(o),R&&M.push(c),P){var F=a.makeTensorInfo([],"float32",u.util.createScalarValue(d,"float32"));M.push(F),S.push(F)}var L=a.runWebGLProgram(B,M,"float32"),V=la({inputs:{x:L},backend:a,attrs:{shape:r.outShape}});S.push(L);for(var z=0,Z=S;z<Z.length;z++){var U=Z[z];a.disposeIntermediateTensorInfo(U)}return V}var Ki={kernelName:u.Conv2D,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=a.strides,c=a.pad,l=a.dataFormat,d=a.dilations,f=a.dimRoundingMode,p=u.backend_util.convertConv2DDataFormat(l),h=u.backend_util.computeConv2DInfo(i.shape,o.shape,s,d,c,f,!1,p);if(1!==h.filterHeight||1!==h.filterWidth||1!==h.dilationHeight||1!==h.dilationWidth||1!==h.strideHeight||1!==h.strideWidth||"SAME"!==h.padInfo.type&&"VALID"!==h.padInfo.type)if((0,u.env)().getBool("WEBGL_CONV_IM2COL"))t=Xi({x:i,filter:o,convInfo:h,backend:r});else{var m=new ji(h);t=r.runWebGLProgram(m,[i,o],"float32")}else t=qi({x:i,filter:o,convInfo:h,backend:r});var v=la({inputs:{x:t},backend:r,attrs:{shape:h.outShape}});return r.disposeIntermediateTensorInfo(t),v}},Yi=(0,h.Z)((function e(t){(0,p.Z)(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o="channelsLast"===t.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              if (").concat(o,") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),Qi=(0,h.Z)((function e(t){(0,p.Z)(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o="channelsLast"===t.dataFormat,s=n-1-t.padInfo.top,u=r-1-t.padInfo.left,c=o?1:2,l=o?2:3,d=o?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(d,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(c,"], coords[").concat(l,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n\n              if (").concat(o,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),$i=(0,h.Z)((function e(t){(0,p.Z)(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.padInfo.front,o=t.padInfo.top,s=t.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(t.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(n," - ").concat(i,";\n\n            if (xF < 0 || xF >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(r," - ").concat(o,";\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(a," - ").concat(s,";\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),Ji=(0,h.Z)((function e(t){(0,p.Z)(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=n-1-t.padInfo.front,c=r-1-t.padInfo.top,l=a-1-t.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(u,", ").concat(c,", ").concat(l,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(n,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(i,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(t.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(n," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(r,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(r," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(a,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(a," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var eo={kernelName:u.Conv2DBackpropFilter,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,c=r.dataFormat,l=r.dimRoundingMode,d=r.filterShape,f=u.backend_util.convertConv2DDataFormat(c),p=u.backend_util.computeConv2DInfo(a.shape,d,o,1,s,l,!1,f),h=new Yi(p);return n.runWebGLProgram(h,[a,i],"float32")}};var to={kernelName:u.Conv2DBackpropInput,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.inputShape,s=r.strides,c=r.pad,l=r.dataFormat,d=r.dimRoundingMode,f=u.backend_util.convertConv2DDataFormat(l),p=u.backend_util.computeConv2DInfo(o,i.shape,s,1,c,d,!1,f),h=new Qi(p);return n.runWebGLProgram(h,[a,i],"float32")}};var no={kernelName:u.Conv3D,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,c=r.dilations,l=u.backend_util.computeConv3DInfo(a.shape,i.shape,o,c,s),d=new Wi(l);return n.runWebGLProgram(d,[a,i],"float32")}};var ro={kernelName:u.Conv3DBackpropFilterV2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,c=r.filterShape,l=u.backend_util.computeConv3DInfo(a.shape,c,o,1,s),d=new $i(l);return n.runWebGLProgram(d,[a,i],"float32")}};var ao,io={kernelName:u.Conv3DBackpropInputV2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.pad,s=r.strides,c=r.inputShape,l=u.backend_util.computeConv3DInfo(c,i.shape,s,1,o),d=new Ji(l);return n.runWebGLProgram(d,[a,i],"float32")}},oo=ea({opSnippet:"if (isnan(x)) return x;\n  return cos(x);\n"}),so={kernelName:u.Cos,backendName:"webgl",kernelFunc:oo},uo=ea({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),co={kernelName:u.Cosh,backendName:"webgl",kernelFunc:uo},lo=(0,h.Z)((function e(t,n,r,a,i){(0,p.Z)(this,e),this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=(0,c.Z)(t,4),s=o[0],u=o[1],l=o[2],d=o[3],f=(0,c.Z)(n,1)[0],h=(0,c.Z)(r,2),m=h[0],v=h[1];this.outputShape=[f,m,v,d];var g="bilinear"===a?1:0,y="".concat(u-1,".0"),b="".concat(l-1,".0"),x=m>1?["".concat((u-1)/(m-1)),"(y2-y1) * height_ratio","y1*".concat(y," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(y)],k=(0,c.Z)(x,3),w=k[0],S=k[1],C=k[2],_=v>1?["".concat((l-1)/(v-1)),"(x2-x1) * width_ratio","x1*".concat(b," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(b)],I=(0,c.Z)(_,3),T=I[0],E=I[1],N=I[2];this.userCode="\n      const float height_ratio = float(".concat(w,");\n      const float width_ratio = float(").concat(T,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(s,") {\n          return;\n        }\n\n        float height_scale = ").concat(S,";\n        float width_scale = ").concat(E,";\n\n        float in_y = ").concat(C,";\n        if( in_y < 0.0 || in_y > ").concat(y," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n        float in_x = ").concat(N,";\n        if( in_x < 0.0 || in_x > ").concat(b," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(g," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")})),fo={kernelName:u.CropAndResize,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,s=r.cropSize,u=r.method,c=r.extrapolationValue,l=new lo(a.shape,i.shape,s,u,c);return n.runWebGLProgram(l,[a,i,o],"float32")}};!function(e){e.Prod="*",e.Sum="+"}(ao||(ao={}));var po=(0,h.Z)((function e(t,n,r,a){(0,p.Z)(this,e),this.op=t,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];var i=this.outputShape.length,o=this.op===ao.Prod?"1.0":"0.0",s=r?o:"getX(".concat(ho(i,"coords",this.op),")"),u=this.outputShape[this.outputShape.length-1],c="",l="";r?(c=a?"end != ".concat(u-1):"end != 0",l=a?"end + 1":"end - 1"):(c=a?"end + pow2 < ".concat(u):"end >= pow2",l=a?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(Xe(i)," coords = getOutputCoords();\n        int end = ").concat(mo(i,"coords",this.op),";\n        float val = ").concat(s,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(c,") {\n          int idx = ").concat(l,";\n          ").concat(mo(i,"coords",this.op)," = idx;\n          val ").concat(this.op,"= getX(").concat(ho(i,"coords",this.op),");\n        }\n        setOutput(val);\n      }\n    ")}));function ho(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function mo(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function vo(e,t,n,r,a,i){var o=t.shape.length,s=u.backend_util.getAxesPermutation([r],o),c=t;null!=s&&(c=xa({inputs:{x:t},backend:n,attrs:{perm:s}}));var l=u.backend_util.getInnerMostAxes(1,o)[0];if(l!==o-1)throw new Error("WebGL cumprod shader expects an inner-most axis=".concat(t.shape.length-1," ")+"but got axis=".concat(r));for(var d=c.shape[l],f=Wr({inputs:{x:c},backend:n}),p=0;p<=Math.ceil(Math.log2(d))-1;p++){var h=new po(e,c.shape,!1,i),m=[[p]],v=f;f=n.runWebGLProgram(h,[f],f.dtype,m),n.disposeIntermediateTensorInfo(v)}if(a){var g=new po(e,c.shape,a,i),y=f;f=n.runWebGLProgram(g,[f],f.dtype),n.disposeIntermediateTensorInfo(y)}if(null!=s){var b=xa({inputs:{x:f},backend:n,attrs:{perm:u.backend_util.getUndoAxesPermutation(s)}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(c),b}return f}var go={kernelName:u.Cumprod,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;return vo(ao.Prod,a,n,i,o,s)}};var yo={kernelName:u.Cumsum,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;return vo(ao.Sum,a,n,i,o,s)}};var bo={kernelName:u.DenseBincount,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=n.readSync(a.dataId),c=n.readSync(i.dataId),l=Sn(u,c,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,l)}if(2===a.shape.length){var d=n.bufferSync(a),f=n.bufferSync(i),p=Cn(d,f,o,s);return n.makeTensorInfo(p.shape,i.dtype,p.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}},xo=function(){function e(t,n,r){(0,p.Z)(this,e),this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(n,";\n      int offset_h = imod(h, ").concat(n,");\n      int in_w = w / ").concat(n,";\n      int offset_w = imod(w, ").concat(n,");\n      int offset_d = (offset_h * ").concat(n," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}return(0,h.Z)(e,[{key:"getHeightCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}},{key:"getWidthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}},{key:"getDepthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}},{key:"getOutputDepthSize",value:function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}},{key:"getInputSamplingString",value:function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}]),e}();var ko={kernelName:u.DepthToSpace,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockSize,o=r.dataFormat,s=a.shape[0],u=("NHWC"===o?a.shape[1]:a.shape[2])*i,c=("NHWC"===o?a.shape[2]:a.shape[3])*i,l=("NHWC"===o?a.shape[3]:a.shape[1])/(i*i),d=new xo("NHWC"===o?[s,u,c,l]:[s,l,u,c],i,o);return n.runWebGLProgram(d,[a],a.dtype)}},wo=(0,h.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,p.Z)(this,e),this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=rt(this.outputShape.length);var o=t.filterHeight,s=t.filterWidth,u=t.outChannels/t.inChannels,c="",l="";r&&(c=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),l="result = activation(result);");var d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(c,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(u,";\n        int q = d2 - d1 * ").concat(u,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(o,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(s,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(d,"\n        ").concat(l,"\n        setOutput(result);\n      }\n    ")})),So=(0,h.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,p.Z)(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=rt(this.outputShape.length);for(var o=t.outChannels/t.inChannels,s=t.padInfo.left,c=t.strideWidth,l=t.dilationWidth,d=t.filterHeight,f=t.filterWidth,h=f,m="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;",v=0;v<f;v++)m+="\n          vec4 xTexelC".concat(2*v,";\n          int xTexelC").concat(2*v,"Ready;\n          vec4 xTexelC").concat(2*v+1,";\n          int xTexelC").concat(2*v+1,"Ready;\n          vec4 xC").concat(v,";");m+="\n    for (int r = 0; r < ".concat(d,"; r++) {\n      ");for(var g=0;g<f;g++)m+="\n          xTexelC".concat(2*g," = vec4(0.0);\n          xTexelC").concat(2*g,"Ready = 0;\n          xTexelC").concat(2*g+1," = vec4(0.0);\n          xTexelC").concat(2*g+1,"Ready = 0;\n          xC").concat(g," = vec4(0.0);");m+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(var y=0;y<(h+1)/2;y++){var b=2*y;if(m+="\n          xC = xCCorner + ".concat(b*l,";\n          "),1===c){if(b<f&&(s%2===1?(m+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(b,"Ready == 0) {\n                  xTexelC").concat(b," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(b,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(b,"Ready = 1;\n                }\n              "),m+=1===l&&b>0?"\n                xC".concat(b," = vec4(xTexelC").concat(b-2,".zw, xTexelC").concat(b,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(b," = vec4(previous.zw, xTexelC").concat(b,".xy);\n                  } else {\n                    xC").concat(b," = vec4(0.0, 0.0, xTexelC").concat(b,".xy);\n                  }\n                  ")):m+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(b,"Ready == 0) {\n                  xTexelC").concat(b," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(b,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(b,"Ready = 1;\n                }\n\n                xC").concat(b," = xTexelC").concat(b,";\n                "),b+1<f)){var x=s%2===0?u.util.nearestLargerEven(l):l;l%2===0&&s%2===1||l%2!==0&&s%2!==1?(m+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(x,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(b+1,"Ready == 0) {\n                    xTexelC").concat(b+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(b+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(b+1,"Ready = 1;\n                  }\n                  "),l>1&&(m+="\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(b,"Ready == 0) {\n                      xTexelC").concat(b," = getX(batch, xR, xCOffset, d1);\n                      xTexelC").concat(b,"Ready = 1;\n                    }\n                    ")),m+="\n                  xC".concat(b+1," = vec4(xTexelC").concat(b,".zw, xTexelC").concat(b+1,".xy);\n                  ")):m+=1===x?"\n                    xC".concat(b+1," = xTexelC").concat(b,";\n                    "):"\n                    xCOffset = xC + ".concat(x,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(b+1,"Ready == 0) {\n                      xTexelC").concat(b+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(b+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(b+1,"Ready = 1;\n                    }\n\n                    xC").concat(b+1," = xTexelC").concat(b+1,";\n                    ")}}else b<f&&(s%2===1?(m+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(b,"Ready == 0) {\n                  xTexelC").concat(b," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(b,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(b,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(b+1,"Ready == 0) {\n                  xTexelC").concat(b+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(b+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(b+1,"Ready = 1;\n                }\n\n                xC").concat(b," = vec4(xTexelC").concat(b,".zw, xTexelC").concat(b+1,".zw);\n              "),b+1<f&&(m+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(b+1," = vec4(xTexelC").concat(b+1,".xy, final.xy);\n                "))):(m+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(b,"Ready == 0) {\n                  xTexelC").concat(b," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(b,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(b,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(b+1,"Ready == 0) {\n                  xTexelC").concat(b+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(b+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(b+1,"Ready = 1;\n                }\n\n                xC").concat(b," = vec4(\n                  xTexelC").concat(b,".xy, xTexelC").concat(b+1,".xy);\n              "),b+1<f&&(m+="\n                  xC".concat(b+1," = vec4(xTexelC").concat(b,".zw, xTexelC").concat(b+1,".zw);\n                "))));b<f&&(m+="\n            wTexel = getW(r, ".concat(b,", d1, q);\n            dotProd += xC").concat(b," * vec4(wTexel.xz, wTexel.xz);\n          "),b+1<f&&(m+="\n              wTexel = getW(r, ".concat(b+1,", d1, q);\n              dotProd += xC").concat(b+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}m+="\n    }\n  ",m+="\n      }\n    ";var k="",w="";r&&(k=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(r,"\n        }"),w="result = activation(result);");var S=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(k,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(o,";\n        int q = d2 - d1 * ").concat(o,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(m,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(S,"\n        ").concat(w,"\n        setOutput(result);\n      }\n    ")}));var Co={kernelName:u.DepthwiseConv2dNative,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,c=r.dilations,l=r.dimRoundingMode,d=c;null==d&&(d=[1,1]),u.util.assert(u.backend_util.eitherStridesOrDilationsAreOne(o,d),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(o," and dilations '").concat(d,"'")}));var f,p=u.backend_util.computeConv2DInfo(a.shape,i.shape,o,d,s,l,!0);f=(0,u.env)().getBool("WEBGL_PACK_DEPTHWISECONV")&&p.strideWidth<=2&&p.outChannels/p.inChannels===1?new So(p):new wo(p);var h=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];return n.runWebGLProgram(f,[a,i],"float32",h)}},_o=(0,h.Z)((function e(t){(0,p.Z)(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o=t.outChannels/t.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(o," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),Io=(0,h.Z)((function e(t){(0,p.Z)(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=n-1-t.padInfo.top,s=r-1-t.padInfo.left,u=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(u,"; dm++) {\n              int d2 = d1 * ").concat(u," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var To={kernelName:u.DepthwiseConv2dNativeBackpropFilter,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.dilations,c=r.pad,l=r.dimRoundingMode,d=r.filterShape,f=u.backend_util.computeConv2DInfo(a.shape,d,o,s,c,l,!0),p=new _o(f);return n.runWebGLProgram(p,[a,i],"float32")}};var Eo={kernelName:u.DepthwiseConv2dNativeBackpropInput,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.strides,s=r.dilations,c=r.pad,l=r.dimRoundingMode,d=r.inputShape,f=u.backend_util.computeConv2DInfo(d,i.shape,o,s,c,l,!0),p=new Io(f);return n.runWebGLProgram(p,[a,i],"float32")}},No=(0,h.Z)((function e(t){(0,p.Z)(this,e),this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}));var Oo={kernelName:u.Diag,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=[].concat((0,d.Z)(r.shape),(0,d.Z)(r.shape)),i=u.util.sizeFromShape(r.shape),o=la({inputs:{x:r},backend:n,attrs:{shape:[i]}}),s=new No(i),c=n.runWebGLProgram(s,[o],o.dtype),l=la({inputs:{x:c},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(c),l}},Ao=(0,h.Z)((function e(t){(0,p.Z)(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.inHeight,r=t.inWidth,a=t.padInfo,i=t.strideHeight,o=t.strideWidth,s=t.filterHeight,u=t.filterWidth,c=t.dilationHeight,l=t.dilationWidth,d=a.top,f=a.left;this.userCode="\n      const ivec2 strides = ivec2(".concat(i,", ").concat(o,");\n      const ivec2 pads = ivec2(").concat(d,", ").concat(f,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(s,"; h++) {\n          int hIn = hBeg + h * ").concat(c,";\n\n          if (hIn >= 0 && hIn < ").concat(n,") {\n            for (int w = 0; w < ").concat(u,"; w++) {\n              int wIn = wBeg + w * ").concat(l,";\n\n              if (wIn >= 0 && wIn < ").concat(r,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}));var Ro={kernelName:u.Dilation2D,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=a.strides,c=a.pad,l=a.dilations,d=u.backend_util.computeDilation2DInfo(i.shape,o.shape,s,c,"NHWC",l),f=new Ao(d),p=la({inputs:{x:t=r.runWebGLProgram(f,[i,o],"float32")},backend:r,attrs:{shape:d.outShape}});return r.disposeIntermediateTensorInfo(t),p}},Po=n(7762);var Do={kernelName:u.Einsum,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.equation,a=t,i=u.backend_util.decodeEinsumEquation(r,a.length),o=i.allDims,s=i.summedDims,c=i.idDims;u.backend_util.checkEinsumDimSizes(o.length,c,a);for(var l=u.backend_util.getEinsumComputePath(s,c),d=l.path,f=l.steps,p=f.length,h=null,m=o.length,v=[],g=0;g<p;++g){var y,b=(0,Po.Z)(f[g]);try{for(b.s();!(y=b.n()).done;){var x=y.value,k=u.backend_util.getEinsumPermutation(m,c[x]),w=k.permutationIndices,S=k.expandDims,C=void 0;u.backend_util.isIdentityPermutation(w)?C=a[x]:(C=xa({inputs:{x:a[x]},backend:n,attrs:{perm:w}}),v.push(C));for(var _=C.shape.slice(),I=0;I<S.length;++I)_.splice(S[I],0,1);u.util.arraysEqual(C.shape,_)||(C=la({inputs:{x:C},backend:n,attrs:{shape:_}}),v.push(C)),null===h?h=C:(h=ua({inputs:{a:C,b:h},backend:n}),v.push(h))}}catch(O){b.e(O)}finally{b.f()}g<p-1&&(d[g]>=0&&(h=ya({inputs:{x:h},backend:n,attrs:{axis:d[g]-(o.length-m),keepDims:!1}}),v.push(h)),m--)}for(var T=0,E=v;T<E.length;T++){var N=E[T];N!==h&&n.disposeIntermediateTensorInfo(N)}return h}},Bo=ea({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),Mo={kernelName:u.Elu,backendName:"webgl",kernelFunc:Bo},Fo={kernelName:u.EluGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y,i=(0,u.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new jr("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,a.shape):new Ur("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)}},Lo=ta({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:Tn}),Vo={kernelName:u.Equal,backendName:"webgl",kernelFunc:Lo},zo=ea({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(u.backend_util.ERF_P,";\n  float a1 = ").concat(u.backend_util.ERF_A1,";\n  float a2 = ").concat(u.backend_util.ERF_A2,";\n  float a3 = ").concat(u.backend_util.ERF_A3,";\n  float a4 = ").concat(u.backend_util.ERF_A4,";\n  float a5 = ").concat(u.backend_util.ERF_A5,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")}),Zo={kernelName:u.Erf,backendName:"webgl",kernelFunc:zo},Uo=ea({opSnippet:"if (isnan(x)) return x;\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:En,dtype:"float32"}),jo={kernelName:u.Exp,backendName:"webgl",kernelFunc:Uo};function Wo(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.dim,i=t.input,o=i.shape.length,s=i.shape.slice(),c=a;return a<0&&(u.util.assert(-(o+1)<=a,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),c=o+a+1),s.splice(c,0,1),la({inputs:{x:i},backend:r,attrs:{shape:s}})}var Go={kernelName:u.ExpandDims,backendName:"webgl",kernelFunc:Wo},Ho="return exp(x) - 1.0;",qo=ea({opSnippet:Ho,packedOpSnippet:Ho,cpuKernelImpl:Nn}),Xo={kernelName:u.Expm1,backendName:"webgl",kernelFunc:qo},Ko=(0,h.Z)((function e(t,n,r){(0,p.Z)(this,e),this.variableNames=["real","imag"];var a=n[1];this.outputShape=n;var i,o=r?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),s=r?"".concat(a,".0"):"1.0";if("real"===t)i="return real * expR - imag * expI;";else{if("imag"!==t)throw new Error('FFT component must be either "real" or "imag", got '.concat(t,"."));i="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(o,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(i,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(a,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(s,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}));function Yo(e,t,n){var r=n.texData.get(e.dataId),a=u.util.sizeFromShape(e.shape),i=e.shape[e.shape.length-1],o=la({inputs:{x:e},backend:n,attrs:{shape:[a/i,i]}}),s=o.shape,c=new Ko("real",s,t),l=new Ko("imag",s,t),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],f=n.runWebGLProgram(c,d,"float32"),p=n.runWebGLProgram(l,d,"float32"),h=Hr({inputs:{real:f,imag:p},backend:n});n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p);var m=la({inputs:{x:h},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(h),m}var Qo={kernelName:u.FFT,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return Yo(t.input,!1,n)}},$o=(0,h.Z)((function e(t,n){(0,p.Z)(this,e),this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}));function Jo(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,i=n.dtype;if("string"===(i=i||u.util.inferDtype(a))){var o=u.util.getArrayFromDType(i,u.util.sizeFromShape(r));return o.fill(a),t.makeTensorInfo(r,i,o)}var s=new $o(r,a),c=[[a]];return t.runWebGLProgram(s,[],i,c)}var es,ts={kernelName:u.Fill,backendName:"webgl",kernelFunc:Jo},ns=(0,h.Z)((function e(t){(0,p.Z)(this,e),this.variableNames=["Image"],this.outputShape=[];var n=t[2];this.outputShape=t,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(n," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(n,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),rs={kernelName:u.FlipLeftRight,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n,i=new ns(r.shape);return a.runWebGLProgram(i,[r],r.dtype)}},as="return floor(x);",is=ea({opSnippet:as,packedOpSnippet:as,cpuKernelImpl:On}),os={kernelName:u.Floor,backendName:"webgl",kernelFunc:is},ss=ta({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),us={kernelName:u.FloorDiv,backendName:"webgl",kernelFunc:ss},cs=(0,h.Z)((function e(t){(0,p.Z)(this,e),this.variableNames=["A"];var n=Se(),r=(0,c.Z)(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(i,".0, ").concat(a,".0);\n\n        vec4 values = ").concat(n.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")})),ls=(0,h.Z)((function e(t){(0,p.Z)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=Se(),r=(0,c.Z)(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(i,".0, ").concat(a,".0);\n            vec4 values = ").concat(n.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),ds={kernelName:u.FromPixels,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,i=r.numChannels,s="undefined"!==typeof HTMLVideoElement&&a instanceof HTMLVideoElement,l="undefined"!==typeof HTMLImageElement&&a instanceof HTMLImageElement,d=s?[a.videoWidth,a.videoHeight]:[a.width,a.height],f=(0,c.Z)(d,2),p=f[0],h=f[1],m=[h,p],v=[h,p,i];(l||s)&&(null==es&&(es=document.createElement("canvas").getContext("2d")),es.canvas.width=p,es.canvas.height=h,es.drawImage(a,0,0,p,h),a=es.canvas);var g=n.makeTensorInfo(m,"int32");n.texData.get(g.dataId).usage=o.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(g.dataId),a);var y=(0,u.env)().getBool("WEBGL_PACK")?new ls(v):new cs(v),b=n.runWebGLProgram(y,[g],"int32");return n.disposeData(g.dataId),b}};var fs={kernelName:u.FusedConv2D,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=n.bias,c=n.preluActivationWeights,l=a.strides,d=a.pad,f=a.dataFormat,p=a.dilations,h=a.dimRoundingMode,m=a.activation,v=a.leakyreluAlpha,g=u.backend_util.convertConv2DDataFormat(f),y=u.backend_util.computeConv2DInfo(i.shape,o.shape,l,p,d,h,!1,g),b=[];if(1!==y.filterHeight||1!==y.filterWidth||1!==y.dilationHeight||1!==y.dilationWidth||1!==y.strideHeight||1!==y.strideWidth||"SAME"!==y.padInfo.type&&"VALID"!==y.padInfo.type)if((0,u.env)().getBool("WEBGL_CONV_IM2COL"))t=Xi({x:i,filter:o,convInfo:y,backend:r,bias:s,activation:m,preluActivationWeights:c,leakyreluAlpha:v});else{var x=null!=s,k=null!=c,w="leakyrelu"===m,S=m?na(m,!1):null,C=new ji(y,x,S,k,w),_=[i,o],I=function(e,t){if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){var n=la({inputs:{x:e},backend:r,attrs:{shape:[e.shape[0],1,1]}});return b.push(n),n}return e};if(x&&_.push(I(s,f)),k&&_.push(I(c,f)),w){var T=r.makeTensorInfo([],"float32",u.util.createScalarValue(v,"float32"));_.push(T),b.push(T)}t=r.runWebGLProgram(C,_,"float32")}else t=qi({x:i,filter:o,convInfo:y,backend:r,bias:s,activation:m,preluActivationWeights:c,leakyreluAlpha:v});var E=la({inputs:{x:t},backend:r,attrs:{shape:y.outShape}});return b.push(t),b.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),E}};var ps={kernelName:u.FusedDepthwiseConv2D,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,c=r.strides,l=r.pad,d=r.dilations,f=r.dimRoundingMode,p=r.activation,h=r.leakyreluAlpha,m=[],v=d;null==v&&(v=[1,1]),u.util.assert(u.backend_util.eitherStridesOrDilationsAreOne(c,v),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(c," and dilations '").concat(v,"'")}));var g,y=u.backend_util.computeConv2DInfo(a.shape,i.shape,c,v,l,f,!0),b=(0,u.env)().getBool("WEBGL_PACK_DEPTHWISECONV")&&y.strideWidth<=2&&y.outChannels/y.inChannels===1,x=p?na(p,b):null,k=[a,i],w=null!=o,S=null!=s,C="leakyrelu"===p;if(w&&k.push(o),S&&k.push(s),C){var _=n.makeTensorInfo([],"float32",u.util.createScalarValue(h,"float32"));k.push(_),m.push(_)}g=b?new So(y,w,x,S,C):new wo(y,w,x,S,C);var I=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],T=n.runWebGLProgram(g,k,"float32",I);return m.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),T}},hs=(0,h.Z)((function e(t,n,r,a){(0,p.Z)(this,e),this.sliceDim=t,this.strides=n,this.paramsShape=a,this.variableNames=["x","indices"],this.outputShape=r;var i=Xe(n.length),o=Xe(r.length),s=this.sliceDim>1?"strides[j]":"strides",u=Xe(a.length),c=a.length>1?"paramsShape[j]":"paramsShape";this.userCode="\n        ".concat(i," strides = ").concat(i,"(").concat(this.strides,");\n        ").concat(u," paramsShape = ").concat(u,"(").concat(this.paramsShape,");\n         void main() {\n          ").concat(o," coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n          for (int j = 0; j < ").concat(this.sliceDim,"; j++) {\n            int index = round(getIndices(coords[0], j));\n            out_of_bounds = out_of_bounds || index < 0;\n            out_of_bounds = out_of_bounds || index >= ").concat(c,";\n            flattenIndex += index * ").concat(s,";\n          }\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      ")}));var ms={kernelName:u.GatherNd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,i=a.shape,o=i[i.length-1],s=u.util.sizeFromShape(r.shape),l=u.backend_util.prepareAndValidate(r,a),d=(0,c.Z)(l,4),f=d[0],p=d[1],h=d[2],m=d[3],v=la({inputs:{x:a},backend:n,attrs:{shape:[p,o]}}),g=la({inputs:{x:r},backend:n,attrs:{shape:[u.util.sizeFromShape(r.shape)/h,h]}});if(n.shouldExecuteOnCPU([r,a])||"string"===r.dtype){var y=n.readSync(a.dataId),b=n.bufferSync(r),x=An(y,b,r.dtype,p,o,h,m,r.shape,s);return n.makeTensorInfo(f,r.dtype,x.values)}var k=new hs(o,m,[p,h],r.shape),w=n.runWebGLProgram(k,[g,v],g.dtype),S=la({inputs:{x:w},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(w),S}},vs=(0,h.Z)((function e(t,n){(0,p.Z)(this,e),this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;var r=Xe(this.rank),a=function(e,t){for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],a=0;a<e.length;a++)2===a?r.push("index"):r.push("".concat(n[a]));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(t[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(a,"));\n      }\n    ")}));function gs(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.indices,o=r.axis,s=r.batchDims,c=u.util.parseAxisParam(o,a.shape)[0];(0,u.env)().get("DEBUG")&&function(){for(var e=n.readSync(i.dataId),t=a.shape[c],r=function(n){var r=e[n];u.util.assert(r<=t-1&&r>=0,(function(){return"GatherV2: the index value ".concat(r," is not in [0, ").concat(t-1,"]")}))},o=0;o<e.length;++o)r(o)}();var l=u.backend_util.segment_util.collectGatherOpShapeInfo(a,i,c,s),d=u.util.sizeFromShape(i.shape),f=[],p=la({inputs:{x:a},backend:n,attrs:{shape:[l.batchSize,l.outerSize,l.dimSize,l.sliceSize]}}),h=la({inputs:{x:i},backend:n,attrs:{shape:[l.batchSize,d/l.batchSize]}});f.push(p),f.push(h);var m=[l.batchSize,l.outerSize,d/l.batchSize,l.sliceSize];if(n.shouldExecuteOnCPU([a,i])||"string"===a.dtype){var v=n.bufferSync(h),g=n.bufferSync(p),y=Rn(g,v,m);return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(l.outputShape,y.dtype,y.values)}var b=new vs(p.shape,m),x=n.runWebGLProgram(b,[p,h],p.dtype);f.push(x);var k=la({inputs:{x:x},backend:n,attrs:{shape:l.outputShape}});return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),k}var ys={kernelName:u.GatherV2,backendName:"webgl",kernelFunc:gs},bs=ta({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:Pn,dtype:"bool"}),xs={kernelName:u.Greater,backendName:"webgl",kernelFunc:bs},ks=ta({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:Dn}),ws={kernelName:u.GreaterEqual,backendName:"webgl",kernelFunc:ks};var Ss={kernelName:u.IFFT,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return Yo(t.input,!0,n)}},Cs=ea({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),_s={kernelName:u.IsFinite,backendName:"webgl",kernelFunc:Cs},Is=ea({opSnippet:"return float(isinf(x));",dtype:"bool"}),Ts={kernelName:u.IsInf,backendName:"webgl",kernelFunc:Is},Es=ea({opSnippet:"return float(isnan(x));",dtype:"bool"}),Ns={kernelName:u.IsNan,backendName:"webgl",kernelFunc:Es},Os=ta({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:Bn,dtype:"bool"}),As={kernelName:u.Less,backendName:"webgl",kernelFunc:Os},Rs=ta({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:Mn,dtype:"bool"}),Ps={kernelName:u.LessEqual,backendName:"webgl",kernelFunc:Rs};var Ds={kernelName:u.LinSpace,backendName:"webgl",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.num,o=Fn(r,a,i);return t.makeTensorInfo([o.length],"float32",o)}},Bs=ea({opSnippet:"if (isnan(x)) return x;\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:Ln}),Ms={kernelName:u.Log,backendName:"webgl",kernelFunc:Bs},Fs=ea({opSnippet:"if (isnan(x)) return x;\n  return log(1.0 + x);\n"}),Ls={kernelName:u.Log1p,backendName:"webgl",kernelFunc:Fs},Vs=ta({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),zs={kernelName:u.LogicalAnd,backendName:"webgl",kernelFunc:Vs},Zs=ea({opSnippet:"return float(!(x >= 1.0));"}),Us={kernelName:u.LogicalNot,backendName:"webgl",kernelFunc:Zs},js=ta({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),Ws={kernelName:u.LogicalOr,backendName:"webgl",kernelFunc:js},Gs=(0,h.Z)((function e(t,n,r,a,i){(0,p.Z)(this,e),this.variableNames=["x"],this.outputShape=[];var o,s=n,u=t[3]-1;this.outputShape=t;var c="float(".concat(r,") + float(").concat(a,") * sum");o=.5===i?"inversesqrt(".concat(c,")"):1===i?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(s,"; j <= ").concat(s,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(u,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(o,";\n        setOutput(val);\n      }\n    ")})),Hs=(0,h.Z)((function e(t,n,r,a,i){(0,p.Z)(this,e),this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o,s=n,u=t[3]-1;this.outputShape=t;var c="float(".concat(r,") + float(").concat(a,") * sum");o=.5===i?"inversesqrt(".concat(c,")"):1===i?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(s,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(s,"; j <= ").concat(s,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(u,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(o,";\n        setOutput(result);\n      }\n    ")})),qs={kernelName:u.LRN,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.depthRadius,o=r.bias,s=r.alpha,c=r.beta,l=(0,u.env)().getBool("WEBGL_PACK_NORMALIZATION")?new Hs(a.shape,i,o,s,c):new Gs(a.shape,i,o,s,c);return n.runWebGLProgram(l,[a],a.dtype)}},Xs=(0,h.Z)((function e(t,n,r,a,i){(0,p.Z)(this,e),this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=i,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(n,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(n," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(a,") * norm + float(").concat(r,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(a,")\n                * float(").concat(i,")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(i,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")})),Ks={kernelName:u.LRNGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.y,o=t.dy,s=r.depthRadius,u=r.bias,c=r.alpha,l=r.beta,d=new Xs(a.shape,s,u,c,l);return n.runWebGLProgram(d,[a,i,o],a.dtype)}};function Ys(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reductionIndices,o=r.keepDims,s=a.shape.length,l=u.util.parseAxisParam(i,a.shape),d=l,f=u.backend_util.getAxesPermutation(d,s),p=null!=f,h=n.shouldExecuteOnCPU([a]),m=a;if(p){if(h){for(var v=n.texData.get(m.dataId).values,g=new Array(s),y=0;y<g.length;y++)g[y]=a.shape[f[y]];var b=cr(v,a.shape,a.dtype,f,g);m=n.makeTensorInfo(g,a.dtype),n.texData.get(m.dataId).values=b}else m=ga(a,f,n);d=u.backend_util.getInnerMostAxes(d.length,s)}u.backend_util.assertAxesAreInnerMostDims("max",d,s);var x,k=u.backend_util.computeOutAndReduceShapes(m.shape,d),w=(0,c.Z)(k,2),S=w[0],C=w[1],_=S;if(o&&(_=u.backend_util.expandShapeToKeepDim(S,l)),h){v=n.texData.get(m.dataId).values;var I=Vn(v,u.util.sizeFromShape(C),_,a.dtype);x=n.makeTensorInfo(_,a.dtype),n.texData.get(x.dataId).values=I}else x=function(e,t,n,r){var a=u.util.sizeFromShape(t),i=la({inputs:{x:e},attrs:{shape:[u.util.sizeFromShape(e.shape)/a,a]},backend:r}),o=ha(i,e.dtype,"max",r),s=la({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}(m,C,_,n);return p&&n.disposeIntermediateTensorInfo(m),x}var Qs={kernelName:u.Max,backendName:"webgl",kernelFunc:Ys},$s=ta({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:zn}),Js={kernelName:u.Maximum,backendName:"webgl",kernelFunc:$s};var eu={kernelName:u.MaxPool,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;ke(a,"maxPool");var i=r.filterSize,o=r.strides,s=r.pad,c=r.dimRoundingMode;u.util.assert(u.backend_util.eitherStridesOrDilationsAreOne(o,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var l=u.backend_util.computePool2DInfo(a.shape,i,o,1,s,c);if(1===l.filterWidth&&1===l.filterHeight&&u.util.arraysEqual(l.inShape,l.outShape))return Wr({inputs:{x:a},backend:n});var d=new ti(l,"max",!1);return n.runWebGLProgram(d,[a],a.dtype)}};var tu={kernelName:u.MaxPool3D,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,c=r.dataFormat,l=r.dimRoundingMode,d=u.backend_util.computePool3DInfo(a.shape,i,o,[1,1,1],s,l,c),f=new ni(d,"max",!1);return n.runWebGLProgram(f,[a],a.dtype)}},nu=(0,h.Z)((function e(t){(0,p.Z)(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideHeight,r=t.strideWidth,a=t.dilationHeight,i=t.effectiveFilterHeight,o=t.effectiveFilterWidth,s=i-1-t.padInfo.top,u=o-1-t.padInfo.left,c=i*o-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(i,";\n          wR += ").concat(a,") {\n          float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(o,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(c," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(o," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),ru=(0,h.Z)((function e(t){(0,p.Z)(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.dilationDepth,o=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,l=t.effectiveFilterWidth,d=u-1-t.padInfo.front,f=c-1-t.padInfo.top,h=l-1-t.padInfo.left,m=u*c*l-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(d,", ").concat(f,", ").concat(h,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(u,";\n           wD += ").concat(i,") {\n          float dyD = float(dyDCorner + wD) / ").concat(n,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(c,";\n              wR += ").concat(o,") {\n            float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(l,";\n                wC += ").concat(s,") {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(m," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(c," * ").concat(l," +\n                  wR * ").concat(l," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var au={kernelName:u.MaxPool3DGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,c=r.pad,l=r.dimRoundingMode,d=u.backend_util.computePool3DInfo(i.shape,o,s,[1,1,1],c,l),f=new ni(d,"max",!0),p=n.runWebGLProgram(f,[i],i.dtype),h=new ru(d),m=n.runWebGLProgram(h,[a,p],i.dtype);return n.disposeIntermediateTensorInfo(p),m}};var iu={kernelName:u.MaxPoolGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;ke([i,t.output],"maxPoolGrad");var s=r.filterSize,c=r.strides,l=r.pad,d=r.dimRoundingMode,f=u.backend_util.computePool2DInfo(o.shape,s,c,1,l,d),p=new ti(f,"max",!0),h=n.runWebGLProgram(p,[o],o.dtype),m=new nu(f),v=n.runWebGLProgram(m,[a,h],o.dtype);return n.disposeIntermediateTensorInfo(h),v}};var ou={kernelName:u.MaxPoolWithArgmax,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.filterSize,o=n.strides,s=n.pad,l=n.includeBatchInIndex,d=r;u.util.assert(4===a.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(a.shape.length,".")}));var f=[1,1];u.util.assert(u.backend_util.eitherStridesOrDilationsAreOne(o,f),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(f,"'")}));var p=u.backend_util.computePool2DInfo(a.shape,i,o,f,s),h=function(e,t,n,r){var a=new ti(n,"max",!1),i=r.runWebGLProgram(a,[e],"float32");return a=new ti(n,"max",!0,!0,t),[i,r.runWebGLProgram(a,[e],"float32")]}(a,l,p,d),m=(0,c.Z)(h,2);return[m[0],m[1]]}};var su={kernelName:u.Mean,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.keepDims,o=n.axis,s=r,l=a.shape.length,d=u.util.parseAxisParam(o,a.shape),f=d,p=u.backend_util.getAxesPermutation(f,l),h=null!=p,m=s.shouldExecuteOnCPU([a]),v=[],g=a;if(h){if(m){for(var y=s.texData.get(g.dataId).values,b=new Array(l),x=0;x<b.length;x++)b[x]=a.shape[p[x]];var k=cr(y,a.shape,a.dtype,p,b);g=s.makeTensorInfo(b,a.dtype),s.texData.get(g.dataId).values=k}else g=ga(a,p,s);v.push(g),f=u.backend_util.getInnerMostAxes(f.length,l)}u.backend_util.assertAxesAreInnerMostDims("sum",f,l);var w=u.backend_util.computeOutAndReduceShapes(g.shape,f),S=(0,c.Z)(w,2),C=S[0],_=S[1],I=C;i&&(I=u.backend_util.expandShapeToKeepDim(C,d));for(var T=function(e,t,n,r){var a=u.util.sizeFromShape(t),i=la({inputs:{x:e},attrs:{shape:[u.util.sizeFromShape(e.shape)/a,a]},backend:r}),o=ha(i,"float32","mean",r),s=la({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}(g,_,I,s),E=0,N=v;E<N.length;E++){x=N[E];s.disposeIntermediateTensorInfo(x)}return T}};var uu={kernelName:u.Min,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,l=u.util.parseAxisParam(i,a.shape),d=l,f=u.backend_util.getAxesPermutation(d,s),p=a;null!=f&&(p=xa({inputs:{x:a},backend:n,attrs:{perm:f}}),d=u.backend_util.getInnerMostAxes(d.length,a.shape.length)),u.backend_util.assertAxesAreInnerMostDims("min",d,s);var h,m=u.backend_util.computeOutAndReduceShapes(p.shape,d),v=(0,c.Z)(m,2),g=v[0],y=v[1],b=la({inputs:{x:p},backend:n,attrs:{shape:[-1,u.util.sizeFromShape(y)]}}),x=ha(b,b.dtype,"min",n);return h=la(o?{inputs:{x:x},backend:n,attrs:{shape:u.backend_util.expandShapeToKeepDim(g,l)}}:{inputs:{x:x},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(x),null!=f&&n.disposeIntermediateTensorInfo(p),h}},cu=ta({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:Zn}),lu={kernelName:u.Minimum,backendName:"webgl",kernelFunc:cu},du=(0,h.Z)((function e(t,n,r){(0,p.Z)(this,e),this.variableNames=["x"],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=Xe(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),c="reflect"===r?0:1;this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(a,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(c,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(c,";\n          }\n        }\n        ").concat(i," coords = outC - start;\n        setOutput(getX(").concat(u,"));\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(c,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(c,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")})),fu=(0,h.Z)((function e(t,n,r){(0,p.Z)(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=Xe(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=fr("rc",a),c=fr("source",a),l="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),d=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),f="reflect"===r?0:1,h="";if(1===a){var m="\n        ".concat(i," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(f,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(f,";\n        }\n        source -= start;\n      ");h="\n        ".concat(i," rc = outputLoc;\n        ").concat(m,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(m,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        }\n      ")}else{var v="\n        ".concat(i," source = rc;\n        ").concat(i," lt = ").concat(i,"(lessThan(source, start));\n        ").concat(i," gte = ").concat(i,"(greaterThanEqual(source, end));\n        ").concat(i," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(f,") +\n                gte * ((end - 1) * 2 - source + ").concat(f,");\n        source -= start;\n      ");h="\n        ".concat(i," rc = outputLoc;\n        ").concat(v,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(v,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        }\n        rc = outputLoc;\n        ").concat(u[a-2]," += 1;\n        if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {\n          ").concat(v,"\n          result[2] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n          ").concat(u[a-1]," += 1;\n          if(").concat(l,") {\n            ").concat(v,"\n            result[3] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(h,"\n        setOutput(result);\n      }\n    ")})),pu={kernelName:u.MirrorPad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.mode,s=(0,u.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new fu(a.shape,i,o):new du(a.shape,i,o);return n.runWebGLProgram(s,[a],a.dtype)}},hu=ta({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),mu={kernelName:u.Mod,backendName:"webgl",kernelFunc:hu},vu=(0,h.Z)((function e(t,n,r){(0,p.Z)(this,e),this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,r],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(n-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(n-1,"));\n      }\n    ")})),gu=ta({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),yu={kernelName:u.RealDiv,backendName:"webgl",kernelFunc:gu},bu="return a - b;",xu=ta({opSnippet:bu,packedOpSnippet:bu,supportsComplex:!0,cpuKernelImpl:or}),ku={kernelName:u.Sub,backendName:"webgl",kernelFunc:xu};function wu(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.dim,o=u.util.parseAxisParam([i],a.shape),s=Ys({inputs:{x:a},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),c=u.backend_util.expandShapeToKeepDim(s.shape,o),l=la({inputs:{x:s},backend:n,attrs:{shape:c}}),d=xu({inputs:{a:a,b:l},backend:n}),f=Uo({inputs:{x:d},backend:n}),p=ya({inputs:{x:f},backend:n,attrs:{axis:o,keepDims:!1}}),h=la({inputs:{x:p},backend:n,attrs:{shape:c}}),m=gu({inputs:{a:f,b:h},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),m}var Su={kernelName:u.Softmax,backendName:"webgl",kernelFunc:wu};var Cu={kernelName:u.Multinomial,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.numSamples,o=r.seed,s=r.normalized,u=s?a:wu({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),c=u.shape[0],l=u.shape[1],d=new vu(c,l,i),f=[[o]],p=n.runWebGLProgram(d,[u],"int32",f);return s||n.disposeIntermediateTensorInfo(u),p}};var _u={kernelName:u.Neg,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])){var i=r.texData.get(a.dataId),o=jn(i.values,a.shape,a.dtype),s=(0,c.Z)(o,2),l=s[0],d=s[1];return r.makeTensorInfo(d,a.dtype,l)}return t=(0,u.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new Pr(a.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new br(a.shape,"if (isnan(x)) return x;\n  return -x;\n"),r.runWebGLProgram(t,[a],a.dtype)}},Iu=u.kernel_impls.nonMaxSuppressionV3Impl;var Tu={kernelName:u.NonMaxSuppressionV3,backendName:"webgl",kernelFunc:function(e){u.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,c=r.scoreThreshold,l=n.readSync(a.dataId),d=n.readSync(i.dataId),f=Iu(l,d,o,s,c).selectedIndices;return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}},Eu=u.kernel_impls.nonMaxSuppressionV4Impl;var Nu={kernelName:u.NonMaxSuppressionV4,backendName:"webgl",kernelFunc:function(e){u.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,c=r.scoreThreshold,l=r.padToMaxOutputSize,d=n.readSync(a.dataId),f=n.readSync(i.dataId),p=Eu(d,f,o,s,c,l),h=p.selectedIndices,m=p.validOutputs;return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([m]))]}},Ou=u.kernel_impls.nonMaxSuppressionV5Impl;var Au={kernelName:u.NonMaxSuppressionV5,backendName:"webgl",kernelFunc:function(e){u.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,c=r.scoreThreshold,l=r.softNmsSigma,d=n.readSync(a.dataId),f=n.readSync(i.dataId),p=Ou(d,f,o,s,c,l),h=p.selectedIndices,m=p.selectedScores;return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([m.length],"float32",new Float32Array(m))]}},Ru=(0,h.Z)((function e(t,n,r,a){(0,p.Z)(this,e),this.variableNames=["indices"],this.outputShape=[t,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(a,"), float(").concat(r,"),\n                      float(index == coords.y)));\n      }\n    ")})),Pu={kernelName:u.OneHot,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.depth,o=r.onValue,s=r.offValue,c=u.util.sizeFromShape(a.shape),l=new Ru(c,i,o,s),f=la({inputs:{x:a},backend:n,attrs:{shape:[c]}}),p=n.runWebGLProgram(l,[f],a.dtype);n.disposeIntermediateTensorInfo(f);var h=la({inputs:{x:p},backend:n,attrs:{shape:[].concat((0,d.Z)(a.shape),[i])}});return n.disposeIntermediateTensorInfo(p),h}};function Du(e){var t=e.inputs,n=e.backend,r=t.x;if("complex64"===r.dtype){var a=Si({inputs:{input:r},backend:n}),i=Du({inputs:{x:a},backend:n}),o=Li({inputs:{input:r},backend:n}),s=Du({inputs:{x:o},backend:n}),u=Hr({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}return Jo({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}var Bu={kernelName:u.ZerosLike,backendName:"webgl",kernelFunc:Du};var Mu={kernelName:u.OnesLike,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){var i=Si({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),s=Li({inputs:{input:a},backend:r}),u=Du({inputs:{x:s},backend:r}),c=Hr({inputs:{real:o,imag:u},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),c}return Jo({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}};var Fu={kernelName:u.Pack,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return Wo({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){u.util.assertShapesMatch(a,e.shape,"All tensors passed to stack must have matching shapes"),u.util.assert(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=Zi({inputs:t.map((function(e){var t=Wo({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s}},Lu=(0,h.Z)((function e(t,n,r){(0,p.Z)(this,e),this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=Xe(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(i," coords = outC - start;\n          setOutput(getX(").concat(u,"));\n        }\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")})),Vu=(0,h.Z)((function e(t,n,r){(0,p.Z)(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));for(var a=t.length,i=Xe(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=fr("rc",a),c=fr("source",a),l="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),d=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),f=["".concat(i," rc = outputLoc;"),"".concat(u[a-1]," += 1;\n       if(").concat(l,") {\n      "),1===a?"":"}\n       rc = outputLoc;\n       ".concat(u[a-2]," += 1;\n       if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {"),1===a?"":"  ".concat(u[a-1]," += 1;\n         if(").concat(l,") {")],h=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",m="",v=0,g=1===a?2:4;v<g;v++)m+="\n        ".concat(f[v],"\n        if (").concat(h,") {\n          result[").concat(v,"] = float(value);\n        } else {\n          ").concat(i," source = rc - start;\n          result[").concat(v,"] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        }\n      ");m+=1===a?"} ":"}}",this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(m,"\n        setOutput(result);\n      }\n    ")})),zu=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.constantValue;if(0===u.util.sizeFromShape(a.shape))return Jo({backend:n,attrs:{shape:i.map((function(e,t){return e[0]+a.shape[t]+e[1]})),value:o,dtype:a.dtype}});var s=(0,u.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Vu(a.shape,i,o):new Lu(a.shape,i,o),c=[[o]];return n.runWebGLProgram(s,[a],a.dtype,c)},Zu={kernelName:u.PadV2,backendName:"webgl",kernelFunc:zu},Uu=ta({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),ju={kernelName:u.Pow,backendName:"webgl",kernelFunc:Uu};var Wu={kernelName:u.Prod,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.axis,s=a.keepDims,l=i.shape.length,d=[],f=u.util.parseAxisParam(o,i.shape),p=f,h=u.backend_util.getAxesPermutation(p,l),m=i;if(null!=h&&(m=xa({inputs:{x:i},backend:r,attrs:{perm:h}}),p=u.backend_util.getInnerMostAxes(p.length,l),d.push(m)),u.backend_util.assertAxesAreInnerMostDims("prod",p,l),r.shouldExecuteOnCPU([m])){var v=r.texData.get(m.dataId).values,g=Gn(m.shape,m.dtype,v,p),y=g.outVals,b=g.outShape,x=g.outDtype;t=r.makeTensorInfo(b,x,y)}else{var k=u.backend_util.computeOutAndReduceShapes(m.shape,p),w=(0,c.Z)(k,2),S=w[0],C=w[1],_=u.util.sizeFromShape(C),I=la({inputs:{x:m},backend:r,attrs:{shape:[-1,_]}}),T=ha(I,(0,u.sumOutType)(i.dtype),"prod",r);t=la({inputs:{x:T},backend:r,attrs:{shape:S}}),d.push(I),d.push(T)}if(s){d.push(t);var E=u.backend_util.expandShapeToKeepDim(t.shape,f);t=la({inputs:{x:t},backend:r,attrs:{shape:E}})}return d.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),t}},Gu=function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.step,o=n.dtype,s=Hn(r,a,i,o);return t.makeTensorInfo([s.length],o,s)},Hu={kernelName:u.Range,backendName:"webgl",kernelFunc:Gu},qu=ea({opSnippet:"return 1.0 / x;"}),Xu={kernelName:u.Reciprocal,backendName:"webgl",kernelFunc:qu},Ku=ea({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),Yu={kernelName:u.Relu,backendName:"webgl",kernelFunc:Ku},Qu=ea({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),$u={kernelName:u.Relu6,backendName:"webgl",kernelFunc:Qu},Ju=(0,h.Z)((function e(t,n,r,a,i){(0,p.Z)(this,e),this.variableNames=["A"],this.outputShape=[];var o=(0,c.Z)(t,4),s=o[0],u=o[1],l=o[2],d=o[3];this.outputShape=[s,n,r,d];var f,h=[a&&n>1?u-1:u,a&&r>1?l-1:l],m=[a&&n>1?n-1:n,a&&r>1?r-1:r];f=i?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(h[0]/m[0],",\n          ").concat(h[1]/m[1],");\n      const vec2 inputShapeRC = vec2(").concat(u,".0, ").concat(l,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")})),ec=(0,h.Z)((function e(t,n,r,a,i){(0,p.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=(0,c.Z)(t,4),s=o[0],u=o[1],l=o[2],d=o[3];this.outputShape=[s,n,r,d];var f,h=[a&&n>1?u-1:u,a&&r>1?l-1:l],m=[a&&n>1?n-1:n,a&&r>1?r-1:r];f=i?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(h[0]/m[0],",\n          ").concat(h[1]/m[1],",\n          ").concat(h[1]/m[1],");\n      const vec3 inputShapeRC = vec3(").concat(u,".0, ").concat(l,".0,\n                                     ").concat(l,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(d-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}));var tc={kernelName:u.ResizeBilinear,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size,l=(0,c.Z)(s,2),d=l[0],f=l[1],p=(0,u.env)().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new ec(a.shape,d,f,i,o):new Ju(a.shape,d,f,i,o);return n.runWebGLProgram(p,[a],"float32")}},nc=(0,h.Z)((function e(t,n,r){(0,p.Z)(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=(0,c.Z)(n,3),i=a[1],o=a[2],s=(0,c.Z)(t,3),u=s[1],l=s[2],d=[r&&u>1?i-1:i,r&&l>1?o-1:o],f=[r&&u>1?u-1:u,r&&l>1?l-1:l],h=d[0]/f[0],m=d[1]/f[1],v=1/h,g=1/m,y=2*Math.ceil(v)+2,b=2*Math.ceil(g)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(h,");\n        const float widthScale = float(").concat(m,");\n\n        const float invHeightScale = float(").concat(v,");\n        const float invWidthScale = float(").concat(g,");\n\n        const int winHeight = int(").concat(y,");\n        const int winWidth = int(").concat(b,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(u,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(l,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(i-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(o-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var rc={kernelName:u.ResizeBilinearGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,s=new nc(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},ac=(0,h.Z)((function e(t,n,r,a,i){(0,p.Z)(this,e),this.variableNames=["A"],this.outputShape=[];var o=(0,c.Z)(t,4),s=o[0],u=o[1],l=o[2],d=o[3];this.outputShape=[s,n,r,d];var f,h=[a&&n>1?u-1:u,a&&r>1?l-1:l],m=[a&&n>1?n-1:n,a&&r>1?r-1:r],v=a?"0.5":"0.0";f=i?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(h[0]/m[0],",\n          ").concat(h[1]/m[1],");\n      const vec2 inputShapeRC = vec2(").concat(u,".0, ").concat(l,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(v,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")})),ic=(0,h.Z)((function e(t,n,r,a,i){(0,p.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=(0,c.Z)(t,4),s=o[0],u=o[1],l=o[2],d=o[3];this.outputShape=[s,n,r,d];var f,h=[a&&n>1?u-1:u,a&&r>1?l-1:l],m=[a&&n>1?n-1:n,a&&r>1?r-1:r],v=a?"0.5":"0.0";f=i?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(h[0]/m[0],",\n          ").concat(h[1]/m[1],",\n          ").concat(h[1]/m[1],");\n      const vec3 inputShapeRC = vec3(").concat(u,".0, ").concat(l,".0,\n                                     ").concat(l,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(v,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(d-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}));var oc={kernelName:u.ResizeNearestNeighbor,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size,l=(0,c.Z)(s,2),d=l[0],f=l[1],p=(0,u.env)().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new ic(a.shape,d,f,i,o):new ac(a.shape,d,f,i,o);return n.runWebGLProgram(p,[a],a.dtype)}},sc=(0,h.Z)((function e(t,n,r){(0,p.Z)(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=(0,c.Z)(n,3),i=a[1],o=a[2],s=(0,c.Z)(t,3),u=s[1],l=s[2],d=[r&&u>1?i-1:i,r&&l>1?o-1:o],f=[r&&u>1?u-1:u,r&&l>1?l-1:l],h=d[0]/f[0],m=d[1]/f[1],v=1/h,g=1/m,y=2*Math.ceil(v)+2,b=2*Math.ceil(g)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(h,");\n        const float widthScale = float(").concat(m,");\n\n        const float invHeightScale = float(").concat(v,");\n        const float invWidthScale = float(").concat(g,");\n\n        const int winHeight = int(").concat(y,");\n        const int winWidth = int(").concat(b,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(u,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(l,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(d[0],") *\n                (float(dyR) / float(").concat(f[0],"));\n\n            float sourceFracCol =\n                float(").concat(d[1],") *\n                  (float(dyC) / float(").concat(f[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(i,") - 1),\n                ").concat(r," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(o,") - 1),\n                ").concat(r," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var uc={kernelName:u.ResizeNearestNeighborGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,s=new sc(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},cc=(0,h.Z)((function e(t,n){(0,p.Z)(this,e),this.variableNames=["x"];var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));if(this.outputShape=t,1!==r){var a=t.map((function(e,r){return function(e){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - coords[").concat(e,"] - 1"):"coords[".concat(e,"]")}(r)})).join(","),i=Xe(r);this.userCode="\n      void main() {\n        ".concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(t[0]," - coord - 1));\n        }\n      ")})),lc=(0,h.Z)((function e(t,n){(0,p.Z)(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));this.outputShape=t;var a=fr("rc",r),i="".concat(a[r-1]," + 1 < ").concat(this.outputShape[r-1]),o="".concat(a[r-2]," + 1 < ").concat(this.outputShape[r-2]),s=Xe(r);function u(e){var r=t.map((function(r,a){return function(e,r){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - ").concat(r[e]," - 1"):"".concat(r[e])}(a,e)})),a=r.join(","),i=r.slice(-2).join(",");return"getChannel(getX(".concat(a,"), vec2(").concat(i,"))")}this.userCode=1===r?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(t[0]," - rc - 1),\n            ").concat(t[0]," - rc - 1);\n          if(").concat(i,"){\n              result.g = getChannel(getX(").concat(t[0]," - (rc  + 1) - 1),\n                ").concat(t[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(s," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return u(e)}(a.slice()),";\n          if(").concat(i,"){\n            result.g = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",u(e)}(a.slice()),";\n          }\n          if(").concat(o,") {\n            result.b = ").concat(function(e){return e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            if(").concat(i,") {\n              result.a = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")}));var dc={kernelName:u.Reverse,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dims,o=a.shape.length,s=u.util.parseAxisParam(i,a.shape);if(0===o)return Wr({inputs:{x:a},backend:n});var c=(0,u.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new lc(a.shape,s):new cc(a.shape,s);return n.runWebGLProgram(c,[a],a.dtype)}},fc=(0,h.Z)((function e(t,n){(0,p.Z)(this,e),this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];var r=t[1],a=t[2];this.outputShape=t;var i="";i="number"===typeof n?"float outputValue = ".concat(n.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(n.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(i,"\n          if(coordX >= 0 && coordX < ").concat(a," && coordY >= 0 && coordY < ").concat(r,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),pc={kernelName:u.RotateWithOffset,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=n.radians,o=n.fillValue,s=n.center,l=r,d=new fc(a.shape,o),f=u.backend_util.getImageCenter(s,a.shape[1],a.shape[2]),p=(0,c.Z)(f,2),h=[[p[0],p[1],Math.sin(i),Math.cos(i)]];return l.runWebGLProgram(d,[a],a.dtype,h)}},hc=ea({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),mc={kernelName:u.Round,backendName:"webgl",kernelFunc:hc},vc=ea({opSnippet:"return inversesqrt(x);",cpuKernelImpl:qn}),gc={kernelName:u.Rsqrt,backendName:"webgl",kernelFunc:vc},yc=(0,h.Z)((function e(t,n,r,a,i,o){(0,p.Z)(this,e),this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var s=Xe(i.length),u=Xe(o.length),c="";1===r?c="i":2===r&&(c="i, j");var l="getIndices(".concat(c,")"),d="";1===a?d="i":2===a&&(d="i, coords[1]");var f="getUpdates(".concat(d,")"),h=n>1?"strides[j]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(i,");\n\n        void main() {\n          ").concat(u," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(t,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(n,"; j++) {\n              int index = round(").concat(l,");\n              flattenedIndex += index * ").concat(h,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(f,";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      ")}));var bc={kernelName:u.ScatterNd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=t.updates,o=r.shape,s=u.backend_util.calculateShapes(i,a,o),c=s.sliceRank,l=s.numUpdates,d=s.sliceSize,f=s.strides,p=s.outputSize,h=[p/d,d];if(0===p)return n.makeTensorInfo(o,a.dtype);var m=la({inputs:{x:a},backend:n,attrs:{shape:[l,c]}}),v=la({inputs:{x:i},backend:n,attrs:{shape:[l,d]}}),g=n.makeTensorInfo([],"float32",new Float32Array([0])),y=new yc(l,c,m.shape.length,v.shape.length,f,h),b=n.runWebGLProgram(y,[v,m,g],v.dtype),x=la({inputs:{x:b},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(g),x}},xc=(0,h.Z)((function e(t,n,r,a){(0,p.Z)(this,e),this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[t,r];var i="for (int i = 0; i < ".concat(Math.ceil(Math.log2(n+1)),"; ++i) { if (left >= right) break;"),o=2===(0,u.env)().getNumber("WEBGL_VERSION")?"while (left < right) {":i,s="left"===a?"<":"<=";this.userCode="\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ".concat(o,"\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ").concat(s," value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     ")}));var kc={kernelName:u.SearchSorted,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sortedSequence,i=t.values,o=r.side,s=new xc(a.shape[0],a.shape[1],i.shape[1],o),u=[[a.shape[1]]];return n.runWebGLProgram(s,[a,i],"int32",u)}},wc=(0,h.Z)((function e(t,n,r){var a,i;if((0,p.Z)(this,e),this.variableNames=["c","a","b"],this.outputShape=n,r>4)throw Error("Where for rank ".concat(r," is not yet supported"));if(1===r)i="resRC",a="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],u=[],c=0;c<n.length;c++)u.push("".concat(o[c])),c<t&&s.push("".concat(o[c]));a=s.join(),i=u.join()}var l=Xe(r);this.userCode="\n      void main() {\n        ".concat(l," resRC = getOutputCoords();\n        float cVal = getC(").concat(a,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(i,"));\n        } else {\n          setOutput(getB(").concat(i,"));\n        }\n      }\n    ")}));var Sc={kernelName:u.Select,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e,o=new wc(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(o,[r,a,i],(0,u.upcastType)(a.dtype,i.dtype))}},Cc=ea({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(u.backend_util.SELU_SCALEALPHA,";\n  float scale = ").concat(u.backend_util.SELU_SCALE,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),_c={kernelName:u.Selu,backendName:"webgl",kernelFunc:Cc},Ic=ea({opSnippet:"if (isnan(x)) return x;\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:Kn}),Tc={kernelName:u.Sigmoid,backendName:"webgl",kernelFunc:Ic},Ec=ea({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),Nc={kernelName:u.Sign,backendName:"webgl",kernelFunc:Ec},Oc=ea({opSnippet:"if (isnan(x)) return x;\n  return sin(x);\n"}),Ac={kernelName:u.Sin,backendName:"webgl",kernelFunc:Oc},Rc=ea({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),Pc={kernelName:u.Sinh,backendName:"webgl",kernelFunc:Rc},Dc=ea({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),Bc={kernelName:u.Softplus,backendName:"webgl",kernelFunc:Dc},Mc={kernelName:u.SpaceToBatchND,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings;u.util.assert(a.shape.length<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),c=[[0,0]];c.push.apply(c,(0,d.Z)(o));for(var l=1+i.length;l<a.shape.length;++l)c.push([0,0]);var f=[],p=zu({inputs:{x:a},backend:n,attrs:{paddings:c,constantValue:0}}),h=u.backend_util.getReshaped(p.shape,i,s,!1),m=u.backend_util.getPermuted(h.length,i.length,!1),v=u.backend_util.getReshapedPermuted(p.shape,i,s,!1),g=la({inputs:{x:p},backend:n,attrs:{shape:h}}),y=xa({inputs:{x:g},backend:n,attrs:{perm:m}}),b=la({inputs:{x:y},backend:n,attrs:{shape:v}});return f.push(p),f.push(g),f.push(y),f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),b}};var Fc={kernelName:u.SparseFillEmptyRows,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,i=t.denseShape,o=t.defaultValue;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(a.shape));if(0!==o.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(o.shape));var s=n.readSync(r.dataId),u=n.readSync(a.dataId),l=n.readSync(i.dataId),d=n.readSync(o.dataId)[0],f=$n(s,r.shape,r.dtype,u,a.dtype,l,d),p=(0,c.Z)(f,5),h=p[0],m=p[1],v=p[2],g=p[3],y=p[4];return[n.makeTensorInfo(m,r.dtype,h),n.makeTensorInfo([m[0]],a.dtype,v),n.makeTensorInfo([g.length],"bool",new Uint8Array(g.map((function(e){return Number(e)})))),n.makeTensorInfo([y.length],r.dtype,new Int32Array(y))]}};var Lc={kernelName:u.SparseReshape,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,i=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=Array.from(n.readSync(a.dataId)),s=n.readSync(r.dataId),u=Array.from(n.readSync(i.dataId)),l=Jn(s,r.shape,r.dtype,o,u),d=(0,c.Z)(l,3),f=d[0],p=d[1],h=d[2];return[n.makeTensorInfo(p,r.dtype,f),n.makeTensorInfo([h.length],i.dtype,new Int32Array(h))]}};var Vc={kernelName:u.SparseSegmentMean,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(i.shape));var o=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(i.dataId),l=er(o,r.shape,r.dtype,s,u,!0),d=(0,c.Z)(l,2),f=d[0],p=d[1];return n.makeTensorInfo(p,r.dtype,f)}};var zc={kernelName:u.SparseSegmentSum,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(i.shape));var o=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(i.dataId),l=er(o,r.shape,r.dtype,s,u),d=(0,c.Z)(l,2),f=d[0],p=d[1];return n.makeTensorInfo(p,r.dtype,f)}};var Zc={kernelName:u.SparseToDense,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,i=t.sparseValues,o=t.defaultValue,s=r.outputShape,c=u.backend_util.calculateShapes(i,a,s),l=c.sliceRank,d=c.numUpdates,f=c.sliceSize,p=c.strides,h=c.outputSize;if("string"===i.dtype){var m=n.bufferSync(a),v=n.bufferSync(i),g=u.util.decodeString(n.readSync(o.dataId)[0]),y=Xn(m,v,s,h,f,d,l,p,g,false);return n.makeTensorInfo(s,y.dtype,y.values)}var b=new yc(d,l,a.shape.length,i.shape.length,p,[h,1],false),x=n.runWebGLProgram(b,[i,a,o],i.dtype),k=la({inputs:{x:x},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(x),k}};var Uc={kernelName:u.SplitV,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.numOrSizeSplits,o=r.axis,s=u.util.parseAxisParam(o,a.shape)[0],c=u.backend_util.prepareSplitSize(a,i,s),l=a.shape.length,f=new Array(l).fill(0),p=a.shape.slice();return c.map((function(e){var t=(0,d.Z)(p);t[s]=e;var r=vi({inputs:{x:a},backend:n,attrs:{begin:f,size:t}});return f[s]+=e,r}))}},jc="return sqrt(x);",Wc=ea({opSnippet:jc,packedOpSnippet:jc,cpuKernelImpl:tr}),Gc={kernelName:u.Sqrt,backendName:"webgl",kernelFunc:Wc},Hc=ea({opSnippet:"return x * x;"}),qc={kernelName:u.Square,backendName:"webgl",kernelFunc:Hc},Xc="return (a - b) * (a - b);",Kc=ta({opSnippet:Xc,packedOpSnippet:Xc}),Yc={kernelName:u.SquaredDifference,backendName:"webgl",kernelFunc:Kc};var Qc={kernelName:u.Step,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=xr+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),o=new br(a.shape,i);return r.runWebGLProgram(o,[a],a.dtype)}},$c=(0,h.Z)((function e(t,n,r){(0,p.Z)(this,e),this.variableNames=["x"],this.outputShape=r;var a=r.length,i=Xe(r.length),o=Xe(r.length),s="";if(1===a)s="coords * strides + begin";else{var u=0;s=r.map((function(e,t){return u++,1===r.length?"coords * strides[".concat(t,"] + begin[").concat(t,"]"):"coords[".concat(u-1,"] * strides[").concat(t,"] + begin[").concat(t,"]")})).join(",")}this.userCode="\n      ".concat(i," begin = ").concat(i,"(").concat(t,");\n      ").concat(i," strides = ").concat(i,"(").concat(n,");\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(s,"));\n      }\n    ")}));var Jc={kernelName:u.StridedSlice,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.begin,s=a.end,c=a.strides,l=a.beginMask,d=a.endMask,f=a.ellipsisMask,p=a.newAxisMask,h=a.shrinkAxisMask,m=u.slice_util.sliceInfo(i.shape,o,s,c,l,d,f,p,h),v=m.finalShapeSparse,g=m.finalShape,y=m.isIdentity,b=m.sliceDim0,x=m.isSimpleSlice,k=m.begin,w=m.end,S=m.strides;if(y)t=la({inputs:{x:i},backend:r,attrs:{shape:g}});else if(b||x){u.util.assert(i.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(i.shape.length)}));var C=u.slice_util.computeOutShape(k,w,S),_=vi({inputs:{x:i},backend:r,attrs:{begin:k,size:C}});t=la({inputs:{x:_},backend:r,attrs:{shape:g}}),r.disposeIntermediateTensorInfo(_)}else{if(r.shouldExecuteOnCPU([i])){var I=r.readSync(i.dataId),T=(0,u.buffer)(i.shape,i.dtype,I),E=nr(v,T,S,k);t=r.makeTensorInfo(g,i.dtype,E.values)}else{var N=new $c(k,S,v);t=r.runWebGLProgram(N,[i],i.dtype)}}var O=la({inputs:{x:t},backend:r,attrs:{shape:g}});return r.disposeIntermediateTensorInfo(t),O}};var el={kernelName:u.StringNGrams,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,i=r.nGramWidths,o=r.leftPad,s=r.rightPad,u=r.padWidth,l=r.preserveShortSequences,d=t.data,f=t.dataSplits,p=n.readSync(d.dataId),h=n.readSync(f.dataId),m=rr(p,h,a,i,o,s,u,l),v=(0,c.Z)(m,2),g=v[0],y=v[1];return[n.makeTensorInfo([g.length],"string",g),n.makeTensorInfo(f.shape,"int32",y)]}};var tl={kernelName:u.StringSplit,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,i=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));var o=n.readSync(a.dataId),s=n.readSync(i.dataId)[0],u=ar(o,s,r),l=(0,c.Z)(u,3),d=l[0],f=l[1],p=l[2],h=f.length;return[n.makeTensorInfo([h,2],"int32",d),n.makeTensorInfo([h],"string",f),n.makeTensorInfo([2],"int32",new Int32Array(p))]}};var nl={kernelName:u.StringToHashBucketFast,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var i=n.readSync(a.dataId),o=ir(i,r);return n.makeTensorInfo(a.shape,"int32",o)}},rl=ea({opSnippet:"return tan(x);"}),al={kernelName:u.Tan,backendName:"webgl",kernelFunc:rl},il=ea({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),ol={kernelName:u.Tanh,backendName:"webgl",kernelFunc:il},sl=(0,h.Z)((function e(t,n){(0,p.Z)(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[a]*n[a];this.outputShape=r,this.rank=r.length;var i=Xe(this.rank),o=function(e){var t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod(".concat(n[a],", ").concat(e[a],")"));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(i," resRC = getOutputCoords();\n        setOutput(getA(").concat(o,"));\n      }\n    ")}));function ul(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;if("string"===a.dtype||a.shape.length>5){var o=n.readSync(a.dataId),s="string"===a.dtype?o.map((function(e){return u.util.decodeString(e)})):o,c=(0,u.buffer)(a.shape,a.dtype,s),l=sr(c,i);return n.makeTensorInfo(l.shape,l.dtype,l.values)}var d=new sl(a.shape,i);return n.runWebGLProgram(d,[a],a.dtype)}var cl={kernelName:u.Tile,backendName:"webgl",kernelFunc:ul},ll=(0,h.Z)((function e(t){(0,p.Z)(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "})),dl=(0,h.Z)((function e(t){(0,p.Z)(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}));function fl(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function pl(e){for(var t=1;t<e;)t*=2;return t}var hl={kernelName:u.TopK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted,s=(0,u.env)().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=(0,u.env)().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),d=a.shape,f=d[d.length-1];if(n.shouldExecuteOnCPU([a])||f<s||i>l){var p=n.readSync(a.dataId),h=ur(p,d,a.dtype,i,o),m=(0,c.Z)(h,2),v=m[0],g=m[1];return[n.makeTensorInfo(v.shape,v.dtype,v.values),n.makeTensorInfo(g.shape,g.dtype,g.values)]}if(0===i)return d[d.length-1]=0,[n.makeTensorInfo(d,a.dtype,[]),n.makeTensorInfo(d,"int32",[])];if(1===f)return[a,Jo({attrs:{shape:d,dtype:"int32",value:0},backend:n})];var y=n.texData.get(a.dataId),b=null!==y&&y.isPacked,x=b?n.unpackTensor(a):a,k=u.util.sizeFromShape(d)/f,w=la({inputs:{x:x},attrs:{shape:[k,f]},backend:n});b&&fl(n,x);for(var S=pl(i),C=pl(f),_=null,I=function(){return null===_?[w,w]:[w,_]},T=function(e,t,r){var a=I(),i=new ll(r),o=[[f],[null===_?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],s=_;_=n.runWebGLProgram(i,a,"int32",o),fl(n,s)},E=1;E<S;E*=2)for(var N=2*E,O=E;O>=1;O/=2)T(N,O,[k,C]);for(var A=C;A>S;A/=2){var R=I(),P=new dl([k,A/2]),D=[[f],[null===_?1:0],[S]],B=_;_=n.runWebGLProgram(P,R,"int32",D),fl(n,B);for(var M=S/2,F=2*M,L=M;L>=1;L/=2)T(F,L,_.shape)}var V=_;_=vi({inputs:{x:_},backend:n,attrs:{begin:0,size:[k,i]}}),fl(n,V);var z=gs({inputs:{x:w,indices:_},backend:n,attrs:{axis:1,batchDims:1}});fl(n,w);var Z=d.slice(0,-1);Z.push(i),V=_,_=la({inputs:{x:_},attrs:{shape:Z},backend:n}),fl(n,V);var U=z;return z=la({inputs:{x:z},attrs:{shape:Z},backend:n}),fl(n,U),[z,_]}},ml=(0,h.Z)((function e(t,n,r,a,i,o){(0,p.Z)(this,e),this.variableNames=["Image","Transforms"],this.outputShape=o;var s,u="nearest"===r?1:2;switch(a){case"constant":default:s=1;break;case"reflect":s=2;break;case"wrap":s=3;break;case"nearest":s=4}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(s," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(t," && 0 <= coordX && coordX < ").concat(n,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(i,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(i,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(n,"));\n                float mapY = mapCoord(inY, float(").concat(t,"));\n\n                if (").concat(u," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}));var vl={kernelName:u.Transform,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.transforms,o=r.interpolation,s=r.fillMode,u=r.fillValue,l=r.outputShape,d=(0,c.Z)(a.shape,4),f=d[0],p=d[1],h=d[2],m=d[3],v=null!=l?l:[p,h],g=(0,c.Z)(v,2),y=g[0],b=g[1],x=new ml(p,h,o,s,u,[f,y,b,m]);return n.runWebGLProgram(x,[a,i],"float32")}};var gl={kernelName:u.Unique,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;ke(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");var o=r.readSync(i.dataId),s=lr(o,a,i.shape,i.dtype),u=s.outputValues,c=s.outputShape,l=s.indices;return[r.makeTensorInfo(c,i.dtype,u),r.makeTensorInfo([l.length],"int32",l)]}};var yl={kernelName:u.Unpack,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a,s=o.shape.length,u=a.shape[i],c=new Array(s-1),l=0,d=0;d<s;d++)d!==i&&(c[l++]=o.shape[d]);var f=[],p=new Array(s).fill(0),h=o.shape.slice();h[i]=1;for(var m=new Array(u),v=0;v<m.length;v++){p[i]=v;var g=vi({inputs:{x:o},backend:n,attrs:{begin:p,size:h}}),y=la({inputs:{x:g},backend:n,attrs:{shape:c}});m[v]=y,f.push(g)}return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}},bl=(0,h.Z)((function e(t,n){(0,p.Z)(this,e),this.variableNames=["x","segmentIds"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.numSegments,s=o*Math.ceil(i/r);this.outputShape=[a,s];var u=4*Math.floor(r/4),c=r%4,l="\n        sumValue += dot(values, segFilter);\n    ",d="";i%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      "));var f="";i%r>0&&(f="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(d,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(f,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(o,")) * float(").concat(r,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(o,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(u,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(u,";\n        if (").concat(1===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(l,"\n        } else if (").concat(2===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(l,"\n        } else if (").concat(3===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(l,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")}));for(var xl=0,kl=[Sa,_a,Ta,Na,Ra,Ba,Ma,Fa,ja,Wa,Ha,Xa,Ya,$a,ei,ri,ai,si,ui,ci,fi,yi,bi,xi,_i,Ei,Ai,qr,Di,Ui,Ki,eo,to,no,ro,io,so,co,fo,go,yo,bo,ko,Co,To,Eo,Oo,Ro,Do,Mo,Fo,Vo,Zo,jo,Go,Xo,Qo,ts,rs,os,us,ds,fs,ps,ms,ys,xs,ws,Gr,Ss,Vi,_s,Ts,Ns,Yr,As,Ps,Ds,Ms,Ls,zs,Us,Ws,qs,Ks,Qs,Js,eu,tu,au,iu,ou,su,uu,lu,pu,mu,Cu,ca,_u,Tu,Nu,Au,wi,Pu,Mu,Fu,Zu,ju,Jr,Wu,Hu,Ci,yu,Xu,Yu,$u,da,tc,rc,oc,uc,dc,pc,mc,gc,bc,kc,Sc,_c,Tc,Nc,Ac,Pc,gi,Su,Bc,Mc,Fc,Lc,Vc,zc,Zc,Uc,Gc,qc,Yc,Qc,Jc,el,tl,nl,ku,ba,al,ol,cl,hl,vl,ka,gl,yl,{kernelName:u.UnsortedSegmentSum,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.segmentIds,o=r.numSegments,s=a.shape.length,c=[],l=0,d=u.backend_util.getAxesPermutation([l],s),f=a;null!=d&&(f=xa({inputs:{x:a},backend:n,attrs:{perm:d}}),c.push(f),l=u.backend_util.getInnerMostAxes(1,s)[0]);var p=u.backend_util.segment_util.computeOutShape(f.shape,l,o),h=u.util.sizeFromShape([f.shape[l]]),m=la({inputs:{x:f},backend:n,attrs:{shape:[-1,h]}});c.push(m);var v=function e(t,r,a,i,o){var s=t.shape[0],l=t.shape[1],d=u.backend_util.segment_util.segOpComputeOptimalWindowSize(l,o),f=new bl({windowSize:d,inSize:l,batchSize:s,numSegments:o},r),p=n.compileAndRun(f,[t,a],i);if(c.push(p),p.shape[1]===o)return p;var h=Gu({backend:n,attrs:{start:0,stop:o,step:1,dtype:"float32"}}),m=ul({inputs:{x:h},backend:n,attrs:{reps:[l/d]}});return c.push(h),c.push(m),e(p,r,m,i,o)}(m,"unsortedSegmentSum",i,(0,u.sumOutType)(a.dtype),o),g=la({inputs:{x:v},backend:n,attrs:{shape:p}}),y=g;if(null!=d){c.push(g);var b=u.backend_util.getUndoAxesPermutation(d);y=xa({inputs:{x:y},backend:n,attrs:{perm:b}})}return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),y}},Bu];xl<kl.length;xl++){var wl=kl[xl];(0,u.registerKernel)(wl)}},2652:function(e,t,n){"use strict";n.r(t),n.d(t,{GraphModel:function(){return mt},deregisterOp:function(){return B},loadGraphModel:function(){return vt},loadGraphModelSync:function(){return yt},registerOp:function(){return P},version_converter:function(){return xt}});var r={};n.r(r),n.d(r,{json:function(){return j}});var a={};n.r(a),n.d(a,{json:function(){return W}});var i={};n.r(i),n.d(i,{json:function(){return G}});var o={};n.r(o),n.d(o,{json:function(){return H}});var s={};n.r(s),n.d(s,{json:function(){return q}});var u={};n.r(u),n.d(u,{json:function(){return X}});var c={};n.r(c),n.d(c,{json:function(){return K}});var l={};n.r(l),n.d(l,{json:function(){return Y}});var d={};n.r(d),n.d(d,{json:function(){return Q}});var f={};n.r(f),n.d(f,{json:function(){return $}});var p={};n.r(p),n.d(p,{json:function(){return J}});var h={};n.r(h),n.d(h,{json:function(){return ee}});var m={};n.r(m),n.d(m,{json:function(){return te}});var v={};n.r(v),n.d(v,{json:function(){return ne}});var g={};n.r(g),n.d(g,{json:function(){return re}});var y={};n.r(y),n.d(y,{json:function(){return ae}});var b={};n.r(b),n.d(b,{json:function(){return ie}});var x={};n.r(x),n.d(x,{json:function(){return oe}});var k={};n.r(k),n.d(k,{json:function(){return se}});var w={};n.r(w),n.d(w,{OP_SCOPE_SUFFIX:function(){return Ce.zvA},abs:function(){return Ce.WnP},acos:function(){return Ce.Khb},acosh:function(){return Ce.__u},add:function(){return Ce.IHx},addN:function(){return Ce.QBD},all:function(){return Ce.$6P},any:function(){return Ce.YjB},argMax:function(){return Ce.NqF},argMin:function(){return Ce.vHJ},asin:function(){return Ce.ZRM},asinh:function(){return Ce.VfV},atan:function(){return Ce.z4N},atan2:function(){return Ce.fvJ},atanh:function(){return Ce.C80},avgPool:function(){return Ce.wS1},avgPool3d:function(){return Ce.uR5},basicLSTMCell:function(){return Ce.zEQ},batchNorm:function(){return Ce.tgs},batchNorm2d:function(){return Ce.Dxk},batchNorm3d:function(){return Ce.JY5},batchNorm4d:function(){return Ce.p3b},batchToSpaceND:function(){return Ce.E4h},bincount:function(){return Ce.yE8},booleanMaskAsync:function(){return Ce.anm},broadcastArgs:function(){return Ce.XsQ},broadcastTo:function(){return Ce.UFq},buffer:function(){return Ce.f3b},cast:function(){return Ce.pju},ceil:function(){return Ce.mDi},clipByValue:function(){return Ce.iUl},clone:function(){return Ce.d9v},complex:function(){return Ce.PYB},concat:function(){return Ce.zoF},concat1d:function(){return Ce.gME},concat2d:function(){return Ce.Izb},concat3d:function(){return Ce.MNy},concat4d:function(){return Ce.ZaL},conv1d:function(){return Ce.PAt},conv2d:function(){return Ce.Tek},conv2dTranspose:function(){return Ce.bc},conv3d:function(){return Ce.pdZ},conv3dTranspose:function(){return Ce.$QV},cos:function(){return Ce.mCk},cosh:function(){return Ce.f9Y},cosineWindow:function(){return Ce.mew},cumprod:function(){return Ce.$Gn},cumsum:function(){return Ce.zbp},denseBincount:function(){return Ce.ppE},depthToSpace:function(){return Ce.nTT},depthwiseConv2d:function(){return Ce.B10},diag:function(){return Ce.Ka3},dilation2d:function(){return Ce.WmZ},div:function(){return Ce.hiC},divNoNan:function(){return Ce.NTj},dot:function(){return Ce.AKD},dropout:function(){return Ce.rvX},einsum:function(){return Ce.WYO},elu:function(){return Ce.pyx},enclosingPowerOfTwo:function(){return Ce.GRh},equal:function(){return Ce.DgJ},erf:function(){return Ce.qNN},euclideanNorm:function(){return Ce.d2q},exp:function(){return Ce.Qqt},expandDims:function(){return Ce.dt4},expm1:function(){return Ce.t$B},eye:function(){return Ce.iyy},fft:function(){return Ce.kp_},fill:function(){return Ce.hlL},floor:function(){return Ce.GWj},floorDiv:function(){return Ce.qPi},fused:function(){return Ce.imm},gather:function(){return Ce.Iqj},gatherND:function(){return Ce.dbB},greater:function(){return Ce.pjt},greaterEqual:function(){return Ce.brS},ifft:function(){return Ce.Sxn},imag:function(){return Ce.asL},image:function(){return Ce.BHj},inTopKAsync:function(){return Ce.V3u},irfft:function(){return Ce.wx0},isFinite:function(){return Ce.xVT},isInf:function(){return Ce.UWc},isNaN:function(){return Ce.i2d},leakyRelu:function(){return Ce.hi7},less:function(){return Ce.d9m},lessEqual:function(){return Ce.zN1},linalg:function(){return Ce.$r2},linspace:function(){return Ce.SX3},localResponseNormalization:function(){return Ce.G9k},log:function(){return Ce.cM7},log1p:function(){return Ce.Krr},logSigmoid:function(){return Ce.e_t},logSoftmax:function(){return Ce.CmS},logSumExp:function(){return Ce.l_t},logicalAnd:function(){return Ce.HvI},logicalNot:function(){return Ce.hJK},logicalOr:function(){return Ce.K5V},logicalXor:function(){return Ce.egP},losses:function(){return Ce.MB5},lowerBound:function(){return Ce.eab},matMul:function(){return Ce.OI3},max:function(){return Ce.Fp7},maxPool:function(){return Ce._sB},maxPool3d:function(){return Ce.YQQ},maxPoolWithArgmax:function(){return Ce.Ip$},maximum:function(){return Ce.gWQ},mean:function(){return Ce.J69},meshgrid:function(){return Ce.ry_},min:function(){return Ce.VV$},minimum:function(){return Ce.LTh},mirrorPad:function(){return Ce.VdP},mod:function(){return Ce.wQq},moments:function(){return Ce.Gi7},movingAverage:function(){return Ce.p_},mul:function(){return Ce.dC7},multiRNNCell:function(){return Ce.rq4},multinomial:function(){return Ce.SJ_},neg:function(){return Ce.W76},norm:function(){return Ce.KOy},notEqual:function(){return Ce.Quu},oneHot:function(){return Ce.lfX},ones:function(){return Ce.iUs},onesLike:function(){return Ce.JpU},op:function(){return Ce.op},outerProduct:function(){return Ce.N2O},pad:function(){return Ce.vku},pad1d:function(){return Ce.pNR},pad2d:function(){return Ce.koy},pad3d:function(){return Ce.t1L},pad4d:function(){return Ce.lGY},pool:function(){return Ce.d_R},pow:function(){return Ce.sQ3},prelu:function(){return Ce.AL3},print:function(){return Ce.S0v},prod:function(){return Ce.WVs},rand:function(){return Ce.TN_},randomGamma:function(){return Ce.wzB},randomNormal:function(){return Ce.nGf},randomStandardNormal:function(){return Ce.ruB},randomUniform:function(){return Ce.LGj},range:function(){return Ce.w6H},real:function(){return Ce.kwC},reciprocal:function(){return Ce.M25},relu:function(){return Ce.UYe},relu6:function(){return Ce.btT},reshape:function(){return Ce.XLQ},reverse:function(){return Ce.GYS},reverse1d:function(){return Ce.SDf},reverse2d:function(){return Ce.diP},reverse3d:function(){return Ce.sx7},reverse4d:function(){return Ce.mG2},rfft:function(){return Ce.QEs},round:function(){return Ce.NMM},rsqrt:function(){return Ce.bp0},scalar:function(){return Ce.iD$},scatterND:function(){return Ce.snQ},searchSorted:function(){return Ce.zcT},selu:function(){return Ce.U8D},separableConv2d:function(){return Ce.U_I},setdiff1dAsync:function(){return Ce.ODp},sigmoid:function(){return Ce.XD2},sign:function(){return Ce.Xxe},signal:function(){return Ce.tdS},sin:function(){return Ce.O$l},sinh:function(){return Ce.R_K},slice:function(){return Ce.tPi},slice1d:function(){return Ce.jZU},slice2d:function(){return Ce.SmN},slice3d:function(){return Ce.CnO},slice4d:function(){return Ce.p0P},softmax:function(){return Ce.XAC},softplus:function(){return Ce.Wvh},spaceToBatchND:function(){return Ce.fBT},sparse:function(){return Ce.rVs},sparseToDense:function(){return Ce.ers},spectral:function(){return Ce.uN7},split:function(){return Ce.Vl2},sqrt:function(){return Ce._b3},square:function(){return Ce.h62},squaredDifference:function(){return Ce.$i},squeeze:function(){return Ce.L9e},stack:function(){return Ce.knu},step:function(){return Ce.Nbs},stridedSlice:function(){return Ce.NXj},string:function(){return Ce.Z_8},sub:function(){return Ce.luU},sum:function(){return Ce.Smz},tan:function(){return Ce.ORZ},tanh:function(){return Ce.AEp},tensor:function(){return Ce.XeE},tensor1d:function(){return Ce.RRF},tensor2d:function(){return Ce.odF},tensor3d:function(){return Ce.wOQ},tensor4d:function(){return Ce.yXz},tensor5d:function(){return Ce.Bfx},tensor6d:function(){return Ce.xZs},tile:function(){return Ce.Gg6},topk:function(){return Ce.hg7},transpose:function(){return Ce.p4s},truncatedNormal:function(){return Ce.Xu6},unique:function(){return Ce.Two},unsortedSegmentSum:function(){return Ce.pUJ},unstack:function(){return Ce.HHK},upperBound:function(){return Ce.GaM},variable:function(){return Ce.VD$},where:function(){return Ce.arb},whereAsync:function(){return Ce.itS},zeros:function(){return Ce.lls},zerosLike:function(){return Ce.P84}});var S=n(7105);(0,S.env)().registerFlag("KEEP_INTERMEDIATE_TENSORS",(function(){return!1}),(function(e){e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")}));var C,_,I=n(4165),T=n(5861),E=n(5671),N=n(3144),O=n(9439),A=n(3433);!function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(C||(C={})),function(e){!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(_||(_={}));var R={};function P(e,t){var n={tfOpName:e,category:"custom",inputs:[],attrs:[],customExecutor:t};R[e]=n}function D(e){return R[e]}function B(e){delete R[e]}function M(e,t,n,r,a){var i=t.inputParams[e];if(i&&void 0!==i.inputIndexStart){var o=i.inputIndexStart,s=0===i.inputIndexEnd?void 0:void 0===i.inputIndexEnd?o+1:i.inputIndexEnd;if("tensor"===i.type)return F(t.inputNames[i.inputIndexStart],n,r,a);if("tensors"===i.type)return t.inputNames.slice(o,s).map((function(e){return F(e,n,r,a)}));var u=F(t.inputNames.slice(o)[0],n,r,a),c=u.dataSync();return"number"===i.type?c[0]:S.util.toNestedArray(u.shape,c)}var l=t.attrParams[e];return l&&l.value}function F(e,t,n,r){var a=z(e),i=(0,O.Z)(a,2),o=i[0],s=i[1];if(null!=r){var u=r.getHashTableHandleByName(o);if(null!=u)return u}var c=n.currentContextIds.find((function(e){return!!t[V(o,e)]}));return void 0!==c?t[V(o,c)][s]:void 0}function L(e,t){var n=z(e),r=(0,O.Z)(n,3),a=r[0],i=r[1],o=r[2];return[V(a,t&&t.currentContextId),i,o]}function V(e,t){return t?"".concat(e,"-").concat(t):e}function z(e){var t=e.split(":");if(1===t.length)return[e,0,void 0];var n=t[0],r=3===t.length?t[1]:void 0;return[n,Number(t[t.length-1]),r]}function Z(e,t,n){var r=M("pad",e,t,n);if("explicit"===r){r=M("explicitPaddings",e,t,n);for(var a=[[0,0],[0,0],[0,0],[0,0]],i=0;i<4;i++)a[i][0]=r[2*i],a[i][1]=r[2*i+1];return a}return r}function U(e){return e.kept?e:(0,S.clone)(e)}var j=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],W=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],G=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],H=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],q=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],X=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],K=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],Y=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],Q=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]}],$=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],J=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],ee=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}],te=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],ne=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],re=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],ae=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],ie=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],oe=[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],se=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],ue=function(){function e(){var t;(0,E.Z)(this,e);var n=[r,a,i,o,s,u,c,l,d,f,p,h,m,v,g,y,b,x,k],w=(t=[]).concat.apply(t,(0,A.Z)(n.map((function(e){return e.json}))));this.opMappers=w.reduce((function(e,t){return e[t.tfOpName]=t,e}),{})}return(0,N.Z)(e,[{key:"transformGraph",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.node,a=[],i=[],o=[],s=r.reduce((function(e,n){return e[n.name]=t.mapNode(n),n.op.startsWith("Placeholder")?a.push(e[n.name]):"Const"===n.op?i.push(e[n.name]):null!=n.input&&0!==n.input.length||o.push(e[n.name]),e}),{}),u=[],c=[],l={},d={};null!=n&&(l=this.mapSignatureEntries(n.inputs),d=this.mapSignatureEntries(n.outputs));var f=Object.keys(s);f.forEach((function(e){var t=s[e];t.inputNames.forEach((function(e,n){var r=L(e),a=(0,O.Z)(r,3),i=a[0],o=a[2],u=s[i];if(null!=u.outputs){var c=u.outputs.indexOf(o);if(-1!==c){var l="".concat(i,":").concat(c);t.inputNames[n]=l}}t.inputs.push(u),u.children.push(t)}))})),0===Object.keys(d).length?f.forEach((function(e){var t=s[e];0===t.children.length&&c.push(t)})):Object.keys(d).forEach((function(e){var t=L(e),n=(0,O.Z)(t,1)[0],r=s[n];null!=r&&(r.signatureKey=d[e],c.push(r))})),Object.keys(l).length>0?Object.keys(l).forEach((function(e){var t=L(e),n=(0,O.Z)(t,1)[0],r=s[n];r&&(r.signatureKey=l[e],u.push(r))})):u=a;var p={};null!=e.library&&null!=e.library.function&&(p=e.library.function.reduce((function(e,n){return e[n.signature.name]=t.mapFunction(n),e}),{}));var h={nodes:s,inputs:u,outputs:c,weights:i,placeholders:a,signature:n,functions:p};return o.length>0&&(h.initNodes=o),h}},{key:"mapSignatureEntries",value:function(e){return Object.keys(e||{}).reduce((function(t,n){return t[e[n].name]=n,t}),{})}},{key:"mapNode",value:function(e){var t=D(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});var n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((function(e){return e.startsWith("^")?e.slice(1):e})),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce((function(e,t){return e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e}),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce((function(t,n){var r=n.type,a=void 0;switch(n.type){case"string":void 0===(a=le(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=le(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":void 0===(a=xe(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=xe(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":void 0===(a=fe(e.attr,n.tfName,n.defaultValue||0))&&n.tfDeprecatedName&&(a=fe(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":void 0===(a=be(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=be(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":void 0===(a=de(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=de(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":void 0===(a=we(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=we(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":void 0===(a=ye(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=ye(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":void 0===(a=ke(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=ke(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":void 0===(a=me(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=me(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":void 0===(a=ve(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=ve(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":void 0===(a=he(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=he(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: ".concat(n.type," for op: ").concat(e.op))}return t[n.name]={value:a,type:r},t}),{})),n}},{key:"mapFunction",value:function(e){var t=this,n=e.nodeDef,r=[],a={};null!=n&&(a=n.reduce((function(e,n){return e[n.name]=t.mapNode(n),"Const"===n.op&&r.push(e[n.name]),e}),{}));var i=[],o=[];e.signature.inputArg.forEach((function(e){var t=L(e.name),n=(0,O.Z)(t,1)[0],r={name:n,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:pe(e.type),type:"dtype"}},children:[]};r.signatureKey=e.name,i.push(r),a[n]=r})),Object.keys(a).forEach((function(e){var t=a[e];t.inputNames.forEach((function(e,n){var r=L(e),i=(0,O.Z)(r,3),o=i[0],s=i[2],u=a[o];if(null!=u.outputs){var c=u.outputs.indexOf(s);if(-1!==c){var l="".concat(o,":").concat(c);t.inputNames[n]=l}}t.inputs.push(u),u.children.push(t)}))}));var s=e.ret;e.signature.outputArg.forEach((function(e){var t=L(s[e.name]),n=(0,O.Z)(t,2),r=n[0],i=n[1],u=a[r];null!=u&&(u.defaultOutput=i,o.push(u))}));var u=this.mapArgsToSignature(e);return{nodes:a,inputs:i,outputs:o,weights:r,placeholders:[],signature:u}}},{key:"mapArgsToSignature",value:function(e){var t=this;return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((function(e,n){return e[n.name]=t.mapArgToTensorInfo(n),e}),{}),outputs:e.signature.outputArg.reduce((function(n,r){return n[r.name]=t.mapArgToTensorInfo(r,e.ret),n}),{})}}},{key:"mapArgToTensorInfo",value:function(e,t){var n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}],[{key:"Instance",get:function(){return this._instance||(this._instance=new this)}}]),e}();function ce(e,t){var n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){var t=(0,S.env)().global;if("undefined"!==typeof t.atob)return t.atob(e);if("undefined"!==typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function le(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return null!=a?ce(a.s,r):n}function de(e,t,n){var r=e[t];return r?r.b:n}function fe(e,t,n){var r=e[t]||{},a=null!=r.i?r.i:null!=r.f?r.f:n;return"number"===typeof a?a:parseInt(a,10)}function pe(e){switch("string"===typeof e&&(e=C[e]),e){case C.DT_FLOAT:case C.DT_HALF:return"float32";case C.DT_INT32:case C.DT_INT64:case C.DT_INT8:case C.DT_UINT8:return"int32";case C.DT_BOOL:return"bool";case C.DT_DOUBLE:return"float32";case C.DT_STRING:return"string";default:return null}}function he(e,t,n){var r=e[t];return r&&r.func?r.func.name:n}function me(e,t,n){var r=e[t];return r&&r.type?pe(r.type):n}function ve(e,t,n){var r=e[t];return r&&r.list&&r.list.type?r.list.type.map((function(e){return pe(e)})):n}function ge(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((function(e){return"number"===typeof e.size?e.size:parseInt(e.size,10)})):[]}function ye(e,t,n){var r=e[t];return r&&r.shape?ge(r.shape):n}function be(e,t,n){var r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((function(e){return"number"===typeof e?e:parseInt(e,10)})):n}function xe(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return a&&a.list&&a.list.s?a.list.s.map((function(e){return ce(e,r)})):n}function ke(e,t,n){var r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map((function(e){return ge(e)})):n}function we(e,t,n){var r=e[t];return r&&r.list&&r.list.b?r.list.b:n}var Se=function(){function e(t,n,r){var a=this;(0,E.Z)(this,e),this.node=t,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map((function(e){return a.getInput(e)})),null!=t.rawAttrs&&(this.attrs=Object.keys(t.rawAttrs).reduce((function(e,t){return e[t]=a.getAttr(t),e}),{}))}return(0,N.Z)(e,[{key:"getInput",value:function(e){return F(e,this.tensorMap,this.context)}},{key:"getAttr",value:function(e,t){var n=this.node.rawAttrs[e];if(null!=n.tensor)return F(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return fe(this.node.rawAttrs,e,t);if(null!=n.s)return le(this.node.rawAttrs,e,t);if(null!=n.b)return de(this.node.rawAttrs,e,t);if(null!=n.shape)return ye(this.node.rawAttrs,e,t);if(null!=n.type)return me(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return be(this.node.rawAttrs,e,t);if(null!=n.list.s)return xe(this.node.rawAttrs,e,t);if(null!=n.list.shape)return ke(this.node.rawAttrs,e,t);if(null!=n.list.b)return we(this.node.rawAttrs,e,t);if(null!=n.list.type)return ve(this.node.rawAttrs,e,t)}return t}}]),e}(),Ce=n(2681),_e=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(M("a",e,t,n),M("b",e,t,n))];case"AddN":return[r.addN(M("tensors",e,t,n))];case"FloorMod":case"Mod":return[r.mod(M("a",e,t,n),M("b",e,t,n))];case"Mul":return[r.mul(M("a",e,t,n),M("b",e,t,n))];case"RealDiv":case"Div":return[r.div(M("a",e,t,n),M("b",e,t,n))];case"DivNoNan":return[r.divNoNan(M("a",e,t,n),M("b",e,t,n))];case"FloorDiv":return[r.floorDiv(M("a",e,t,n),M("b",e,t,n))];case"Sub":return[r.sub(M("a",e,t,n),M("b",e,t,n))];case"Minimum":return[r.minimum(M("a",e,t,n),M("b",e,t,n))];case"Maximum":return[r.maximum(M("a",e,t,n),M("b",e,t,n))];case"Pow":return[r.pow(M("a",e,t,n),M("b",e,t,n))];case"SquaredDifference":return[r.squaredDifference(M("a",e,t,n),M("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Ie=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"Abs":case"ComplexAbs":return[r.abs(M("x",e,t,n))];case"Acos":return[r.acos(M("x",e,t,n))];case"Acosh":return[r.acosh(M("x",e,t,n))];case"Asin":return[r.asin(M("x",e,t,n))];case"Asinh":return[r.asinh(M("x",e,t,n))];case"Atan":return[r.atan(M("x",e,t,n))];case"Atan2":return[r.atan2(M("x",e,t,n),M("y",e,t,n))];case"Atanh":return[r.atanh(M("x",e,t,n))];case"Ceil":return[r.ceil(M("x",e,t,n))];case"Complex":return[r.complex(M("real",e,t,n),M("imag",e,t,n))];case"Cos":return[r.cos(M("x",e,t,n))];case"Cosh":return[r.cosh(M("x",e,t,n))];case"Elu":return[r.elu(M("x",e,t,n))];case"Erf":return[r.erf(M("x",e,t,n))];case"Exp":return[r.exp(M("x",e,t,n))];case"Expm1":return[r.expm1(M("x",e,t,n))];case"Floor":return[r.floor(M("x",e,t,n))];case"Log":return[r.log(M("x",e,t,n))];case"Log1p":return[r.log1p(M("x",e,t,n))];case"Imag":return[r.imag(M("x",e,t,n))];case"Neg":return[r.neg(M("x",e,t,n))];case"Reciprocal":return[r.reciprocal(M("x",e,t,n))];case"Real":return[r.real(M("x",e,t,n))];case"Relu":return[r.relu(M("x",e,t,n))];case"Round":return[r.round(M("x",e,t,n))];case"Selu":return[r.selu(M("x",e,t,n))];case"Sigmoid":return[r.sigmoid(M("x",e,t,n))];case"Sin":return[r.sin(M("x",e,t,n))];case"Sign":return[r.sign(M("x",e,t,n))];case"Sinh":return[r.sinh(M("x",e,t,n))];case"Softplus":return[r.softplus(M("x",e,t,n))];case"Sqrt":return[r.sqrt(M("x",e,t,n))];case"Square":return[r.square(M("x",e,t,n))];case"Tanh":return[r.tanh(M("x",e,t,n))];case"Tan":return[r.tan(M("x",e,t,n))];case"ClipByValue":return[r.clipByValue(M("x",e,t,n),M("clipValueMin",e,t,n),M("clipValueMax",e,t,n))];case"Relu6":return[r.relu6(M("x",e,t,n))];case"Rsqrt":return[r.rsqrt(F(e.inputNames[0],t,n))];case"Prod":return[r.prod(M("x",e,t,n),M("axes",e,t,n))];case"LeakyRelu":return[r.leakyRelu(M("x",e,t,n),M("alpha",e,t,n))];case"Prelu":return[r.prelu(M("x",e,t,n),M("alpha",e,t,n))];case"IsNan":return[r.isNaN(F(e.inputNames[0],t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function Te(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("number"!==typeof e&&"number"!==typeof t){S.util.assert(e.length===t.length,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}));for(var r=0;r<e.length;r++){var a=e[r],i=t[r];S.util.assert(a<0||i<0||a===i,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}}}function Ee(e){return"number"!==typeof e&&!e.some((function(e){return e<0}))}function Ne(e,t,n){var r=Oe(e,n),a=!Ee(r);if(a&&0===t.length)throw new Error("Tried to calculate elements of an empty list"+" with non-fully-defined elementShape: ".concat(r));if(a&&t.forEach((function(e){r=Oe(e.shape,r)})),!Ee(r))throw new Error("Non-fully-defined elementShape: ".concat(r));return r}function Oe(e,t){if("number"===typeof e)return t;if("number"===typeof t)return e;if(e.length!==t.length)throw new Error("Incompatible ranks during merge: ".concat(e," vs. ").concat(t));for(var n=[],r=0;r<e.length;++r){var a=e[r],i=t[r];if(a>=0&&i>=0&&a!==i)throw new Error("Incompatible shape during merge: ".concat(e," vs. ").concat(t));n[r]=a>=0?a:i}return n}var Ae=function(){function e(t,n,r,a,i,o,s){(0,E.Z)(this,e),this.name=t,this.dtype=n,this.maxSize=r,this.elementShape=a,this.identicalElementShapes=i,this.dynamicSize=o,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=(0,S.scalar)(0),(0,S.keep)(this.idTensor)}return(0,N.Z)(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"closed",get:function(){return this.closed_}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.tensor.id)||t.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"read",value:function(e){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||e>=this.size())throw new Error("Tried to read from index ".concat(e,", but array size is: ").concat(this.size()));var t=this.tensors[e];if(t.cleared)throw new Error("TensorArray ".concat(this.name,": Could not read index ").concat(e," twice because it was cleared after a previous read ")+"(perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}},{key:"readMany",value:function(e){var t=this;return e.map((function(e){return t.read(e)}))}},{key:"write",value:function(e,t){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index ".concat(e,", but array is not resizeable and size is: ").concat(this.maxSize));var n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,",\n          because the value dtype is ").concat(t.dtype,", but TensorArray dtype is ").concat(this.dtype,"."));if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),Te(this.elementShape,t.shape,"TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,".")),n.read)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been read."));if(n.written)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been written."));n.tensor=t,(0,S.keep)(t),n.written=!0,this.tensors[e]=n}},{key:"writeMany",value:function(e,t){var n=this;if(e.length!==t.length)throw new Error("TensorArray ".concat(this.name,": could not write multiple tensors,")+"because the index size: ".concat(e.length," is not the same as tensors size: ").concat(t.length,"."));e.forEach((function(e,r){return n.write(e,t[r])}))}},{key:"gather",value:function(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but gather requested dtype ").concat(t));if(e)e=e.slice(0,this.size());else{e=[];for(var n=0;n<this.size();n++)e.push(n)}if(0===e.length)return(0,S.tensor)([],[0].concat(this.elementShape));var r=this.readMany(e);return Te(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),(0,S.stack)(r,0)}},{key:"concat",value:function(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but concat requested dtype ").concat(e));if(0===this.size())return(0,S.tensor)([],[0].concat(this.elementShape));for(var t=[],n=0;n<this.size();n++)t.push(n);var r=this.readMany(t);return Te(this.elementShape,r[0].shape,"TensorArray shape mismatch: tensor array shape (".concat(this.elementShape,") vs first tensor shape (").concat(r[0].shape,")")),(0,S.concat)(r,0)}},{key:"scatter",value:function(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(e.length," vs. ").concat(t.shape[0]));var n=Math.max.apply(Math,(0,A.Z)(e));if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size (".concat(n,"  vs. ").concat(this.maxSize,")"));this.writeMany(e,(0,S.unstack)(t,0))}},{key:"split",value:function(e,t){var n=this;if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));var r=0,a=e.map((function(e){return r+=e}));if(r!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(t.shape));if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths (".concat(this.maxSize," vs. ").concat(e.length,"), ")+"and the TensorArray is not marked as dynamically resizeable");var i=0===r?0:t.size/r,o=[];(0,S.tidy)((function(){t=(0,S.reshape)(t,[1,r,i]);for(var s=0;s<e.length;++s){var u=[0,0===s?0:a[s-1],0],c=[1,e[s],i];o[s]=(0,S.reshape)((0,S.slice)(t,u,c),n.elementShape)}return o}));for(var s=[],u=0;u<e.length;u++)s[u]=u;this.writeMany(s,o)}}]),e}(),Re=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;(0,E.Z)(this,e),this.tensors=t,this.elementShape=n,this.elementDtype=r,null!=t&&t.forEach((function(e){if(r!==e.dtype)throw new Error("Invalid data types; op elements ".concat(r,", but list elements ").concat(e.dtype));Te(n,e.shape,"TensorList shape mismatch: "),(0,S.keep)(e)})),this.idTensor=(0,S.scalar)(0),this.maxNumElements=a,(0,S.keep)(this.idTensor)}return(0,N.Z)(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"copy",value:function(){return new e((0,A.Z)(this.tensors),this.elementShape,this.elementDtype)}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.id)||t.dispose()})),this.tensors.length=0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"stack",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(-1!==r&&this.tensors.length!==r)throw new Error("Operation expected a list with ".concat(r," elements but got a list with ").concat(this.tensors.length," elements."));Te(e,this.elementShape,"TensorList shape mismatch: ");var a=Ne(this.elementShape,this.tensors,e);return(0,S.tidy)((function(){var e=n.tensors.map((function(e){return(0,S.reshape)(e,a)}));return(0,S.stack)(e,0)}))}},{key:"popBack",value:function(e,t){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(0===this.size())throw new Error("Trying to pop from an empty list.");var n=Ne(this.elementShape,this.tensors,e),r=this.tensors.pop();return Te(r.shape,e,"TensorList shape mismatch: "),(0,S.reshape)(r,n)}},{key:"pushBack",value:function(e){if(e.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(this.elementDtype));if(Te(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");(0,S.keep)(e),this.tensors.push(e)}},{key:"resize",value:function(t){if(t<0)throw new Error("TensorListResize expects size to be non-negative. Got: ".concat(t));if(-1!==this.maxNumElements&&t>this.maxNumElements)throw new Error("TensorListResize input size ".concat(t," is greater maxNumElement ").concat(this.maxNumElements,"."));var n=new e([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=t;for(var r=0;r<Math.min(this.tensors.length,t);++r)n.tensors[r]=this.tensors[r];return n}},{key:"getItem",value:function(e,t,n){if(n!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(this.elementDtype));if(e<0||e>this.tensors.length)throw new Error("Trying to access element ".concat(e," in a list with ").concat(this.tensors.length," elements."));if(null==this.tensors[e])throw new Error("element at index ".concat(e," is null."));Te(this.tensors[e].shape,t,"TensorList shape mismatch: ");var r=Ne(this.elementShape,this.tensors,t);return(0,S.reshape)(this.tensors[e],r)}},{key:"setItem",value:function(e,t){if(t.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t.dtype,", but list elements ").concat(this.elementDtype));if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error("Trying to set element ".concat(e," in a list with max ").concat(this.maxNumElements," elements."));Te(this.elementShape,t.shape,"TensorList shape mismatch: "),(0,S.keep)(t),this.tensors[e]=t}},{key:"gather",value:function(e,t,n){var r=this;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));Te(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());var a=Ne(this.elementShape,this.tensors,n);return 0===e.length?(0,S.tensor)([],[0].concat(a)):(0,S.tidy)((function(){var t=e.map((function(e){return(0,S.reshape)(r.tensors[e],a)}));return(0,S.stack)(t,0)}))}},{key:"concat",value:function(e,t){var n=this;if(e&&e!==this.elementDtype)throw new Error("TensorList dtype is ".concat(this.elementDtype," but concat requested dtype ").concat(e));Te(this.elementShape,t,"TensorList shape mismatch: ");var r=Ne(this.elementShape,this.tensors,t);return 0===this.size()?(0,S.tensor)([],[0].concat(r)):(0,S.tidy)((function(){var e=n.tensors.map((function(e){return(0,S.reshape)(e,r)}));return(0,S.concat)(e,0)}))}}]),e}();function Pe(e,t,n){var r=e.dtype;if(e.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: ".concat(e.shape));if(e.dtype!==n)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(n));Te(e.shape.slice(1),t,"TensorList shape mismatch: ");var a=(0,S.unstack)(e);return new Re(a,t,r)}function De(e,t,n,r){return new Re([],e,t,r)}function Be(e,t,n,r){if(t.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(t.length," vs. ").concat(e.shape[0]));var a=Math.max.apply(Math,(0,A.Z)(t));if(null!=r&&-1!==r&&a>=r)throw new Error("Max index must be < array size (".concat(a,"  vs. ").concat(r,")"));var i=new Re([],n,e.dtype,r),o=(0,S.unstack)(e,0);return t.forEach((function(e,t){i.setItem(e,o[t])})),i}function Me(e,t,n){var r=0,a=t.map((function(e){return r+=e}));if(r!==e.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(e.shape));for(var i=Oe(e.shape.slice(1),n),o=0===r?0:e.size/r,s=(0,S.tidy)((function(){var n=[];e=(0,S.reshape)(e,[1,r,o]);for(var s=0;s<t.length;++s){var u=[0,0===s?0:a[s-1],0],c=[1,t[s],o];n[s]=(0,S.reshape)((0,S.slice)(e,u,c),i)}return e.dispose(),n})),u=new Re([],n,e.dtype,t.length),c=0;c<s.length;c++)u.setItem(c,s[c]);return u}var Fe=function(){var e=(0,T.Z)((0,I.Z)().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f,p,h,m,v,g,y,b,x,k,w,C,_,T,E,N,O,A,R,P,D,B,L,V,z,Z,j,W,G,H,q,X,K,Y,Q,$,J,ee,te,ne,re,ae,ie,oe,se,ue,ce,le,de,fe,pe,he,me,ve,ge,ye,be,xe,ke,we,Se,Ce,_e,Ie,Te,Ee,Ne,Oe,Re,Fe,Le,Ve,ze,Ze,Ue,je,We,Ge,He,qe,Xe,Ke,Ye,Qe,$e,Je,et,tt,nt,rt,at,it,ot,st,ut;return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="If"===e.t0||"StatelessIf"===e.t0?3:"While"===e.t0||"StatelessWhile"===e.t0?15:"LoopCond"===e.t0?19:"Switch"===e.t0?21:"Merge"===e.t0?32:"Enter"===e.t0?37:"Exit"===e.t0?41:"NextIteration"===e.t0?44:"TensorArrayV3"===e.t0?47:"TensorArrayWriteV3"===e.t0?57:"TensorArrayReadV3"===e.t0?63:"TensorArrayGatherV3"===e.t0?67:"TensorArrayScatterV3"===e.t0?72:"TensorArrayConcatV3"===e.t0?78:"TensorArraySplitV3"===e.t0?82:"TensorArraySizeV3"===e.t0?88:"TensorArrayCloseV3"===e.t0?91:"TensorListSetItem"===e.t0?95:"TensorListGetItem"===e.t0?101:"TensorListScatterV2"===e.t0||"TensorListScatter"===e.t0?107:"TensorListReserve"===e.t0||"EmptyTensorList"===e.t0?114:"TensorListGather"===e.t0?122:"TensorListStack"===e.t0?128:"TensorListFromTensor"===e.t0?134:"TensorListConcat"===e.t0||"TensorListConcatV2"===e.t0?140:"TensorListPushBack"===e.t0?145:"TensorListPopBack"===e.t0?150:"TensorListSplit"===e.t0?155:"TensorListLength"===e.t0?161:"TensorListResize"===e.t0?164:170;break;case 3:return a=M("thenBranch",t,n,r),i=M("elseBranch",t,n,r),o=M("cond",t,n,r),s=M("args",t,n,r),e.next=9,o.data();case 9:if(!e.sent[0]){e.next=14;break}return e.abrupt("return",r.functionMap[a].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap));case 14:return e.abrupt("return",r.functionMap[i].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap));case 15:return e.delegateYield((0,I.Z)().mark((function e(){var a,i,o,s,u,c,l,d;return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=M("body",t,n,r),i=M("cond",t,n,r),o=M("args",t,n,r),e.next=5,r.functionMap[i].executeFunctionAsync(o,r.tensorArrayMap,r.tensorListMap);case 5:return s=e.sent,u=o.map((function(e){return e.id})),e.next=9,s[0].data();case 9:c=e.sent,s.forEach((function(e){e.kept||-1!==u.indexOf(e.id)||e.dispose()})),l=o,d=(0,I.Z)().mark((function e(){var t,n,o;return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l,e.next=3,r.functionMap[a].executeFunctionAsync(l,r.tensorArrayMap,r.tensorListMap);case 3:return l=e.sent,n=l.map((function(e){return e.id})),t.forEach((function(e){e.kept||-1!==u.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()})),e.next=8,r.functionMap[i].executeFunctionAsync(l,r.tensorArrayMap,r.tensorListMap);case 8:return o=e.sent,e.next=11,o[0].data();case 11:c=e.sent,o.forEach((function(e){e.kept||-1!==u.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()}));case 13:case"end":return e.stop()}}),e)}));case 13:if(!c[0]){e.next=17;break}return e.delegateYield(d(),"t0",15);case 15:e.next=13;break;case 17:return e.abrupt("return",{v:l});case 18:case"end":return e.stop()}}),e)}))(),"t1",16);case 16:if("object"!==typeof(u=e.t1)){e.next=19;break}return e.abrupt("return",u.v);case 19:return c=M("pred",t,n,r),e.abrupt("return",[U(c)]);case 21:return l=M("pred",t,n,r),(d=M("data",t,n,r)).kept||(d=U(d)),e.next=26,l.data();case 26:if(!e.sent[0]){e.next=30;break}e.t2=[void 0,d],e.next=31;break;case 30:e.t2=[d,void 0];case 31:return e.abrupt("return",e.t2);case 32:if(f=t.inputNames.find((function(e){return void 0!==F(e,n,r)})),!f){e.next=36;break}return p=F(f,n,r),e.abrupt("return",[U(p)]);case 36:return e.abrupt("return",void 0);case 37:return h=M("frameName",t,n,r),m=M("tensor",t,n,r),r.enterFrame(h),e.abrupt("return",[U(m)]);case 41:return v=M("tensor",t,n,r),r.exitFrame(),e.abrupt("return",[U(v)]);case 44:return g=M("tensor",t,n,r),r.nextIteration(),e.abrupt("return",[U(g)]);case 47:return y=M("size",t,n,r),b=M("dtype",t,n,r),x=M("elementShape",t,n,r),k=M("dynamicSize",t,n,r),w=M("clearAfterRead",t,n,r),C=M("identicalElementShapes",t,n,r),_=M("name",t,n,r),T=new Ae(_,b,y,x,C,k,w),r.addTensorArray(T),e.abrupt("return",[T.idTensor,(0,S.scalar)(1)]);case 57:return E=M("tensorArrayId",t,n,r),N=M("index",t,n,r),O=M("tensor",t,n,r),(A=r.getTensorArray(E.id)).write(N,O),e.abrupt("return",[A.idTensor]);case 63:return R=M("tensorArrayId",t,n,r),P=M("index",t,n,r),D=r.getTensorArray(R.id),e.abrupt("return",[D.read(P)]);case 67:return B=M("tensorArrayId",t,n,r),L=M("indices",t,n,r),V=M("dtype",t,n,r),z=r.getTensorArray(B.id),e.abrupt("return",[z.gather(L,V)]);case 72:return Z=M("tensorArrayId",t,n,r),j=M("indices",t,n,r),W=M("tensor",t,n,r),(G=r.getTensorArray(Z.id)).scatter(j,W),e.abrupt("return",[G.idTensor]);case 78:return H=M("tensorArrayId",t,n,r),q=r.getTensorArray(H.id),X=M("dtype",t,n,r),e.abrupt("return",[q.concat(X)]);case 82:return K=M("tensorArrayId",t,n,r),Y=M("tensor",t,n,r),Q=M("lengths",t,n,r),($=r.getTensorArray(K.id)).split(Q,Y),e.abrupt("return",[$.idTensor]);case 88:return J=M("tensorArrayId",t,n,r),ee=r.getTensorArray(J.id),e.abrupt("return",[(0,S.scalar)(ee.size(),"int32")]);case 91:return te=M("tensorArrayId",t,n,r),(ne=r.getTensorArray(te.id)).clearAndClose(),e.abrupt("return",[ne.idTensor]);case 95:return re=M("tensorListId",t,n,r),ae=M("index",t,n,r),ie=M("tensor",t,n,r),(oe=r.getTensorList(re.id)).setItem(ae,ie),e.abrupt("return",[oe.idTensor]);case 101:return se=M("tensorListId",t,n,r),ue=M("index",t,n,r),ce=M("elementShape",t,n,r),le=M("elementDType",t,n,r),de=r.getTensorList(se.id),e.abrupt("return",[de.getItem(ue,ce,le)]);case 107:return fe=M("indices",t,n,r),pe=M("tensor",t,n,r),he=M("elementShape",t,n,r),me=M("numElements",t,n,r),ve=Be(pe,fe,he,me),r.addTensorList(ve),e.abrupt("return",[ve.idTensor]);case 114:return ge=M("elementShape",t,n,r),ye=M("elementDType",t,n,r),be="TensorListReserve"===t.op?"numElements":"maxNumElements",xe=M(be,t,n,r),ke="TensorListReserve"===t.op?-1:xe,we=De(ge,ye,0,ke),r.addTensorList(we),e.abrupt("return",[we.idTensor]);case 122:return Se=M("tensorListId",t,n,r),Ce=M("indices",t,n,r),_e=M("elementShape",t,n,r),Ie=M("elementDType",t,n,r),Te=r.getTensorList(Se.id),e.abrupt("return",[Te.gather(Ce,Ie,_e)]);case 128:return Ee=M("tensorListId",t,n,r),Ne=M("elementShape",t,n,r),Oe=M("elementDType",t,n,r),Re=M("numElements",t,n,r),Fe=r.getTensorList(Ee.id),e.abrupt("return",[Fe.stack(Ne,Oe,Re)]);case 134:return Le=M("tensor",t,n,r),Ve=M("elementShape",t,n,r),ze=M("elementDType",t,n,r),Ze=Pe(Le,Ve,ze),r.addTensorList(Ze),e.abrupt("return",[Ze.idTensor]);case 140:return Ue=M("tensorListId",t,n,r),je=r.getTensorList(Ue.id),We=M("dtype",t,n,r),Ge=M("elementShape",t,n,r),e.abrupt("return",[je.concat(We,Ge)]);case 145:return He=M("tensorListId",t,n,r),qe=M("tensor",t,n,r),(Xe=r.getTensorList(He.id)).pushBack(qe),e.abrupt("return",[Xe.idTensor]);case 150:return Ke=M("tensorListId",t,n,r),Ye=M("elementShape",t,n,r),Qe=M("elementDType",t,n,r),$e=r.getTensorList(Ke.id),e.abrupt("return",[$e.popBack(Ye,Qe)]);case 155:return Je=M("tensor",t,n,r),et=M("elementShape",t,n,r),tt=M("lengths",t,n,r),nt=Me(Je,tt,et),r.addTensorList(nt),e.abrupt("return",[nt.idTensor]);case 161:return rt=M("tensorListId",t,n,r),at=r.getTensorList(rt.id),e.abrupt("return",[(0,S.scalar)(at.size(),"int32")]);case 164:return it=M("tensorListId",t,n,r),ot=M("size",t,n,r),st=r.getTensorList(it.id),ut=st.resize(ot),r.addTensorList(ut),e.abrupt("return",[ut.idTensor]);case 170:throw TypeError("Node type ".concat(t.op," is not implemented"));case 171:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function Le(e,t,n){var r=M("fusedOps",e,t,n),a=(0,O.Z)(r,2),i=a[0],o=a[1],s="biasadd"===i,u=!s,c="prelu"===o,l="fusedbatchnorm"===i,d=M("numArgs",e,t,n);if(s){if(c&&2!==d)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!c&&s&&1!==d)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");var f=M("strides",e,t,n),p=Z(e,t,n),h=M("dataFormat",e,t,n).toUpperCase(),m=M("dilations",e,t,n),v=M("args",e,t,n),g=(0,O.Z)(v,2),y=g[0],b=g[1];return u&&(b=y,y=void 0),{stride:f,pad:p,dataFormat:h,dilations:m,biasArg:y,preluArg:b,activationFunc:o,leakyreluAlpha:M("leakyreluAlpha",e,t,n)}}var Ve=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"Conv1D":var a=M("stride",e,t,n),i=M("pad",e,t,n),o=M("dataFormat",e,t,n).toUpperCase(),s=M("dilation",e,t,n);return[r.conv1d(M("x",e,t,n),M("filter",e,t,n),a,i,o,s)];case"Conv2D":var u=M("strides",e,t,n),c=Z(e,t,n),l=M("dataFormat",e,t,n).toUpperCase(),d=M("dilations",e,t,n);return[r.conv2d(M("x",e,t,n),M("filter",e,t,n),[u[1],u[2]],c,l,[d[1],d[2]])];case"_FusedConv2D":var f=Le(e,t,n),p=f.stride,h=f.pad,m=f.dataFormat,v=f.dilations,g=f.biasArg,y=f.preluArg,b=f.activationFunc,x=f.leakyreluAlpha;return[r.fused.conv2d({x:M("x",e,t,n),filter:M("filter",e,t,n),strides:[p[1],p[2]],pad:h,dataFormat:m,dilations:[v[1],v[2]],bias:g,activation:b,preluActivationWeights:y,leakyreluAlpha:x})];case"FusedDepthwiseConv2dNative":var k=Le(e,t,n),S=k.stride,C=k.pad,_=k.dataFormat,I=k.dilations,T=k.biasArg,E=k.preluArg,N=k.activationFunc,O=k.leakyreluAlpha;return[r.fused.depthwiseConv2d({x:M("x",e,t,n),filter:M("filter",e,t,n),strides:[S[1],S[2]],pad:C,dataFormat:_,dilations:[I[1],I[2]],bias:T,activation:N,preluActivationWeights:E,leakyreluAlpha:O})];case"Conv2DBackpropInput":case"Conv2dTranspose":var A=M("outputShape",e,t,n),R=M("strides",e,t,n),P=Z(e,t,n);return[r.conv2dTranspose(M("x",e,t,n),M("filter",e,t,n),A,[R[1],R[2]],P)];case"DepthwiseConv2dNative":case"DepthwiseConv2d":var D=M("strides",e,t,n),B=Z(e,t,n),F=M("dilations",e,t,n),L=M("dataFormat",e,t,n).toUpperCase();return[r.depthwiseConv2d(M("input",e,t,n),M("filter",e,t,n),[D[1],D[2]],B,L,[F[1],F[2]])];case"Conv3D":var V=M("strides",e,t,n),z=M("pad",e,t,n),U=M("dataFormat",e,t,n).toUpperCase(),j=M("dilations",e,t,n);return[r.conv3d(M("x",e,t,n),M("filter",e,t,n),[V[1],V[2],V[3]],z,U,[j[1],j[2],j[3]])];case"AvgPool":var W=M("strides",e,t,n),G=M("pad",e,t,n),H=M("kernelSize",e,t,n);return[r.avgPool(M("x",e,t,n),[H[1],H[2]],[W[1],W[2]],G)];case"MaxPool":var q=M("strides",e,t,n),X=M("pad",e,t,n),K=M("kernelSize",e,t,n);return[r.maxPool(M("x",e,t,n),[K[1],K[2]],[q[1],q[2]],X)];case"MaxPoolWithArgmax":var Y=M("strides",e,t,n),Q=M("pad",e,t,n),$=M("kernelSize",e,t,n),J=M("includeBatchInIndex",e,t,n),ee=r.maxPoolWithArgmax(M("x",e,t,n),[$[1],$[2]],[Y[1],Y[2]],Q,J),te=ee.result,ne=ee.indexes;return[te,ne];case"AvgPool3D":var re=M("strides",e,t,n),ae=M("pad",e,t,n),ie=M("kernelSize",e,t,n);return[r.avgPool3d(M("x",e,t,n),[ie[1],ie[2],ie[3]],[re[1],re[2],re[3]],ae)];case"MaxPool3D":var oe=M("strides",e,t,n),se=M("pad",e,t,n),ue=M("kernelSize",e,t,n);return[r.maxPool3d(M("x",e,t,n),[ue[1],ue[2],ue[3]],[oe[1],oe[2],oe[3]],se)];case"Dilation2D":var ce=M("strides",e,t,n),le=M("pad",e,t,n),de=M("dilations",e,t,n),fe=ce[1],pe=ce[2],he=de[1],me=de[2];return[r.dilation2d(M("x",e,t,n),M("filter",e,t,n),[fe,pe],le,[he,me],"NHWC")];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},ze=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"Fill":var a=M("shape",e,t,n),i=M("dtype",e,t,n),o=M("value",e,t,n);return[r.fill(a,o,i)];case"LinSpace":var s=M("start",e,t,n),u=M("stop",e,t,n),c=M("num",e,t,n);return[r.linspace(s,u,c)];case"Multinomial":var l=M("logits",e,t,n),d=M("numSamples",e,t,n),f=M("seed",e,t,n);return[r.multinomial(l,d,f)];case"OneHot":var p=M("indices",e,t,n),h=M("depth",e,t,n),m=M("onValue",e,t,n),v=M("offValue",e,t,n);return[r.oneHot(p,h,m,v)];case"Ones":return[r.ones(M("shape",e,t,n),M("dtype",e,t,n))];case"OnesLike":return[r.onesLike(M("x",e,t,n))];case"RandomStandardNormal":return[r.randomStandardNormal(M("shape",e,t,n),M("dtype",e,t,n),M("seed",e,t,n))];case"RandomUniform":return[r.randomUniform(M("shape",e,t,n),M("minval",e,t,n),M("maxval",e,t,n),M("dtype",e,t,n))];case"Range":var g=M("start",e,t,n),y=M("stop",e,t,n),b=M("step",e,t,n);return[r.range(g,y,b,M("dtype",e,t,n))];case"TruncatedNormal":var x=M("shape",e,t,n),k=M("mean",e,t,n),S=M("stdDev",e,t,n),C=M("seed",e,t,n);return[r.truncatedNormal(x,k,S,M("dtype",e,t,n),C)];case"Zeros":return[r.zeros(M("shape",e,t,n),M("dtype",e,t,n))];case"ZerosLike":return[r.zerosLike(M("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function Ze(e,t,n){return{boxes:M("boxes",e,t,n),scores:M("scores",e,t,n),maxOutputSize:M("maxOutputSize",e,t,n),iouThreshold:M("iouThreshold",e,t,n),scoreThreshold:M("scoreThreshold",e,t,n),softNmsSigma:M("softNmsSigma",e,t,n)}}var Ue=function(){var e=(0,T.Z)((0,I.Z)().mark((function e(t,n,r,a){var i,o,s,u,c,l,d,f,p,h,m,v,g,y,b,x,k,S,C,_,T,E,N,O,A,R=arguments;return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=R.length>4&&void 0!==R[4]?R[4]:w,e.t0=t.op,e.next="NonMaxSuppressionV5"===e.t0?4:"NonMaxSuppressionV4"===e.t0?9:"NonMaxSuppressionV3"===e.t0||"NonMaxSuppressionV2"===e.t0?15:"Where"===e.t0?20:"ListDiff"===e.t0?27:28;break;case 4:return o=Ze(t,n,r),s=o.boxes,u=o.scores,c=o.maxOutputSize,l=o.iouThreshold,d=o.scoreThreshold,f=o.softNmsSigma,e.next=7,i.image.nonMaxSuppressionWithScoreAsync(s,u,c,l,d,f);case 7:return p=e.sent,e.abrupt("return",[p.selectedIndices,p.selectedScores]);case 9:return h=Ze(t,n,r),m=h.boxes,v=h.scores,g=h.maxOutputSize,y=h.iouThreshold,b=h.scoreThreshold,x=M("padToMaxOutputSize",t,n,r),e.next=13,i.image.nonMaxSuppressionPaddedAsync(m,v,g,y,b,x);case 13:return k=e.sent,e.abrupt("return",[k.selectedIndices,k.validOutputs]);case 15:return S=Ze(t,n,r),C=S.boxes,_=S.scores,T=S.maxOutputSize,E=S.iouThreshold,N=S.scoreThreshold,e.next=18,i.image.nonMaxSuppressionAsync(C,_,T,E,N);case 18:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 20:return O=i.cast(M("condition",t,n,r),"bool"),e.next=23,i.whereAsync(O);case 23:return e.t2=e.sent,A=[e.t2],O.dispose(),e.abrupt("return",A);case 27:return e.abrupt("return",i.setdiff1dAsync(M("x",t,n,r),M("y",t,n,r)));case 28:throw TypeError("Node type ".concat(t.op," is not implemented"));case 29:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),je=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"LowerBound":var a=M("sortedSequence",e,t,n),i=M("values",e,t,n);return[r.lowerBound(a,i)];case"TopKV2":var o=M("x",e,t,n),s=M("k",e,t,n),u=M("sorted",e,t,n),c=r.topk(o,s,u);return[c.values,c.indices];case"UpperBound":var l=M("sortedSequence",e,t,n),d=M("values",e,t,n);return[r.upperBound(l,d)];case"Unique":var f=M("x",e,t,n),p=r.unique(f);return[p.values,p.indices];case"UniqueV2":var h=M("x",e,t,n),m=M("axis",e,t,n),v=r.unique(h,m);return[v.values,v.indices];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},We=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":var a=M("default",e,t,n);return[F(e.name,t,n)||a];case"Placeholder":return[F(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":var i=M("x",e,t,n);return[U(i)];case"IdentityN":return M("x",e,t,n).map((function(e){return U(e)}));case"Snapshot":var o=M("x",e,t,n);return[U(o)];case"Shape":return[r.tensor1d(M("x",e,t,n).shape,"int32")];case"ShapeN":return M("x",e,t,n).map((function(e){return r.tensor1d(e.shape)}));case"Size":return[r.scalar(M("x",e,t,n).size,"int32")];case"Rank":return[r.scalar(M("x",e,t,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":var s=M("x",e,t,n),u=M("data",e,t,n),c=M("message",e,t,n),l=M("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(c);for(var d=0;d<u.length;d++)console.log(Array.prototype.slice.call(u[d].dataSync()).slice(0,l));return[s];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Ge=n(7067),He=function(){function e(t,n){(0,E.Z)(this,e),this.keyDType=t,this.valueDType=n,this.handle=(0,S.scalar)(0),this.tensorMap=new Map,(0,S.keep)(this.handle)}return(0,N.Z)(e,[{key:"id",get:function(){return this.handle.id}},{key:"clearAndClose",value:function(){this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),this.handle.dispose()}},{key:"size",value:function(){return this.tensorMap.size}},{key:"tensorSize",value:function(){return Ge.i(this.size(),"int32")}},{key:"import",value:function(){var e=(0,T.Z)((0,I.Z)().mark((function e(t,n){var r,a=this;return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),e.abrupt("return",(0,S.tidy)((function(){var e=(0,S.unstack)(n),t=r.length,i=e.length;S.util.assert(t===i,(function(){return"The number of elements doesn't match, keys has "+"".concat(t," elements, the values has ").concat(i," ")+"elements."}));for(var o=0;o<t;o++){var s=r[o],u=e[o];(0,S.keep)(u),a.tensorMap.set(s,u)}return a.handle})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"find",value:function(){var e=(0,T.Z)((0,I.Z)().mark((function e(t,n){var r,a=this;return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,e.abrupt("return",(0,S.tidy)((function(){for(var e=[],t=0;t<r.length;t++){var i=r[t],o=a.findWithDefault(i,n);e.push(o)}return(0,S.stack)(e)})));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"findWithDefault",value:function(e,t){var n=this.tensorMap.get(e);return null!=n?n:t}},{key:"checkKeyAndValueTensor",value:function(e,t){if(e.dtype!==this.keyDType)throw new Error("Expect key dtype ".concat(this.keyDType,", but got ")+"".concat(e.dtype));if(t.dtype!==this.valueDType)throw new Error("Expect value dtype ".concat(this.valueDType,", but got ")+"".concat(t.dtype))}}]),e}(),qe=function(){var e=(0,T.Z)((0,I.Z)().mark((function e(t,n,r,a){var i,o,s,u,c,l,d,f,p,h,m,v,g;return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="HashTable"===e.t0||"HashTableV2"===e.t0?3:"LookupTableImport"===e.t0||"LookupTableImportV2"===e.t0?8:"LookupTableFind"===e.t0||"LookupTableFindV2"===e.t0?16:"LookupTableSize"===e.t0||"LookupTableSizeV2"===e.t0?24:27;break;case 3:return i=M("keyDType",t,n,r),o=M("valueDType",t,n,r),s=new He(i,o),a.addHashTable(t.name,s),e.abrupt("return",[s.handle]);case 8:return u=M("tableHandle",t,n,r,a),c=M("keys",t,n,r),l=M("values",t,n,r),d=a.getHashTableById(u.id),e.next=14,d.import(c,l);case 14:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 16:return f=M("tableHandle",t,n,r,a),p=M("keys",t,n,r),h=M("defaultValue",t,n,r),m=a.getHashTableById(f.id),e.next=22,m.find(p,h);case 22:return e.t2=e.sent,e.abrupt("return",[e.t2]);case 24:return v=M("tableHandle",t,n,r,a),g=a.getHashTableById(v.id),e.abrupt("return",[g.tensorSize()]);case 27:throw TypeError("Node type ".concat(t.op," is not implemented"));case 28:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),Xe=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"ResizeBilinear":var a=M("images",e,t,n),i=M("size",e,t,n),o=M("alignCorners",e,t,n),s=M("halfPixelCenters",e,t,n);return[r.image.resizeBilinear(a,[i[0],i[1]],o,s)];case"ResizeNearestNeighbor":var u=M("images",e,t,n),c=M("size",e,t,n),l=M("alignCorners",e,t,n),d=M("halfPixelCenters",e,t,n);return[r.image.resizeNearestNeighbor(u,[c[0],c[1]],l,d)];case"CropAndResize":var f=M("image",e,t,n),p=M("boxes",e,t,n),h=M("boxInd",e,t,n),m=M("cropSize",e,t,n),v=M("method",e,t,n),g=M("extrapolationValue",e,t,n);return[r.image.cropAndResize(f,p,h,m,v,g)];case"ImageProjectiveTransformV3":var y=M("images",e,t,n),b=M("transforms",e,t,n),x=M("outputShape",e,t,n),k=M("fillValue",e,t,n),S=M("interpolation",e,t,n),C=M("fillMode",e,t,n);return[r.image.transform(y,b,S.toLowerCase(),C.toLowerCase(),k,x)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Ke=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"Equal":return[r.equal(M("a",e,t,n),M("b",e,t,n))];case"NotEqual":return[r.notEqual(M("a",e,t,n),M("b",e,t,n))];case"Greater":return[r.greater(M("a",e,t,n),M("b",e,t,n))];case"GreaterEqual":return[r.greaterEqual(M("a",e,t,n),M("b",e,t,n))];case"Less":return[r.less(M("a",e,t,n),M("b",e,t,n))];case"LessEqual":return[r.lessEqual(M("a",e,t,n),M("b",e,t,n))];case"LogicalAnd":return[r.logicalAnd(M("a",e,t,n),M("b",e,t,n))];case"LogicalNot":return[r.logicalNot(M("a",e,t,n))];case"LogicalOr":return[r.logicalOr(M("a",e,t,n),M("b",e,t,n))];case"Select":case"SelectV2":return[r.where(M("condition",e,t,n),M("a",e,t,n),M("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Ye=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(M("a",e,t,n),M("b",e,t,n),M("transposeA",e,t,n),M("transposeB",e,t,n))];case"Einsum":return[r.einsum.apply(r,[M("equation",e,t,n)].concat((0,A.Z)(M("tensors",e,t,n))))];case"Transpose":return[r.transpose(M("x",e,t,n),M("perm",e,t,n))];case"_FusedMatMul":var a=M("fusedOps",e,t,n),i=(0,O.Z)(a,2),o=i[0],s=i[1],u="biasadd"===o,c="prelu"===s,l=M("numArgs",e,t,n),d=M("leakyreluAlpha",e,t,n);if(u){if(c&&2!==l)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!c&&1!==l)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}var f=M("args",e,t,n),p=(0,O.Z)(f,2),h=p[0],m=p[1];return[r.fused.matMul({a:M("a",e,t,n),b:M("b",e,t,n),transposeA:M("transposeA",e,t,n),transposeB:M("transposeB",e,t,n),bias:h,activation:s,preluActivationWeights:m,leakyreluAlpha:d})];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Qe=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"EuclideanNorm":return[r.euclideanNorm(M("x",e,t,n),M("axis",e,t,n),M("keepDims",e,t,n))];case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[r.batchNorm(M("x",e,t,n),M("mean",e,t,n),M("variance",e,t,n),M("offset",e,t,n),M("scale",e,t,n),M("epsilon",e,t,n))];case"LRN":return[r.localResponseNormalization(M("x",e,t,n),M("radius",e,t,n),M("bias",e,t,n),M("alpha",e,t,n),M("beta",e,t,n))];case"Softmax":return[r.softmax(M("x",e,t,n))];case"LogSoftmax":return[r.logSoftmax(M("x",e,t,n))];case"SparseToDense":return[r.sparseToDense(M("sparseIndices",e,t,n),M("outputShape",e,t,n),M("sparseValues",e,t,n),M("defaultValue",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},$e=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"Max":var a=M("axis",e,t,n),i=M("keepDims",e,t,n);return[r.max(M("x",e,t,n),a,i)];case"Mean":var o=M("axis",e,t,n),s=M("keepDims",e,t,n);return[r.mean(M("x",e,t,n),o,s)];case"Min":var u=M("axis",e,t,n),c=M("keepDims",e,t,n);return[r.min(M("x",e,t,n),u,c)];case"Sum":var l=M("axis",e,t,n),d=M("keepDims",e,t,n);return[r.sum(M("x",e,t,n),l,d)];case"All":var f=M("axis",e,t,n),p=M("keepDims",e,t,n);return[r.all(M("x",e,t,n),f,p)];case"Any":var h=M("axis",e,t,n),m=M("keepDims",e,t,n);return[r.any(M("x",e,t,n),h,m)];case"ArgMax":var v=M("axis",e,t,n);return[r.argMax(M("x",e,t,n),v)];case"ArgMin":var g=M("axis",e,t,n);return[r.argMin(M("x",e,t,n),g)];case"Prod":var y=M("axis",e,t,n),b=M("keepDims",e,t,n);return[r.prod(M("x",e,t,n),y,b)];case"Cumprod":var x=M("axis",e,t,n),k=M("exclusive",e,t,n),S=M("reverse",e,t,n);return[r.cumprod(M("x",e,t,n),x,k,S)];case"Cumsum":var C=M("axis",e,t,n),_=M("exclusive",e,t,n),I=M("reverse",e,t,n);return[r.cumsum(M("x",e,t,n),C,_,I)];case"Bincount":var T=M("x",e,t,n),E=M("weights",e,t,n),N=M("size",e,t,n);return[r.bincount(T,E,N)];case"DenseBincount":var O=M("x",e,t,n),A=M("weights",e,t,n),R=M("size",e,t,n),P=M("binaryOutput",e,t,n);return[r.denseBincount(O,A,R,P)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Je=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"ConcatV2":case"Concat":var a=M("n",e,t,n),i=M("axis",e,t,n),o=M("tensors",e,t,n);return o=o.slice(0,a),[r.concat(o,i)];case"Gather":var s=M("x",e,t,n),u=M("indices",e,t,n);return[r.gather(s,r.cast(u,"int32"),0)];case"GatherV2":var c=M("axis",e,t,n),l=M("batchDims",e,t,n),d=M("x",e,t,n),f=M("indices",e,t,n);return[r.gather(d,r.cast(f,"int32"),c,l)];case"Reverse":for(var p=M("dims",e,t,n),h=[],m=0;m<p.length;m++)p[m]&&h.push(m);var v=M("x",e,t,n);return[r.reverse(v,h)];case"ReverseV2":var g=M("axis",e,t,n),y=M("x",e,t,n);return[r.reverse(y,g)];case"Slice":var b=M("begin",e,t,n),x=M("size",e,t,n);return[r.slice(M("x",e,t,n),b,x)];case"StridedSlice":var k=M("begin",e,t,n),C=M("end",e,t,n),_=M("strides",e,t,n),I=M("beginMask",e,t,n),T=M("endMask",e,t,n),E=M("ellipsisMask",e,t,n),N=M("newAxisMask",e,t,n),O=M("shrinkAxisMask",e,t,n),A=M("x",e,t,n);return[r.stridedSlice(A,k,C,_,I,T,E,N,O)];case"Pack":return(0,S.tidy)((function(){var a=M("axis",e,t,n),i=M("tensors",e,t,n),o=i[0].shape,s=r.squeeze(i[0]).shape,u=i.map((function(e){var t=S.util.arraysEqual(e.shape,o);if(!t&&!S.util.arraysEqual(r.squeeze(e).shape,s))throw new Error("the input tensors shape does not match");return t?e:r.reshape(e,o)}));return[r.stack(u,a)]}));case"Unpack":var R=M("axis",e,t,n),P=M("tensor",e,t,n);return r.unstack(P,R);case"Tile":var D=M("reps",e,t,n);return[r.tile(M("x",e,t,n),D)];case"Split":case"SplitV":var B=M("axis",e,t,n),F=M("numOrSizeSplits",e,t,n),L=M("x",e,t,n);return r.split(L,F,B);case"ScatterNd":var V=M("indices",e,t,n),z=M("values",e,t,n),Z=M("shape",e,t,n);return[r.scatterND(V,z,Z)];case"GatherNd":var U=M("x",e,t,n),j=M("indices",e,t,n);return[r.gatherND(U,j)];case"SparseToDense":var W=M("sparseIndices",e,t,n),G=M("outputShape",e,t,n),H=M("sparseValues",e,t,n),q=M("defaultValue",e,t,n);return[r.sparseToDense(W,H,G,H.dtype===q.dtype?q:r.cast(q,H.dtype))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},et=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"SparseFillEmptyRows":var a=r.sparse.sparseFillEmptyRows(M("indices",e,t,n),M("values",e,t,n),M("denseShape",e,t,n),M("defaultValue",e,t,n)),i=a.outputIndices,o=a.outputValues,s=a.emptyRowIndicator,u=a.reverseIndexMap;return[i,o,s,u];case"SparseReshape":var c=r.sparse.sparseReshape(M("inputIndices",e,t,n),M("inputShape",e,t,n),M("newShape",e,t,n)),l=c.outputIndices,d=c.outputShape;return[l,d];case"SparseSegmentMean":var f=r.sparse.sparseSegmentMean(M("data",e,t,n),M("indices",e,t,n),M("segmentIds",e,t,n));return[f];case"SparseSegmentSum":var p=r.sparse.sparseSegmentSum(M("data",e,t,n),M("indices",e,t,n),M("segmentIds",e,t,n));return[p];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},tt=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"FFT":return[r.fft(M("x",e,t,n))];case"IFFT":return[r.ifft(M("x",e,t,n))];case"RFFT":return[r.rfft(M("x",e,t,n))];case"IRFFT":return[r.irfft(M("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},nt=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"StringNGrams":var a=r.string.stringNGrams(M("data",e,t,n),M("dataSplits",e,t,n),M("separator",e,t,n),M("nGramWidths",e,t,n),M("leftPad",e,t,n),M("rightPad",e,t,n),M("padWidth",e,t,n),M("preserveShortSequences",e,t,n)),i=a.nGrams,o=a.nGramsSplits;return[i,o];case"StringSplit":var s=r.string.stringSplit(M("input",e,t,n),M("delimiter",e,t,n),M("skipEmpty",e,t,n)),u=s.indices,c=s.values,l=s.shape;return[u,c,l];case"StringToHashBucketFast":var d=r.string.stringToHashBucketFast(M("input",e,t,n),M("numBuckets",e,t,n));return[d];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},rt=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"Cast":return[r.cast(M("x",e,t,n),M("dtype",e,t,n))];case"ExpandDims":var a=M("axis",e,t,n);return[r.expandDims(M("x",e,t,n),a)];case"Squeeze":var i=M("axis",e,t,n);return[r.squeeze(M("x",e,t,n),i)];case"Reshape":return[r.reshape(M("x",e,t,n),M("shape",e,t,n))];case"MirrorPad":return[r.mirrorPad(M("x",e,t,n),M("padding",e,t,n),M("mode",e,t,n))];case"PadV2":case"Pad":return[r.pad(M("x",e,t,n),M("padding",e,t,n),M("constantValue",e,t,n))];case"SpaceToBatchND":var o=M("blockShape",e,t,n),s=M("paddings",e,t,n);return[r.spaceToBatchND(M("x",e,t,n),o,s)];case"BatchToSpaceND":var u=M("blockShape",e,t,n),c=M("crops",e,t,n);return[r.batchToSpaceND(M("x",e,t,n),u,c)];case"DepthToSpace":var l=M("blockSize",e,t,n),d=M("dataFormat",e,t,n).toUpperCase();return[r.depthToSpace(M("x",e,t,n),l,d)];case"BroadcastTo":return[r.broadcastTo(M("x",e,t,n),M("shape",e,t,n))];case"BroadcastArgs":return[r.broadcastArgs(M("s0",e,t,n),M("s1",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function at(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:S.tidy,i=function(e,t,n){switch(e.category){case"arithmetic":return a((function(){return _e(e,t,n)}));case"basic_math":return a((function(){return Ie(e,t,n)}));case"control":return Fe(e,t,n);case"convolution":return a((function(){return Ve(e,t,n)}));case"creation":return a((function(){return ze(e,t,n)}));case"dynamic":return Ue(e,t,n);case"evaluation":return a((function(){return je(e,t,n)}));case"image":return a((function(){return Xe(e,t,n)}));case"graph":return a((function(){return We(e,t,n)}));case"logical":return a((function(){return Ke(e,t,n)}));case"matrices":return a((function(){return Ye(e,t,n)}));case"normalization":return a((function(){return Qe(e,t,n)}));case"reduction":return a((function(){return $e(e,t,n)}));case"slice_join":return a((function(){return Je(e,t,n)}));case"sparse":return a((function(){return et(e,t,n)}));case"spectral":return a((function(){return tt(e,t,n)}));case"string":return a((function(){return nt(e,t,n)}));case"transformation":return a((function(){return rt(e,t,n)}));case"hash_table":return qe(e,t,n,r);case"custom":var i=D(e.op);if(i&&i.customExecutor)return i.customExecutor(new Se(e,t,n));throw TypeError("Custom op ".concat(e.op," is not registered."));default:throw TypeError("Unknown op '".concat(e.op,"'. File an issue at ")+"https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}}(e,t,n);return S.util.isPromise(i)?i.then((function(e){return[].concat(e)})):[].concat(i)}var it=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,E.Z)(this,e),this.weightMap=t,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return(0,N.Z)(e,[{key:"newFrame",value:function(e,t){return{id:e,frameName:t,iterationId:0}}},{key:"currentContext",get:function(){return this.contexts},set:function(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}},{key:"currentContextId",get:function(){return this._currentContextIds[0]}},{key:"currentContextIds",get:function(){return this._currentContextIds}},{key:"generateCurrentContextIds",value:function(){for(var e=[],t=0;t<this.contexts.length-1;t++){var n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}},{key:"contextIdforContexts",value:function(e){return e?e.map((function(e){return 0===e.id&&0===e.iterationId?"":"".concat(e.frameName,"-").concat(e.iterationId)})).join("/"):""}},{key:"enterFrame",value:function(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}},{key:"exitFrame",value:function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}},{key:"nextIteration",value:function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}},{key:"getWeight",value:function(e){return this.weightMap[e]}},{key:"addTensorArray",value:function(e){this.tensorArrayMap[e.id]=e}},{key:"getTensorArray",value:function(e){return this.tensorArrayMap[e]}},{key:"addTensorList",value:function(e){this.tensorListMap[e.id]=e}},{key:"getTensorList",value:function(e){return this.tensorListMap[e]}},{key:"dispose",value:function(e){for(var t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(var n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}]),e}();function ot(e,t,n,r){var a=new Set,i=[],o=null,s=null,u=new Set,c=Object.keys(e).map((function(e){return z(e)[0]})),l=[];null!=r&&(l=r.map((function(e){return z(e.name)[0]})));for(var d=(0,A.Z)(t);d.length>0;){var f=d.pop();(lt(f)||dt(f)||ft(f))&&null==o&&(s=(o=f).children.map((function(e){return e.name})).filter((function(e){return a.has(e)}))),a.add(f.name),null==n[f.name]&&(-1===c.indexOf(f.name)&&-1===l.indexOf(f.name)&&(0!==f.inputs.length?f.inputs.forEach((function(e){u.has(e.name)||(u.add(e.name),d.push(e))})):i.push(f.name)))}return{inputs:e,outputs:t,usedNodes:a,missingInputs:i,dynamicNode:o,syncInputs:s}}var st=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],ut=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],ct=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function lt(e){return st.indexOf(e.op)>=0}function dt(e){return ut.indexOf(e.op)>=0}function ft(e){return ct.indexOf(e.op)>=0}var pt=function(){function e(t,n){var r=this;(0,E.Z)(this,e),this.graph=t,this.parent=n,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this.intermediateTensors={},this.keepTensorForDebug=!1,this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,null!=t.functions&&Object.keys(t.functions).forEach((function(n){r._functionExecutorMap[n]=new e(t.functions[n],r)}))}return(0,N.Z)(e,[{key:"weightIds",get:function(){return this.parent?this.parent.weightIds:this._weightIds}},{key:"functionExecutorMap",get:function(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}},{key:"weightMap",get:function(){return this.parent?this.parent.weightMap:this._weightMap},set:function(e){var t,n=Object.keys(e).map((function(t){return e[t].map((function(e){return e.id}))}));this._weightIds=(t=[]).concat.apply(t,(0,A.Z)(n)),this._weightMap=e}},{key:"resourceManager",set:function(e){this._resourceManager=e}},{key:"inputs",get:function(){return this._inputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"outputs",get:function(){return this._outputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"inputNodes",get:function(){return this._inputs.map((function(e){return e.signatureKey||e.name}))}},{key:"outputNodes",get:function(){return this._outputs.map((function(e){var t=e.signatureKey||e.name;return e.defaultOutput?"".concat(t,":").concat(e.defaultOutput):t}))}},{key:"functions",get:function(){var e=this;return Object.keys(this._functions).reduce((function(t,n){return t[n]=e._functions[n].signature,t}),{})}},{key:"getCompilationKey",value:function(e,t){var n=e.map((function(e){return e.name})).sort(),r=t.map((function(e){return e.name})).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)}},{key:"compile",value:function(e,t){var n=ot(e,t,this.weightMap,this._initNodes),r=n.missingInputs,a=n.dynamicNode,i=n.syncInputs;if(null!=a)throw new Error("This execution contains the node '".concat(a.name,"', which has ")+"the dynamic op '".concat(a.op,"'. Please use ")+"model.executeAsync() instead. Alternatively, to avoid the "+"dynamic ops, specify the inputs [".concat(i,"]"));if(r.length>0){var o=t.map((function(e){return e.name})),s=Object.keys(e);throw new Error("Cannot compute the outputs [".concat(o,"] from the provided inputs ")+"[".concat(s,"]. Missing the following inputs: [").concat(r,"]"))}return function(e,t,n){var r=n.usedNodes,a=n.inputs,i=[],o=Object.keys(a).map((function(e){return z(e)[0]})).map((function(t){return e.nodes[t]})),s=e.initNodes;o.forEach((function(e){r.has(e.name)&&i.push(e)})),e.weights.forEach((function(e){r.has(e.name)&&i.push(e)})),null!=s&&s.forEach((function(e){r.has(e.name)&&i.push(e)}));for(var u=new Set,c=[];i.length>0;){var l=i.pop();u.add(l.name),t[l.name]||c.push(l),l.children.forEach((function(e){!u.has(e.name)&&r.has(e.name)&&e.inputs.every((function(e){return u.has(e.name)}))&&i.push(e)}))}return c}(this.graph,this.weightMap,n)}},{key:"execute",value:function(e,t){var n=this;e=this.mapInputs(e);var r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);var a=r.map((function(e){return n.graph.nodes[z(e)[0]]})),i=t.map((function(e){return z(e)[0]})),o=i.map((function(e){return n.graph.nodes[e]}));this.resetIntermediateTensors(),0===o.length&&(o=this._outputs);var s=this.getCompilationKey(a,o),u=this.compiledMap.get(s);null==u&&(u=this.compile(e,o),this.compiledMap.set(s,u));var c={},l={};return(0,S.tidy)((function(){var r=new it(n.weightMap,c,l,n.functionExecutorMap),a=Object.assign({},n.weightMap);Object.keys(e).forEach((function(t){var n=z(t),r=(0,O.Z)(n,2),i=r[0],o=[];o[r[1]]=e[t],a[i]=o}));for(var o=n.getFrozenTensorIds(a),s={},d=0;d<u.length;d++){var f=u[d];if(!a[f.name]){var p=at(f,a,r,n._resourceManager);if(S.util.isPromise(p))throw new Error("The execution of the op '".concat(f.op,"' returned a promise. ")+"Please use model.executeAsync() instead.");a[f.name]=p,n.checkTensorForDisposal(f.name,f,a,r,o,i,s)}}return null==n.parent&&r.dispose(o),t.map((function(e){return F(e,a,r)}))}))}},{key:"getFrozenTensorIds",value:function(e){var t=[].concat.apply([],Object.keys(e).map((function(t){return e[t]})).map((function(e){return e.map((function(e){return e.id}))})));return new Set(t)}},{key:"checkTensorForDisposal",value:function(e,t,n,r,a,i,o){var s=this;"control"!==t.category&&-1===i.indexOf(e)&&(n[e].forEach((function(e){null!=e&&(o[e.id]=(o[e.id]||0)+t.children.length)})),t.inputs.forEach((function(e){if("control"!==e.category){var i=function(e,t,n){return t[V(e,n.currentContextId)]}(e.name,n,r);null!=i&&i.forEach((function(e){if(e&&!e.kept&&!a.has(e.id)){var n=o[e.id];if(1===n){if(s.keepTensorForDebug){var i=L(t.name,r),u=(0,O.Z)(i,2),c=u[0],l=u[1];s.intermediateTensors[c]||(s.intermediateTensors[c]=[]),s.intermediateTensors[c][l]=e}else e.dispose();delete o[e.id]}else null!=n&&o[e.id]--}}))}})))}},{key:"executeAsync",value:function(){var e=(0,T.Z)((0,I.Z)().mark((function e(t,n){return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._executeAsync(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"disposeIntermediateTensors",value:function(){var e=this;this.intermediateTensors&&(Object.keys(this.intermediateTensors).forEach((function(t){return e.intermediateTensors[t].forEach((function(e){return e.dispose()}))})),this.disposeTensorsMap())}},{key:"disposeTensorsMap",value:function(){var e=this;this.tensorsMap&&Object.keys(this.tensorsMap).forEach((function(t){e.tensorsMap[t].forEach((function(t){!t||t.kept||t.isDisposed||e.keepIds.has(t.id)||t.dispose()}))}))}},{key:"getIntermediateTensors",value:function(){return this.tensorsMap}},{key:"resetIntermediateTensors",value:function(){for(var e in this.intermediateTensors)this.intermediateTensors[e].forEach((function(e){return e.dispose()})),delete this.intermediateTensors[e]}},{key:"_executeAsync",value:function(){var e=(0,T.Z)((0,I.Z)().mark((function e(t,n){var r,a,i,o,s,u,c,l=this,d=arguments;return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=d.length>2&&void 0!==d[2]&&d[2],a=d.length>3&&void 0!==d[3]?d[3]:{},i=d.length>4&&void 0!==d[4]?d[4]:{},r||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepTensorForDebug=(0,S.env)().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(f){console.warn(f.message)}return this.resetIntermediateTensors(),o=new it(this.weightMap,a,i,this.functionExecutorMap),e.next=9,this.executeWithControlFlow(t,o,n,r);case 9:return this.tensorsMap=e.sent,s=n.map((function(e){return F(e,l.tensorsMap,o)})),u=s.map((function(e){return e.id})),c=Object.keys(t).map((function(e){return t[e].id})),this.keepIds=new Set([].concat((0,A.Z)(u),(0,A.Z)(c),(0,A.Z)(this.weightIds))),this.keepTensorForDebug||this.disposeTensorsMap(),null==this.parent&&o.dispose(this.keepIds),e.abrupt("return",s);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"executeFunctionAsync",value:function(){var e=(0,T.Z)((0,I.Z)().mark((function e(t,n,r){var a,i=this;return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.reduce((function(e,t,n){return e[i.inputs[n].name]=t,e}),{}),e.abrupt("return",this._executeAsync(a,this.outputNodes,!0,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"executeWithControlFlow",value:function(){var e=(0,T.Z)((0,I.Z)().mark((function e(t,n,r,a){var i,o,s,u,c,l,d,f,p,h,m,v,g,y,b,x,k,w=this;return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Object.keys(t),o=i.map((function(e){return w.graph.nodes[z(e)[0]]})),s=r.map((function(e){return z(e)[0]})),0===(u=s.map((function(e){return w.graph.nodes[e]}))).length&&(u=this._outputs),c=ot(t,u,this.weightMap,this._initNodes),l=c.usedNodes,d=c.missingInputs,f=c.dynamicNode,p=c.syncInputs,h=[].concat((0,A.Z)(o),(0,A.Z)(this.graph.weights),(0,A.Z)(this._initNodes||[])).map((function(e){return{node:e,contexts:n.currentContext}})),m=Object.assign({},this.weightMap),Object.keys(t).forEach((function(e){var n=z(e),r=(0,O.Z)(n,2),a=r[0],i=[];i[r[1]]=t[e],m[a]=i})),v={},g=this.getFrozenTensorIds(m),y={};case 12:if(!(h.length>0)){e.next=18;break}return b=this.processStack(o,h,n,m,y,g,s,v,l),e.next=16,Promise.all(b);case 16:e.next=12;break;case 18:if(null!=f||a||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead."),!((x=u.filter((function(e){return!lt(e)&&!F(e.name,m,n)})).map((function(e){return e.name}))).length>0)){e.next=24;break}throw k="",null!=f&&(k="Alternatively, to avoid the dynamic ops, use model.execute() "+"and specify the inputs [".concat(p,"]")),new Error("Cannot compute the outputs [".concat(x,"] from the provided ")+"inputs [".concat(i,"]. Consider providing the following inputs: ")+"[".concat(d,"]. ").concat(k));case 24:return e.abrupt("return",m);case 25:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"processStack",value:function(e,t,n,r,a,i,o,s,u){for(var c=this,l=[],d=function(){var e=t.pop();n.currentContext=e.contexts;var d="";if("Enter"===e.node.op&&M("isConstant",e.node,r,n)){var f=L(e.node.name,n),p=(0,O.Z)(f,1);d=p[0]}if(null==r[e.node.name]){var h=at(e.node,r,n,c._resourceManager);if(!d){var m=L(e.node.name,n),v=(0,O.Z)(m,1);d=v[0]}var g=n.currentContext;S.util.isPromise(h)?l.push(h.then((function(l){return r[d]=l,n.currentContext=g,c.checkTensorForDisposal(d,e.node,r,n,i,o,s),c.processChildNodes(e.node,t,n,r,a,u),l}))):(r[d]=h,c.checkTensorForDisposal(d,e.node,r,n,i,o,s),c.processChildNodes(e.node,t,n,r,a,u))}else c.processChildNodes(e.node,t,n,r,a,u)};t.length>0;)d();return l}},{key:"processChildNodes",value:function(e,t,n,r,a,i){e.children.forEach((function(e){var o=L(e.name,n),s=(0,O.Z)(o,1)[0];!a[s]&&i.has(e.name)&&("Merge"===e.op?e.inputNames.some((function(e){return!!F(e,r,n)}))&&(a[s]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every((function(e){return!!F(e,r,n)}))&&(a[s]=!0,t.push({contexts:n.currentContext,node:e})))}))}},{key:"dispose",value:function(){var e=this;Object.keys(this.weightMap).forEach((function(t){return e.weightMap[t].forEach((function(e){return e.dispose()}))}))}},{key:"checkInputShapeAndType",value:function(e){var t=this;Object.keys(e).forEach((function(n){var r=e[n],a=z(n),i=(0,O.Z)(a,1)[0],o=t.graph.nodes[i];if(o.attrParams.shape&&o.attrParams.shape.value){var s=o.attrParams.shape.value,u=s.length===r.shape.length&&r.shape.every((function(e,t){return-1===s[t]||s[t]===e}));S.util.assert(u,(function(){return"The shape of dict['".concat(o.name,"'] provided in ")+"model.execute(dict) must be [".concat(s,"], but was ")+"[".concat(r.shape,"]")}))}o.attrParams.dtype&&o.attrParams.dtype.value&&S.util.assert(r.dtype===o.attrParams.dtype.value,(function(){return"The dtype of dict['".concat(o.name,"'] provided in ")+"model.execute(dict) must be "+"".concat(o.attrParams.dtype.value,", but was ").concat(r.dtype)}))}))}},{key:"mapInputs",value:function(e){var t={};for(var n in e){if(null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[n])t[this._signature.inputs[n].name]=e[n];else t[n]=e[n]}return t}},{key:"checkInputs",value:function(e){var t=this,n=Object.keys(e).filter((function(e){var n=z(e),r=(0,O.Z)(n,1)[0];return null==t.graph.nodes[r]}));if(n.length>0)throw new Error("The dict provided in model.execute(dict) has "+"keys: [".concat(n,"] that are not part of graph"))}},{key:"mapOutputs",value:function(e){var t=this;return e.map((function(e){return null!=t._signature&&null!=t._signature.outputs&&null!=t._signature.outputs[e]?t._signature.outputs[e].name:e}),{})}},{key:"checkOutputs",value:function(e){var t=this;e.forEach((function(e){var n=z(e),r=(0,O.Z)(n,1)[0];if(!t.graph.nodes[r])throw new Error("The output '".concat(e,"' is not found in the graph"))}))}}]),e}(),ht=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,E.Z)(this,e),this.hashTableNameToHandle=t,this.hashTableMap=n}return(0,N.Z)(e,[{key:"addHashTable",value:function(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}},{key:"getHashTableHandleByName",value:function(e){return this.hashTableNameToHandle[e]}},{key:"getHashTableById",value:function(e){return this.hashTableMap[e]}},{key:"dispose",value:function(){for(var e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(var t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]}}]),e}(),mt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S.io;(0,E.Z)(this,e),this.modelUrl=t,this.loadOptions=n,this.version="n/a",this.io=r,null==n&&(this.loadOptions={}),this.resourceManager=new ht}return(0,N.Z)(e,[{key:"modelVersion",get:function(){return this.version}},{key:"inputNodes",get:function(){return this.executor.inputNodes}},{key:"outputNodes",get:function(){return this.executor.outputNodes}},{key:"inputs",get:function(){return this.executor.inputs}},{key:"outputs",get:function(){return this.executor.outputs}},{key:"weights",get:function(){return this.executor.weightMap}},{key:"metadata",get:function(){return this.artifacts.userDefinedMetadata}},{key:"modelSignature",get:function(){return this.signature}},{key:"modelStructuredOutputKeys",get:function(){return this.structuredOutputKeys}},{key:"findIOHandler",value:function(){var e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{var t=this.io.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error("Found more than one (".concat(t.length,") load handlers for ")+"URL '".concat([e],"'"));this.handler=t[0]}}},{key:"load",value:function(){var e=this;if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");var t=this.handler.load();return S.util.isPromise(t)?t.then((function(t){return e.loadSync(t)})):this.loadSync(t)}},{key:"loadSync",value:function(e){this.artifacts=e;var t=this.artifacts.modelTopology,n=this.artifacts.signature;if(null!=this.artifacts.userDefinedMetadata){var r=this.artifacts.userDefinedMetadata;null!=r.signature&&(n=r.signature),null!=r.structuredOutputKeys&&(this.structuredOutputKeys=r.structuredOutputKeys)}this.signature=n,this.version="".concat(t.versions.producer,".").concat(t.versions.minConsumer);var a=this.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new pt(ue.Instance.transformGraph(t,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(a),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){var i=ue.Instance.transformGraph(e.modelInitializer);this.initializer=new pt(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}},{key:"save",value:function(){var e=(0,T.Z)((0,I.Z)().mark((function e(t,n){var r;return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=9;break}if(0!==(r=this.io.getSaveHandlers(t)).length){e.next=6;break}throw new Error("Cannot find any save handlers for URL '".concat(t,"'"));case 6:if(!(r.length>1)){e.next=8;break}throw new Error("Found more than one (".concat(r.length,") save handlers for ")+"URL '".concat(t,"'"));case 8:t=r[0];case 9:if(null!=t.save){e.next=11;break}throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 11:return e.abrupt("return",t.save(this.artifacts));case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"predict",value:function(e,t){var n=this,r=this.execute(e,this.outputNodes);if(this.structuredOutputKeys){var a=r instanceof S.Tensor?[r]:r,i={};return a.forEach((function(e,t){return i[n.structuredOutputKeys[t]]=e})),i}return r}},{key:"normalizeInputs",value:function(e){if(!(e instanceof S.Tensor)&&!Array.isArray(e))return e;if((e=Array.isArray(e)?e:[e]).length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,"+"the graph model has ".concat(this.inputNodes.length," placeholders, ")+"while there are ".concat(e.length," input tensors."));return this.inputNodes.reduce((function(t,n,r){return t[n]=e[r],t}),{})}},{key:"normalizeOutputs",value:function(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}},{key:"execute",value:function(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);var n=this.executor.execute(e,t);return n.length>1?n:n[0]}},{key:"executeAsync",value:function(){var e=(0,T.Z)((0,I.Z)().mark((function e(t,n){var r;return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.normalizeInputs(t),n=this.normalizeOutputs(n),e.next=4,this.executor.executeAsync(t,n);case 4:return r=e.sent,e.abrupt("return",r.length>1?r:r[0]);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getIntermediateTensors",value:function(){return this.executor.getIntermediateTensors()}},{key:"disposeIntermediateTensors",value:function(){this.executor.disposeIntermediateTensors()}},{key:"convertTensorMapToTensorsMap",value:function(e){return Object.keys(e).reduce((function(t,n){return t[n]=[e[n]],t}),{})}},{key:"dispose",value:function(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}]),e}();function vt(e){return gt.apply(this,arguments)}function gt(){return gt=(0,T.Z)((0,I.Z)().mark((function e(t){var n,r,a,i=arguments;return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:{},r=i.length>2&&void 0!==i[2]?i[2]:S.io,null!=t){e.next=4;break}throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");case 4:return null==n&&(n={}),n.fromTFHub&&"string"===typeof t&&(t=bt(t)),a=new mt(t,n,r),e.next=9,a.load();case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),gt.apply(this,arguments)}function yt(e){if(null==e)throw new Error("modelUrl in loadGraphModelSync() cannot be null. Please provide a url or an IOHandler that loads the model");if(!e.load)throw new Error("modelUrl IO Handler ".concat(e," has no load function"));var t=new mt(e);return t.load(),t}function bt(e){return e.endsWith("/")||(e+="/"),"".concat(e).concat("model.json").concat("?tfjs-format=file")}var xt="3.19.0"},4679:function(e,t,n){"use strict";n.d(t,{JL:function(){return i},Zu:function(){return o}});var r=n(5671),a=n(3144),i=function(){function e(t,n){(0,r.Z)(this,e),this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return(0,a.Z)(e,[{key:"get",value:function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}},{key:"set",value:function(e,t){this.dataIdsCount++,this.data.set(e,t)}},{key:"has",value:function(e){return this.data.has(e)}},{key:"delete",value:function(e){return this.dataIdsCount--,this.data.delete(e)}},{key:"numDataIds",value:function(){return this.dataIdsCount}}]),e}(),o=function(){function e(){(0,r.Z)(this,e)}return(0,a.Z)(e,[{key:"refCount",value:function(e){return s("refCount")}},{key:"incRef",value:function(e){return s("incRef")}},{key:"timerAvailable",value:function(){return!0}},{key:"time",value:function(e){return s("time")}},{key:"read",value:function(e){return s("read")}},{key:"readSync",value:function(e){return s("readSync")}},{key:"readToGPU",value:function(e,t){return s("readToGPU")}},{key:"numDataIds",value:function(){return s("numDataIds")}},{key:"disposeData",value:function(e,t){return s("disposeData")}},{key:"write",value:function(e,t,n){return s("write")}},{key:"move",value:function(e,t,n,r,a){return s("move")}},{key:"memory",value:function(){return s("memory")}},{key:"floatPrecision",value:function(){return s("floatPrecision")}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"dispose",value:function(){return s("dispose")}}]),e}();function s(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}},745:function(e,t,n){"use strict";n.d(t,{GP:function(){return o},qP:function(){return s},pA:function(){return u}});var r=n(3433);function a(e,t,n){var r=function(e,t,n){return function(e,t,n){var r=0,a=e.length,i=0,o=!1;for(;r<a;){var s=n(t,e[i=r+(a-r>>>1)]);s>0?r=i+1:(a=i,o=!s)}return o?r:-r-1}(e,t,n||i)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function i(e,t){return e>t?1:e<t?-1:0}function o(e,t,n,r,a){return c(e,t,n,r,a,0)}function s(e,t,n,r,a,i){return c(e,t,n,r,a,0,!1,i,!0)}function u(e,t,n,r,a,i){return c(e,t,n,r,a,i,!0)}function c(e,t,n,i,o,s){for(var u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]&&arguments[7],p=arguments.length>8&&void 0!==arguments[8]&&arguments[8],h=[],m=0;m<t.length;m++)t[m]>o&&h.push({score:t[m],boxIndex:m,suppressBeginIndex:0});h.sort(f);for(var v=s>0?-.5/s:0,g=[],y=[];g.length<n&&h.length>0;){var b=h.pop(),x=b.score,k=b.boxIndex,w=b.suppressBeginIndex;if(x<o)break;for(var S=!1,C=g.length-1;C>=w;--C){var _=l(e,k,g[C]);if(_>=i){S=!0;break}if(b.score=b.score*d(i,v,_),b.score<=o)break}b.suppressBeginIndex=g.length,S||(b.score===x?(g.push(k),y.push(b.score)):b.score>o&&a(h,b,f))}var I=g.length,T=n-I;c&&T>0&&(g.push.apply(g,(0,r.Z)(new Array(T).fill(0))),y.push.apply(y,(0,r.Z)(new Array(T).fill(0))));var E={selectedIndices:g};return u&&(E.selectedScores=y),p&&(E.validOutputs=I),E}function l(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(a[0],a[2]),l=Math.min(a[1],a[3]),d=Math.max(a[0],a[2]),f=Math.max(a[1],a[3]),p=(s-i)*(u-o),h=(d-c)*(f-l);if(p<=0||h<=0)return 0;var m=Math.max(i,c),v=Math.max(o,l),g=Math.min(s,d),y=Math.min(u,f),b=Math.max(g-m,0)*Math.max(y-v,0);return b/(p+h-b)}function d(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function f(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}},4189:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(7039);function a(e,t){for(var n=[],a=0;a<t.length;a++)t[a]&&n.push(a);for(var i=(0,r.f)(e,"int32"),o=(0,r.f)([n.length,e.length],"int32"),s=0;s<n.length;s++){var u=i.indexToLoc(n[s]),c=s*e.length;o.values.set(u,c)}return o.toTensor()}},318:function(e,t,n){"use strict";n.d(t,{BV:function(){return E},wv:function(){return T}});var r=n(7762),a=n(3433),i=n(4165),o=n(5861),s=n(5671),u=n(3144),c=n(4679),l=n(5050),d=n(6581),f=n(2145),p=n(8864),h=n(7269),m=n(115),v=n(6147),g=function(){function e(t,n){(0,s.Z)(this,e),this.backendTimer=t,this.logger=n,null==n&&(this.logger=new y)}return(0,u.Z)(e,[{key:"profileKernel",value:function(e,t,n){var a,i,o=function(){a=n()},s=m.now();if(this.backendTimer.timerAvailable())i=this.backendTimer.time(o);else{o();var u,c=(0,r.Z)(a);try{for(c.s();!(u=c.n()).done;){u.value.dataSync()}}catch(p){c.e(p)}finally{c.f()}i=Promise.resolve({kernelMs:m.now()-s})}if((0,l.OB)().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var d=function(t){var n=a[t];n.data().then((function(t){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}}(t,n.dtype,e)}))},f=0;f<a.length;f++)d(f);return{kernelName:e,outputs:a,inputs:t,timeMs:i.then((function(e){return e.kernelMs})),extraInfo:i.then((function(e){return null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""}))}}},{key:"logKernelProfile",value:function(e){var t=this,n=e.kernelName,r=e.outputs,a=e.timeMs,i=e.inputs,o=e.extraInfo;r.forEach((function(e){Promise.all([e.data(),a,o]).then((function(r){t.logger.logKernelProfile(n,e,r[0],r[1],i,r[2])}))}))}}]),e}();var y=function(){function e(){(0,s.Z)(this,e)}return(0,u.Z)(e,[{key:"logKernelProfile",value:function(e,t,n,r,a,i){var o="number"===typeof r?v.oj("".concat(r,"ms"),9):r.error,s=v.oj(e,25),u=t.rank,c=t.size,l=v.oj(t.shape.toString(),14),d="";for(var f in a){var p=a[f];if(null!=p){var h=p.shape||t.shape,m=h.length;d+="".concat(f,": ").concat(m,"D ").concat(m>0?h:""," ")}}console.log("%c".concat(s,"\t%c").concat(o,"\t%c").concat(u,"D ").concat(l,"\t%c").concat(c,"\t%c").concat(d,"\t%c").concat(i),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}]),e}();function b(e,t,n){for(var r={},a={},i=0;i<t.length;i++)r[t[i].id]=!0;for(var o=0;o<e.length;o++){var s=e[o],u=s.inputs;for(var c in u){for(var l=u[c],d=!1,f=0;f<t.length;f++)if(r[l.id]){s.outputs.forEach((function(e){return r[e.id]=!0})),d=!0,a[s.id]=!0;break}if(d)break}}var p={};p[n.id]=!0;for(var h={},m=e.length-1;m>=0;m--)for(var v=e[m],g=v.inputs,y=0;y<v.outputs.length;y++)if(p[v.outputs[y].id]){for(var b in g)p[g[b].id]=!0,h[v.id]=!0;break}for(var x=[],k=0;k<e.length;k++){var w=e[k];if(a[w.id]&&h[w.id]){var S={};for(var C in w.inputs){var _=w.inputs[C];r[_.id]&&(S[C]=_)}var I=Object.assign({},w);I.inputs=S,I.outputs=w.outputs,x.push(I)}}return x}function x(e,t,n,r){for(var a=function(a){var i=t[a],o=[];if(i.outputs.forEach((function(t){var n=e[t.id];null!=n?o.push(n):o.push(null)})),null==i.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(i.kernelName,"."));var s=i.gradient(o),u=function(t){if(!(t in s))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(s),"."));var a=n((function(){return s[t]()}));if("float32"!==a.dtype)throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(a.dtype,"'"));var o=i.inputs[t];if(!v.cO(a.shape,o.shape))throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(a.shape,"', which does not match ")+"the shape of the input '".concat(o.shape,"'"));if(null==e[o.id])e[o.id]=a;else{var u=e[o.id];e[o.id]=r(u,a),u.dispose()}};for(var c in i.inputs)u(c)},i=t.length-1;i>=0;i--)a(i)}var k=n(4376),w=n(9064);function S(e){return null!=e.kernelName}var C=function(){function e(){(0,s.Z)(this,e),this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((function(e){return e.name}))))}}}return(0,u.Z)(e,[{key:"dispose",value:function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()}}]),e}(),_=function(){function e(t){(0,s.Z)(this,e),this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new C}return(0,u.Z)(e,[{key:"ready",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.pendingBackendInit){e.next=2;break}return e.abrupt("return",this.pendingBackendInit.then((function(){})));case 2:if(null==this.backendInstance){e.next=4;break}return e.abrupt("return");case 4:t=this.getSortedBackends(),n=0;case 6:if(!(n<t.length)){e.next=18;break}return r=t[n],e.next=10,this.initializeBackend(r).success;case 10:if(!e.sent){e.next=15;break}return e.next=14,this.setBackend(r);case 14:return e.abrupt("return");case 15:n++,e.next=6;break;case 18:throw new Error("Could not initialize any backends, all backend initializations failed.");case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"backend",get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '".concat(t,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance}},{key:"backendNames",value:function(){return Object.keys(this.registryFactory)}},{key:"findBackend",value:function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]}},{key:"findBackendFactory",value:function(e){return e in this.registryFactory?this.registryFactory[e].factory:null}},{key:"registerBackend",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(h.Z("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}},{key:"setBackend",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.registryFactory[t]){e.next=2;break}throw new Error("Backend name '".concat(t,"' not found in registry"));case 2:if(this.backendName=t,null!=this.registry[t]){e.next=16;break}if(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,!n.asyncInit){e.next=12;break}return e.next=9,r;case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=r;case 13:if(e.t0){e.next=16;break}return e.abrupt("return",!1);case 16:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new g(this.backendInstance),e.abrupt("return",!0);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupRegisteredKernels",value:function(){var e=this;(0,p.tr)(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))}},{key:"disposeRegisteredKernels",value:function(e){var t=this;(0,p.tr)(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))}},{key:"initializeBackend",value:function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{var r=n.factory();if(!r||r instanceof c.Zu||"function"!==typeof r.then)return this.registry[e]=r,{success:!0,asyncInit:!1};var a=++this.pendingBackendInitId,i=r.then((function(n){return!(a<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return a<t.pendingBackendInitId||(t.pendingBackendInit=null,h.Z("Initialization of backend ".concat(e," failed")),h.Z(n.stack||n.message)),!1}));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}catch(o){return h.Z("Initialization of backend ".concat(e," failed")),h.Z(o.stack||o.message),{success:!1,asyncInit:!1}}}},{key:"removeBackend",value:function(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}},{key:"getSortedBackends",value:function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))}},{key:"initializeBackendsAndReturnBest",value:function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,i=r.asyncInit;if(i||a)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}},{key:"moveData",value:function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),i=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}},{key:"tidy",value:function(e,t){var n,r=this,a=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))}},{key:"scopedRun",value:function(e,t,n){e();try{var r=n();return t(),r}catch(a){throw t(),a}}},{key:"nextTensorId",value:function(){return e.nextTensorId++}},{key:"nextVariableId",value:function(){return e.nextVariableId++}},{key:"clone",value:function(e){var t=E.runKernel(f.iJ,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){var t={x:e},n={dtype:"float32"};return E.runKernel(f.RF,t,n)}}}),[],{}),t}},{key:"runKernel",value:function(e,t,n){if(null==this.backendName&&this.backend,!(null!=(0,p.pI)(e,this.backendName)))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}},{key:"shouldCheckForMemLeaks",value:function(){return this.ENV.getBool("IS_TEST")}},{key:"checkKernelForMemLeak",value:function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+="complex64"===e.dtype?3:1}));var i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-t-a-i;if(o>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(o," data ids) after running '").concat(e,"'"))}},{key:"runKernelFunc",value:function(e){var t,n,r,a=this,i=[],o=this.isTapeOn(),s=this.state.numBytes,u=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;var c=S(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(S(e)){var l=e.kernelName,d=e.inputs,f=e.attrs;null==this.backendName&&this.backend;var h=(0,p.pI)(l,this.backendName);v.hu(null!=h,(function(){return"Cannot find registered kernel '".concat(l,"' for backend '").concat(a.backendName,"'")})),n=function(){var e=a.backend.numDataIds();r=h.kernelFunc({inputs:d,attrs:f,backend:a.backend});var t=Array.isArray(r)?r:[r];a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(l,e,t);var n=t.map((function(e){return null!=e.rank?e:a.makeTensorFromTensorInfo(e)}));if(o){var s=a.getTensorsForGradient(l,d,n);i=a.saveTensorsForBackwardMode(s)}return n}}else{var m=e.forwardFunc,g=function(e){o&&(i=e.map((function(e){return a.keep(a.clone(e))})))};n=function(){var e=a.backend.numDataIds();r=a.tidy((function(){return m(a.backend,g)}));var t=Array.isArray(r)?r:[r];return a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(c,e,t),t}}var y,b=e.inputs,x=e.attrs,k=S(e)?null:e.backwardsFunc;return this.scopedRun((function(){return a.state.kernelDepth++}),(function(){return a.state.kernelDepth--}),(function(){a.ENV.getBool("DEBUG")||a.state.profiling?(y=a.profiler.profileKernel(c,b,(function(){return n()})),a.ENV.getBool("DEBUG")&&a.profiler.logKernelProfile(y),t=y.outputs):t=n()})),o&&this.addTapeNode(c,b,t,k,i,x),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-u,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(b).map((function(e){return null!=b[e]?b[e].shape:null})),outputShapes:t.map((function(e){return e.shape})),kernelTimeMs:y.timeMs,extraInfo:y.extraInfo}),Array.isArray(r)?t:t[0]}},{key:"saveTensorsForBackwardMode",value:function(e){var t=this,n=e.map((function(e){return t.keep(t.clone(e))}));return n}},{key:"getTensorsForGradient",value:function(e,t,n){var r=(0,p.uk)(e);if(null!=r){var a,i=r.inputsToSave||[],o=r.outputsToSave||[];r.saveAllInputs?(v.hu(Array.isArray(t),(function(){return"saveAllInputs is true, expected inputs to be an array."})),a=Object.keys(t).map((function(e){return t[e]}))):a=i.map((function(e){return t[e]}));var s=n.filter((function(e,t){return o[t]}));return a.concat(s)}return[]}},{key:"makeTensor",value:function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=e;"string"===n&&v.HD(e[0])&&(a=e.map((function(e){return m.encodeString(e)})));var i=r.write(a,t,n),o=new k.es(t,n,i,this.nextTensorId());if(this.trackTensor(o,r),"string"===n){var s=this.state.tensorInfo.get(i),u=(0,v.Ub)(a);this.state.numBytes+=u-s.bytes,s.bytes=u}return o}},{key:"makeTensorFromDataId",value:function(e,t,n,r){var a={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(a,r)}},{key:"makeTensorFromTensorInfo",value:function(e,t){var n=e.dataId,r=e.shape,a=e.dtype,i=new k.es(r,a,n,this.nextTensorId());return this.trackTensor(i,t),i}},{key:"makeVariable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));var a=new k._w(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}},{key:"trackTensor",value:function(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;var n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*v.bT(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof k._w||this.track(e)}},{key:"incRef",value:function(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}},{key:"removeDataId",value:function(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}},{key:"disposeTensor",value:function(e){if(this.state.tensorInfo.has(e.dataId)){var t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){var n=e.size*v.bT(e.dtype);this.state.numBytes-=n}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}}},{key:"disposeVariables",value:function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}}},{key:"disposeVariable",value:function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}},{key:"memory",value:function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}},{key:"profile",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,o,s,u,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.profiling=!0,n=this.state.numBytes,o=this.state.numTensors,this.state.activeProfile.kernels=[],e.next=6,t();case 6:this.state.activeProfile.result=e.sent,this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,(0,a.Z)(this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot})))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-o,s=(0,r.Z)(this.state.activeProfile.kernels),e.prev=12,s.s();case 14:if((u=s.n()).done){e.next=24;break}return c=u.value,e.next=18,c.kernelTimeMs;case 18:return c.kernelTimeMs=e.sent,e.next=21,c.extraInfo;case 21:c.extraInfo=e.sent;case 22:e.next=14;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(12),s.e(e.t0);case 29:return e.prev=29,s.f(),e.finish(29);case 32:return e.abrupt("return",this.state.activeProfile);case 33:case"end":return e.stop()}}),e,this,[[12,26,29,32]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isTapeOn",value:function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}},{key:"addTapeNode",value:function(e,t,n,r,a,i){var o=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},u=(0,p.uk)(e);null!=u&&(r=u.gradFunc),null!=r&&(s.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=v.wT(r.size,r.dtype);return o.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],a,i)}),this.state.activeTape.push(s)}},{key:"keep",value:function(e){return e.kept=!0,e}},{key:"startTape",value:function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}},{key:"endTape",value:function(){this.state.gradientDepth--}},{key:"startScope",value:function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}},{key:"endScope",value:function(e){for(var t=this,n=(0,w.getTensorsInContainer)(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var i=this.state.activeScope.track[a];i.kept||r.has(i.id)||i.dispose()}var o=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==o.id||t.track(e)}))}},{key:"gradients",value:function(e,t,n){var a=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(v.hu(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));var o=this.scopedRun((function(){return a.startTape()}),(function(){return a.endTape()}),(function(){return a.tidy("forward",e)}));v.hu(o instanceof k.es,(function(){return"The result y returned by f() must be a tensor."}));var s=b(this.state.activeTape,t,o);if(!i&&0===s.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e={};e[o.id]=null==n?I(o.shape):n,x(e,s,(function(e){return a.tidy(e)}),N);var i=t.map((function(t){return e[t.id]}));return 0===a.state.gradientDepth&&(a.state.activeTape.forEach((function(e){var t,n=(0,r.Z)(e.saved);try{for(n.s();!(t=n.n()).done;){t.value.dispose()}}catch(a){n.e(a)}finally{n.f()}})),a.state.activeTape=null),{value:o,grads:i}}))}},{key:"customGrad",value:function(e){var t=this;return v.hu(v.mf(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i;v.hu(r.every((function(e){return e instanceof k.es})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var o={};r.forEach((function(e,t){o[t]=e}));var s=function(t,n){return i=e.apply(void 0,[].concat(r,[n])),v.hu(i.value instanceof k.es,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),v.hu(v.mf(i.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),i.value},u=function(e,t){var n=i.gradFunc(e,t),a=Array.isArray(n)?n:[n];v.hu(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),v.hu(a.every((function(e){return e instanceof k.es})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var o={};return a.forEach((function(e,t){o[t]=function(){return e}})),o};return t.runKernelFunc({forwardFunc:s,backwardsFunc:u,inputs:o})}}},{key:"readSync",value:function(e){return this.state.tensorInfo.get(e).backend.readSync(e)}},{key:"read",value:function(e){return this.state.tensorInfo.get(e).backend.read(e)}},{key:"readToGPU",value:function(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}},{key:"time",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,m.now)(),e.next=3,this.backend.time(t);case 3:return(r=e.sent).wallMs=(0,m.now)()-n,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"track",value:function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}},{key:"registeredVariables",get:function(){return this.state.registeredVariables}},{key:"reset",value:function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new C,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}]),e}();function I(e){var t=(0,v.p8)((0,v.NA)(e),"float32");return E.makeTensor(t,e,"float32")}function T(){var e=(0,d.D)();if(null==e._tfengine){var t=new l.qA(e);e._tfengine=new _(t)}return(0,l.iG)(e._tfengine.ENV),(0,k.Vi)((function(){return e._tfengine})),e._tfengine}_.nextTensorId=0,_.nextVariableId=0;var E=T();function N(e,t){var n={a:e,b:t};return E.runKernel(f.mm,n)}},5050:function(e,t,n){"use strict";n.d(t,{OB:function(){return p},Vi:function(){return h},iG:function(){return m},qA:function(){return l}});var r=n(9439),a=n(4165),i=n(5861),o=n(5671),s=n(3144),u=n(6147),c="tfjsflags",l=function(){function e(t){(0,o.Z)(this,e),this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=d,this.populateURLFlags()}return(0,s.Z)(e,[{key:"setPlatform",value:function(e,t){null!=this.platform&&(p().getBool("IS_TEST")||p().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(e,"."))),this.platformName=e,this.platform=t}},{key:"registerFlag",value:function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];p().getBool("IS_TEST")||p().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(r,".")),this.set(e,r)}}},{key:"getAsync",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t in this.flags)){e.next=2;break}return e.abrupt("return",this.flags[t]);case 2:return e.next=4,this.evaluateFlag(t);case 4:return this.flags[t]=e.sent,e.abrupt("return",this.flags[t]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(e){if(e in this.flags)return this.flags[e];var t=this.evaluateFlag(e);if((0,u.tI)(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}},{key:"getNumber",value:function(e){return this.get(e)}},{key:"getBool",value:function(e){return this.get(e)}},{key:"getFlags",value:function(){return this.flags}},{key:"features",get:function(){return this.flags}},{key:"set",value:function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}},{key:"evaluateFlag",value:function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}},{key:"setFlags",value:function(e){this.flags=Object.assign({},e)}},{key:"reset",value:function(){this.flags={},this.urlFlags={},this.populateURLFlags()}},{key:"populateURLFlags",value:function(){var e=this;if("undefined"!==typeof this.global&&"undefined"!==typeof this.global.location&&"undefined"!==typeof this.global.location.search){var t=this.getQueryParams(this.global.location.search);if(c in t)t.tfjsflags.split(",").forEach((function(t){var n=t.split(":"),a=(0,r.Z)(n,2),i=a[0],o=a[1];e.urlFlags[i]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if("".concat(+t)===t)return+t;throw new Error("Could not parse value flag value ".concat(t," for flag ").concat(e,"."))}(i,o)}))}}}]),e}();function d(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return f(t,r[0],r[1]),r.join("=")})),t}function f(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function p(){return h}var h=null;function m(e){h=e}},6581:function(e,t,n){"use strict";var r;function a(){if(null==r){var e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof n.g)e=n.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}r=e}return r}function i(e,t){var n=function(){var e=a();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);var r=t();return n.set(e,r),n.get(e)}n.d(t,{D:function(){return a},R:function(){return i}})},5875:function(e,t,n){"use strict";n.d(t,{B9:function(){return v},CQ:function(){return b},Cd:function(){return x},Cn:function(){return g},G4:function(){return s},MX:function(){return l},N5:function(){return h},N8:function(){return d},N_:function(){return k},R:function(){return u},SR:function(){return f},VY:function(){return T},XV:function(){return y},cF:function(){return c},cj:function(){return w},jq:function(){return _},lu:function(){return m},sq:function(){return p},x3:function(){return S},y3:function(){return I},ze:function(){return C}});var r=n(318),a=n(5050),i=n(4376),o=n(9064);function s(){(0,a.OB)().set("PROD",!0)}function u(){(0,a.OB)().set("DEBUG",!0)}function c(){(0,a.OB)().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function l(e){(0,a.OB)().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function d(){r.BV.disposeVariables()}function f(){return r.BV}function p(){return r.BV.memory()}function h(e){return r.BV.profile(e)}function m(e,t){return r.BV.tidy(e,t)}function v(e){(0,o.getTensorsInContainer)(e).forEach((function(e){return e.dispose()}))}function g(e){return r.BV.keep(e)}function y(e){return r.BV.time(e)}function b(e){return r.BV.setBackend(e)}function x(){return r.BV.ready()}function k(){return r.BV.backendName}function w(e){r.BV.removeBackend(e)}function S(e){return r.BV.findBackend(e)}function C(e){return r.BV.findBackendFactory(e)}function _(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return r.BV.registerBackend(e,t,n)}function I(){return r.BV.backend}function T(e,t){(0,a.OB)().setPlatform(e,t)}(0,i.FZ)(l)},6450:function(e,t,n){"use strict";n.d(t,{UQ:function(){return u},cb:function(){return p},fN:function(){return d},h7:function(){return l},pn:function(){return f},ti:function(){return c}});var r=n(3433),a=n(318),i=n(4376),o=n(8354),s=n(6147);function u(e){return s.hu(s.mf(e),(function(){return"The f passed in grad(f) must be a function"})),function(t,n){var r=(0,o._1)(t,"x","tf.grad","string_or_numeric"),i=null!=n?(0,o._1)(n,"dy","tf.grad"):null;return a.BV.tidy((function(){var t=a.BV.gradients((function(){return e(r)}),[r],i),n=t.value,o=t.grads;return null!=i&&s.k5(n.shape,i.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),h(o),o[0]}))}}function c(e){return s.hu(s.mf(e),(function(){return"The f passed in grads(f) must be a function"})),function(t,n){s.hu(Array.isArray(t),(function(){return"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s"}));var i=(0,o.sI)(t,"args","tf.grads","string_or_numeric"),u=null!=n?(0,o._1)(n,"dy","tf.grads"):null;return a.BV.tidy((function(){var t=a.BV.gradients((function(){return e.apply(void 0,(0,r.Z)(i))}),i,u),n=t.value,o=t.grads;return null!=u&&s.k5(n.shape,u.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),h(o),o}))}}function l(e){return s.hu(s.mf(e),(function(){return"The f passed in valueAndGrad(f) must be a function"})),function(t,n){s.hu(t instanceof i.es,(function(){return"The x passed in valueAndGrad(f)(x) must be a tensor"})),s.hu(null==n||n instanceof i.es,(function(){return"The dy passed in valueAndGrad(f)(x, dy) must be a tensor"}));var r=a.BV.gradients((function(){return e(t)}),[t],n),o=r.grads,u=r.value;return h(o),{grad:o[0],value:u}}}function d(e){return s.hu(s.mf(e),(function(){return"The f passed in valueAndGrads(f) must be a function"})),function(t,n){s.hu(Array.isArray(t)&&t.every((function(e){return e instanceof i.es})),(function(){return"The args passed in valueAndGrads(f)(args) must be array of tensors"})),s.hu(null==n||n instanceof i.es,(function(){return"The dy passed in valueAndGrads(f)(args, dy) must be a tensor"}));var o=a.BV.gradients((function(){return e.apply(void 0,(0,r.Z)(t))}),t,n);return null!=n&&s.k5(o.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),h(o.grads),o}}function f(e,t){s.hu(s.mf(e),(function(){return"The f passed in variableGrads(f) must be a function"})),s.hu(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof i._w})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],a.BV.registeredVariables)t.push(a.BV.registeredVariables[r]);var o=n?t.filter((function(e){return!e.trainable})):null,u=t.length;t=t.filter((function(e){return e.trainable})),s.hu(t.length>0,(function(){return"variableGrads() expects at least one of the input variables to "+"be trainable, but none of the ".concat(u," variables is ")+"trainable."}));var c=a.BV.gradients(e,t,null,!0),l=c.value,d=c.grads;s.hu(d.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),s.hu(0===l.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it "+"returned a rank-".concat(l.rank," tensor")}));var f={};return t.forEach((function(e,t){null!=d[t]&&(f[e.name]=d[t])})),null!=o&&o.forEach((function(e){return f[e.name]=null})),{value:l,grads:f}}function p(e){return a.BV.customGrad(e)}function h(e){if(e.filter((function(e){return null==e})).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}},7105:function(e,t,n){"use strict";n.r(t),n.d(t,{Abs:function(){return bt.SY},Acos:function(){return bt.VG},Acosh:function(){return bt.Sp},AdadeltaOptimizer:function(){return Cn},AdagradOptimizer:function(){return In},AdamOptimizer:function(){return Nn},AdamaxOptimizer:function(){return Rn},Add:function(){return bt.mm},AddN:function(){return bt.Xz},All:function(){return bt.oT},Any:function(){return bt.IK},ArgMax:function(){return bt.sJ},ArgMin:function(){return bt.aJ},Asin:function(){return bt.M2},Asinh:function(){return bt.qw},Atan:function(){return bt.jM},Atan2:function(){return bt.QC},Atanh:function(){return bt.Oy},AvgPool:function(){return bt.Jh},AvgPool3D:function(){return bt._k},AvgPool3DGrad:function(){return bt.IM},AvgPoolGrad:function(){return bt.RO},BatchMatMul:function(){return bt.XL},BatchToSpaceND:function(){return bt.zw},Bincount:function(){return bt.zv},BroadcastArgs:function(){return bt.eE},BroadcastTo:function(){return bt.Ly},Cast:function(){return bt.RF},Ceil:function(){return bt.gJ},ClipByValue:function(){return bt.xn},Complex:function(){return bt.Zz},ComplexAbs:function(){return bt.yj},Concat:function(){return bt.Eh},Conv2D:function(){return bt.mh},Conv2DBackpropFilter:function(){return bt.wU},Conv2DBackpropInput:function(){return bt.wm},Conv3D:function(){return bt.x1},Conv3DBackpropFilterV2:function(){return bt.o2},Conv3DBackpropInputV2:function(){return bt.ik},Cos:function(){return bt.mc},Cosh:function(){return bt.TR},CropAndResize:function(){return bt.Vc},Cumprod:function(){return bt.By},Cumsum:function(){return bt.iH},DataStorage:function(){return qr.JL},DenseBincount:function(){return bt.QR},DepthToSpace:function(){return bt.T0},DepthwiseConv2dNative:function(){return bt.ci},DepthwiseConv2dNativeBackpropFilter:function(){return bt.sL},DepthwiseConv2dNativeBackpropInput:function(){return bt.y7},Diag:function(){return bt.$w},Dilation2D:function(){return bt.p4},Dilation2DBackpropFilter:function(){return bt.Vn},Dilation2DBackpropInput:function(){return bt.ek},ENV:function(){return b.Vi},Einsum:function(){return bt.$g},Elu:function(){return bt.SX},EluGrad:function(){return bt.HE},Environment:function(){return b.qA},Equal:function(){return bt.hd},Erf:function(){return bt.Om},Exp:function(){return bt.NE},ExpandDims:function(){return bt.YF},Expm1:function(){return bt.Y0},FFT:function(){return bt.vw},Fill:function(){return bt.de},FlipLeftRight:function(){return bt.Uy},Floor:function(){return bt.OR},FloorDiv:function(){return bt.je},FromPixels:function(){return bt.eB},FusedBatchNorm:function(){return bt.sH},FusedConv2D:function(){return bt._V},FusedDepthwiseConv2D:function(){return bt.lu},GatherNd:function(){return bt.q1},GatherV2:function(){return bt.qi},Greater:function(){return bt.iZ},GreaterEqual:function(){return bt.Ac},IFFT:function(){return bt.Qg},Identity:function(){return bt.iJ},Imag:function(){return bt.J_},IsFinite:function(){return bt.av},IsInf:function(){return bt.iW},IsNan:function(){return bt.r7},KernelBackend:function(){return qr.Zu},LRN:function(){return bt.eZ},LRNGrad:function(){return bt.Hh},LeakyRelu:function(){return bt.J$},Less:function(){return bt.vt},LessEqual:function(){return bt.CA},LinSpace:function(){return bt.e7},Log:function(){return bt.Zb},Log1p:function(){return bt.kU},LogSoftmax:function(){return bt.qC},LogicalAnd:function(){return bt.PY},LogicalNot:function(){return bt.Vf},LogicalOr:function(){return bt.MZ},LogicalXor:function(){return bt.w6},LowerBound:function(){return bt.qI},Max:function(){return bt.Yo},MaxPool:function(){return bt.mT},MaxPool3D:function(){return bt.OA},MaxPool3DGrad:function(){return bt.OU},MaxPoolGrad:function(){return bt.OV},MaxPoolWithArgmax:function(){return bt.vF},Maximum:function(){return bt.BM},Mean:function(){return bt.q2},Min:function(){return bt.c1},Minimum:function(){return bt.q8},MirrorPad:function(){return bt.jQ},Mod:function(){return bt.Vb},MomentumOptimizer:function(){return Dn},Multinomial:function(){return bt.NZ},Multiply:function(){return bt.wY},Neg:function(){return bt.ku},NonMaxSuppressionV3:function(){return bt.uv},NonMaxSuppressionV4:function(){return bt.cy},NonMaxSuppressionV5:function(){return bt.W0},NotEqual:function(){return bt.yQ},OP_SCOPE_SUFFIX:function(){return Ln.zvA},OneHot:function(){return bt.we},OnesLike:function(){return bt.qW},Optimizer:function(){return Sn},OptimizerConstructors:function(){return Mn},Pack:function(){return bt.Qi},PadV2:function(){return bt.ly},Pool:function(){return bt.Kg},Pow:function(){return bt.pe},Prelu:function(){return bt.o0},Prod:function(){return bt.Dl},RMSPropOptimizer:function(){return Bn},Range:function(){return bt.e6},Rank:function(){return Fn.yw},Real:function(){return bt.xJ},RealDiv:function(){return bt.oH},Reciprocal:function(){return bt.$H},Reduction:function(){return Vn.I},Relu:function(){return bt.qk},Relu6:function(){return bt.Sb},Reshape:function(){return bt.HZ},ResizeBilinear:function(){return bt._Y},ResizeBilinearGrad:function(){return bt.zb},ResizeNearestNeighbor:function(){return bt.dp},ResizeNearestNeighborGrad:function(){return bt.Hm},Reverse:function(){return bt.mK},RotateWithOffset:function(){return bt.b9},Round:function(){return bt.e0},Rsqrt:function(){return bt.bV},SGDOptimizer:function(){return Pn},ScatterNd:function(){return bt.xQ},SearchSorted:function(){return bt.nr},Select:function(){return bt.Ph},Selu:function(){return bt.oF},Sigmoid:function(){return bt.a5},Sign:function(){return bt.i5},Sin:function(){return bt.RQ},Sinh:function(){return bt.w3},Slice:function(){return bt.p2},Softmax:function(){return bt.Gc},Softplus:function(){return bt.MR},SpaceToBatchND:function(){return bt.TQ},SparseFillEmptyRows:function(){return bt.O3},SparseReshape:function(){return bt.nh},SparseSegmentMean:function(){return bt.YW},SparseSegmentSum:function(){return bt.Zj},SparseToDense:function(){return bt.D2},SplitV:function(){return bt.L8},Sqrt:function(){return bt.FK},Square:function(){return bt.bK},SquaredDifference:function(){return bt._t},Step:function(){return bt.h8},StridedSlice:function(){return bt.m2},StringNGrams:function(){return bt._J},StringSplit:function(){return bt.s1},StringToHashBucketFast:function(){return bt.Xk},Sub:function(){return bt.Tr},Sum:function(){return bt.GB},Tan:function(){return bt.sE},Tanh:function(){return bt.MI},Tensor:function(){return Ve.es},TensorBuffer:function(){return Ve.YD},Tile:function(){return bt.n9},TopK:function(){return bt.cW},Transform:function(){return bt.wx},Transpose:function(){return bt.G3},Unique:function(){return bt.kp},Unpack:function(){return bt.To},UnsortedSegmentSum:function(){return bt.Qv},UpperBound:function(){return bt.XD},Variable:function(){return Ve._w},ZerosLike:function(){return bt.Ru},_FusedMatMul:function(){return bt.us},abs:function(){return Ln.WnP},acos:function(){return Ln.Khb},acosh:function(){return Ln.__u},add:function(){return Ln.IHx},addN:function(){return Ln.QBD},all:function(){return Ln.$6P},any:function(){return Ln.YjB},argMax:function(){return Ln.NqF},argMin:function(){return Ln.vHJ},asin:function(){return Ln.ZRM},asinh:function(){return Ln.VfV},atan:function(){return Ln.z4N},atan2:function(){return Ln.fvJ},atanh:function(){return Ln.C80},avgPool:function(){return Ln.wS1},avgPool3d:function(){return Ln.uR5},backend:function(){return hn.y3},backend_util:function(){return f},basicLSTMCell:function(){return Ln.zEQ},batchNorm:function(){return Ln.tgs},batchNorm2d:function(){return Ln.Dxk},batchNorm3d:function(){return Ln.JY5},batchNorm4d:function(){return Ln.p3b},batchToSpaceND:function(){return Ln.E4h},bincount:function(){return Ln.yE8},booleanMaskAsync:function(){return Ln.anm},broadcastArgs:function(){return Ln.XsQ},broadcastTo:function(){return Ln.UFq},broadcast_util:function(){return yt},browser:function(){return o},buffer:function(){return Ln.f3b},cast:function(){return Ln.pju},ceil:function(){return Ln.mDi},clipByValue:function(){return Ln.iUl},clone:function(){return Ln.d9v},complex:function(){return Ln.PYB},concat:function(){return Ln.zoF},concat1d:function(){return Ln.gME},concat2d:function(){return Ln.Izb},concat3d:function(){return Ln.MNy},concat4d:function(){return Ln.ZaL},conv1d:function(){return Ln.PAt},conv2d:function(){return Ln.Tek},conv2dTranspose:function(){return Ln.bc},conv3d:function(){return Ln.pdZ},conv3dTranspose:function(){return Ln.$QV},copyRegisteredKernels:function(){return xt.T3},cos:function(){return Ln.mCk},cosh:function(){return Ln.f9Y},cosineWindow:function(){return Ln.mew},cumprod:function(){return Ln.$Gn},cumsum:function(){return Ln.zbp},customGrad:function(){return kn.cb},denseBincount:function(){return Ln.ppE},deprecationWarn:function(){return hn.MX},depthToSpace:function(){return Ln.nTT},depthwiseConv2d:function(){return Ln.B10},device_util:function(){return r},diag:function(){return Ln.Ka3},dilation2d:function(){return Ln.WmZ},disableDeprecationWarnings:function(){return hn.cF},dispose:function(){return hn.B9},disposeVariables:function(){return hn.N8},div:function(){return Ln.hiC},divNoNan:function(){return Ln.NTj},dot:function(){return Ln.AKD},dropout:function(){return Ln.rvX},einsum:function(){return Ln.WYO},elu:function(){return Ln.pyx},enableDebugMode:function(){return hn.R},enableProdMode:function(){return hn.G4},enclosingPowerOfTwo:function(){return Ln.GRh},engine:function(){return hn.SR},env:function(){return b.OB},equal:function(){return Ln.DgJ},erf:function(){return Ln.qNN},euclideanNorm:function(){return Ln.d2q},exp:function(){return Ln.Qqt},expandDims:function(){return Ln.dt4},expm1:function(){return Ln.t$B},eye:function(){return Ln.iyy},fft:function(){return Ln.kp_},fill:function(){return Ln.hlL},findBackend:function(){return hn.x3},findBackendFactory:function(){return hn.ze},floor:function(){return Ln.GWj},floorDiv:function(){return Ln.qPi},fused:function(){return Ln.imm},gather:function(){return Ln.Iqj},gatherND:function(){return Ln.dbB},gather_util:function(){return s},getBackend:function(){return hn.N_},getGradient:function(){return xt.uk},getKernel:function(){return xt.pI},getKernelsForBackend:function(){return xt.tr},grad:function(){return kn.UQ},grads:function(){return kn.ti},greater:function(){return Ln.pjt},greaterEqual:function(){return Ln.brS},ifft:function(){return Ln.Sxn},imag:function(){return Ln.asL},image:function(){return Ln.BHj},inTopKAsync:function(){return Ln.V3u},io:function(){return a},irfft:function(){return Ln.wx0},isFinite:function(){return Ln.xVT},isInf:function(){return Ln.UWc},isNaN:function(){return Ln.i2d},keep:function(){return hn.Cn},kernel_impls:function(){return p},leakyRelu:function(){return Ln.hi7},less:function(){return Ln.d9m},lessEqual:function(){return Ln.zN1},linalg:function(){return Ln.$r2},linspace:function(){return Ln.SX3},localResponseNormalization:function(){return Ln.G9k},log:function(){return Ln.cM7},log1p:function(){return Ln.Krr},logSigmoid:function(){return Ln.e_t},logSoftmax:function(){return Ln.CmS},logSumExp:function(){return Ln.l_t},logicalAnd:function(){return Ln.HvI},logicalNot:function(){return Ln.hJK},logicalOr:function(){return Ln.K5V},logicalXor:function(){return Ln.egP},losses:function(){return Ln.MB5},lowerBound:function(){return Ln.eab},matMul:function(){return Ln.OI3},math:function(){return i},max:function(){return Ln.Fp7},maxPool:function(){return Ln._sB},maxPool3d:function(){return Ln.YQQ},maxPoolWithArgmax:function(){return Ln.Ip$},maximum:function(){return Ln.gWQ},mean:function(){return Ln.J69},memory:function(){return hn.sq},meshgrid:function(){return Ln.ry_},min:function(){return Ln.VV$},minimum:function(){return Ln.LTh},mirrorPad:function(){return Ln.VdP},mod:function(){return Ln.wQq},moments:function(){return Ln.Gi7},movingAverage:function(){return Ln.p_},mul:function(){return Ln.dC7},multiRNNCell:function(){return Ln.rq4},multinomial:function(){return Ln.SJ_},neg:function(){return Ln.W76},nextFrame:function(){return Un},norm:function(){return Ln.KOy},notEqual:function(){return Ln.Quu},oneHot:function(){return Ln.lfX},ones:function(){return Ln.iUs},onesLike:function(){return Ln.JpU},op:function(){return Ln.op},outerProduct:function(){return Ln.N2O},pad:function(){return Ln.vku},pad1d:function(){return Ln.pNR},pad2d:function(){return Ln.koy},pad3d:function(){return Ln.t1L},pad4d:function(){return Ln.lGY},pool:function(){return Ln.d_R},pow:function(){return Ln.sQ3},prelu:function(){return Ln.AL3},print:function(){return Ln.S0v},prod:function(){return Ln.WVs},profile:function(){return hn.N5},rand:function(){return Ln.TN_},randomGamma:function(){return Ln.wzB},randomNormal:function(){return Ln.nGf},randomStandardNormal:function(){return Ln.ruB},randomUniform:function(){return Ln.LGj},range:function(){return Ln.w6H},ready:function(){return hn.Cd},real:function(){return Ln.kwC},reciprocal:function(){return Ln.M25},registerBackend:function(){return hn.jq},registerGradient:function(){return xt.Li},registerKernel:function(){return xt.wC},relu:function(){return Ln.UYe},relu6:function(){return Ln.btT},removeBackend:function(){return hn.cj},reshape:function(){return Ln.XLQ},reverse:function(){return Ln.GYS},reverse1d:function(){return Ln.SDf},reverse2d:function(){return Ln.diP},reverse3d:function(){return Ln.sx7},reverse4d:function(){return Ln.mG2},rfft:function(){return Ln.QEs},round:function(){return Ln.NMM},rsqrt:function(){return Ln.bp0},scalar:function(){return Ln.iD$},scatterND:function(){return Ln.snQ},scatter_util:function(){return Ot},searchSorted:function(){return Ln.zcT},selu:function(){return Ln.U8D},separableConv2d:function(){return Ln.U_I},serialization:function(){return c},setBackend:function(){return hn.CQ},setPlatform:function(){return hn.VY},setdiff1dAsync:function(){return Ln.ODp},sigmoid:function(){return Ln.XD2},sign:function(){return Ln.Xxe},signal:function(){return Ln.tdS},sin:function(){return Ln.O$l},sinh:function(){return Ln.R_K},slice:function(){return Ln.tPi},slice1d:function(){return Ln.jZU},slice2d:function(){return Ln.SmN},slice3d:function(){return Ln.CnO},slice4d:function(){return Ln.p0P},slice_util:function(){return u},softmax:function(){return Ln.XAC},softplus:function(){return Ln.Wvh},spaceToBatchND:function(){return Ln.fBT},sparse:function(){return Ln.rVs},sparseToDense:function(){return Ln.ers},spectral:function(){return Ln.uN7},split:function(){return Ln.Vl2},sqrt:function(){return Ln._b3},square:function(){return Ln.h62},squaredDifference:function(){return Ln.$i},squeeze:function(){return Ln.L9e},stack:function(){return Ln.knu},step:function(){return Ln.Nbs},stridedSlice:function(){return Ln.NXj},string:function(){return Ln.Z_8},sub:function(){return Ln.luU},sum:function(){return Ln.Smz},sumOutType:function(){return Fn.z4},tan:function(){return Ln.ORZ},tanh:function(){return Ln.AEp},tensor:function(){return Ln.XeE},tensor1d:function(){return Ln.RRF},tensor2d:function(){return Ln.odF},tensor3d:function(){return Ln.wOQ},tensor4d:function(){return Ln.yXz},tensor5d:function(){return Ln.Bfx},tensor6d:function(){return Ln.xZs},tensor_util:function(){return Qt},test_util:function(){return l},tidy:function(){return hn.lu},tile:function(){return Ln.Gg6},time:function(){return hn.XV},topk:function(){return Ln.hg7},train:function(){return zn},transpose:function(){return Ln.p4s},truncatedNormal:function(){return Ln.Xu6},unique:function(){return Ln.Two},unregisterGradient:function(){return xt.bt},unregisterKernel:function(){return xt.nE},unsortedSegmentSum:function(){return Ln.pUJ},unstack:function(){return Ln.HHK},upcastType:function(){return Fn.x8},upperBound:function(){return Ln.GaM},util:function(){return $t},valueAndGrad:function(){return kn.h7},valueAndGrads:function(){return kn.fN},variable:function(){return Ln.VD$},variableGrads:function(){return kn.pn},version_core:function(){return dn},where:function(){return Ln.arb},whereAsync:function(){return Ln.itS},zeros:function(){return Ln.lls},zerosLike:function(){return Ln.P84}});var r={};n.r(r),n.d(r,{isBrowser:function(){return y},isMobile:function(){return g},mockIsMobile:function(){return v}});var a={};n.r(a),n.d(a,{browserFiles:function(){return Ge},browserHTTPRequest:function(){return rt},concatenateArrayBuffers:function(){return V},copyModel:function(){return Te},decodeWeights:function(){return P},encodeWeights:function(){return A},fromMemory:function(){return st},fromMemorySync:function(){return ut},getLoadHandlers:function(){return Y},getModelArtifactsForJSON:function(){return U},getModelArtifactsInfoForJSON:function(){return W},getSaveHandlers:function(){return K},http:function(){return nt},isHTTPScheme:function(){return et},listModels:function(){return Se},loadWeights:function(){return Ke},moveModel:function(){return Ne},registerLoadRouter:function(){return X},registerSaveRouter:function(){return q},removeModel:function(){return _e},weightsLoaderFactory:function(){return Qe},withSaveHandler:function(){return ct},withSaveHandlerSync:function(){return lt}});var i={};n.r(i),n.d(i,{confusionMatrix:function(){return gt}});var o={};n.r(o),n.d(o,{fromPixels:function(){return Et},fromPixelsAsync:function(){return Ct},toPixels:function(){return It}});var s={};n.r(s),n.d(s,{prepareAndValidate:function(){return Nt}});var u={};n.r(u),n.d(u,{assertParamsValid:function(){return At},computeFlatOffset:function(){return Wt},computeOutShape:function(){return Pt},getNormalizedAxes:function(){return Ft},isSliceContinous:function(){return jt},maskToAxes:function(){return Rt},parseSliceParams:function(){return Gt},sliceInfo:function(){return Ht},startForAxis:function(){return Zt},startIndicesWithElidedDims:function(){return Lt},stopForAxis:function(){return Ut},stopIndicesWithElidedDims:function(){return Vt},stridesForAxis:function(){return zt},stridesWithElidedDims:function(){return Dt}});var c={};n.r(c),n.d(c,{Serializable:function(){return Xt},SerializationMap:function(){return Kt},registerClass:function(){return Yt}});var l={};n.r(l),n.d(l,{TEST_EPSILON_FLOAT16:function(){return Jt},encodeStrings:function(){return ln},expectArrayBuffersEqual:function(){return cn},expectArraysClose:function(){return en},expectArraysEqual:function(){return an},expectNumbersClose:function(){return on},expectPromiseToFail:function(){return rn},expectValuesInRange:function(){return un},testEpsilon:function(){return tn}});var d={};n.r(d),n.d(d,{collectGatherOpShapeInfo:function(){return Ur},computeOutShape:function(){return Zr},segOpComputeOptimalWindowSize:function(){return zr}});var f={};n.r(f),n.d(f,{ERF_A1:function(){return ir},ERF_A2:function(){return or},ERF_A3:function(){return sr},ERF_A4:function(){return ur},ERF_A5:function(){return cr},ERF_P:function(){return ar},PARALLELIZE_THRESHOLD:function(){return Xn},SELU_SCALE:function(){return rr},SELU_SCALEALPHA:function(){return nr},applyActivation:function(){return qn.QH},assertAndGetBroadcastShape:function(){return yt.assertAndGetBroadcastShape},assertAxesAreInnerMostDims:function(){return jn.lB},assertParamsConsistent:function(){return Wn},assignToTypedArray:function(){return vr},axesAreInnerMostDims:function(){return jn.YB},calculateShapes:function(){return Ot.calculateShapes},checkEinsumDimSizes:function(){return Sr},checkPadOnDimRoundingMode:function(){return Hn.m},combineLocations:function(){return jn.Vh},complexWithEvenIndex:function(){return pr},complexWithOddIndex:function(){return hr},computeConv2DInfo:function(){return Hn.Ix},computeConv3DInfo:function(){return Hn.jw},computeDefaultPad:function(){return Hn.aO},computeDilation2DInfo:function(){return Hn.Rf},computeOptimalWindowSize:function(){return Kn},computeOutAndReduceShapes:function(){return jn.kz},computeOutShape:function(){return Gn},computePool2DInfo:function(){return Hn.Xw},computePool3DInfo:function(){return Hn.pl},convertConv2DDataFormat:function(){return Hn.sl},decodeEinsumEquation:function(){return kr},eitherStridesOrDilationsAreOne:function(){return Hn.jT},expandShapeToKeepDim:function(){return jn.rv},exponent:function(){return yr},exponents:function(){return gr},fromStringArrayToUint8:function(){return Wr},fromUint8ToStringArray:function(){return jr},getAxesPermutation:function(){return jn.Q3},getBroadcastDims:function(){return yt.getBroadcastDims},getComplexWithIndex:function(){return mr},getEinsumComputePath:function(){return Cr},getEinsumPermutation:function(){return wr},getFusedBiasGradient:function(){return qn.pf},getFusedDyActivation:function(){return qn.Fr},getImageCenter:function(){return Yn},getInnerMostAxes:function(){return jn.sY},getPermuted:function(){return $n},getReductionAxes:function(){return yt.getReductionAxes},getReshaped:function(){return Qn},getReshapedPermuted:function(){return Jn},getSliceBeginCoords:function(){return er},getSliceSize:function(){return tr},getSparseFillEmptyRowsIndicesDenseShapeMismatch:function(){return Er},getSparseFillEmptyRowsNegativeIndexErrorMessage:function(){return Nr},getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:function(){return Or},getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:function(){return Pr},getSparseReshapeInputOutputMismatchErrorMessage:function(){return Br},getSparseReshapeInputOutputMultipleErrorMessage:function(){return Dr},getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:function(){return Ar},getSparseReshapeNegativeOutputDimErrorMessage:function(){return Rr},getSparseSegmentReductionIndicesOutOfRangeErrorMessage:function(){return Vr},getSparseSegmentReductionNegativeSegmentIdsErrorMessage:function(){return Mr},getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:function(){return Fr},getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:function(){return Lr},getUndoAxesPermutation:function(){return jn.LJ},isIdentityPermutation:function(){return _r},log:function(){return lr.c},mergeRealAndImagArrays:function(){return dr},prepareAndValidate:function(){return Nt},prepareSplitSize:function(){return Tr},segment_util:function(){return d},shouldFuse:function(){return qn.uy},slice_util:function(){return u},splitRealAndImagArrays:function(){return fr},tupleValuesAreOne:function(){return Hn.I0},upcastType:function(){return Fn.x8},validateInput:function(){return Ot.validateInput},validateUpdateShape:function(){return Ot.validateUpdateShape},warn:function(){return lr.Z}});var p={};n.r(p),n.d(p,{nonMaxSuppressionV3Impl:function(){return Gr.GP},nonMaxSuppressionV4Impl:function(){return Gr.qP},nonMaxSuppressionV5Impl:function(){return Gr.pA},whereImpl:function(){return Hr.Z}});var h,m=n(318);function v(e){h=e}function g(e){if(void 0!==h)return h;if(e||"undefined"!==typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;var t=e.userAgent||e.vendor||("undefined"!==typeof window?window.opera:"");if(!t){var n=e;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function y(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}var b=n(5050),x=(0,b.OB)();x.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),x.registerFlag("IS_BROWSER",(function(){return y()})),x.registerFlag("IS_NODE",(function(){return"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node})),x.registerFlag("IS_CHROME",(function(){return"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),x.registerFlag("PROD",(function(){return!1})),x.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return x.getBool("DEBUG")})),x.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),x.registerFlag("IS_TEST",(function(){return!1})),x.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(function(){return!0})),x.registerFlag("WRAP_TO_IMAGEBITMAP",(function(){return!1})),x.registerFlag("ENGINE_COMPILE_ONLY",(function(){return!1}));var k=n(5671),w=n(3144),S=n(7762),C=n(4165),_=n(5861),I=n(9439),T=n(9253),E=n(2442),N=n(6147),O={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};function A(e,t){return R.apply(this,arguments)}function R(){return R=(0,_.Z)((0,C.Z)().mark((function e(t,n){var r,a,i,o,s,u;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=[],a=[],i=Array.isArray(t)?t.map((function(e){return e.name})):Object.keys(t),o=function(e){var o=i[e],s=Array.isArray(t)?t[e].tensor:t[o];if("float32"!==s.dtype&&"int32"!==s.dtype&&"bool"!==s.dtype&&"string"!==s.dtype&&"complex64"!==s.dtype)throw new Error("Unsupported dtype in weight '".concat(o,"': ").concat(s.dtype));var u={name:o,shape:s.shape,dtype:s.dtype};if("string"===s.dtype){var c=new Promise(function(){var e=(0,_.Z)((0,C.Z)().mark((function e(t){var n,r,a,i,o,u,c;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.bytes();case 2:for(n=e.sent,r=n.reduce((function(e,t){return e+t.length}),0)+4*n.length,a=new Uint8Array(r),i=0,o=0;o<n.length;o++)u=n[o],c=new Uint8Array(new Uint32Array([u.length]).buffer),a.set(c,i),i+=4,a.set(u,i),i+=u.length;t(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());a.push(c)}else a.push(s.data());null!=n&&(u.group=n),r.push(u)},s=0;s<i.length;++s)o(s);return e.next=7,Promise.all(a);case 7:return u=e.sent,e.abrupt("return",{data:D(u),specs:r});case 9:case"end":return e.stop()}}),e)}))),R.apply(this,arguments)}function P(e,t){var n,r,a={},i=0,o=(0,S.Z)(t);try{for(o.s();!(r=o.n()).done;){var s=r.value,u=s.name,c=s.dtype,l=s.shape,d=(0,N.NA)(l),f=void 0;if("quantization"in s){var p=s.quantization;if("uint8"===p.dtype||"uint16"===p.dtype){if(!("min"in p)||!("scale"in p))throw new Error("Weight ".concat(s.name," with quantization ").concat(p.dtype," ")+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==p.dtype)throw new Error("Weight ".concat(s.name," has unknown ")+"quantization dtype ".concat(p.dtype,". ")+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==c)throw new Error("Weight ".concat(s.name," is quantized with ").concat(p.dtype," ")+"which only supports weights of type float32 not ".concat(c,"."))}var h=O[p.dtype],m=e.slice(i,i+d*h),v="uint8"===p.dtype?new Uint8Array(m):new Uint16Array(m);if("float32"===c)if("uint8"===p.dtype||"uint16"===p.dtype){f=new Float32Array(v.length);for(var g=0;g<v.length;g++){var y=v[g];f[g]=y*p.scale+p.min}}else{if("float16"!==p.dtype)throw new Error("Unsupported quantization type ".concat(p.dtype," ")+"for weight type float32.");void 0===n&&(n=G()),f=n(v)}else{if("int32"!==c)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(c));if("uint8"!==p.dtype&&"uint16"!==p.dtype)throw new Error("Unsupported quantization type ".concat(p.dtype," ")+"for weight type int32.");f=new Int32Array(v.length);for(var b=0;b<v.length;b++){var x=v[b];f[b]=Math.round(x*p.scale+p.min)}}i+=d*h}else if("string"===c){var k=(0,N.NA)(s.shape);f=[];for(var w=0;w<k;w++){var C=new Uint32Array(e.slice(i,i+4))[0];i+=4;var _=new Uint8Array(e.slice(i,i+C));f.push(_),i+=C}}else{var I=O[c],A=e.slice(i,i+d*I);if("float32"===c)f=new Float32Array(A);else if("int32"===c)f=new Int32Array(A);else if("bool"===c)f=new Uint8Array(A);else{if("complex64"!==c)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(c));f=new Float32Array(A);for(var R=new Float32Array(f.length/2),P=new Float32Array(f.length/2),D=0;D<R.length;D++)R[D]=f[2*D],P[D]=f[2*D+1];var B=(0,E.X)(R,l,"float32"),M=(0,E.X)(P,l,"float32");a[u]=(0,T.P)(B,M),B.dispose(),M.dispose()}i+=d*I}"complex64"!==c&&(a[u]=(0,E.X)(f,l,c))}}catch(F){o.e(F)}finally{o.f()}return a}function D(e){if(null===e)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(e.constructor.name))}));var r=new Uint8Array(t),a=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),a),a+=e.byteLength})),r.buffer}var B="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function M(e){return B?Buffer.byteLength(e):new Blob([e]).size}function F(e){if(B)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function L(e){if(B){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}function V(e){if(1===e.length)return e[0];var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function z(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function Z(e,t){var n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function U(e,t){return j.apply(this,arguments)}function j(){return j=(0,_.Z)((0,C.Z)().mark((function e(t,n){var r,a,i,o,s;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy},null!=t.trainingConfig&&(r.trainingConfig=t.trainingConfig),null==t.weightsManifest){e.next=11;break}return e.next=5,n(t.weightsManifest);case 5:a=e.sent,i=(0,I.Z)(a,2),o=i[0],s=i[1],r.weightSpecs=o,r.weightData=s;case 11:return null!=t.signature&&(r.signature=t.signature),null!=t.userDefinedMetadata&&(r.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(r.modelInitializer=t.modelInitializer),e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}function W(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:M(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:M(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function G(){var e=function(){var e=function(e){for(var t=e<<13,n=0;0===(8388608&t);)n-=8388608,t<<=1;return(t&=-8388609)|n+947912704},t=new Uint32Array(2048);t[0]=0;for(var n=1;n<1024;n++)t[n]=e(n);for(var r=1024;r<2048;r++)t[r]=939524096+(r-1024<<13);return t}(),t=function(){var e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(var t=1;t<31;t++)e[t]=t<<23;for(var n=33;n<63;n++)e[n]=2147483648+(n-32<<23);return e}(),n=function(){for(var e=new Uint32Array(64),t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return function(r){for(var a=new ArrayBuffer(4*r.length),i=new Uint32Array(a),o=0;o<r.length;o++){var s=r[o],u=e[n[s>>10]+(1023&s)]+t[s>>10];i[o]=u}return new Float32Array(a)}}var H=function(){function e(){(0,k.Z)(this,e),this.saveRouters=[],this.loadRouters=[]}return(0,w.Z)(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerSaveRouter",value:function(t){e.getInstance().saveRouters.push(t)}},{key:"registerLoadRouter",value:function(t){e.getInstance().loadRouters.push(t)}},{key:"getSaveHandlers",value:function(t){return e.getHandlers(t,"save")}},{key:"getLoadHandlers",value:function(t,n){return e.getHandlers(t,"load",n)}},{key:"getHandlers",value:function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a}}]),e}(),q=function(e){return H.registerSaveRouter(e)},X=function(e){return H.registerLoadRouter(e)},K=function(e){return H.getSaveHandlers(e)},Y=function(e,t){return H.getLoadHandlers(e,t)},Q="tensorflowjs",$="models_store",J="model_info_store";function ee(){if(!(0,b.OB)().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function te(e){var t=e.result;t.createObjectStore($,{keyPath:"modelPath"}),t.createObjectStore(J,{keyPath:"modelPath"})}var ne=function(){function e(t){if((0,k.Z)(this,e),this.indexedDB=ee(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return(0,w.Z)(e,[{key:"save",value:function(){var e=(0,_.Z)((0,C.Z)().mark((function e(t){return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return e.abrupt("return",this.databaseAction(this.modelPath,t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=(0,_.Z)((0,C.Z)().mark((function e(){return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.databaseAction(this.modelPath));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"databaseAction",value:function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open(Q,1);a.onupgradeneeded=function(){return te(a)},a.onsuccess=function(){var i=a.result;if(null==t){var o=i.transaction($,"readonly"),s=o.objectStore($).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return i.close(),r(new Error("Cannot find model with path '".concat(n.modelPath,"' ")+"in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return i.close(),r(s.error)},o.oncomplete=function(){return i.close()}}else{var u,c=W(t),l=i.transaction(J,"readwrite"),d=l.objectStore(J),f=d.put({modelPath:n.modelPath,modelArtifactsInfo:c});f.onsuccess=function(){var a=(u=i.transaction($,"readwrite")).objectStore($).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:c});a.onsuccess=function(){return e({modelArtifactsInfo:c})},a.onerror=function(e){var t=(d=l.objectStore(J)).delete(n.modelPath);t.onsuccess=function(){return i.close(),r(a.error)},t.onerror=function(e){return i.close(),r(a.error)}}},f.onerror=function(e){return i.close(),r(f.error)},l.oncomplete=function(){null==u?i.close():u.oncomplete=function(){return i.close()}}}},a.onerror=function(e){return r(a.error)}}))}}]),e}();ne.URL_SCHEME="indexeddb://";var re=function(e){return(0,b.OB)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(ne.URL_SCHEME)?(t=e.slice(ne.URL_SCHEME.length),new ne(t)):null;var t};H.registerSaveRouter(re),H.registerLoadRouter(re);var ae=function(){function e(){(0,k.Z)(this,e),this.indexedDB=ee()}return(0,w.Z)(e,[{key:"listModels",value:function(){var e=(0,_.Z)((0,C.Z)().mark((function e(){var t=this;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.indexedDB.open(Q,1);r.onupgradeneeded=function(){return te(r)},r.onsuccess=function(){var t=r.result,a=t.transaction(J,"readonly"),i=a.objectStore(J).getAll();i.onsuccess=function(){var t,n={},r=(0,S.Z)(i.result);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.modelPath]=a.modelArtifactsInfo}}catch(o){r.e(o)}finally{r.f()}e(n)},i.onerror=function(e){return t.close(),n(i.error)},a.oncomplete=function(){return t.close()}},r.onerror=function(e){return n(r.error)}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=(0,_.Z)((0,C.Z)().mark((function e(t){var n=this;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(r=t).startsWith(ne.URL_SCHEME)?r.slice(ne.URL_SCHEME.length):r,e.abrupt("return",new Promise((function(e,r){var a=n.indexedDB.open(Q,1);a.onupgradeneeded=function(){return te(a)},a.onsuccess=function(){var n,i=a.result,o=i.transaction(J,"readwrite"),s=o.objectStore(J),u=s.get(t);u.onsuccess=function(){if(null==u.result)return i.close(),r(new Error("Cannot find model with path '".concat(t,"' ")+"in IndexedDB."));var a=s.delete(t),o=function(){var a=(n=i.transaction($,"readwrite")).objectStore($).delete(t);a.onsuccess=function(){return e(u.result.modelArtifactsInfo)},a.onerror=function(e){return r(u.error)}};a.onsuccess=o,a.onerror=function(e){return o(),i.close(),r(u.error)}},u.onerror=function(e){return i.close(),r(u.error)},o.oncomplete=function(){null==n?i.close():n.oncomplete=function(){return i.close()}}},a.onerror=function(e){return r(a.error)}})));case 2:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ie="/",oe="tensorflowjs_models",se="info",ue="model_topology",ce="weight_specs",le="weight_data",de="model_metadata";function fe(e){return{info:[oe,e,se].join(ie),topology:[oe,e,ue].join(ie),weightSpecs:[oe,e,ce].join(ie),weightData:[oe,e,le].join(ie),modelMetadata:[oe,e,de].join(ie)}}function pe(e){for(var t=0,n=Object.values(e);t<n.length;t++){var r=n[t];window.localStorage.removeItem(r)}}function he(e){var t=e.split(ie);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(ie)}var me=function(){function e(t){if((0,k.Z)(this,e),!(0,b.OB)().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=fe(this.modelPath)}return(0,w.Z)(e,[{key:"save",value:function(){var e=(0,_.Z)((0,C.Z)().mark((function e(t){var n,r,a,i;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=4;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 4:return n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=W(t),e.prev=7,this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,F(t.weightData)),i={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:null!=t.signature?t.signature:void 0,userDefinedMetadata:null!=t.userDefinedMetadata?t.userDefinedMetadata:void 0,modelInitializer:null!=t.modelInitializer?t.modelInitializer:void 0,trainingConfig:null!=t.trainingConfig?t.trainingConfig:void 0},this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),e.abrupt("return",{modelArtifactsInfo:a});case 17:throw e.prev=17,e.t0=e.catch(7),pe(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(a.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(a.weightSpecsBytes,", ")+"weightDataBytes=".concat(a.weightDataBytes,"."));case 21:case"end":return e.stop()}}),e,this,[[7,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=(0,_.Z)((0,C.Z)().mark((function e(){var t,n,r,a,i,o,s;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=JSON.parse(this.LS.getItem(this.keys.info)))){e.next=3;break}throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));case 3:if("JSON"===t.modelTopologyType){e.next=5;break}throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");case 5:if(n={},null!=(r=JSON.parse(this.LS.getItem(this.keys.topology)))){e.next=9;break}throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");case 9:if(n.modelTopology=r,null!=(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))){e.next=13;break}throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");case 13:if(n.weightSpecs=a,null!=(i=this.LS.getItem(this.keys.modelMetadata))&&(o=JSON.parse(i),n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,null!=o.signature&&(n.signature=o.signature),null!=o.userDefinedMetadata&&(n.userDefinedMetadata=o.userDefinedMetadata),null!=o.modelInitializer&&(n.modelInitializer=o.modelInitializer),null!=o.trainingConfig&&(n.trainingConfig=o.trainingConfig)),null!=(s=this.LS.getItem(this.keys.weightData))){e.next=19;break}throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));case 19:return n.weightData=L(s),e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();me.URL_SCHEME="localstorage://";var ve=function(e){return(0,b.OB)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(me.URL_SCHEME)?(t=e.slice(me.URL_SCHEME.length),new me(t)):null;var t};H.registerSaveRouter(ve),H.registerLoadRouter(ve);var ge=function(){function e(){(0,k.Z)(this,e),(0,N.hu)((0,b.OB)().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),(0,N.hu)("undefined"===typeof window||"undefined"!==typeof window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return(0,w.Z)(e,[{key:"listModels",value:function(){var e=(0,_.Z)((0,C.Z)().mark((function e(){var t,n,r,a,i,o;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={},n=oe+ie,r=ie+se,a=0;a<this.LS.length;++a)(i=this.LS.key(a)).startsWith(n)&&i.endsWith(r)&&(o=he(i),t[o]=JSON.parse(this.LS.getItem(i)));return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=(0,_.Z)((0,C.Z)().mark((function e(t){var n,r;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(a=t).startsWith(me.URL_SCHEME)?a.slice(me.URL_SCHEME.length):a,n=fe(t),null!=this.LS.getItem(n.info)){e.next=4;break}throw new Error("Cannot find model at path '".concat(t,"'"));case 4:return r=JSON.parse(this.LS.getItem(n.info)),pe(n),e.abrupt("return",r);case 7:case"end":return e.stop()}var a}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ye="://",be=function(){function e(){(0,k.Z)(this,e),this.managers={}}return(0,w.Z)(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerManager",value:function(t,n){(0,N.hu)(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(ye)&&(t=t.slice(0,t.indexOf(ye))),(0,N.hu)(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();(0,N.hu)(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '".concat(t,"'.")})),r.managers[t]=n}},{key:"getManager",value:function(t){var n=e.getInstance().managers[t];if(null==n)throw new Error("Cannot find model manager for scheme '".concat(t,"'"));return n}},{key:"getSchemes",value:function(){return Object.keys(e.getInstance().managers)}}]),e}();function xe(e){if(-1===e.indexOf(ye))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+"".concat(be.getSchemes().join(",")));return{scheme:e.split(ye)[0],path:e.split(ye)[1]}}function ke(e,t){return we.apply(this,arguments)}function we(){return we=(0,_.Z)((0,C.Z)().mark((function e(t,n){var r,a,i,o,s,u,c,l,d,f,p=arguments;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>2&&void 0!==p[2]&&p[2],(0,N.hu)(t!==n,(function(){return"Old path and new path are the same: '".concat(t,"'")})),a=H.getLoadHandlers(t),(0,N.hu)(a.length>0,(function(){return"Copying failed because no load handler is found for source URL ".concat(t,".")})),(0,N.hu)(a.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"load handlers for source URL ".concat(t,".")})),i=a[0],o=H.getSaveHandlers(n),(0,N.hu)(o.length>0,(function(){return"Copying failed because no save handler is found for destination "+"URL ".concat(n,".")})),(0,N.hu)(o.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"save handlers for destination URL ".concat(n,".")})),s=o[0],u=xe(t).scheme,c=xe(t).path,l=u===xe(t).scheme,e.next=15,i.load();case 15:if(d=e.sent,!r||!l){e.next=19;break}return e.next=19,be.getManager(u).removeModel(c);case 19:return e.next=21,s.save(d);case 21:if(f=e.sent,!r||l){e.next=25;break}return e.next=25,be.getManager(u).removeModel(c);case 25:return e.abrupt("return",f.modelArtifactsInfo);case 26:case"end":return e.stop()}}),e)}))),we.apply(this,arguments)}function Se(){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,_.Z)((0,C.Z)().mark((function e(){var t,n,r,a,i,o,s;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=be.getSchemes(),n={},r=(0,S.Z)(t),e.prev=3,r.s();case 5:if((a=r.n()).done){e.next=13;break}return i=a.value,e.next=9,be.getManager(i).listModels();case 9:for(s in o=e.sent)n[i+ye+s]=o[s];case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",n);case 22:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})))).apply(this,arguments)}function _e(e){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,_.Z)((0,C.Z)().mark((function e(t){var n,r;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=xe(t),r=be.getManager(n.scheme),e.abrupt("return",r.removeModel(n.path));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Te(e,t){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,_.Z)((0,C.Z)().mark((function e(t,n){return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1,e.abrupt("return",ke(t,n,false));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ne(e,t){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,_.Z)((0,C.Z)().mark((function e(t,n){return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!0,e.abrupt("return",ke(t,n,true));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ae=function(){function e(){(0,k.Z)(this,e)}return(0,w.Z)(e,[{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return fetch(e,t)}))},{key:"now",value:function(){return performance.now()}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return new TextDecoder(t).decode(e)}}]),e}();if((0,b.OB)().get("IS_BROWSER")){(0,b.OB)().setPlatform("browser",new Ae);try{be.registerManager(me.URL_SCHEME,new ge)}catch(Xr){}try{be.registerManager(ne.URL_SCHEME,new ae)}catch(Xr){}}var Re,Pe=function(){return n(5410)};var De=function(){function e(){(0,k.Z)(this,e),this.util=n(8628),this.textEncoder=new this.util.TextEncoder}return(0,w.Z)(e,[{key:"fetch",value:function(e,t){return null!=(0,b.OB)().global.fetch?(0,b.OB)().global.fetch(e,t):(null==Re&&(Re=Pe()),Re(e,t))}},{key:"now",value:function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}]),e}();(0,b.OB)().get("IS_NODE")&&!(0,b.OB)().get("IS_BROWSER")&&(0,b.OB)().setPlatform("node",new De);var Be=n(7039),Me=n(9118),Fe=n(672),Le=n(4600),Ve=n(4376);(0,m.wv)();var ze={buffer:Be.f,cast:Me.p,clone:Fe.d,print:Le.S};(0,Ve.Vp)(ze);var Ze=n(3433);function Ue(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var je=function(){function e(t){if((0,k.Z)(this,e),!(0,b.OB)().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelJsonFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return(0,w.Z)(e,[{key:"save",value:function(){var e=(0,_.Z)((0,C.Z)().mark((function e(t){var n,r,a,i,o,s;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof document){e.next=2;break}throw new Error("Browser downloads are not supported in this environment since `document` is not present");case 2:if(n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer)){e.next=7;break}throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 7:return r=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],a=Z(t,r),i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(o=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor).download=this.modelJsonFileName,o.href=i,e.next=15,Ue((function(){return o.dispatchEvent(new MouseEvent("click"))}));case 15:if(null==t.weightData){e.next=21;break}return(s=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,e.next=21,Ue((function(){return s.dispatchEvent(new MouseEvent("click"))}));case 21:return e.abrupt("return",{modelArtifactsInfo:W(t)});case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();je.URL_SCHEME="downloads://";var We=function(){function e(t){if((0,k.Z)(this,e),null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+"but received ".concat(t));this.jsonFile=t[0],this.weightsFiles=t.slice(1)}return(0,w.Z)(e,[{key:"load",value:function(){var e=(0,_.Z)((0,C.Z)().mark((function e(){var t=this;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.onload=function(r){var a=JSON.parse(r.target.result),i=a.modelTopology;if(null!=i)if(null!=a.weightsManifest)if(0!==t.weightsFiles.length){var o=U(a,(function(e){return t.loadWeights(e)}));e(o)}else e({modelTopology:i});else n(new Error("weightManifest field is missing from file ".concat(t.jsonFile.name)));else n(new Error("modelTopology field is missing from file ".concat(t.jsonFile.name)))},r.onerror=function(e){return n("Failed to read model topology and weights manifest JSON "+"from file '".concat(t.jsonFile.name,"'. BrowserFiles supports loading ")+"Keras-style tf.Model artifacts only.")},r.readAsText(t.jsonFile)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(e){var t,n=this,r=[],a=[],i=(0,S.Z)(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;r.push.apply(r,(0,Ze.Z)(o.weights)),a.push.apply(a,(0,Ze.Z)(o.paths))}}catch(Xr){i.e(Xr)}finally{i.f()}var s=this.checkManifestAndWeightFiles(e),u=a.map((function(e){return n.loadWeightsFile(e,s[e])}));return Promise.all(u).then((function(e){return[r,V(e)]}))}},{key:"loadWeightsFile",value:function(e,t){return new Promise((function(n,r){var a=new FileReader;a.onload=function(e){var t=e.target.result;n(t)},a.onerror=function(t){return r("Failed to weights data from file of path '".concat(e,"'."))},a.readAsArrayBuffer(t)}))}},{key:"checkManifestAndWeightFiles",value:function(e){var t,n=this,r=[],a=this.weightsFiles.map((function(e){return z(e.name)})),i={},o=(0,S.Z)(e);try{for(o.s();!(t=o.n()).done;){t.value.paths.forEach((function(e){var t=z(e);if(-1!==r.indexOf(t))throw new Error("Duplicate file basename found in weights manifest: "+"'".concat(t,"'"));if(r.push(t),-1===a.indexOf(t))throw new Error("Weight file with basename '".concat(t,"' is not provided."));i[e]=n.weightsFiles[a.indexOf(t)]}))}}catch(Xr){o.e(Xr)}finally{o.f()}if(r.length!==this.weightsFiles.length)throw new Error("Mismatch in the number of files in weights manifest "+"(".concat(r.length,") and the number of weight files provided ")+"(".concat(this.weightsFiles.length,")."));return i}}]),e}();function Ge(e){return new We(e)}function He(e,t,n,r){!function(e){(0,N.hu)(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){(0,N.hu)(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e)})),(0,N.hu)(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t)})),(0,N.hu)(t>=e,(function(){return"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t)}))}(n=null==n?0:n,r=null==r?1:r);var a=0;return Promise.all(e.map((function(i){return i.then((function(i){var o=n+ ++a/e.length*(r-n);return t(o),i})),i})))}function qe(e,t){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,_.Z)((0,C.Z)().mark((function e(t,n){var r,a,i,o,s,u,c,l,d;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),r=null==n.fetchFunc?(0,b.OB)().platform.fetch:n.fetchFunc,a=t.map((function(e){return r(e,n.requestInit,{isBinary:!0})})),i=0,o=.5,null!=n.onProgress){e.next=11;break}return e.next=8,Promise.all(a);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,He(a,n.onProgress,i,o);case 13:e.t0=e.sent;case 14:if(s=e.t0,u=s.map((function(e){return e.arrayBuffer()})),c=.5,l=1,null!=n.onProgress){e.next=24;break}return e.next=21,Promise.all(u);case 21:e.t1=e.sent,e.next=27;break;case 24:return e.next=26,He(u,n.onProgress,c,l);case 26:e.t1=e.sent;case 27:return d=e.t1,e.abrupt("return",d);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ke(e){return Ye.apply(this,arguments)}function Ye(){return Ye=(0,_.Z)((0,C.Z)().mark((function e(t){var n,r,a,i,o=arguments;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"",r=o.length>2?o[2]:void 0,a=o.length>3?o[3]:void 0,i=Qe((function(e){return qe(e,{requestInit:a})})),e.abrupt("return",i(t,n,r));case 6:case"end":return e.stop()}}),e)}))),Ye.apply(this,arguments)}function Qe(e){return function(){var t=(0,_.Z)((0,C.Z)().mark((function t(n){var r,a,i,o,s,u,c,l,d,f,p,h,m=arguments;return(0,C.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=m.length>1&&void 0!==m[1]?m[1]:"",a=m.length>2?m[2]:void 0,i=n.map((function(){return!1})),o={},s=null!=a?a.map((function(){return!1})):[],u=[],n.forEach((function(e,t){var n=0;e.weights.forEach((function(e){var r="quantization"in e?e.quantization.dtype:e.dtype,c=O[r]*N.NA(e.shape),l=function(){i[t]=!0,null==o[t]&&(o[t]=[]),o[t].push({manifestEntry:e,groupOffset:n,sizeBytes:c})};null!=a?a.forEach((function(t,n){t===e.name&&(l(),s[n]=!0)})):l(),u.push(e.name),n+=c}))})),s.every((function(e){return e}))){t.next=10;break}throw c=a.filter((function(e,t){return!s[t]})),new Error("Could not find weights in manifest with names: "+"".concat(c.join(", "),". \n")+"Manifest JSON has weights with names: "+"".concat(u.join(", "),"."));case 10:return l=i.reduce((function(e,t,n){return t&&e.push(n),e}),[]),d=[],l.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;d.push(t)}))})),t.next=15,e(d);case 15:return f=t.sent,p={},h=0,l.forEach((function(e){for(var t=n[e].paths.length,r=0,a=0;a<t;a++)r+=f[h+a].byteLength;for(var i=new ArrayBuffer(r),s=new Uint8Array(i),u=0,c=0;c<t;c++){var l=new Uint8Array(f[h+c]);s.set(l,u),u+=l.byteLength}o[e].forEach((function(e){var t=P(i.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)p[n]=t[n]})),h+=t})),t.abrupt("return",p);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}H.registerSaveRouter((function(e){return(0,b.OB)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(je.URL_SCHEME)?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new je(e)}(e.slice(je.URL_SCHEME.length)):null}));var $e=function(){function e(t,n){if((0,k.Z)(this,e),this.DEFAULT_METHOD="POST",null==n&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,null!=n.fetchFunc?((0,N.hu)("function"===typeof n.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=n.fetchFunc):this.fetch=(0,b.OB)().platform.fetch,(0,N.hu)(null!=t&&t.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(t)&&(0,N.hu)(2===t.length,(function(){return"URL paths for http must have a length of 2, "+"(actual length is ".concat(t.length,").")})),this.path=t,null!=n.requestInit&&null!=n.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return(0,w.Z)(e,[{key:"save",value:function(){var e=(0,_.Z)((0,C.Z)().mark((function e(t){var n,r,a,i;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");case 2:return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],a=Z(t,r),n.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),null!=t.weightData&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),e.next=10,this.fetch(this.path,n);case 10:if(!(i=e.sent).ok){e.next=15;break}return e.abrupt("return",{modelArtifactsInfo:W(t),responses:[i]});case 15:throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(i.status,"."));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=(0,_.Z)((0,C.Z)().mark((function e(){var t,n,r,a,i,o=this;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(this.path,this.requestInit);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(t.status,". Please verify this URL points to ")+"the model JSON of the model to load.");case 5:return e.prev=5,e.next=8,t.json();case 8:n=e.sent,e.next=16;break;case 11:throw e.prev=11,e.t0=e.catch(5),r="Failed to parse model JSON of response from ".concat(this.path,"."),this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 16:if(a=n.modelTopology,i=n.weightsManifest,null!=a||null!=i){e.next=20;break}throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");case 20:return e.abrupt("return",U(n,(function(e){return o.loadWeights(e)})));case 21:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(){var e=(0,_.Z)((0,C.Z)().mark((function e(t){var n,r,a,i,o,s,u,c,l,d,f,p,h,m,v,g,y,b,x;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Array.isArray(this.path)?this.path[1]:this.path,r=Je(n),a=(0,I.Z)(r,2),i=a[0],o=a[1],s=this.weightPathPrefix||i,u=[],c=(0,S.Z)(t);try{for(c.s();!(l=c.n()).done;)d=l.value,u.push.apply(u,(0,Ze.Z)(d.weights))}catch(Xr){c.e(Xr)}finally{c.f()}f=[],p=[],h=(0,S.Z)(t);try{for(h.s();!(m=h.n()).done;){v=m.value,g=(0,S.Z)(v.paths);try{for(g.s();!(y=g.n()).done;)b=y.value,null!=this.weightUrlConverter?p.push(this.weightUrlConverter(b)):f.push(s+b+o)}catch(Xr){g.e(Xr)}finally{g.f()}}}catch(Xr){h.e(Xr)}finally{h.f()}if(!this.weightUrlConverter){e.next=19;break}return e.t0=f.push,e.t1=f,e.t2=Ze.Z,e.next=16,Promise.all(p);case 16:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 19:return e.next=21,qe(f,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});case 21:return x=e.sent,e.abrupt("return",[u,V(x)]);case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Je(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}function et(e){return null!=e.match($e.URL_SCHEME_REGEX)}$e.URL_SCHEME_REGEX=/^https?:\/\//;var tt=function(e,t){if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;return(Array.isArray(e)?e.every((function(e){return et(e)})):et(e))?nt(e,t):null};function nt(e,t){return new $e(e,t)}function rt(e,t){return nt(e,t)}H.registerSaveRouter(tt),H.registerLoadRouter(tt);var at=function(){function e(t){(0,k.Z)(this,e),this.modelArtifacts=t}return(0,w.Z)(e,[{key:"load",value:function(){return this.modelArtifacts}}]),e}(),it=function(){function e(t){(0,k.Z)(this,e),this.saveHandler=t}return(0,w.Z)(e,[{key:"save",value:function(e){return this.saveHandler(e)}}]),e}(),ot=(0,w.Z)((function e(t){(0,k.Z)(this,e),t.load&&(this.load=function(){return Promise.resolve(t.load())}),t.save&&(this.save=function(e){return Promise.resolve(t.save(e))})}));function st(e,t,n,r){var a=arguments;return new ot(ut.apply(void 0,(0,Ze.Z)(a)))}function ut(e,t,n,r){if(1===arguments.length){var a=null!=e.modelTopology||null!=e.weightSpecs;return a?new at(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new at({modelTopology:e}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new at({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r})}function ct(e){return new it(e)}function lt(e){return new it(e)}var dt=n(8354),ft=n(7221),pt=n(4326),ht=n(8640),mt=n(1240);var vt,gt=(0,ht.op)({confusionMatrix_:function(e,t,n){var r=(0,dt._1)(e,"labels","confusionMatrix"),a=(0,dt._1)(t,"predictions","confusionMatrix");N.hu(null==n||n>0&&Number.isInteger(n),(function(){return"If provided, numClasses must be a positive integer, "+"but got ".concat(n)})),N.hu(1===r.rank,(function(){return"Expected the rank of labels to be 1, but got ".concat(r.rank)})),N.hu(1===a.rank,(function(){return"Expected the rank of predictions to be 1, "+"but got ".concat(a.rank)})),N.hu(r.shape[0]===a.shape[0],(function(){return"Mismatch in the number of examples: "+"".concat(r.shape[0]," vs. ").concat(a.shape[0],". ")+"Labels and predictions should have the same number of elements."})),N.hu(n>0&&Number.isInteger(n),(function(){return"numClasses is required to be a positive integer, but got "+"".concat(n)}));var i=(0,pt.l)((0,Me.p)(r,"int32"),n),o=(0,pt.l)((0,Me.p)(a,"int32"),n),s=(0,mt.p)(i),u=(0,ft.O)(s,o);return(0,Me.p)(u,"int32")}}),yt=n(5774),bt=n(2145),xt=n(8864),kt=n(3123);function wt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,a=!1,i=!1,o=!1,s=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!==typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement)i=!0;else if(null!=e.getContext)o=!0;else{if(!("undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, "+"but was ".concat(e.constructor.name));s=!0}if(a){var u=2;if(a&&e.readyState<u)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}var c=(0,xt.pI)(bt.eB,m.BV.backendName);if(null!=c){var l={pixels:e},d={numChannels:t};return m.BV.runKernel(bt.eB,l,d)}var f,p,h=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],v=(0,I.Z)(h,2),g=v[0],y=v[1];if(o)f=e.getContext("2d").getImageData(0,0,g,y).data;else if(r||n)f=e.data;else if(i||a||s){if(null==vt)if("undefined"===typeof document){if("undefined"===typeof OffscreenCanvas||"undefined"===typeof OffscreenCanvasRenderingContext2D)throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");vt=new OffscreenCanvas(1,1).getContext("2d")}else vt=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});vt.canvas.width=g,vt.canvas.height=y,vt.drawImage(e,0,0,g,y),f=vt.getImageData(0,0,g,y).data}if(4===t)p=new Int32Array(f);else{var b=g*y;p=new Int32Array(b*t);for(var x=0;x<b;x++)for(var k=0;k<t;++k)p[x*t+k]=f[4*x+k]}var w=[y,g,t];return(0,kt.w)(p,w,"int32")}function St(e){return"undefined"!==typeof window&&"undefined"!==typeof ImageBitmap&&window.hasOwnProperty("createImageBitmap")&&!(e instanceof ImageBitmap)&&function(e){return null!=e&&0!==e.width&&0!==e.height}(e)&&!function(e){return null!=e&&e.data instanceof Uint8Array}(e)}function Ct(e){return _t.apply(this,arguments)}function _t(){return _t=(0,_.Z)((0,C.Z)().mark((function e(t){var n,r,a,i=arguments;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:3,r=null,!(0,b.OB)().getBool("WRAP_TO_IMAGEBITMAP")||!St(t)){e.next=15;break}return e.prev=3,e.next=6,createImageBitmap(t,{premultiplyAlpha:"none"});case 6:a=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),a=null;case 12:r=null!=a&&a.width===t.width&&a.height===t.height?a:t,e.next=16;break;case 15:r=t;case 16:return e.abrupt("return",wt(r,n));case 17:case"end":return e.stop()}}),e,null,[[3,9]])}))),_t.apply(this,arguments)}function It(e,t){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,_.Z)((0,C.Z)().mark((function e(t,n){var r,a,i,o,s,u,c,l,d,f,p,h,m,v,g,y,b;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(0,dt._1)(t,"img","toPixels"),t instanceof Ve.es||(a=r,r=(0,Me.p)(a,"int32"),a.dispose()),2===r.rank||3===r.rank){e.next=4;break}throw new Error("toPixels only supports rank 2 or 3 tensors, got rank ".concat(r.rank,"."));case 4:if(i=r.shape.slice(0,2),o=(0,I.Z)(i,2),s=o[0],u=o[1],!((c=2===r.rank?1:r.shape[2])>4||2===c)){e.next=8;break}throw new Error("toPixels only supports depth of size "+"1, 3 or 4 but got ".concat(c));case 8:if("float32"===r.dtype||"int32"===r.dtype){e.next=10;break}throw new Error("Unsupported type for toPixels: ".concat(r.dtype,".")+" Please use float32 or int32 tensors.");case 10:return e.next=12,r.data();case 12:l=e.sent,d="float32"===r.dtype?255:1,f=new Uint8ClampedArray(u*s*4),p=0;case 16:if(!(p<s*u)){e.next=41;break}h=[0,0,0,255],m=0;case 19:if(!(m<c)){e.next=33;break}if(v=l[p*c+m],"float32"!==r.dtype){e.next=26;break}if(!(v<0||v>1)){e.next=24;break}throw new Error("Tensor values for a float32 Tensor must be in the "+"range [0 - 1] but encountered ".concat(v,"."));case 24:e.next=29;break;case 26:if("int32"!==r.dtype){e.next=29;break}if(!(v<0||v>255)){e.next=29;break}throw new Error("Tensor values for a int32 Tensor must be in the "+"range [0 - 255] but encountered ".concat(v,"."));case 29:1===c?(h[0]=v*d,h[1]=v*d,h[2]=v*d):h[m]=v*d;case 30:m++,e.next=19;break;case 33:f[(g=4*p)+0]=Math.round(h[0]),f[g+1]=Math.round(h[1]),f[g+2]=Math.round(h[2]),f[g+3]=Math.round(h[3]);case 38:++p,e.next=16;break;case 41:return null!=n&&(n.width=u,n.height=s,y=n.getContext("2d"),b=new ImageData(f,u,s),y.putImageData(b,0,0)),r!==t&&r.dispose(),e.abrupt("return",f);case 44:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Et=(0,ht.op)({fromPixels_:wt});function Nt(e,t){var n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[r-1]," vs. ").concat(n));if(0===(0,N.NA)(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));for(var a=t.shape,i=a[a.length-1],o=1,s=0;s<a.length-1;++s)o*=a[s];var u=e.shape,c=a.slice();c.pop();for(var l=1,d=i;d<n;++d)l*=u[d],c.push(u[d]);var f=[].concat((0,Ze.Z)((0,N.e3)(e.shape).map((function(e){return e/l}))),[1]).slice(0,i);return[c,o,l,f]}var Ot=n(8604);function At(e,t,n){var r=e.shape.length;N.hu(r===t.length,(function(){return"Error in slice".concat(r,"D: Length of begin ").concat(t," must ")+"match the rank of the array (".concat(r,").")})),N.hu(r===n.length,(function(){return"Error in slice".concat(r,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(r,").")}));for(var a=function(a){N.hu(t[a]+n[a]<=e.shape[a],(function(){return"Error in slice".concat(r,"D: begin[").concat(a,"] + size[").concat(a,"] ")+"(".concat(t[a]+n[a],") would overflow input.shape[").concat(a,"] (").concat(e.shape[a],")")}))},i=0;i<r;++i)a(i)}function Rt(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function Pt(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function Dt(e,t,n,r){for(var a=(0,Ze.Z)(e),i=a.length;i<r.length;i++)a.push(1);for(var o=0;o<n;o++)0===o?a[t]=1:(a.splice(t,0,1),a.pop());return a}function Bt(e,t,n){return n<=e?n:n-(t-1)}function Mt(e,t){for(var n=[],r=0;r<e;r++)n.push(t+r);return n}function Ft(e,t,n,r,a,i,o,s,u){var c=e.length,l=new Array(c),d=new Array(c),f=new Array(c);if(t.length&&n>0){var p=t[0],h=n+1;l=Lt(o,p,h,r,e),d=Vt(s,p,h,a,e),f=Dt(i,p,h,e)}else for(var m=0;m<c;m++)l[m]=Zt(o,r,i,e,m,u),d[m]=Ut(s,a,i,e,m,u),f[m]=zt(i,m,u);return{begin:l,end:d,strides:f}}function Lt(e,t,n,r,a){for(var i=(0,Ze.Z)(a),o=Mt(n,t),s=0;s<i.length;s++)if(o.indexOf(s)>-1)i[s]=0;else{var u=Bt(t,n,s),c=r[u];e&1<<u&&(c=0),i[s]=c}return i}function Vt(e,t,n,r,a){for(var i=(0,Ze.Z)(a),o=Mt(n,t),s=0;s<i.length;s++)if(o.indexOf(s)>-1)i[s]=Number.MAX_SAFE_INTEGER;else{var u=Bt(t,n,s),c=r[u];e&1<<u&&(c=Number.MAX_SAFE_INTEGER),i[s]=c}for(var l=0;l<i.length;l++){var d=a[l];i[l]<0&&(i[l]+=d),i[l]=N.uZ(0,i[l],a[l])}return i}function zt(e,t,n){var r=e[t];return(n&1<<t||null==r)&&(r=1),r}function Zt(e,t,n,r,a,i){var o=t[a],s=n[a]||1;(e&1<<a||i&1<<a||null==o)&&(o=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var u=r[a];return o<0&&(o+=u),o=N.uZ(0,o,u-1)}function Ut(e,t,n,r,a,i){var o=t[a],s=n[a]||1;(e&1<<a||i&1<<a||null==o)&&(o=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var u=r[a];return o<0&&(o+=u),o=s>0?N.uZ(0,o,u):N.uZ(-1,o,u-1)}function jt(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(var i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function Wt(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function Gt(e,t,n){var r,a,i=e.shape.length;return(r="number"===typeof t?[t].concat((0,Ze.Z)(new Array(i-1).fill(0))):t.length<i?t.concat(new Array(i-t.length).fill(0)):t.slice()).forEach((function(e){N.hu(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),a=(a=null==n?new Array(i).fill(-1):"number"===typeof n?[n].concat((0,Ze.Z)(new Array(i-1).fill(-1))):n.length<i?n.concat(new Array(i-n.length).fill(-1)):n).map((function(t,n){return t>=0?t:(N.hu(-1===t,(function(){return"Negative size values should be exactly -1 but got "+"".concat(t," for the slice() size at index ").concat(n,".")})),e.shape[n]-r[n])})),[r,a]}function Ht(e,t,n,r,a,i,o,s,u){var c;if(null==r?(c=new Array(t.length)).fill(1):c=r,null!=o&&0!==(o&o-1))throw new Error("Multiple ellipses in slice is not allowed.");for(var l=!1,d={dims:c.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:c.slice(),beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u},f=0;f<d.dims;f++)l&&0!==(1<<f&s)&&d.numAddAxisAfterEllipsis++,1<<f&o&&(l=!0);l||(d.ellipsisMask|=1<<d.dims,d.dims++);var p={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;var n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(var r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask)for(var a=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);n<a;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r;else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(-2),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input ")+"has only ".concat(t.dims," dims, ").concat(t.begin.length,"."));null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(-1),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(d,p);for(var h=!0,m=!0,v=!0,g=[],y=[],b=0;b<e.length;++b){if(0===p.strides[b])throw Error("strides[".concat(b,"] must be non-zero"));var x=!!(p.shrinkAxisMask&1<<b),k=e[b];if(-1!==k){var w=[p.beginMask&1<<b,p.endMask&1<<b],S=[p.strides[b]>0?0:-1,p.strides[b]>0?k:k-1];if(x&&p.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");v=v&&1===p.strides[b];var C=!!(p.beginMask&1<<b&&p.endMask&1<<b);if(p.beginValid&&p.endValid){if(x){var _=p.begin[b]<0?k+p.begin[b]:p.begin[b];if(p.begin[b]=_,p.end[b]=p.begin[b]+1,_<0||_>=k)throw Error("slice index ".concat(p.begin[b]," of dimension ").concat(b," out of bounds."))}else p.begin[b]=qt(p.begin[b],0,p.strides[b],k,w,S),p.end[b]=qt(p.end[b],1,p.strides[b],k,w,S);var I=1===p.strides[b]&&0===p.begin[b]&&p.end[b]===k;h=h&&I,m=m&&(0===b&&1===p.strides[b]||I)}else h=h&&1===p.strides[b]&&C,m=m&&(0===b&&1===p.strides[b]||C);var T=void 0,E=!1;if(p.beginValid&&p.endValid?(T=p.end[b]-p.begin[b],E=!0):x?(T=1,E=!0):C&&k>=0&&(T=p.strides[b]<0?-k:k,E=!0),E){var N=void 0;N=0===T||T<0!==p.strides[b]<0?0:Math.trunc(T/p.strides[b])+(T%p.strides[b]!==0?1:0),g.push(N)}else g.push(-1)}else g.push(x?1:-1)}for(var O=0;O<p.finalShapeGatherIndices.length;++O){var A=p.finalShapeGatherIndices[O];A>=0?y.push(g[A]):-2===A&&y.push(1)}var R=y.filter((function(e,t){return-2!==p.finalShapeGatherIndices[t]}));return{finalShapeSparse:R,finalShape:y,isIdentity:h,sliceDim0:m,isSimpleSlice:v,begin:p.begin,end:p.end,strides:p.strides}}function qt(e,t,n,r,a,i){if(a[t])return n>0?i[t]:i[t+1&1];var o=e<0?r+e:e;return o<i[0]?i[0]:o>i[1]?i[1]:o}var Xt=function(){function e(){(0,k.Z)(this,e)}return(0,w.Z)(e,[{key:"getClassName",value:function(){return this.constructor.className}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),e}(),Kt=function(){function e(){(0,k.Z)(this,e),this.classNameMap={}}return(0,w.Z)(e,null,[{key:"getMap",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"register",value:function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]}}]),e}();function Yt(e){(0,N.hu)(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),(0,N.hu)("string"===typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),(0,N.hu)(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),Kt.register(e)}var Qt=n(9064),$t=n(115),Jt=.1;function en(e,t,n){return null==n&&(n=tn()),nn(e,t,(function(e,t){return sn(e,t,n)}))}function tn(){return 32===m.BV.backend.floatPrecision()?.001:Jt}function nn(e,t,n){var r=!0;if(((0,N.fU)(e)||(0,N.fU)(t))&&(r=!1),(0,N.fU)(e)&&(0,N.fU)(t)&&(r=!0),r){var a=e.constructor.name,i=t.constructor.name;if(a!==i)throw new Error("Arrays are of different type. Actual: ".concat(a,". ")+"Expected: ".concat(i))}if(Array.isArray(e)&&Array.isArray(t)){var o=(0,dt.C)(e),s=(0,dt.C)(t);if(!(0,N.cO)(o,s))throw new Error("Arrays have different shapes. "+"Actual: [".concat(o,"]. Expected: [").concat(s,"]"))}var u=(0,N.fU)(e)?e:(0,N.xH)(e),c=(0,N.fU)(t)?t:(0,N.xH)(t);if(u.length!==c.length)throw new Error("Arrays have different lengths actual: ".concat(u.length," vs ")+"expected: ".concat(c.length,".\n")+"Actual:   ".concat(u,".\n")+"Expected: ".concat(c,"."));for(var l=0;l<c.length;++l){var d=u[l],f=c[l];if(!n(d,f))throw new Error("Arrays differ: actual[".concat(l,"] = ").concat(d,", expected[").concat(l,"] = ").concat(f,".\n")+"Actual:   ".concat(u,".\n")+"Expected: ".concat(c,"."))}}function rn(e,t){e().then((function(){return t.fail()}),(function(){return t()}))}function an(e,t){var n="string"===typeof t||"number"===typeof t||"boolean"===typeof t?[t]:t;return(0,N.HD)(e)||(0,N.HD)(e[0])||(0,N.HD)(t)||(0,N.HD)(t[0])?nn(e,n,(function(e,t){return e==t})):nn(e,t,(function(e,t){return sn(e,t,0)}))}function on(e,t,n){if(null==n&&(n=tn()),!sn(e,t,n))throw new Error("Numbers differ: actual === ".concat(e,", expected === ").concat(t))}function sn(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}function un(e,t,n){for(var r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:".concat(e[r]," low: ").concat(t,", high: ").concat(n))}function cn(e,t){var n=new Float32Array(e),r=new Float32Array(t);if(n.length!==r.length)throw new Error("Expected ArrayBuffer to be of length "+"".concat(r.length,", but it was ").concat(n.length));for(var a=0;a<r.length;a++)if(n[a]!==r[a])throw new Error("Expected ArrayBuffer value at ".concat(a," to be ")+"".concat(r[a]," but got ").concat(n[a]," instead"))}function ln(e){for(var t=0;t<e.length;t++){var n=e[t];Array.isArray(n)?ln(n):e[t]=(0,$t.encodeString)(n)}return e}var dn="3.19.0",fn=n(136),pn=n(9388),hn=n(5875),mn=n(3312),vn=n(5750),gn=n(651),yn=n(6902),bn=n(7391),xn=n(7293),kn=n(6450),wn=n(7067),Sn=function(e){(0,fn.Z)(n,e);var t=(0,pn.Z)(n);function n(){return(0,k.Z)(this,n),t.apply(this,arguments)}return(0,w.Z)(n,[{key:"minimize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.computeGradients(e,n),a=r.value,i=r.grads;if(null!=n){var o=n.map((function(e){return{name:e.name,tensor:i[e.name]}}));this.applyGradients(o)}else this.applyGradients(i);return(0,hn.B9)(i),t?a:(a.dispose(),null)}},{key:"iterations",get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}},{key:"incrementIterations",value:function(){this.iterations_=this.iterations+1}},{key:"computeGradients",value:function(e,t){return(0,kn.pn)(e,t)}},{key:"dispose",value:function(){null!=this.iterations_&&(0,hn.B9)(this.iterations_)}},{key:"saveIterations",value:function(){var e=(0,_.Z)((0,C.Z)().mark((function e(){return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==this.iterations_&&(this.iterations_=0),e.abrupt("return",{name:"iter",tensor:(0,wn.i)(this.iterations_,"int32")});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getWeights",value:function(){var e=(0,_.Z)((0,C.Z)().mark((function e(){return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for this optimizer yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,_.Z)((0,C.Z)().mark((function e(t){return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for this optimizer class "+"".concat(this.getClassName()));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"extractIterations",value:function(){var e=(0,_.Z)((0,C.Z)().mark((function e(t){return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t[0].tensor.data();case 2:return this.iterations_=e.sent[0],e.abrupt("return",t.slice(1));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Xt);Object.defineProperty(Sn,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var Cn=function(e){(0,fn.Z)(n,e);var t=(0,pn.Z)(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(0,k.Z)(this,n),(a=t.call(this)).learningRate=e,a.rho=r,a.epsilon=i,a.accumulatedGrads=[],a.accumulatedUpdates=[],null==i&&(a.epsilon=m.BV.backend.epsilon()),a}return(0,w.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=m.BV.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:"".concat(n,"/accum_grad"),variable:(0,hn.lu)((function(){return(0,xn.P)(a).variable(false)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:"".concat(n,"/accum_var"),variable:(0,hn.lu)((function(){return(0,xn.P)(a).variable(false)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable,s=t.accumulatedUpdates[r].variable;(0,hn.lu)((function(){var e=(0,mn.I)((0,gn.d)(o,t.rho),(0,gn.d)((0,bn.h)(i),1-t.rho)),n=(0,gn.d)((0,vn.h)((0,yn._)((0,mn.I)(s,t.epsilon)),(0,yn._)((0,mn.I)(o,t.epsilon))),i),r=(0,mn.I)((0,gn.d)(s,t.rho),(0,gn.d)((0,bn.h)(n),1-t.rho));o.assign(e),s.assign(r);var u=(0,mn.I)((0,gn.d)(n,-t.learningRate),a);a.assign(u)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedUpdates&&((0,hn.B9)(this.accumulatedGrads.map((function(e){return e.variable}))),(0,hn.B9)(this.accumulatedUpdates.map((function(e){return e.variable}))))}},{key:"getWeights",value:function(){var e=(0,_.Z)((0,C.Z)().mark((function e(){var t;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,Ze.Z)(this.accumulatedGrads),(0,Ze.Z)(this.accumulatedUpdates)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,_.Z)((0,C.Z)().mark((function e(t){var n;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=t.length/2,!1,this.accumulatedGrads=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedUpdates=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}]),n}(Sn);Cn.className="Adadelta",Yt(Cn);var _n=n(8582),In=function(e){(0,fn.Z)(n,e);var t=(0,pn.Z)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return(0,k.Z)(this,n),(r=t.call(this)).learningRate=e,r.initialAccumulatorValue=a,r.accumulatedGrads=[],r}return(0,w.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=m.BV.registeredVariables[n];if(null==t.accumulatedGrads[r]){t.accumulatedGrads[r]={originalName:"".concat(n,"/accumulator"),variable:(0,hn.lu)((function(){return(0,_n.h)(a.shape,t.initialAccumulatorValue).variable(false)}))}}var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable;(0,hn.lu)((function(){var e=(0,mn.I)(o,(0,bn.h)(i));o.assign(e);var n=(0,mn.I)((0,gn.d)((0,vn.h)(i,(0,yn._)((0,mn.I)(e,m.BV.backend.epsilon()))),-t.learningRate),a);a.assign(n)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedGrads&&(0,hn.B9)(this.accumulatedGrads.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=(0,_.Z)((0,C.Z)().mark((function e(){return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,_.Z)((0,C.Z)().mark((function e(t){return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulatedGrads=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}]),n}(Sn);In.className="Adagrad",Yt(In);var Tn=n(4334),En=n(4774),Nn=function(e){(0,fn.Z)(n,e);var t=(0,pn.Z)(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return(0,k.Z)(this,n),(i=t.call(this)).learningRate=e,i.beta1=r,i.beta2=a,i.epsilon=o,i.accumulatedFirstMoment=[],i.accumulatedSecondMoment=[],(0,hn.lu)((function(){i.accBeta1=(0,wn.i)(r).variable(),i.accBeta2=(0,wn.i)(a).variable()})),null==o&&(i.epsilon=m.BV.backend.epsilon()),i}return(0,w.Z)(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);(0,hn.lu)((function(){var r=(0,En.l)(1,t.accBeta1),a=(0,En.l)(1,t.accBeta2);n.forEach((function(n,i){var o=m.BV.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:(0,hn.lu)((function(){return(0,xn.P)(o).variable(false)}))}),null==t.accumulatedSecondMoment[i]&&(t.accumulatedSecondMoment[i]={originalName:"".concat(n,"/v"),variable:(0,hn.lu)((function(){return(0,xn.P)(o).variable(false)}))});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[i].variable,c=t.accumulatedSecondMoment[i].variable,l=(0,mn.I)((0,gn.d)(u,t.beta1),(0,gn.d)(s,1-t.beta1)),d=(0,mn.I)((0,gn.d)(c,t.beta2),(0,gn.d)((0,bn.h)(s),1-t.beta2)),f=(0,vn.h)(l,r),p=(0,vn.h)(d,a);u.assign(l),c.assign(d);var h=(0,mn.I)((0,gn.d)((0,vn.h)(f,(0,mn.I)((0,yn._)(p),t.epsilon)),-t.learningRate),o);o.assign(h)}})),t.accBeta1.assign((0,gn.d)(t.accBeta1,t.beta1)),t.accBeta2.assign((0,gn.d)(t.accBeta2,t.beta2))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&(0,hn.B9)(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&(0,hn.B9)(this.accumulatedSecondMoment.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=(0,_.Z)((0,C.Z)().mark((function e(){var t;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,Ze.Z)(this.accumulatedFirstMoment),(0,Ze.Z)(this.accumulatedSecondMoment)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,_.Z)((0,C.Z)().mark((function e(t){var n,r=this;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,(0,hn.lu)((function(){r.accBeta1.assign((0,Tn.s)(r.beta1,r.iterations_+1)),r.accBeta2.assign((0,Tn.s)(r.beta2,r.iterations_+1))})),n=t.length/2,!1,this.accumulatedFirstMoment=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedSecondMoment=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}]),n}(Sn);Nn.className="Adam",Yt(Nn);var On=n(7613),An=n(705),Rn=function(e){(0,fn.Z)(n,e);var t=(0,pn.Z)(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return(0,k.Z)(this,n),(i=t.call(this)).learningRate=e,i.beta1=r,i.beta2=a,i.epsilon=o,i.decay=s,i.accumulatedFirstMoment=[],i.accumulatedWeightedInfNorm=[],(0,hn.lu)((function(){i.iteration=(0,wn.i)(0).variable(),i.accBeta1=(0,wn.i)(r).variable()})),null==o&&(i.epsilon=m.BV.backend.epsilon()),i}return(0,w.Z)(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);(0,hn.lu)((function(){var r=(0,En.l)(1,t.accBeta1),a=(0,vn.h)(-t.learningRate,(0,mn.I)((0,gn.d)(t.iteration,t.decay),1));n.forEach((function(n,i){var o=m.BV.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:(0,xn.P)(o).variable(false)}),null==t.accumulatedWeightedInfNorm[i]&&(t.accumulatedWeightedInfNorm[i]={originalName:"".concat(n,"/v"),variable:(0,xn.P)(o).variable(false)});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[i].variable,c=t.accumulatedWeightedInfNorm[i].variable,l=(0,mn.I)((0,gn.d)(u,t.beta1),(0,gn.d)(s,1-t.beta1)),d=(0,gn.d)(c,t.beta2),f=(0,On.W)(s),p=(0,An.g)(d,f);u.assign(l),c.assign(p);var h=(0,mn.I)((0,gn.d)((0,vn.h)(a,r),(0,vn.h)(l,(0,mn.I)(p,t.epsilon))),o);o.assign(h)}})),t.iteration.assign((0,mn.I)(t.iteration,1)),t.accBeta1.assign((0,gn.d)(t.accBeta1,t.beta1))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&(0,hn.B9)(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&(0,hn.B9)(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=(0,_.Z)((0,C.Z)().mark((function e(){return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,_.Z)((0,C.Z)().mark((function e(t){return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}]),n}(Sn);Rn.className="Adamax",Yt(Rn);var Pn=function(e){(0,fn.Z)(n,e);var t=(0,pn.Z)(n);function n(e){var r;return(0,k.Z)(this,n),(r=t.call(this)).learningRate=e,r.setLearningRate(e),r}return(0,w.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var i=m.BV.registeredVariables[n];(0,hn.lu)((function(){var e=(0,mn.I)((0,gn.d)(t.c,a),i);i.assign(e)}))}})),this.incrementIterations()}},{key:"setLearningRate",value:function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=(0,hn.Cn)((0,wn.i)(-e))}},{key:"dispose",value:function(){this.c.dispose()}},{key:"getWeights",value:function(){var e=(0,_.Z)((0,C.Z)().mark((function e(){return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,_.Z)((0,C.Z)().mark((function e(t){return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:if(0===(t=e.sent).length){e.next=5;break}throw new Error("SGD optimizer does not have settable weights.");case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate)}}]),n}(Sn);Pn.className="SGD",Yt(Pn);var Dn=function(e){(0,fn.Z)(n,e);var t=(0,pn.Z)(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,k.Z)(this,n),(a=t.call(this,e)).learningRate=e,a.momentum=r,a.useNesterov=i,a.accumulations=[],a.m=(0,wn.i)(a.momentum),a}return(0,w.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=m.BV.registeredVariables[n];if(null==t.accumulations[r]){t.accumulations[r]={originalName:"".concat(n,"/momentum"),variable:(0,hn.lu)((function(){return(0,xn.P)(a).variable(false)}))}}var i=t.accumulations[r].variable,o=Array.isArray(e)?e[r].tensor:e[n];null!=o&&(0,hn.lu)((function(){var e,n=(0,mn.I)((0,gn.d)(t.m,i),o);e=t.useNesterov?(0,mn.I)((0,gn.d)(t.c,(0,mn.I)(o,(0,gn.d)(n,t.m))),a):(0,mn.I)((0,gn.d)(t.c,n),a),i.assign(n),a.assign(e)}))})),this.incrementIterations()}},{key:"dispose",value:function(){this.m.dispose(),null!=this.accumulations&&(0,hn.B9)(this.accumulations.map((function(e){return e.variable})))}},{key:"setMomentum",value:function(e){this.momentum=e}},{key:"getWeights",value:function(){var e=(0,_.Z)((0,C.Z)().mark((function e(){return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,_.Z)((0,C.Z)().mark((function e(t){return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulations=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}]),n}(Pn);Dn.className="Momentum",Yt(Dn);var Bn=function(e){(0,fn.Z)(n,e);var t=(0,pn.Z)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if((0,k.Z)(this,n),(r=t.call(this)).learningRate=e,r.decay=a,r.momentum=i,r.epsilon=o,r.accumulatedMeanSquares=[],r.accumulatedMoments=[],r.accumulatedMeanGrads=[],r.centered=s,null==o&&(r.epsilon=m.BV.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.");return r}return(0,w.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=m.BV.registeredVariables[n],i=!1;null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:"".concat(n,"/rms"),variable:(0,hn.lu)((function(){return(0,xn.P)(a).variable(i)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:"".concat(n,"/momentum"),variable:(0,hn.lu)((function(){return(0,xn.P)(a).variable(i)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:"".concat(n,"/mg"),variable:(0,hn.lu)((function(){return(0,xn.P)(a).variable(i)}))});var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var s=t.accumulatedMeanSquares[r].variable,u=t.accumulatedMoments[r].variable;(0,hn.lu)((function(){var e=(0,mn.I)((0,gn.d)(s,t.decay),(0,gn.d)((0,bn.h)(o),1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,i=(0,mn.I)((0,gn.d)(n,t.decay),(0,gn.d)(o,1-t.decay)),c=(0,vn.h)((0,gn.d)(o,t.learningRate),(0,yn._)((0,En.l)(e,(0,mn.I)((0,bn.h)(i),t.epsilon)))),l=(0,mn.I)((0,gn.d)(u,t.momentum),c);s.assign(e),n.assign(i),u.assign(l);var d=(0,En.l)(a,l);a.assign(d)}else{var f=(0,mn.I)((0,gn.d)(s,t.decay),(0,gn.d)((0,bn.h)(o),1-t.decay)),p=(0,mn.I)((0,gn.d)(u,t.momentum),(0,vn.h)((0,gn.d)(o,t.learningRate),(0,yn._)((0,mn.I)(f,t.epsilon))));s.assign(f),u.assign(p);var h=(0,En.l)(a,p);a.assign(h)}}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedMeanSquares&&(0,hn.B9)(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&(0,hn.B9)(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&(0,hn.B9)(this.accumulatedMoments.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=(0,_.Z)((0,C.Z)().mark((function e(){var t;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,Ze.Z)(this.accumulatedMeanSquares),(0,Ze.Z)(this.accumulatedMoments)),this.centered&&t.push.apply(t,(0,Ze.Z)(this.accumulatedMeanGrads)),e.next=4,this.saveIterations();case 4:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,_.Z)((0,C.Z)().mark((function e(t){var n,r;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=this.centered?t.length/3:t.length/2,r=!1,this.accumulatedMeanSquares=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.accumulatedMoments=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.centered&&(this.accumulatedMeanGrads=t.slice(2*n,3*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}]),n}(Sn);Bn.className="RMSProp",Yt(Bn);var Mn=function(){function e(){(0,k.Z)(this,e)}return(0,w.Z)(e,null,[{key:"sgd",value:function(e){return new Pn(e)}},{key:"momentum",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Dn(e,t,n)}},{key:"rmsprop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new Bn(e,t,n,r,a)}},{key:"adam",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new Nn(e,t,n,r)}},{key:"adadelta",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Cn(e,t,n)}},{key:"adamax",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return new Rn(e,t,n,r,a)}},{key:"adagrad",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return new In(e,t)}}]),e}(),Fn=n(3525),Ln=n(2681),Vn=n(7627),zn={sgd:Mn.sgd,momentum:Mn.momentum,adadelta:Mn.adadelta,adagrad:Mn.adagrad,rmsprop:Mn.rmsprop,adamax:Mn.adamax,adam:Mn.adam},Zn="undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof setImmediate?setImmediate:function(e){return e()};function Un(){return new Promise((function(e){return Zn((function(){return e()}))}))}var jn=n(8473);function Wn(e,t){var n=e[0].length;e.forEach((function(e,t){N.hu(e.length===n,(function(){return"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")")}))})),N.hu(t>=0&&t<n,(function(){return"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")}));var r=e[0];e.forEach((function(e,a){for(var i=0;i<n;i++)N.hu(i===t||e[i]===r[i],(function(){return"Error in concat".concat(n,"D: Shape of tensors[").concat(a,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(r,") ")+"along the non-concatenated axis ".concat(a,".")}))}))}function Gn(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}var Hn=n(9151),qn=n(5171),Xn=30;function Kn(e){return e<=Xn?e:(0,N.jP)(e,Math.floor(Math.sqrt(e)))}function Yn(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}function Qn(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var i=t.length,o=0;o<i;++o)a=a.concat([e[o+1]/t[o],t[o]]);a=a.concat(e.slice(i+1))}return a}function $n(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{for(var i=[],o=[],s=1;s<e;++s)s>=2*t+1||s%2===1?o.push(s):i.push(s);r.push.apply(r,i),r.push(0),r.push.apply(r,o)}return r}function Jn(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var i=1;i<e.length;++i)i<=t.length?r?a.push(t[i-1]*e[i]):a.push(e[i]/t[i-1]):a.push(e[i]);return a}function er(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function tr(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}var nr=1.7580993408473768,rr=1.0507009873554805,ar=.3275911,ir=.254829592,or=-.284496736,sr=1.421413741,ur=-1.453152027,cr=1.061405429,lr=n(7269);function dr(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(e.length,", imag: ").concat(t.length,"."));for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function fr(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function pr(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function hr(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function mr(e,t){return{real:e[2*t],imag:e[2*t+1]}}function vr(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function gr(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),a=0;a<Math.ceil(e/2);a++){var i=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}function yr(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}var br="->",xr=/->/g;function kr(e,t){var n=((e=e.replace(/\s/g,"")).length-e.replace(xr,"").length)/br.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(br,'").'));var r=e.split(br),a=(0,I.Z)(r,2),i=a[0],o=a[1];(0,N.hu)(-1===i.indexOf("..."),(function(){return'The ellipsis notation ("'.concat("...",'") is not supported yet.')}));var s=i.split(","),u=s.length;if(t!==u)throw new Error("Expected ".concat(u," input tensors, received ").concat(t));if(u>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");for(var c=[],l=function(e){var t=o[e];if(!s.some((function(e){return-1!==e.indexOf(t)})))throw new Error("Output subscripts contain the label ".concat(t," ")+"not present in the input subscripts.");-1===c.indexOf(t)&&c.push(t)},d=0;d<o.length;++d)l(d);for(var f=0;f<i.length;++f){var p=i[f];-1===c.indexOf(p)&&","!==p&&c.push(p)}for(var h=new Array(s.length),m=0;m<u;++m){if(new Set(s[m].split("")).size!==s[m].length)throw new Error("Found duplicate axes in input component ".concat(s[m],". ")+"Support for duplicate axes in input is not implemented yet.");h[m]=[];for(var v=0;v<s[m].length;++v)h[m].push(c.indexOf(s[m][v]))}for(var g=c.length,y=[],b=o.length;b<g;++b)y.push(b);return{allDims:c,summedDims:y,idDims:h}}function wr(e,t){var n=new Array(e);n.fill(-1);for(var r=0;r<t.length;++r)n[t[r]]=r;for(var a=[],i=0;i<e;++i)-1===n[i]&&a.push(i);return{permutationIndices:n=n.filter((function(e){return-1!==e})),expandDims:a}}function Sr(e,t,n){for(var r=new Array(e),a=function(e){for(var a=n[e].shape,i=function(n){void 0===r[t[e][n]]?r[t[e][n]]=a[n]:(0,N.hu)(r[t[e][n]]===a[n],(function(){return"Expected dimension ".concat(r[t[e][n]]," at axis ").concat(n," ")+"of input shaped ".concat(JSON.stringify(a),", ")+"but got dimension ".concat(a[n])}))},o=0;o<t[e].length;++o)i(o)},i=0;i<n.length;++i)a(i)}function Cr(e,t){var n,r=e,a=[];0===e.length&&r.push(-1),n=e.length+1;for(var i=0;i<n;++i)a.push([]);for(var o=[],s=0;s<r.length;++s){var u,c=Ir(t,r[s]),l=(0,S.Z)(c);try{for(l.s();!(u=l.n()).done;){var d=u.value;-1===o.indexOf(d)&&(a[s].push(d),o.push(d))}}catch(Xr){l.e(Xr)}finally{l.f()}}return{path:r,steps:a}}function _r(e){return e.every((function(e,t){return e===t}))}function Ir(e,t){for(var n=[],r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function Tr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"===typeof t)(0,N.hu)(e.shape[n]%t===0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(e.shape[n]/t);else{var a=t.reduce((function(e,t){return-1===t&&(e+=1),e}),0);(0,N.hu)(a<=1,(function(){return"There should be only one negative value in split array."}));var i=t.indexOf(-1);if(-1!==i){var o=t.reduce((function(e,t){return t>0?e+t:e}));t[i]=e.shape[n]-o}(0,N.hu)(e.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t}return r}function Er(e){return"Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(e)}function Nr(e,t){return"indices(".concat(e,", 0) is invalid: ").concat(t," < 0")}function Or(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}function Ar(e,t){return"only one output dimension may be -1, not both ".concat(e," and ").concat(t)}function Rr(e,t){return"size ".concat(e," must be non-negative, not ").concat(t)}function Pr(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function Dr(e,t){var n=(0,N.NA)(e),r=(0,N.NA)(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(r,". inputShape=").concat(e," outputShape= ").concat(t)}function Br(e,t){var n=(0,N.NA)(e),r=(0,N.NA)(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(r,". inputShape=").concat(e," outputShape=").concat(t)}function Mr(){return"segment ids must be >= 0"}function Fr(){return"segment ids are not increasing"}function Lr(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}function Vr(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}function zr(e,t){var n,r=!1;for(e<=Xn?(n=e,r=!0):n=(0,N.jP)(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=(0,N.jP)(e,n+1);return n}function Zr(e,t,n){for(var r=[],a=e.length,i=0;i<a;i++)i!==t?r.push(e[i]):r.push(n);return r}function Ur(e,t,n,r){var a=t.shape.length,i=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>i)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(i,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(var o=0;o<r;++o)if(e.shape[o]!==t.shape[o])throw new Error("x.shape[".concat(o,"]: ").concat(e.shape[o]," should be equal to indices.shape[").concat(o,"]: ").concat(t.shape[o],"."));for(var s=e.shape[n],u=[],c=1,l=1,d=1,f=0;f<r;++f)u.push(e.shape[f]),c*=e.shape[f];for(var p=r;p<n;p++)u.push(e.shape[p]),l*=e.shape[p];for(var h=r;h<a;h++)u.push(t.shape[h]);for(var m=n+1;m<i;m++)u.push(e.shape[m]),d*=e.shape[m];return{batchSize:c,sliceSize:d,outerSize:l,dimSize:s,outputShape:u}}function jr(e){try{return e.map((function(e){return(0,$t.decodeString)(e)}))}catch(Xr){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(Xr))}}function Wr(e){return e.map((function(e){return(0,$t.encodeString)(e)}))}var Gr=n(745),Hr=n(4189),qr=n(4679)},2145:function(e,t,n){"use strict";n.d(t,{$H:function(){return ft},$g:function(){return J},$w:function(){return X},Ac:function(){return ve},BM:function(){return Le},By:function(){return z},CA:function(){return _e},D2:function(){return Ut},Dl:function(){return ct},Eh:function(){return A},FK:function(){return Pt},G3:function(){return tn},GB:function(){return Dt},Gc:function(){return Ft},HE:function(){return te},HZ:function(){return ht},Hh:function(){return Me},Hm:function(){return vt},IK:function(){return c},IM:function(){return x},J$:function(){return Se},J_:function(){return be},Jh:function(){return g},Kg:function(){return ot},L8:function(){return Mt},Ly:function(){return C},M2:function(){return f},MI:function(){return Qt},MR:function(){return Rt},MZ:function(){return Ae},NE:function(){return ae},NZ:function(){return Ke},O3:function(){return Lt},OA:function(){return Ze},OR:function(){return le},OU:function(){return Ue},OV:function(){return ze},Om:function(){return ne},Oy:function(){return m},PY:function(){return Ne},Ph:function(){return _t},QC:function(){return v},QR:function(){return j},Qg:function(){return ye},Qi:function(){return at},Qv:function(){return an},RF:function(){return I},RO:function(){return y},RQ:function(){return Et},Ru:function(){return sn},SX:function(){return ee},SY:function(){return r},Sb:function(){return bt},Sp:function(){return i},T0:function(){return W},TQ:function(){return Bt},TR:function(){return V},To:function(){return rn},Tr:function(){return Kt},Uy:function(){return ce},VG:function(){return a},Vb:function(){return Xe},Vc:function(){return U},Vf:function(){return Oe},Vn:function(){return Q},W0:function(){return tt},XD:function(){return on},XL:function(){return k},Xk:function(){return Xt},Xz:function(){return s},Y0:function(){return oe},YF:function(){return ie},YW:function(){return zt},Yo:function(){return Fe},Zb:function(){return Te},Zj:function(){return Zt},Zz:function(){return N},_J:function(){return Ht},_V:function(){return fn},_Y:function(){return gt},_k:function(){return b},_t:function(){return jt},a5:function(){return At},aJ:function(){return d},av:function(){return xe},b9:function(){return ln},bK:function(){return Wt},bV:function(){return wt},c1:function(){return Ge},cW:function(){return Jt},ci:function(){return G},cy:function(){return et},de:function(){return ue},dp:function(){return mt},e0:function(){return kt},e6:function(){return lt},e7:function(){return Ie},eB:function(){return cn},eE:function(){return _},eZ:function(){return Be},ek:function(){return Y},gJ:function(){return T},h8:function(){return un},hd:function(){return re},i5:function(){return Ot},iH:function(){return Z},iJ:function(){return ge},iW:function(){return ke},iZ:function(){return me},ik:function(){return F},jM:function(){return h},jQ:function(){return qe},je:function(){return de},kU:function(){return Ee},kp:function(){return nn},ku:function(){return Qe},lu:function(){return pn},ly:function(){return it},m2:function(){return Gt},mK:function(){return xt},mT:function(){return Ve},mc:function(){return L},mh:function(){return R},mm:function(){return o},n9:function(){return $t},nh:function(){return Vt},nr:function(){return Ct},o0:function(){return ut},o2:function(){return M},oF:function(){return It},oH:function(){return $},oT:function(){return u},p2:function(){return Tt},p4:function(){return K},pe:function(){return st},q1:function(){return he},q2:function(){return We},q8:function(){return He},qC:function(){return Pe},qI:function(){return De},qW:function(){return nt},qi:function(){return pe},qk:function(){return pt},qw:function(){return p},r7:function(){return we},s1:function(){return qt},sE:function(){return Yt},sH:function(){return fe},sJ:function(){return l},sL:function(){return H},us:function(){return dn},uv:function(){return Je},vF:function(){return je},vt:function(){return Ce},vw:function(){return se},w3:function(){return Nt},w6:function(){return Re},wU:function(){return P},wY:function(){return Ye},we:function(){return rt},wm:function(){return D},wx:function(){return en},x1:function(){return B},xJ:function(){return dt},xQ:function(){return St},xn:function(){return E},y7:function(){return q},yQ:function(){return $e},yj:function(){return O},zb:function(){return yt},zv:function(){return S},zw:function(){return w}});var r="Abs",a="Acos",i="Acosh",o="Add",s="AddN",u="All",c="Any",l="ArgMax",d="ArgMin",f="Asin",p="Asinh",h="Atan",m="Atanh",v="Atan2",g="AvgPool",y="AvgPoolGrad",b="AvgPool3D",x="AvgPool3DGrad",k="BatchMatMul",w="BatchToSpaceND",S="Bincount",C="BroadcastTo",_="BroadcastArgs",I="Cast",T="Ceil",E="ClipByValue",N="Complex",O="ComplexAbs",A="Concat",R="Conv2D",P="Conv2DBackpropFilter",D="Conv2DBackpropInput",B="Conv3D",M="Conv3DBackpropFilterV2",F="Conv3DBackpropInputV2",L="Cos",V="Cosh",z="Cumprod",Z="Cumsum",U="CropAndResize",j="DenseBincount",W="DepthToSpace",G="DepthwiseConv2dNative",H="DepthwiseConv2dNativeBackpropFilter",q="DepthwiseConv2dNativeBackpropInput",X="Diag",K="Dilation2D",Y="Dilation2DBackpropInput",Q="Dilation2DBackpropFilter",$="RealDiv",J="Einsum",ee="Elu",te="EluGrad",ne="Erf",re="Equal",ae="Exp",ie="ExpandDims",oe="Expm1",se="FFT",ue="Fill",ce="FlipLeftRight",le="Floor",de="FloorDiv",fe="FusedBatchNorm",pe="GatherV2",he="GatherNd",me="Greater",ve="GreaterEqual",ge="Identity",ye="IFFT",be="Imag",xe="IsFinite",ke="IsInf",we="IsNan",Se="LeakyRelu",Ce="Less",_e="LessEqual",Ie="LinSpace",Te="Log",Ee="Log1p",Ne="LogicalAnd",Oe="LogicalNot",Ae="LogicalOr",Re="LogicalXor",Pe="LogSoftmax",De="LowerBound",Be="LRN",Me="LRNGrad",Fe="Max",Le="Maximum",Ve="MaxPool",ze="MaxPoolGrad",Ze="MaxPool3D",Ue="MaxPool3DGrad",je="MaxPoolWithArgmax",We="Mean",Ge="Min",He="Minimum",qe="MirrorPad",Xe="Mod",Ke="Multinomial",Ye="Multiply",Qe="Neg",$e="NotEqual",Je="NonMaxSuppressionV3",et="NonMaxSuppressionV4",tt="NonMaxSuppressionV5",nt="OnesLike",rt="OneHot",at="Pack",it="PadV2",ot="Pool",st="Pow",ut="Prelu",ct="Prod",lt="Range",dt="Real",ft="Reciprocal",pt="Relu",ht="Reshape",mt="ResizeNearestNeighbor",vt="ResizeNearestNeighborGrad",gt="ResizeBilinear",yt="ResizeBilinearGrad",bt="Relu6",xt="Reverse",kt="Round",wt="Rsqrt",St="ScatterNd",Ct="SearchSorted",_t="Select",It="Selu",Tt="Slice",Et="Sin",Nt="Sinh",Ot="Sign",At="Sigmoid",Rt="Softplus",Pt="Sqrt",Dt="Sum",Bt="SpaceToBatchND",Mt="SplitV",Ft="Softmax",Lt="SparseFillEmptyRows",Vt="SparseReshape",zt="SparseSegmentMean",Zt="SparseSegmentSum",Ut="SparseToDense",jt="SquaredDifference",Wt="Square",Gt="StridedSlice",Ht="StringNGrams",qt="StringSplit",Xt="StringToHashBucketFast",Kt="Sub",Yt="Tan",Qt="Tanh",$t="Tile",Jt="TopK",en="Transform",tn="Transpose",nn="Unique",rn="Unpack",an="UnsortedSegmentSum",on="UpperBound",sn="ZerosLike",un="Step",cn="FromPixels",ln="RotateWithOffset",dn="_FusedMatMul",fn="FusedConv2D",pn="FusedDepthwiseConv2D"},8864:function(e,t,n){"use strict";n.d(t,{Li:function(){return p},T3:function(){return v},bt:function(){return m},nE:function(){return h},pI:function(){return c},tr:function(){return d},uk:function(){return l},wC:function(){return f}});var r=n(9439),a=n(5050),i=n(6581),o=n(7269),s=(0,i.R)("kernelRegistry",(function(){return new Map})),u=(0,i.R)("gradRegistry",(function(){return new Map}));function c(e,t){var n=g(e,t);return s.get(n)}function l(e){return u.get(e)}function d(e){for(var t=s.entries(),n=[];;){var a=t.next(),i=a.done,o=a.value;if(i)break;var u=(0,r.Z)(o,2),c=u[0],l=u[1],d=c.split("_");(0,r.Z)(d,1)[0]===e&&n.push(l)}return n}function f(e){var t=e.kernelName,n=e.backendName,r=g(t,n);s.has(r)&&o.Z("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),s.set(r,e)}function p(e){var t=e.kernelName;u.has(t)&&(0,a.OB)().getBool("DEBUG")&&o.Z("Overriding the gradient for '".concat(t,"'")),u.set(t,e)}function h(e,t){var n=g(e,t);if(!s.has(n))throw new Error("The kernel '".concat(e,"' for backend ")+"'".concat(t,"' is not registered"));s.delete(n)}function m(e){if(!u.has(e))throw new Error("The gradient '".concat(e,"' for backend is not registered"));u.delete(e)}function v(e,t){d(e).forEach((function(e){f(Object.assign({},e,{backendName:t}))}))}function g(e,t){return"".concat(t,"_").concat(e)}},7269:function(e,t,n){"use strict";n.d(t,{Z:function(){return a},c:function(){return i}});var r=n(5050);function a(){var e;(0,r.OB)().getBool("IS_TEST")||(0,r.OB)().getBool("PROD")||(e=console).warn.apply(e,arguments)}function i(){var e;(0,r.OB)().getBool("IS_TEST")||(0,r.OB)().getBool("PROD")||(e=console).log.apply(e,arguments)}},7613:function(e,t,n){"use strict";n.d(t,{W:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({abs_:function(e){var t=(0,i._1)(e,"x","abs");if("complex64"===t.dtype){var n={x:t};return r.BV.runKernel(a.yj,n)}var o={x:t};return r.BV.runKernel(a.SY,o)}})},3312:function(e,t,n){"use strict";n.d(t,{I:function(){return u}});var r=n(9439),a=n(318),i=n(2145),o=n(9064),s=n(8354);var u=(0,n(8640).op)({add_:function(e,t){var n=(0,s._1)(e,"a","add"),u=(0,s._1)(t,"b","add"),c=(0,o.makeTypesMatch)(n,u),l=(0,r.Z)(c,2),d={a:n=l[0],b:u=l[1]};return a.BV.runKernel(i.mm,d)}})},8473:function(e,t,n){"use strict";n.d(t,{LJ:function(){return l},Q3:function(){return c},Vh:function(){return i},YB:function(){return a},kz:function(){return o},lB:function(){return u},rv:function(){return s},sY:function(){return d}});var r=n(6147);function a(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function i(e,t,n){for(var r=e.length+t.length,a=[],i=0,o=0,s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[i++]):a.push(t[o++]);return a}function o(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);var i=t.map((function(t){return e[t]}));return[n,i]}function s(e,t){return i(e,t.map((function(e){return 1})),t)}function u(e,t,n){r.hu(a(t,n),(function(){return"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input.")}))}function c(e,t){if(a(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function l(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function d(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}},5774:function(e,t,n){"use strict";function r(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var i=n-1-a,o=e[i]||1;(t[t.length-1-a]||1)>1&&1===o&&r.unshift(i)}return r}function a(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],i=t.length-r-1,o=t[i];(null==a||1===a&&o>1)&&n.unshift(i)}return n}function i(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var i=e[e.length-a-1];null==i&&(i=1);var o=t[t.length-a-1];if(null==o&&(o=1),1===i)n.unshift(o);else if(1===o)n.unshift(i);else{if(i!==o){var s="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(s)}n.unshift(i)}}return n}n.r(t),n.d(t,{assertAndGetBroadcastShape:function(){return i},getBroadcastDims:function(){return r},getReductionAxes:function(){return a}})},7039:function(e,t,n){"use strict";n.d(t,{f:function(){return i}});var r=n(4376),a=n(6147);function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",a.Mu(e),new r.YD(e,t,n)}},9118:function(e,t,n){"use strict";n.d(t,{p:function(){return s}});var r=n(318),a=n(2145),i=n(8354),o=n(6147);var s=(0,n(8640).op)({cast_:function(e,t){var n=(0,i._1)(e,"x","cast");if(!o.LP(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var s={x:n},u={dtype:t};return r.BV.runKernel(a.RF,s,u)}})},672:function(e,t,n){"use strict";n.d(t,{d:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({clone_:function(e){var t={x:(0,i._1)(e,"x","clone","string_or_numeric")};return r.BV.runKernel(a.iJ,t)}})},9253:function(e,t,n){"use strict";n.d(t,{P:function(){return s}});var r=n(318),a=n(2145),i=n(8354),o=n(6147);var s=(0,n(8640).op)({complex_:function(e,t){var n=(0,i._1)(e,"real","complex"),s=(0,i._1)(t,"imag","complex");o.k5(n.shape,s.shape,"real and imag shapes, ".concat(n.shape," and ").concat(s.shape,", ")+"must match in call to tf.complex().");var u={real:n,imag:s};return r.BV.runKernel(a.Zz,u)}})},9151:function(e,t,n){"use strict";n.d(t,{I0:function(){return y},Ix:function(){return c},Rf:function(){return o},Xw:function(){return s},aO:function(){return d},jT:function(){return b},jw:function(){return l},m:function(){return k},pl:function(){return u},sl:function(){return x}});var r=n(9439),a=n(3433),i=n(6147);function o(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5?arguments[5]:void 0,s=e[3],u=[].concat((0,a.Z)(t),[s]),l=x(i);return c(e,u,n,o,r,null,null,l)}function s(e,t,n,a,i,o){var s,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",l=f(t),d=(0,r.Z)(l,2),p=d[0],h=d[1];if("channelsLast"===u)s=[p,h,e[3],e[3]];else{if("channelsFirst"!==u)throw new Error("Unknown dataFormat ".concat(u));s=[p,h,e[1],e[1]]}return c(e,s,n,a,i,o,!1,u)}function u(e,t,n,a,i,o){var s,u,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC",d=p(t),f=(0,r.Z)(d,3),h=f[0],m=f[1],v=f[2];if("NDHWC"===c)u="channelsLast",s=[h,m,v,e[4],e[4]];else{if("NCDHW"!==c)throw new Error("Unknown dataFormat ".concat(c));u="channelsFirst",s=[h,m,v,e[1],e[1]]}return l(e,s,n,a,i,!1,u,o)}function c(e,t,n,a,i,o){var s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",c=-1,l=-1,d=-1,p=-1;if("channelsLast"===u){var v=(0,r.Z)(e,4);c=v[0],l=v[1],d=v[2],p=v[3]}else{if("channelsFirst"!==u)throw new Error("Unknown dataFormat ".concat(u));var g=(0,r.Z)(e,4);c=g[0],p=g[1],l=g[2],d=g[3]}var y,b=(0,r.Z)(t,4),x=b[0],k=b[1],w=b[3],S=f(n),C=(0,r.Z)(S,2),_=C[0],I=C[1],T=f(a),E=(0,r.Z)(T,2),N=E[0],O=E[1],A=h(x,N),R=h(k,O),P=m(i,l,d,_,I,A,R,o,u),D=P.padInfo,B=P.outHeight,M=P.outWidth,F=s?w*p:w;return"channelsFirst"===u?y=[c,F,B,M]:"channelsLast"===u&&(y=[c,B,M,F]),{batchSize:c,dataFormat:u,inHeight:l,inWidth:d,inChannels:p,outHeight:B,outWidth:M,outChannels:F,padInfo:D,strideHeight:_,strideWidth:I,filterHeight:x,filterWidth:k,effectiveFilterHeight:A,effectiveFilterWidth:R,dilationHeight:N,dilationWidth:O,inShape:e,outShape:y,filterShape:t}}function l(e,t,n,a,i){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",u=arguments.length>7?arguments[7]:void 0,c=-1,l=-1,d=-1,f=-1,m=-1;if("channelsLast"===s){var g=(0,r.Z)(e,5);c=g[0],l=g[1],d=g[2],f=g[3],m=g[4]}else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));var y=(0,r.Z)(e,5);c=y[0],m=y[1],l=y[2],d=y[3],f=y[4]}var b,x=(0,r.Z)(t,5),k=x[0],w=x[1],S=x[2],C=x[4],_=p(n),I=(0,r.Z)(_,3),T=I[0],E=I[1],N=I[2],O=p(a),A=(0,r.Z)(O,3),R=A[0],P=A[1],D=A[2],B=h(k,R),M=h(w,P),F=h(S,D),L=v(i,l,d,f,T,E,N,B,M,F,u),V=L.padInfo,z=L.outDepth,Z=L.outHeight,U=L.outWidth,j=o?C*m:C;return"channelsFirst"===s?b=[c,j,z,Z,U]:"channelsLast"===s&&(b=[c,z,Z,U,j]),{batchSize:c,dataFormat:s,inDepth:l,inHeight:d,inWidth:f,inChannels:m,outDepth:z,outHeight:Z,outWidth:U,outChannels:j,padInfo:V,strideDepth:T,strideHeight:E,strideWidth:N,filterDepth:k,filterHeight:w,filterWidth:S,effectiveFilterDepth:B,effectiveFilterHeight:M,effectiveFilterWidth:F,dilationDepth:R,dilationHeight:P,dilationWidth:D,inShape:e,outShape:b,filterShape:t}}function d(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=h(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function f(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function p(e){return"number"===typeof e?[e,e,e]:e}function h(e,t){return t<=1?e:e+(e-1)*(t-1)}function m(e,t,n,r,a,i,o,s,u){var c,l,f;if("number"===typeof e){c={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var p=function(e,t,n,r,a){null==r&&(r=d(e,t,n));var i=e[0],o=e[1];return[g((i-t+2*r)/n+1,a),g((o-t+2*r)/n+1,a)]}([t,n],i,r,e,s);l=p[0],f=p[1]}else if("same"===e){l=Math.ceil(t/r),f=Math.ceil(n/a);var h=Math.max(0,(l-1)*r+i-t),m=Math.max(0,(f-1)*a+o-n),v=Math.floor(h/2),y=h-v,b=Math.floor(m/2);c={top:v,bottom:y,left:b,right:m-b,type:"SAME"}}else if("valid"===e)c={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((t-i+1)/r),f=Math.ceil((n-o+1)/a);else{if("object"!==typeof e)throw Error("Unknown padding parameter: ".concat(e));var x="channelsLast"===u?e[1][0]:e[2][0],k="channelsLast"===u?e[1][1]:e[2][1],w="channelsLast"===u?e[2][0]:e[3][0],S="channelsLast"===u?e[2][1]:e[3][1];c={top:x,bottom:k,left:w,right:S,type:0===x&&0===k&&0===w&&0===S?"VALID":"EXPLICIT"},l=g((t-i+x+k)/r+1,s),f=g((n-o+w+S)/a+1,s)}return{padInfo:c,outHeight:l,outWidth:f}}function v(e,t,n,r,a,i,o,s,u,c,l){var f,p,h,m;if("number"===typeof e){f={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var v=function(e,t,n,r,a,i){null==a&&(a=d(e,t,r));var o=e[0],s=e[1],u=e[2];return[g((o-t+2*a)/r+1,i),g((s-t+2*a)/r+1,i),g((u-t+2*a)/r+1,i),n]}([t,n,r,1],s,1,a,e,l);p=v[0],h=v[1],m=v[2]}else if("same"===e){var y=((p=Math.ceil(t/a))-1)*a+s-t,b=((h=Math.ceil(n/i))-1)*i+u-n,x=((m=Math.ceil(r/o))-1)*o+c-r,k=Math.floor(y/2),w=y-k,S=Math.floor(b/2),C=b-S,_=Math.floor(x/2);f={top:S,bottom:C,left:_,right:x-_,front:k,back:w,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: ".concat(e));f={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},p=Math.ceil((t-s+1)/a),h=Math.ceil((n-u+1)/i),m=Math.ceil((r-c+1)/o)}return{padInfo:f,outDepth:p,outHeight:h,outWidth:m}}function g(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function y(e){var t=f(e),n=(0,r.Z)(t,3),a=n[0],i=n[1],o=n[2];return 1===a&&1===i&&1===o}function b(e,t){return y(e)||y(t)}function x(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}function k(e,t,n){if(null!=n){if("string"===typeof t)throw Error("Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."));if("number"===typeof t)i.hu(i.GN(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}));else{if("object"!==typeof t)throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t));t.forEach((function(t){t.forEach((function(t){i.hu(i.GN(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}))}))}))}}}},5750:function(e,t,n){"use strict";n.d(t,{h:function(){return c}});var r=n(9439),a=n(318),i=n(2145),o=n(9064),s=n(8354),u=n(7145);var c=(0,n(8640).op)({div_:function(e,t){var n=(0,s._1)(e,"a","div"),c=(0,s._1)(t,"b","div"),l=(0,o.makeTypesMatch)(n,c),d=(0,r.Z)(l,2);if(n=d[0],c=d[1],"int32"===n.dtype&&"int32"===c.dtype)return(0,u.q)(n,c);var f={a:n,b:c};return a.BV.runKernel(i.oH,f,{})}})},2353:function(e,t,n){"use strict";n.d(t,{p:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({elu_:function(e){var t={x:(0,i._1)(e,"x","elu","float32")};return r.BV.runKernel(a.SX,t)}})},8582:function(e,t,n){"use strict";n.d(t,{h:function(){return i}});var r=n(318),a=n(2145);function i(e,t,n){var i={shape:e,value:t,dtype:n};return r.BV.runKernel(a.de,{},i)}},7145:function(e,t,n){"use strict";n.d(t,{q:function(){return u}});var r=n(9439),a=n(318),i=n(2145),o=n(9064),s=n(8354);var u=(0,n(8640).op)({floorDiv_:function(e,t){var n=(0,s._1)(e,"a","floorDiv"),u=(0,s._1)(t,"b","floorDiv"),c=(0,o.makeTypesMatch)(n,u),l=(0,r.Z)(c,2),d={a:n=l[0],b:u=l[1]};return a.BV.runKernel(i.je,d)}})},5171:function(e,t,n){"use strict";n.d(t,{Fr:function(){return h},QH:function(){return v},pf:function(){return m},uy:function(){return g}});var r=n(5774),a=n(2353),i=n(4419),o=n(651),s=n(6859),u=n(7539),c=n(5900),l=n(5561),d=n(7643),f=n(4031),p=n(227);function h(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return(0,o.d)(e,(0,f.N)(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function m(e,t){var n=t,a=r.getReductionAxes(e.shape,t.shape);return a.length>0&&(n=(0,p.S)(n,a)),(0,l.X)(n,e.shape)}function v(e,t,n,r){if("linear"===t)return e;if("relu"===t)return(0,u.U)(e);if("elu"===t)return(0,a.p)(e);if("relu6"===t)return(0,c.b)(e);if("prelu"===t)return(0,s.A)(e,n);if("leakyrelu"===t)return(0,i.h)(e,r);if("sigmoid"===t)return(0,d.X)(e);throw new Error("Unknown fused activation ".concat(t,"."))}var g=function(e,t){return!(e>0)||"linear"===t}},6996:function(e,t,n){"use strict";n.d(t,{a:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({imag_:function(e){var t={input:(0,i._1)(e,"input","imag")};return r.BV.runKernel(a.J_,t)}})},4419:function(e,t,n){"use strict";n.d(t,{h:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({leakyRelu_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n=(0,i._1)(e,"x","leakyRelu"),o={x:n},s={alpha:t};return r.BV.runKernel(a.J$,o,s)}})},7627:function(e,t,n){"use strict";var r;n.d(t,{I:function(){return r}}),function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(r||(r={}))},7221:function(e,t,n){"use strict";n.d(t,{O:function(){return u}});var r=n(9439),a=n(318),i=n(2145),o=n(9064),s=n(8354);var u=(0,n(8640).op)({matMul_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=(0,s._1)(e,"a","matMul"),l=(0,s._1)(t,"b","matMul"),d=(0,o.makeTypesMatch)(c,l),f=(0,r.Z)(d,2),p={a:c=f[0],b:l=f[1]},h={transposeA:n,transposeB:u};return a.BV.runKernel(i.XL,p,h)}})},705:function(e,t,n){"use strict";n.d(t,{g:function(){return l}});var r=n(9439),a=n(318),i=n(2145),o=n(9064),s=n(8354),u=n(5774),c=n(9118);var l=(0,n(8640).op)({maximum_:function(e,t){var n=(0,s._1)(e,"a","maximum"),l=(0,s._1)(t,"b","maximum"),d=(0,o.makeTypesMatch)(n,l),f=(0,r.Z)(d,2);n=f[0],l=f[1],"bool"===n.dtype&&(n=(0,c.p)(n,"int32"),l=(0,c.p)(l,"int32")),(0,u.assertAndGetBroadcastShape)(n.shape,l.shape);var p={a:n,b:l};return a.BV.runKernel(i.BM,p)}})},651:function(e,t,n){"use strict";n.d(t,{d:function(){return u}});var r=n(9439),a=n(318),i=n(2145),o=n(9064),s=n(8354);var u=(0,n(8640).op)({mul_:function(e,t){var n=(0,s._1)(e,"a","mul"),u=(0,s._1)(t,"b","mul"),c=(0,o.makeTypesMatch)(n,u),l=(0,r.Z)(c,2),d={a:n=l[0],b:u=l[1]};return a.BV.runKernel(i.wY,d)}})},4362:function(e,t,n){"use strict";n.d(t,{W:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({neg_:function(e){var t={x:(0,i._1)(e,"x","neg")};return r.BV.runKernel(a.ku,t)}})},4326:function(e,t,n){"use strict";n.d(t,{l:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({oneHot_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));var s=(0,i._1)(e,"indices","oneHot","int32"),u={indices:s},c={depth:t,onValue:n,offValue:o};return r.BV.runKernel(a.we,u,c)}})},8640:function(e,t,n){"use strict";n.d(t,{op:function(){return o},z:function(){return i}});var r=n(318),a=n(6147),i="__op";function o(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));var n=t[0],o=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=i;var s=function(){r.BV.startScope(n);try{var e=o.apply(void 0,arguments);return(0,a.tI)(e)&&console.error("Cannot return a Promise inside of tidy."),r.BV.endScope(e),e}catch(t){throw r.BV.endScope(null),t}};return Object.defineProperty(s,"name",{value:n,configurable:!0}),s}},2681:function(e,t,n){"use strict";n.d(t,{zvA:function(){return u.z},WnP:function(){return a.W},Khb:function(){return c},__u:function(){return l},IHx:function(){return d.I},QBD:function(){return p},$6P:function(){return h},YjB:function(){return m},NqF:function(){return v},vHJ:function(){return g},ZRM:function(){return y},VfV:function(){return b},z4N:function(){return x},fvJ:function(){return S},C80:function(){return C},wS1:function(){return E},uR5:function(){return N},zEQ:function(){return F},tgs:function(){return V},Dxk:function(){return z},JY5:function(){return Z},p3b:function(){return U},E4h:function(){return L},yE8:function(){return j},anm:function(){return ur},XsQ:function(){return W},UFq:function(){return G},f3b:function(){return H.f},pju:function(){return _.p},mDi:function(){return q},iUl:function(){return X},d9v:function(){return O.d},PYB:function(){return K.P},zoF:function(){return A},gME:function(){return Y},Izb:function(){return Q},MNy:function(){return $},ZaL:function(){return J},PAt:function(){return te},Tek:function(){return ee},bc:function(){return re},pdZ:function(){return ae},$QV:function(){return oe},mCk:function(){return se},f9Y:function(){return ue},mew:function(){return yr},$Gn:function(){return ce},zbp:function(){return le},ppE:function(){return de},nTT:function(){return fe},B10:function(){return pe},Ka3:function(){return he},WmZ:function(){return me},hiC:function(){return ve.h},NTj:function(){return ke},AKD:function(){return we},rvX:function(){return vr},WYO:function(){return Se},pyx:function(){return Ce.p},GRh:function(){return gr},DgJ:function(){return ye},qNN:function(){return _e},d2q:function(){return Me},Qqt:function(){return Fe},dt4:function(){return Le},t$B:function(){return Ve},iyy:function(){return Ze},kp_:function(){return Rn},hlL:function(){return Ue.h},GWj:function(){return je},qPi:function(){return We.q},imm:function(){return r},Iqj:function(){return Ge},dbB:function(){return mr},pjt:function(){return He},brS:function(){return qe},Sxn:function(){return Pn},asL:function(){return Xe.a},BHj:function(){return Na},V3u:function(){return xr},wx0:function(){return Dn},xVT:function(){return Ke},UWc:function(){return Ye},i2d:function(){return Qe},hi7:function(){return $e.h},d9m:function(){return Je},zN1:function(){return et},$r2:function(){return Oa},SX3:function(){return tt},G9k:function(){return nt},cM7:function(){return rt},Krr:function(){return at},e_t:function(){return ut},CmS:function(){return lt},l_t:function(){return dt},HvI:function(){return ft},hJK:function(){return pt},K5V:function(){return ht},egP:function(){return mt},MB5:function(){return Aa},eab:function(){return yt},OI3:function(){return R.O},Fp7:function(){return Te},_sB:function(){return bt},YQQ:function(){return xt},Ip$:function(){return kt},gWQ:function(){return wt.g},J69:function(){return St},ry_:function(){return Tt},VV$:function(){return Ee},LTh:function(){return Et},VdP:function(){return Nt},wQq:function(){return Ot},Gi7:function(){return At},p_:function(){return lr},dC7:function(){return P.d},rq4:function(){return Rt},SJ_:function(){return Pt},W76:function(){return ot.W},KOy:function(){return Be},Quu:function(){return Dt},lfX:function(){return Bt.l},iUs:function(){return _t},JpU:function(){return Mt},op:function(){return u.op},N2O:function(){return Ft},vku:function(){return Lt},pNR:function(){return Vt},koy:function(){return zt},t1L:function(){return Zt},lGY:function(){return Ut},d_R:function(){return Wt},sQ3:function(){return Ne.s},AL3:function(){return Gt.A},S0v:function(){return Ht.S},WVs:function(){return qt},TN_:function(){return Xt},wzB:function(){return tn},nGf:function(){return nn},ruB:function(){return rn},LGj:function(){return an},w6H:function(){return on},kwC:function(){return sn.k},M25:function(){return un},UYe:function(){return cn.U},btT:function(){return ln.b},XLQ:function(){return T.X},GYS:function(){return dn},SDf:function(){return fn},diP:function(){return pn},sx7:function(){return hn},mG2:function(){return mn},QEs:function(){return Mn},NMM:function(){return vn},bp0:function(){return gn},iD$:function(){return Oe.i},snQ:function(){return fr},zcT:function(){return gt},U8D:function(){return yn},U_I:function(){return bn},ODp:function(){return Sn},XD2:function(){return D.X},Xxe:function(){return Cn},tdS:function(){return Ea},O$l:function(){return _n},R_K:function(){return In},tPi:function(){return B},jZU:function(){return Tn},SmN:function(){return En},CnO:function(){return Nn},p0P:function(){return On},XAC:function(){return An},Wvh:function(){return st},fBT:function(){return jt},rVs:function(){return Ra},ers:function(){return hr},uN7:function(){return Ta},Vl2:function(){return Bn},_b3:function(){return Ae._},h62:function(){return Re.h},$i:function(){return Fn},L9e:function(){return Ln},knu:function(){return Vn},Nbs:function(){return zn.N},NXj:function(){return Zn},Z_8:function(){return Pa},luU:function(){return ct.l},Smz:function(){return Pe.S},ORZ:function(){return Un},AEp:function(){return M},XeE:function(){return jn.X},RRF:function(){return Gn},odF:function(){return Hn},wOQ:function(){return qn.w},yXz:function(){return Xn},Bfx:function(){return Kn},xZs:function(){return Yn},Gg6:function(){return ze},hg7:function(){return Qn},p4s:function(){return cr.p},Xu6:function(){return $n},Two:function(){return Jn},pUJ:function(){return er},HHK:function(){return tr},GaM:function(){return nr},VD$:function(){return rr},arb:function(){return be},itS:function(){return or},lls:function(){return Ct},P84:function(){return xe.P}});var r={};n.r(r),n.d(r,{conv2d:function(){return Sr},depthwiseConv2d:function(){return Ir},matMul:function(){return Tr}});var a=n(7613),i=n(318),o=n(2145),s=n(8354),u=n(8640);var c=(0,u.op)({acos_:function(e){var t={x:(0,s._1)(e,"x","acos")};return i.BV.runKernel(o.VG,t)}});var l=(0,u.op)({acosh_:function(e){var t={x:(0,s._1)(e,"x","acosh")};return i.BV.runKernel(o.Sp,t)}}),d=n(3312),f=n(6147);var p=(0,u.op)({addN_:function(e){f.hu(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),f.hu(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+"".concat(e.length)}));var t=e.map((function(e,t){return(0,s._1)(e,"tensors".concat(t),"addN")})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!f.cO(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=t;return i.BV.runKernel(o.Xz,r)}});var h=(0,u.op)({all_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=(0,s._1)(e,"x","all","bool"),a={x:r},u={axis:t,keepDims:n};return i.BV.runKernel(o.oT,a,u)}});var m=(0,u.op)({any_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=(0,s._1)(e,"x","any","bool"),a={x:r},u={axis:t,keepDims:n};return i.BV.runKernel(o.IK,a,u)}});var v=(0,u.op)({argMax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,s._1)(e,"x","argMax"),r={x:n},a={axis:t};return i.BV.runKernel(o.sJ,r,a)}});var g=(0,u.op)({argMin_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,s._1)(e,"x","argMin"),r={x:n},a={axis:t};return i.BV.runKernel(o.aJ,r,a)}});var y=(0,u.op)({asin_:function(e){var t={x:(0,s._1)(e,"x","asin")};return i.BV.runKernel(o.M2,t)}});var b=(0,u.op)({asinh_:function(e){var t={x:(0,s._1)(e,"x","asinh")};return i.BV.runKernel(o.qw,t)}});var x=(0,u.op)({atan_:function(e){var t={x:(0,s._1)(e,"x","atan")};return i.BV.runKernel(o.jM,t)}}),k=n(9439),w=n(9064);var S=(0,u.op)({atan2_:function(e,t){var n=(0,s._1)(e,"a","atan2"),r=(0,s._1)(t,"b","atan2"),a=(0,w.makeTypesMatch)(n,r),u=(0,k.Z)(a,2),c={a:n=u[0],b:r=u[1]};return i.BV.runKernel(o.QC,c)}});var C=(0,u.op)({atanh_:function(e){var t={x:(0,s._1)(e,"x","atanh")};return i.BV.runKernel(o.Oy,t)}}),_=n(9118),I=n(9151),T=n(5561);var E=(0,u.op)({avgPool_:function(e,t,n,r,a){var u=(0,s._1)(e,"x","avgPool","float32");f.hu(I.jT(n,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")}));var c=u,l=!1;3===u.rank&&(l=!0,c=(0,T.X)(u,[1,u.shape[0],u.shape[1],u.shape[2]])),f.hu(4===c.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank ".concat(c.rank,".")})),I.m("avgPool",r,a);var d={x:c},p={filterSize:t,strides:n,pad:r,dimRoundingMode:a},h=i.BV.runKernel(o.Jh,d,p);return h=(0,_.p)(h,u.dtype),l?(0,T.X)(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});var N=(0,u.op)({avgPool3d_:function(e,t,n,r,a){var u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",c=(0,s._1)(e,"x","avgPool3d","float32"),l=c,d=!1;4===c.rank&&(d=!0,l=(0,T.X)(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),f.hu(5===l.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank ".concat(l.rank,".")})),f.hu("NDHWC"===u,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(u)})),(0,I.m)("avgPool3d",r,a);var p={x:l},h={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:u},m=i.BV.runKernel(o._k,p,h);return m=(0,_.p)(m,l.dtype),d?(0,T.X)(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}}),O=n(672);var A=(0,u.op)({concat_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,f.hu)(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=(0,s.sI)(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))})),1===n.length)return(0,O.d)(n[0]);var r=n,a={axis:t};return i.BV.runKernel(o.Eh,r,a)}}),R=n(7221),P=n(651),D=n(7643);var B=(0,u.op)({slice_:function(e,t,n){var r=(0,s._1)(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");var a={x:r},u={begin:t,size:n};return i.BV.runKernel(o.p2,a,u)}});var M=(0,u.op)({tanh_:function(e){var t={x:(0,s._1)(e,"x","tanh","float32")};return i.BV.runKernel(o.MI,t)}});var F=(0,u.op)({basicLSTMCell_:function(e,t,n,r,a,i){var o=(0,s._1)(e,"forgetBias","basicLSTMCell"),u=(0,s._1)(t,"lstmKernel","basicLSTMCell"),c=(0,s._1)(n,"lstmBias","basicLSTMCell"),l=(0,s._1)(r,"data","basicLSTMCell"),f=(0,s._1)(a,"c","basicLSTMCell"),p=(0,s._1)(i,"h","basicLSTMCell"),h=A([l,p],1),m=(0,R.O)(h,u),v=(0,d.I)(m,c),g=v.shape[0],y=v.shape[1]/4,b=[g,y],x=B(v,[0,0],b),k=B(v,[0,y],b),w=B(v,[0,2*y],b),S=B(v,[0,3*y],b),C=(0,d.I)((0,P.d)((0,D.X)(x),M(k)),(0,P.d)(f,(0,D.X)((0,d.I)(o,w))));return[C,(0,P.d)(M(C),(0,D.X)(S))]}});var L=(0,u.op)({batchToSpaceND_:function(e,t,n){var r=(0,s._1)(e,"x","batchToSpaceND"),a=t.reduce((function(e,t){return e*t}));f.hu(r.rank>=1+t.length,(function(){return"input rank is ".concat(r.rank," but should be > than blockShape.length ").concat(t.length)})),f.hu(n.length===t.length,(function(){return"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)})),f.hu(r.shape[0]%a===0,(function(){return"input tensor batch is ".concat(r.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(a)}));var u={x:r},c={blockShape:t,crops:n};return i.BV.runKernel(o.zw,u,c)}});var V=(0,u.op)({batchNorm_:function(e,t,n,r,a,u){null==u&&(u=.001);var c,l,d=(0,s._1)(e,"x","batchNorm"),p=(0,s._1)(t,"mean","batchNorm"),h=(0,s._1)(n,"variance","batchNorm");null!=a&&(c=(0,s._1)(a,"scale","batchNorm")),null!=r&&(l=(0,s._1)(r,"offset","batchNorm")),f.hu(p.rank===h.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),f.hu(null==l||p.rank===l.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),f.hu(null==c||p.rank===c.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var m=function(e){return 0===e.rank||1===e.rank?(0,T.X)(e,[1,1,1,e.size]):2===e.rank?(0,T.X)(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?(0,T.X)(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e}(d),v={x:m,scale:c,offset:l,mean:p,variance:h},g={varianceEpsilon:u},y=i.BV.runKernel(o.sH,v,g);return(0,T.X)(y,d.shape)}});var z=(0,u.op)({batchNorm2d_:function(e,t,n,r,a,i){var o,u,c=(0,s._1)(e,"x","batchNorm"),l=(0,s._1)(t,"mean","batchNorm"),d=(0,s._1)(n,"variance","batchNorm");return null!=a&&(o=(0,s._1)(a,"scale","batchNorm")),null!=r&&(u=(0,s._1)(r,"offset","batchNorm")),f.hu(2===c.rank,(function(){return"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(c.rank,".")})),f.hu(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(l.rank,".")})),f.hu(2===d.rank||1===d.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(d.rank,".")})),null!=o&&f.hu(2===o.rank||1===o.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=u&&f.hu(2===u.rank||1===u.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(u.rank,".")})),V(c,l,d,u,o,i)}});var Z=(0,u.op)({batchNorm3d_:function(e,t,n,r,a,i){var o,u,c=(0,s._1)(e,"x","batchNorm"),l=(0,s._1)(t,"mean","batchNorm"),d=(0,s._1)(n,"variance","batchNorm");return null!=a&&(o=(0,s._1)(a,"scale","batchNorm")),null!=r&&(u=(0,s._1)(r,"offset","batchNorm")),f.hu(3===c.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(c.rank,".")})),f.hu(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(l.rank,".")})),f.hu(3===d.rank||1===d.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(d.rank,".")})),null!=o&&f.hu(3===o.rank||1===o.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=u&&f.hu(3===u.rank||1===u.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(u.rank,".")})),V(c,l,d,u,o,i)}});var U=(0,u.op)({batchNorm4d_:function(e,t,n,r,a,i){var o,u,c=(0,s._1)(e,"x","batchNorm"),l=(0,s._1)(t,"mean","batchNorm"),d=(0,s._1)(n,"variance","batchNorm");return null!=a&&(o=(0,s._1)(a,"scale","batchNorm")),null!=r&&(u=(0,s._1)(r,"offset","batchNorm")),f.hu(4===c.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(c.rank,".")})),f.hu(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(l.rank,".")})),f.hu(4===d.rank||1===d.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(d.rank,".")})),null!=o&&f.hu(4===o.rank||1===o.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=u&&f.hu(4===u.rank||1===u.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(u.rank,".")})),V(c,l,d,u,o,i)}});var j=(0,u.op)({bincount_:function(e,t,n){var r=(0,s._1)(e,"x","bincount"),a=(0,s._1)(t,"weights","bincount");f.hu("int32"===r.dtype,(function(){return"Error in bincount: input "+"dtype must be int32, but got ".concat(r.dtype)})),f.hu(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),f.hu(a.size===r.size||0===a.size,(function(){return"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(r.shape,", weights shape: ")+"".concat(a.shape,".")}));var u={x:r,weights:a},c={size:n};return i.BV.runKernel(o.zv,u,c)}});var W=(0,u.op)({broadcastArgs_:function(e,t){var n=(0,s._1)(e,"s0","broadcastArgs","int32"),r=(0,s._1)(t,"s1","broadcastArgs","int32");if(1!==n.rank)throw new Error("broadcastArgs(): first input must be a vector (rank=1). "+"Has rank ".concat(n.rank));if(1!==r.rank)throw new Error("broadcastArgs(): second input must be a vector (rank=1). "+"Has rank ".concat(r.rank));var a={s0:n,s1:r};return i.BV.runKernel(o.eE,a)}});var G=(0,u.op)({broadcastTo_:function(e,t){var n=(0,s._1)(e,"broadcastTo","x"),r=n.shape;if(t.some((function(e){return!(e>0)||e%1!==0})))throw new Error("broadcastTo(): Invalid broadcast shape [".concat(t,"]."));if(t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){for(var a=n.shape.slice();a.length<t.length;)a.unshift(1);n=(0,T.X)(n,a)}for(var u=n.shape,c=Array.from(t),l=t.length-1;l>=0;l--)if(u[l]===t[l])c[l]=1;else if(1!==n.shape[l])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(t,"]."));var d=c.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0}));if(0===d.length)return(0,O.d)(n);var f={x:n},p={reps:c};return i.BV.runKernel(o.n9,f,p)}}),H=n(7039);var q=(0,u.op)({ceil_:function(e){var t={x:(0,s._1)(e,"x","ceil","float32")};return i.BV.runKernel(o.gJ,t)}});var X=(0,u.op)({clipByValue_:function(e,t,n){var r=(0,s._1)(e,"x","clipByValue");f.hu(t<=n,(function(){return"Error in clip: min (".concat(t,") must be ")+"less than or equal to max (".concat(n,").")}));var a={x:r},u={clipValueMin:t,clipValueMax:n};return i.BV.runKernel(o.xn,a,u)}}),K=n(9253);var Y=(0,u.op)({concat1d_:function(e){return A(e,0)}});var Q=(0,u.op)({concat2d_:function(e,t){return A(e,t)}});var $=(0,u.op)({concat3d_:function(e,t){return A(e,t)}});var J=(0,u.op)({concat4d_:function(e,t){return A(e,t)}});var ee=(0,u.op)({conv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],c=arguments.length>6?arguments[6]:void 0,l=(0,s._1)(e,"x","conv2d","float32"),d=(0,s._1)(t,"filter","conv2d","float32"),p=l,h=!1;3===l.rank&&(h=!0,p=(0,T.X)(l,[1,l.shape[0],l.shape[1],l.shape[2]])),f.hu(4===p.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank ".concat(p.rank,".")})),f.hu(4===d.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+"".concat(d.rank,".")})),I.m("conv2d",r,c);var m="NHWC"===a?p.shape[3]:p.shape[1];f.hu(m===d.shape[2],(function(){return"Error in conv2d: depth of input (".concat(m,") must match ")+"input depth for filter ".concat(d.shape[2],".")})),f.hu(I.jT(n,u),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(u,"'")}));var v={x:p,filter:d},g={strides:n,pad:r,dataFormat:a,dilations:u,dimRoundingMode:c},y=i.BV.runKernel(o.mh,v,g);return h?(0,T.X)(y,[y.shape[1],y.shape[2],y.shape[3]]):y}});var te=(0,u.op)({conv1d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6?arguments[6]:void 0,u=(0,s._1)(e,"x","conv1d"),c=(0,s._1)(t,"filter","conv1d"),l=u,d=!1;2===u.rank&&(d=!0,l=(0,T.X)(u,[1,u.shape[0],u.shape[1]])),f.hu(3===l.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank ".concat(l.rank,".")})),f.hu(3===c.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+"".concat(c.rank,".")})),I.m("conv1d",r,o),f.hu(l.shape[2]===c.shape[1],(function(){return"Error in conv1d: depth of input (".concat(l.shape[2],") must match ")+"input depth for filter ".concat(c.shape[1],".")})),f.hu(I.jT(n,i),(function(){return"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(i,"'")})),f.hu("NWC"===a,(function(){return"Error in conv1d: got dataFormat of ".concat(a," but only NWC is currently supported.")}));var p=(0,T.X)(c,[1,c.shape[0],c.shape[1],c.shape[2]]),h=(0,T.X)(l,[l.shape[0],1,l.shape[1],l.shape[2]]),m=[1,n],v=[1,i],g="NHWC",y=ee(h,p,m,r,g,v,o);return d?(0,T.X)(y,[y.shape[2],y.shape[3]]):(0,T.X)(y,[y.shape[0],y.shape[2],y.shape[3]])}});var ne=(0,u.op)({conv2DBackpropInput_:function(e,t,n,r,a){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",u=arguments.length>6?arguments[6]:void 0;f.hu(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var c=e,l=t,d=!1;3===t.rank&&(d=!0,l=(0,T.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]]),c=[1,e[0],e[1],e[2]]),f.hu(4===c.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(c.length,".")})),f.hu(4===l.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(l.rank)})),f.hu(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank)}));var p="NHWC"===s?c[3]:c[1],h="NHWC"===s?l.shape[3]:l.shape[1];f.hu(p===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input (".concat(p,") must ")+"match input depth for filter ".concat(n.shape[2],".")})),f.hu(h===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output (".concat(h,") must ")+"match output depth for filter ".concat(n.shape[3],".")})),I.m("conv2dDerInput",a,u);var m={dy:l,filter:n},v={strides:r,pad:a,dataFormat:s,dimRoundingMode:u,inputShape:c},g=i.BV.runKernel(o.wm,m,v);return d?(0,T.X)(g,[g.shape[1],g.shape[2],g.shape[3]]):g}});var re=(0,u.op)({conv2dTranspose_:function(e,t,n,r,a,i){var o=(0,s._1)(e,"x","conv2dTranspose"),u=(0,s._1)(t,"filter","conv2dTranspose");return ne(n,o,u,r,a,"NHWC",i)}});var ae=(0,u.op)({conv3d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1],c=(0,s._1)(e,"x","conv3d"),l=(0,s._1)(t,"filter","conv3d"),d=c,p=!1;4===c.rank&&(p=!0,d=(0,T.X)(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),f.hu(5===d.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank ".concat(d.rank,".")})),f.hu(5===l.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+"".concat(l.rank,".")})),f.hu(d.shape[4]===l.shape[3],(function(){return"Error in conv3d: depth of input (".concat(d.shape[4],") must match ")+"input depth for filter ".concat(l.shape[3],".")})),f.hu((0,I.jT)(n,u),(function(){return"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(u,"'")})),f.hu("NDHWC"===a,(function(){return"Error in conv3d: got dataFormat of ".concat(a," but only NDHWC is currently supported.")}));var h={x:d,filter:l},m={strides:n,pad:r,dataFormat:a,dilations:u},v=i.BV.runKernel(o.x1,h,m);return p?(0,T.X)(v,[v.shape[1],v.shape[2],v.shape[3],v.shape[4]]):v}});var ie=(0,u.op)({conv3DBackpropInput_:function(e,t,n,r,a){f.hu(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var s=e,u=t,c=!1;4===t.rank&&(c=!0,u=(0,T.X)(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),s=[1,e[0],e[1],e[2],e[3]]);var l=s[4],d=u.shape[4];f.hu(5===s.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(s.length,".")})),f.hu(5===u.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(u.rank)})),f.hu(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank)})),f.hu(l===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input (".concat(l,") must ")+"match input depth for filter ".concat(n.shape[3],".")})),f.hu(d===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output (".concat(d,") must ")+"match output depth for filter ".concat(n.shape[4],".")}));var p={dy:u,filter:n},h={pad:a,strides:r,inputShape:s},m=i.BV.runKernel(o.ik,p,h);return c?(0,T.X)(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}});var oe=(0,u.op)({conv3dTranspose_:function(e,t,n,r,a){var i=(0,s._1)(e,"x","conv3dTranspose"),o=(0,s._1)(t,"filter","conv3dTranspose");return ie(n,i,o,r,a)}});var se=(0,u.op)({cos_:function(e){var t={x:(0,s._1)(e,"x","cos","float32")};return i.BV.runKernel(o.mc,t)}});var ue=(0,u.op)({cosh_:function(e){var t={x:(0,s._1)(e,"x","cosh","float32")};return i.BV.runKernel(o.TR,t)}});var ce=(0,u.op)({cumprod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=(0,s._1)(e,"x","cumprod"),u={x:a},c={axis:t,exclusive:n,reverse:r};return i.BV.runKernel(o.By,u,c)}});var le=(0,u.op)({cumsum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=(0,s._1)(e,"x","cumsum"),u={x:a},c={axis:t,exclusive:n,reverse:r};return i.BV.runKernel(o.iH,u,c)}});var de=(0,u.op)({denseBincount_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=(0,s._1)(e,"x","denseBincount"),u=(0,s._1)(t,"weights","denseBincount");f.hu("int32"===a.dtype,(function(){return"Error in denseBincount: input "+"dtype must be int32, but got ".concat(a.dtype)})),f.hu(a.rank<=2,(function(){return"Error in denseBincount: input must be at most rank 2, but got "+"rank ".concat(a.rank,".")})),f.hu(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),f.hu(u.size===a.size||0===u.size,(function(){return"Error in denseBincount: weights must have the same shape as x or "+"0-length, but got x shape: ".concat(a.shape,", weights shape: ")+"".concat(u.shape,".")}));var c={x:a,weights:u},l={size:n,binaryOutput:r};return i.BV.runKernel(o.QR,c,l)}});var fe=(0,u.op)({depthToSpace_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC",r=(0,s._1)(e,"x","depthToSpace","float32"),a="NHWC"===n?r.shape[1]:r.shape[2],u="NHWC"===n?r.shape[2]:r.shape[3],c="NHWC"===n?r.shape[3]:r.shape[1];f.hu(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(t)})),f.hu(a*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(a," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(r.shape)})),f.hu(u*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(u," and ").concat(t," for depthToSpace with input shape\n        ").concat(r.shape)})),f.hu(c%(t*t)===0,(function(){return"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(c," for depthToSpace with input shape ").concat(r.shape)}));var l={x:r},d={blockSize:t,dataFormat:n};return i.BV.runKernel(o.T0,l,d)}});var pe=(0,u.op)({depthwiseConv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],c=arguments.length>6?arguments[6]:void 0,l=(0,s._1)(e,"x","depthwiseConv2d","float32"),d=(0,s._1)(t,"filter","depthwiseConv2d","float32"),p=l,h=!1;3===l.rank&&(h=!0,p=(0,T.X)(l,[1,l.shape[0],l.shape[1],l.shape[2]])),f.hu(4===p.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(p.rank,".")})),f.hu(4===d.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(d.rank,".")}));var m="NHWC"===a?p.shape[3]:p.shape[1];f.hu(m===d.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels "+"(".concat(m,") must match the inChannels dimension in ")+"filter ".concat(d.shape[2],".")})),I.m("depthwiseConv2d",r,c);var v={x:p,filter:d},g={strides:n,pad:r,dataFormat:a,dilations:u,dimRoundingMode:c},y=i.BV.runKernel(o.ci,v,g);return h?(0,T.X)(y,[y.shape[1],y.shape[2],y.shape[3]]):y}});var he=(0,u.op)({diag_:function(e){var t={x:(0,s._1)(e,"x","diag")};return i.BV.runKernel(o.$w,t)}});var me=(0,u.op)({dilation2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",c=(0,s._1)(e,"x","dilation2d"),l=(0,s._1)(t,"filter","dilation2d");f.hu(3===c.rank||4===c.rank,(function(){return"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(c.rank,".")})),f.hu(3===l.rank,(function(){return"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(l.rank,".")})),f.hu("NHWC"===u,(function(){return"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(u)}));var d=c,p=!1;3===c.rank&&(d=(0,T.X)(c,[1,c.shape[0],c.shape[1],c.shape[2]]),p=!0);var h={x:d,filter:l},m={strides:n,pad:r,dilations:a},v=i.BV.runKernel(o.p4,h,m);return p?(0,T.X)(v,[v.shape[1],v.shape[2],v.shape[3]]):v}}),ve=n(5750),ge=n(5774);var ye=(0,u.op)({equal_:function(e,t){var n=(0,s._1)(e,"a","equal","string_or_numeric"),r=(0,s._1)(t,"b","equal","string_or_numeric"),a=(0,w.makeTypesMatch)(n,r),u=(0,k.Z)(a,2);n=u[0],r=u[1],(0,ge.assertAndGetBroadcastShape)(n.shape,r.shape);var c={a:n,b:r};return i.BV.runKernel(o.hd,c)}});var be=(0,u.op)({where_:function(e,t,n){var r=(0,s._1)(t,"a","where"),a=(0,s._1)(n,"b","where"),u=(0,s._1)(e,"condition","where","bool"),c=(0,ge.assertAndGetBroadcastShape)((0,ge.assertAndGetBroadcastShape)(u.shape,r.shape),a.shape),l={condition:G(u,c),t:G(r,c),e:G(a,c)};return i.BV.runKernel(o.Ph,l)}}),xe=n(7293);var ke=(0,u.op)({divNoNan_:function(e,t){var n=(0,s._1)(e,"a","div"),r=(0,s._1)(t,"b","div"),a=(0,w.makeTypesMatch)(n,r),i=(0,k.Z)(a,2);n=i[0],r=i[1];var o=(0,ve.h)(n,r),u=(0,xe.P)(o),c=ye(r,u);return be(c,u,o)}});var we=(0,u.op)({dot_:function(e,t){var n=(0,s._1)(e,"t1","dot"),r=(0,s._1)(t,"t2","dot");f.hu((1===n.rank||2===n.rank)&&(1===r.rank||2===r.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=1===n.rank?n.size:n.shape[1],i=1===r.rank?r.size:r.shape[0];if(f.hu(a===i,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+"".concat(a," and ").concat(i,".")})),1===n.rank&&1===r.rank){var o=(0,T.X)(n,[1,-1]),u=(0,T.X)(r,[-1,1]),c=(0,R.O)(o,u);return(0,T.X)(c,[])}if(1===n.rank&&2===r.rank){var l=(0,T.X)(n,[1,-1]),d=(0,T.X)(r,[r.shape[0],r.shape[1]]),p=(0,R.O)(l,d);return(0,T.X)(p,[p.size])}if(2===n.rank&&1===r.rank){var h=(0,T.X)(r,[-1,1]),m=(0,R.O)(n,h);return(0,T.X)(m,[m.size])}var v=(0,T.X)(r,[r.shape[0],r.shape[1]]);return(0,R.O)(n,v)}});var Se=(0,u.op)({einsum_:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map((function(e,t){return(0,s._1)(e,"tensors".concat(t),"einsum")})),u={equation:e};return i.BV.runKernel(o.$g,a,u)}}),Ce=n(2353);var _e=(0,u.op)({erf_:function(e){var t=(0,s._1)(e,"x","erf");f.hu("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=(0,_.p)(t,"float32"));var n={x:t};return i.BV.runKernel(o.Om,n)}}),Ie=n(8473);var Te=(0,u.op)({max_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=(0,s._1)(e,"x","max"),a={x:r},u={reductionIndices:t,keepDims:n};return i.BV.runKernel(o.Yo,a,u)}});var Ee=(0,u.op)({min_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=(0,s._1)(e,"x","min"),a={x:r},u={axis:t,keepDims:n};return i.BV.runKernel(o.c1,a,u)}}),Ne=n(4334),Oe=n(7067),Ae=n(6902),Re=n(7391),Pe=n(227);function De(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return(0,a.W)(e);if(1!==e.rank&&null===n)return De((0,T.X)(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return(0,Pe.S)((0,a.W)(e),n);if(t===1/0)return Te((0,a.W)(e),n);if(t===-1/0)return Ee((0,a.W)(e),n);if("euclidean"===t||2===t)return(0,Ae._)((0,Pe.S)((0,Ne.s)((0,a.W)(e),(0,Oe.i)(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return Te((0,Pe.S)((0,a.W)(e),n[0]),n[1]-1);if(t===1/0)return Te((0,Pe.S)((0,a.W)(e),n[1]),n[0]);if(t===-1/0)return Ee((0,Pe.S)((0,a.W)(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return(0,Ae._)((0,Pe.S)((0,Re.h)(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}var Be=(0,u.op)({norm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=De(e=(0,s._1)(e,"x","norm"),t,n),i=a.shape;if(r){var o=(0,f.EC)(n,e.shape);i=Ie.rv(a.shape,o)}return(0,T.X)(a,i)}});var Me=(0,u.op)({euclideanNorm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Be(e,"euclidean",t,n)}});var Fe=(0,u.op)({exp_:function(e){var t={x:(0,s._1)(e,"x","exp")};return i.BV.runKernel(o.NE,t)}});var Le=(0,u.op)({expandDims_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,s._1)(e,"x","expandDims","string_or_numeric");f.hu(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r={input:n},a={dim:t};return i.BV.runKernel(o.YF,r,a)}});var Ve=(0,u.op)({expm1_:function(e){var t={x:(0,s._1)(e,"x","expm1")};return i.BV.runKernel(o.Y0,t)}});var ze=(0,u.op)({tile_:function(e,t){var n=(0,s._1)(e,"x","tile","string_or_numeric");f.hu(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,".")}));var r={x:n},a={reps:t};return i.BV.runKernel(o.n9,r,a)}});var Ze=(0,u.op)({eye_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";null==t&&(t=e);for(var a=(0,H.f)([e,t],r),i=e<=t?e:t,o=0;o<i;++o)a.set(1,o,o);var s=(0,T.X)(a.toTensor(),[e,t]);if(null==n)return s;if(1===n.length)return ze(Le(s,0),[n[0],1,1]);if(2===n.length)return ze(Le(Le(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return ze(Le(Le(Le(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}}),Ue=n(8582);var je=(0,u.op)({floor_:function(e){var t={x:(0,s._1)(e,"x","floor","float32")};return i.BV.runKernel(o.OR,t)}}),We=n(7145);var Ge=(0,u.op)({gather_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=(0,s._1)(e,"x","gather"),u=(0,s._1)(t,"indices","gather","int32"),c={x:a,indices:u},l={axis:n,batchDims:r};return i.BV.runKernel(o.qi,c,l)}});var He=(0,u.op)({greater_:function(e,t){var n=(0,s._1)(e,"a","greater","string_or_numeric"),r=(0,s._1)(t,"b","greater","string_or_numeric"),a=(0,w.makeTypesMatch)(n,r),u=(0,k.Z)(a,2);n=u[0],r=u[1],(0,ge.assertAndGetBroadcastShape)(n.shape,r.shape);var c={a:n,b:r};return i.BV.runKernel(o.iZ,c)}});var qe=(0,u.op)({greaterEqual_:function(e,t){var n=(0,s._1)(e,"a","greaterEqual","string_or_numeric"),r=(0,s._1)(t,"b","greaterEqual","string_or_numeric"),a=(0,w.makeTypesMatch)(n,r),u=(0,k.Z)(a,2);n=u[0],r=u[1],(0,ge.assertAndGetBroadcastShape)(n.shape,r.shape);var c={a:n,b:r};return i.BV.runKernel(o.Ac,c)}}),Xe=n(6996);var Ke=(0,u.op)({isFinite_:function(e){var t={x:(0,s._1)(e,"x","isFinite")};return i.BV.runKernel(o.av,t)}});var Ye=(0,u.op)({isInf_:function(e){var t={x:(0,s._1)(e,"x","isInf")};return i.BV.runKernel(o.iW,t)}});var Qe=(0,u.op)({isNaN_:function(e){var t={x:(0,s._1)(e,"x","isNaN")};return i.BV.runKernel(o.r7,t)}}),$e=n(4419);var Je=(0,u.op)({less_:function(e,t){var n=(0,s._1)(e,"a","less","string_or_numeric"),r=(0,s._1)(t,"b","less","string_or_numeric"),a=(0,w.makeTypesMatch)(n,r),u=(0,k.Z)(a,2);n=u[0],r=u[1],(0,ge.assertAndGetBroadcastShape)(n.shape,r.shape);var c={a:n,b:r};return i.BV.runKernel(o.vt,c)}});var et=(0,u.op)({lessEqual_:function(e,t){var n=(0,s._1)(e,"a","lessEqual","string_or_numeric"),r=(0,s._1)(t,"b","lessEqual","string_or_numeric"),a=(0,w.makeTypesMatch)(n,r),u=(0,k.Z)(a,2);n=u[0],r=u[1],(0,ge.assertAndGetBroadcastShape)(n.shape,r.shape);var c={a:n,b:r};return i.BV.runKernel(o.CA,c)}});function tt(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");var r={start:e,stop:t,num:n};return i.BV.runKernel(o.e7,{},r)}var nt=(0,u.op)({localResponseNormalization_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,u=(0,s._1)(e,"x","localResponseNormalization");f.hu(4===u.rank||3===u.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(u.rank,".")})),f.hu(f.GN(t),(function(){return"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(t,".")}));var c=u,l=!1;3===u.rank&&(l=!0,c=(0,T.X)(u,[1,u.shape[0],u.shape[1],u.shape[2]]));var d={x:c},p={depthRadius:t,bias:n,alpha:r,beta:a},h=i.BV.runKernel(o.eZ,d,p);return l?(0,T.X)(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});var rt=(0,u.op)({log_:function(e){var t={x:(0,s._1)(e,"x","log","float32")};return i.BV.runKernel(o.Zb,t)}});var at=(0,u.op)({log1p_:function(e){var t={x:(0,s._1)(e,"x","log1p")};return i.BV.runKernel(o.kU,t)}}),it=n(6450),ot=n(4362);var st=(0,u.op)({softplus_:function(e){var t={x:(0,s._1)(e,"x","softplus")};return i.BV.runKernel(o.MR,t)}});var ut=(0,u.op)({logSigmoid_:function(e){var t=(0,s._1)(e,"x","logSigmoid"),n=(0,it.cb)((function(e){return{value:(0,ot.W)(st((0,ot.W)(e))),gradFunc:function(t){return(0,P.d)(t,(0,D.X)((0,ot.W)(e)))}}}));return n(t)}}),ct=n(4774);var lt=(0,u.op)({logSoftmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=(0,s._1)(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(t));var r=(0,it.cb)((function(e,n){var r=Te(e,t,!0),a=(0,ct.l)(e,r),i=(0,ct.l)((0,_.p)(a,"float32"),rt((0,Pe.S)(Fe(a),t,!0)));n([i]);return{value:i,gradFunc:function(e,n){var r=(0,k.Z)(n,1)[0],a=Fe(r);return(0,ct.l)(e,(0,P.d)((0,Pe.S)(e,t,!0),a))}}}));return r(n)}});var dt=(0,u.op)({logSumExp_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=(0,s._1)(e,"x","logSumExp"),a=(0,f.EC)(t,r.shape),i=Te(r,a,!0),o=(0,ct.l)(r,i),u=Fe(o),c=(0,Pe.S)(u,a),l=rt(c),p=(0,d.I)((0,T.X)(i,l.shape),l);if(n){var h=(0,Ie.rv)(p.shape,a);return(0,T.X)(p,h)}return p}});var ft=(0,u.op)({logicalAnd_:function(e,t){var n=(0,s._1)(e,"a","logicalAnd","bool"),r=(0,s._1)(t,"b","logicalAnd","bool");(0,ge.assertAndGetBroadcastShape)(n.shape,r.shape);var a={a:n,b:r};return i.BV.runKernel(o.PY,a)}});var pt=(0,u.op)({logicalNot_:function(e){var t={x:(0,s._1)(e,"x","logicalNot","bool")};return i.BV.runKernel(o.Vf,t)}});var ht=(0,u.op)({logicalOr_:function(e,t){var n=(0,s._1)(e,"a","logicalOr","bool"),r=(0,s._1)(t,"b","logicalOr","bool");(0,ge.assertAndGetBroadcastShape)(n.shape,r.shape);var a={a:n,b:r};return i.BV.runKernel(o.MZ,a)}});var mt=(0,u.op)({logicalXor_:function(e,t){var n=(0,s._1)(e,"a","logicalXor","bool"),r=(0,s._1)(t,"b","logicalXor","bool");return(0,ge.assertAndGetBroadcastShape)(n.shape,r.shape),ft(ht(e,t),pt(ft(e,t)))}}),vt=2147483648;var gt=(0,u.op)({searchSorted_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left",r=(0,s._1)(e,"sortedSequence","searchSorted"),a=(0,s._1)(t,"values","searchSorted"),u=r.shape[r.shape.length-1],c=a.shape[a.shape.length-1],l=(0,T.X)(r,[-1,u]),d=(0,T.X)(a,[-1,c]);if(l.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(l.shape[0]!==d.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if((0,f.NA)(d.shape)>=vt)throw new Error("values tensor size must less than ".concat(vt));if(l.shape[1]>=vt)throw new Error("trailing dim_size must less than ".concat(vt," for int32 output type, was ").concat(l.shape[1]));var p={sortedSequence:l,values:d},h={side:n};return i.BV.runKernel(o.nr,p,h)}});function yt(e,t){return gt(e,t,"left")}var bt=(0,u.op)({maxPool_:function(e,t,n,r,a){var u=(0,s._1)(e,"x","maxPool"),c=u,l=!1;3===u.rank&&(l=!0,c=(0,T.X)(u,[1,u.shape[0],u.shape[1],u.shape[2]])),f.hu(4===c.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(c.rank,".")})),f.hu(I.jT(n,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")})),I.m("maxPool",r,a);var d={x:c},p={filterSize:t,strides:n,pad:r,dimRoundingMode:a},h=i.BV.runKernel(o.mT,d,p);return l?(0,T.X)(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});var xt=(0,u.op)({maxPool3d_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",c=(0,s._1)(e,"x","maxPool3d"),l=c,d=!1;4===c.rank&&(d=!0,l=(0,T.X)(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),f.hu(5===l.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank ".concat(l.rank,".")})),f.hu("NDHWC"===u,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(u)})),(0,I.m)("maxPool3d",r,a);var p={x:l},h={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:u},m=i.BV.runKernel(o.OA,p,h);return d?(0,T.X)(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}});var kt=(0,u.op)({maxPoolWithArgmax_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=(0,s._1)(e,"x","maxPoolWithArgmax"),c={x:u},l={filterSize:t,strides:n,pad:r,includeBatchInIndex:a},d=i.BV.runKernel(o.vF,c,l);return{result:d[0],indexes:d[1]}}}),wt=n(705);var St=(0,u.op)({mean_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=(0,s._1)(e,"x","mean"),a={x:r},u={axis:t,keepDims:n};return i.BV.runKernel(o.q2,a,u)}});function Ct(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=Ct(e,"float32"),r=Ct(e,"float32");return(0,K.P)(n,r)}var a=(0,f.wT)((0,f.NA)(e),t);return i.BV.makeTensor(a,e,t)}function _t(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=_t(e,"float32"),r=Ct(e,"float32");return(0,K.P)(n,r)}var a=(0,f.p8)((0,f.NA)(e),t);return i.BV.makeTensor(a,e,t)}var It=n(4376);function Tt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.indexing,a=void 0===r?"xy":r;if("xy"!==a&&"ij"!==a)throw new TypeError("".concat(a," is not a valid third argument to meshgrid"));if(void 0===e)return[];var i=(0,s._1)(e,"x","meshgrid",e instanceof It.es?e.dtype:"float32");if(void 0===t)return[i];var o=(0,s._1)(t,"y","meshgrid",t instanceof It.es?t.dtype:"float32"),u=(0,f.NA)(i.shape),c=(0,f.NA)(o.shape);return"xy"===a?(i=(0,T.X)(i,[1,-1]),o=(0,T.X)(o,[-1,1]),[(0,R.O)(_t([c,1],i.dtype),i),(0,R.O)(o,_t([1,u],o.dtype))]):(i=(0,T.X)(i,[-1,1]),o=(0,T.X)(o,[1,-1]),[(0,R.O)(i,_t([1,c],i.dtype)),(0,R.O)(_t([u,1],o.dtype),o)])}var Et=(0,u.op)({minimum_:function(e,t){var n=(0,s._1)(e,"a","minimum"),r=(0,s._1)(t,"b","minimum"),a=(0,w.makeTypesMatch)(n,r),u=(0,k.Z)(a,2);n=u[0],r=u[1],"bool"===n.dtype&&(n=(0,_.p)(n,"int32"),r=(0,_.p)(r,"int32")),(0,ge.assertAndGetBroadcastShape)(n.shape,r.shape);var c={a:n,b:r};return i.BV.runKernel(o.q8,c)}});var Nt=(0,u.op)({mirrorPad_:function(e,t,n){f.hu("reflect"===n||"symmetric"===n,(function(){return"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,".")}));var r=(0,s._1)(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");f.hu(t.length===r.rank,(function(){return"Padding doesn't match input. Must be ".concat(r.rank,". ")+"Got ".concat(t.length,".")}));for(var a="reflect"===n?1:0,u=function(e){f.hu(2===t[e].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),f.hu(t[e][0]>=0&&t[e][0]<=r.shape[e]-a&&t[e][1]>=0&&t[e][1]<=r.shape[e]-a,(function(){return"Padding in dimension ".concat(e," cannot be greater than or equal ")+"to ".concat(r.shape[e]-a," or less than 0 for input of ")+"shape ".concat(r.shape)}))},c=0;c<r.rank;c++)u(c);var l={paddings:t,mode:n},d={x:r};return i.BV.runKernel(o.jQ,d,l)}});var Ot=(0,u.op)({mod_:function(e,t){var n=(0,s._1)(e,"a","mod"),r=(0,s._1)(t,"b","mod"),a=(0,w.makeTypesMatch)(n,r),u=(0,k.Z)(a,2),c={a:n=u[0],b:r=u[1]};return i.BV.runKernel(o.Vb,c)}});var At=(0,u.op)({moments_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e=(0,s._1)(e,"x","moments");var r=(0,f.EC)(t,e.shape),a=St(e,r,n),i=a.shape;n||(i=(0,Ie.rv)(a.shape,r));var o=(0,Re.h)((0,ct.l)((0,_.p)(e,"float32"),(0,T.X)(a,i))),u=St(o,r,n);return{mean:a,variance:u}}});var Rt=(0,u.op)({multiRNNCell_:function(e,t,n,r){for(var a=(0,s._1)(t,"data","multiRNNCell"),i=(0,s.sI)(n,"c","multiRNNCell"),o=(0,s.sI)(r,"h","multiRNNCell"),u=a,c=[],l=0;l<e.length;l++){var d=e[l](u,i[l],o[l]);c.push(d[0]),c.push(d[1]),u=d[1]}for(var f=[],p=[],h=0;h<c.length;h+=2)f.push(c[h]),p.push(c[h+1]);return[f,p]}});var Pt=(0,u.op)({multinomial_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=(0,s._1)(e,"logits","multinomial"),u=a.size,c=a.rank;if(u<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+"".concat(u,"."));if(c>2)throw new Error("Rank of probabilities must be 1 or 2, but is ".concat(c));n=n||Math.random();var l=1===c?(0,T.X)(a,[1,-1]):a,d={logits:l},f={numSamples:t,seed:n,normalized:r},p=i.BV.runKernel(o.NZ,d,f);return 1===c?(0,T.X)(p,[p.size]):p}});var Dt=(0,u.op)({notEqual_:function(e,t){var n=(0,s._1)(e,"a","notEqual","string_or_numeric"),r=(0,s._1)(t,"b","notEqual","string_or_numeric"),a=(0,w.makeTypesMatch)(n,r),u=(0,k.Z)(a,2);n=u[0],r=u[1],(0,ge.assertAndGetBroadcastShape)(n.shape,r.shape);var c={a:n,b:r};return i.BV.runKernel(o.yQ,c)}}),Bt=n(4326);var Mt=(0,u.op)({onesLike_:function(e){var t={x:(0,s._1)(e,"x","onesLike")};return i.BV.runKernel(o.qW,t)}});var Ft=(0,u.op)({outerProduct_:function(e,t){var n=(0,s._1)(e,"v1","outerProduct"),r=(0,s._1)(t,"v2","outerProduct");f.hu(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=(0,T.X)(n,[-1,1]),i=(0,T.X)(r,[1,-1]);return(0,R.O)(a,i)}});var Lt=(0,u.op)({pad_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=(0,s._1)(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:t,constantValue:n},u={x:r};return i.BV.runKernel(o.ly,u,a)}});var Vt=(0,u.op)({pad1d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,f.hu)(2===t.length,(function(){return"Invalid number of paddings. Must be length of 2."})),Lt(e,[t],n)}});var zt=(0,u.op)({pad2d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,f.hu)(2===t.length&&2===t[0].length&&2===t[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Lt(e,t,n)}});var Zt=(0,u.op)({pad3d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,f.hu)(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Lt(e,t,n)}});var Ut=(0,u.op)({pad4d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,f.hu)(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Lt(e,t,n)}});var jt=(0,u.op)({spaceToBatchND_:function(e,t,n){var r=(0,s._1)(e,"x","spaceToBatchND");f.hu(r.rank>=1+t.length,(function(){return"input rank ".concat(r.rank," should be > than [blockShape] ").concat(t.length)})),f.hu(n.length===t.length,(function(){return"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)})),f.hu(r.shape.reduce((function(e,r,a){return a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]===0:e}),!0),(function(){return"input spatial dimensions ".concat(r.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())}));var a={x:r},u={blockShape:t,paddings:n};return i.BV.runKernel(o.TQ,a,u)}});var Wt=(0,u.op)({pool_:function(e,t,n,r,a,i,o){null==a&&(a=[1,1]),null==i&&(i=1),0===r&&(r="valid");var u=(0,s._1)(e,"x","maxPool"),c=u,l=!1;3===u.rank&&(l=!0,c=(0,T.X)(u,[1,u.shape[0],u.shape[1],u.shape[2]])),f.hu(I.jT(i,a),(function(){return"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(a,"'")}));var d,p=I.Xw(c.shape,t,i,a,r),h=[p.dilationHeight,p.dilationWidth];d="same"===r?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})).map((function(e){return e-1})),r=n.map((function(e){return Math.floor(e/2)})),a=n.map((function(e,t){return e-r[t]}));return n.map((function(e,t){return[r[t],a[t]]}))}([p.filterHeight,p.filterWidth],h):[[0,0],[0,0]];var m=1===h[0]&&1===h[1],v=function(e,t,n){var r=n.map((function(e){return e[0]})),a=n.map((function(e){return e[1]})),i=e.concat(r,a),o=t.map((function(e,t){return(e-i[t]%e)%e})),s=a.map((function(e,t){return e+o[t]})),u=t.map((function(e,t){return[r[t],s[t]]})),c=t.map((function(e,t){return[0,o[t]]}));return[u,c]}([p.inHeight,p.inWidth],h,d),g=(0,k.Z)(v,2),y=g[0],b=g[1],x=m?r:"valid",w=m?c:jt(c,h,y),S=("avg"===n?function(){return E(w,t,i,x,o)}:function(){return bt(w,t,i,x,o)})(),C=m?S:L(S,h,b);return l?(0,T.X)(C,[C.shape[1],C.shape[2],C.shape[3]]):C}}),Gt=n(6859),Ht=n(4600);var qt=(0,u.op)({prod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=(0,s._1)(e,"x","prod");"bool"===r.dtype&&(r=(0,_.p)(r,"int32"));var a={x:r},u={axis:t,keepDims:n};return i.BV.runKernel(o.Dl,a,u)}});var Xt=(0,u.op)({rand_:function(e,t,n){var r=(0,f.NA)(e),a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type ".concat(n));a=new Uint8Array(r)}for(var o=0;o<r;o++)a[o]=t();return i.BV.makeTensor(a,e,n)}}),Kt=n(5671),Yt=n(3144),Qt=n(6699),$t=function(){function e(t,n,r,a,i){(0,Kt.Z)(this,e),this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=i||Math.random();this.random=Qt.alea(o.toString())}return(0,Yt.Z)(e,[{key:"nextValue",value:function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,i=void 0,o=void 0;do{o=(a=2*this.random()-1)*a+(i=2*this.random()-1)*i}while(o>=1||0===o);var s=Math.sqrt(-2*Math.log(o)/o);t=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*i*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)}},{key:"convertValue",value:function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}},{key:"isValidTruncated",value:function(e){return e<=this.upper&&e>=this.lower}}]),e}(),Jt=function(){function e(t,n,r,a){(0,Kt.Z)(this,e),this.alpha=t,this.beta=1/n,this.dtype=r;var i=a||Math.random();this.randu=Qt.alea(i.toString()),this.randn=new $t(0,1,r,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return(0,Yt.Z)(e,[{key:"nextValue",value:function(){for(var e,t,n,r,a,i;;){do{r=this.randn.nextValue(),i=1+this.c*r}while(i<=0);if(i*=i*i,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-i+Math.log(i)),(a=this.randu())<t||Math.log(a)<n)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)}},{key:"convertValue",value:function(e){return"float32"===this.dtype?e:Math.round(e)}}]),e}(),en=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if((0,Kt.Z)(this,e),this.canReturnFloat=function(){return null==t.dtype||"float32"===t.dtype},this.min=n,this.range=r-n,this.dtype=a,null==i&&(i=Math.random()),"number"===typeof i&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(n," - ").concat(r," <= 1 and dtype is not float"));this.random=Qt.alea(i)}return(0,Yt.Z)(e,[{key:"convertValue",value:function(e){return this.canReturnFloat()?e:Math.round(e)}},{key:"nextValue",value:function(){return this.convertValue(this.min+this.range*this.random())}}]),e}();var tn=(0,u.op)({randomGamma_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0;if(null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type ".concat(r));for(var i=new Jt(t,n,r,a),o=(0,H.f)(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var nn=(0,u.op)({randomNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type ".concat(r));for(var i=new $t(t,n,r,!1,a),o=(0,H.f)(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var rn=(0,u.op)({randomStandardNormal_:function(e,t,n){if(null!=t&&"bool"===t)throw new Error("Unsupported data type ".concat(t));return nn(e,0,1,t,n)}});var an=(0,u.op)({randomUniform_:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0,i=(0,H.f)(e,r),o=new en(t,n,null,a),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}});function on(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");var a={start:e,stop:t,step:n,dtype:r};return i.BV.runKernel(o.e6,{},a)}var sn=n(6972);var un=(0,u.op)({reciprocal_:function(e){var t={x:(0,s._1)(e,"x","reciprocal")};return i.BV.runKernel(o.$H,t)}}),cn=n(7539),ln=n(5900);var dn=(0,u.op)({reverse_:function(e,t){var n={x:(0,s._1)(e,"x","reverse")},r={dims:t};return i.BV.runKernel(o.mK,n,r)}});var fn=(0,u.op)({reverse1d_:function(e){var t=(0,s._1)(e,"x","reverse");return f.hu(1===t.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank ".concat(t.rank,".")})),dn(t,0)}});var pn=(0,u.op)({reverse2d_:function(e,t){var n=(0,s._1)(e,"x","reverse");return f.hu(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank ".concat(n.rank,".")})),dn(n,t)}});var hn=(0,u.op)({reverse3d_:function(e,t){var n=(0,s._1)(e,"x","reverse");return f.hu(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank ".concat(n.rank,".")})),dn(n,t)}});var mn=(0,u.op)({reverse4d_:function(e,t){var n=(0,s._1)(e,"x","reverse");return f.hu(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank ".concat(n.rank,".")})),dn(n,t)}});var vn=(0,u.op)({round_:function(e){var t={x:(0,s._1)(e,"x","round")};return i.BV.runKernel(o.e0,t)}});var gn=(0,u.op)({rsqrt_:function(e){var t={x:(0,s._1)(e,"x","rsqrt","float32")};return i.BV.runKernel(o.bV,t)}});var yn=(0,u.op)({selu_:function(e){var t={x:(0,s._1)(e,"x","selu")};return i.BV.runKernel(o.oF,t)}});var bn=(0,u.op)({separableConv2d_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC",u=(0,s._1)(e,"x","separableConv2d"),c=(0,s._1)(t,"depthwiseFilter","separableConv2d"),l=(0,s._1)(n,"pointwiseFilter","separableConv2d"),d=u,p=!1;if(3===u.rank&&(p=!0,d=(0,T.X)(u,[1,u.shape[0],u.shape[1],u.shape[2]])),"NCHW"===o)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");f.hu(4===d.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(d.rank,".")})),f.hu(4===c.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(c.rank,".")})),f.hu(4===l.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(c.rank,".")})),f.hu(1===l.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(l.shape[0],".")})),f.hu(1===l.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(l.shape[1],".")}));var h=c.shape[2],m=c.shape[3];f.hu(l.shape[2]===h*m,(function(){return"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(h*m,", ")+"but got ".concat(l.shape[2],".")}));var v=pe(d,c,r,a,o,i),g=1,y=ee(v,l,g,"valid",o);return p?(0,T.X)(y,[y.shape[1],y.shape[2],y.shape[3]]):y}}),xn=n(4165),kn=n(5861);function wn(){return wn=(0,kn.Z)((0,xn.Z)().mark((function e(t,n){var r,a,i,o,u,c,l,d,p,h,m;return(0,xn.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,s._1)(t,"x","setdiff1d"),a=(0,s._1)(n,"y","setdiff1d"),f.hu(r.dtype===a.dtype,(function(){return"x and y should have the same dtype, but got x (".concat(r.dtype,") and y (").concat(a.dtype,").")})),f.hu(1===r.rank,(function(){return"x should be 1D tensor, but got x (".concat(r.shape,").")})),f.hu(1===a.rank,(function(){return"y should be 1D tensor, but got y (".concat(a.shape,").")})),e.next=7,r.data();case 7:return i=e.sent,e.next=10,a.data();case 10:for(o=e.sent,u=new Set(o),c=0,l=0;l<i.length;l++)u.has(i[l])||c++;for(d=new It.YD([c],r.dtype),p=new It.YD([c],"int32"),h=0,m=0;h<i.length;h++)u.has(i[h])||(d.values[m]=i[h],p.values[m]=h,m++);return e.abrupt("return",[d.toTensor(),p.toTensor()]);case 18:case"end":return e.stop()}}),e)}))),wn.apply(this,arguments)}var Sn=function(e,t){return wn.apply(this,arguments)};var Cn=(0,u.op)({sign_:function(e){var t={x:(0,s._1)(e,"x","sign")};return i.BV.runKernel(o.i5,t)}});var _n=(0,u.op)({sin_:function(e){var t={x:(0,s._1)(e,"x","sin","float32")};return i.BV.runKernel(o.RQ,t)}});var In=(0,u.op)({sinh_:function(e){var t={x:(0,s._1)(e,"x","sinh")};return i.BV.runKernel(o.w3,t)}});var Tn=(0,u.op)({slice1d_:function(e,t,n){var r=(0,s._1)(e,"x","slice1d");return f.hu(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor")})),B(r,[t],[n])}});var En=(0,u.op)({slice2d_:function(e,t,n){var r=(0,s._1)(e,"x","slice2d");return f.hu(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor")})),B(r,t,n)}});var Nn=(0,u.op)({slice3d_:function(e,t,n){var r=(0,s._1)(e,"x","slice3d");return f.hu(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor")})),B(r,t,n)}});var On=(0,u.op)({slice4d_:function(e,t,n){var r=(0,s._1)(e,"x","slice4d");return f.hu(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor")})),B(r,t,n)}});var An=(0,u.op)({softmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=(0,s._1)(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(t));var r={logits:n},a={dim:t};return i.BV.runKernel(o.Gc,r,a)}});var Rn=(0,u.op)({fft_:function(e){(0,f.hu)("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return i.BV.runKernel(o.vw,t)}});var Pn=(0,u.op)({ifft_:function(e){(0,f.hu)("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return i.BV.runKernel(o.Qg,t)}});var Dn=(0,u.op)({irfft_:function(e){var t,n=e.shape[e.shape.length-1],r=e.size/n;if(n<=2){var a=(0,T.X)(e,[r,n]);t=Pn(a)}else{var i=[r,2*(n-1)],o=(0,T.X)((0,sn.k)(e),[r,n]),s=(0,T.X)((0,Xe.a)(e),[r,n]),u=dn(B(o,[0,1],[r,n-2]),1),c=(0,P.d)(dn(B(s,[0,1],[r,n-2]),1),(0,Oe.i)(-1)),l=A([o,u],1),d=A([s,c],1),f=(0,T.X)((0,K.P)(l,d),[i[0],i[1]]);t=Pn(f)}if(t=(0,sn.k)(t),3===e.rank&&0!==e.shape[0]){var p=t,h=e.shape[0];t=(0,T.X)(t,[h,t.shape[0]/h,t.shape[1]]),p.dispose()}return t}});var Bn=(0,u.op)({split_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=(0,s._1)(e,"x","split"),a={x:r},u={numOrSizeSplits:t,axis:n};return i.BV.runKernel(o.L8,a,u)}});var Mn=(0,u.op)({rfft_:function(e,t){(0,f.hu)("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got ".concat(e.dtype)}));var n,r=e.shape[e.shape.length-1],a=e.size/r;if(null!=t&&t<r){var i=e.shape.map((function(e){return 0})),o=e.shape.map((function(e){return e}));o[e.shape.length-1]=t,n=B(e,i,o),r=t}else if(null!=t&&t>r){var s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t-r,n=A([e,Ct(s)],e.shape.length-1),r=t}else n=e;var u=(0,xe.P)(n),c=(0,T.X)((0,K.P)(n,u),[a,r]),l=Rn(c),d=Math.floor(r/2)+1,p=(0,sn.k)(l),h=(0,Xe.a)(l),m=Bn(p,[d,r-d],p.shape.length-1),v=Bn(h,[d,r-d],h.shape.length-1),g=n.shape.slice();return g[n.shape.length-1]=d,(0,T.X)((0,K.P)(m[0],v[0]),g)}});var Fn=(0,u.op)({squaredDifference_:function(e,t){var n=(0,s._1)(e,"a","squaredDifference"),r=(0,s._1)(t,"b","squaredDifference"),a=(0,w.makeTypesMatch)(n,r),u=(0,k.Z)(a,2);n=u[0],r=u[1],(0,ge.assertAndGetBroadcastShape)(n.shape,r.shape);var c={a:n,b:r};return i.BV.runKernel(o._t,c,{})}});var Ln=(0,u.op)({squeeze_:function(e,t){var n=(0,s._1)(e,"x","squeeze","string_or_numeric");return(0,T.X)(n,(0,f.bp)(n.shape,t).newShape)}});var Vn=(0,u.op)({stack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,s.sI)(e,"tensors","stack","string_or_numeric");f.hu(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),n.length>0&&f.hu(t<=n[0].rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n,a={axis:t};return i.BV.runKernel(o.Qi,r,a)}}),zn=n(4031);var Zn=(0,u.op)({stridedSlice_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,f=(0,s._1)(e,"x","stridedSlice","string_or_numeric"),p={x:f},h={begin:t,end:n,strides:r,beginMask:a,endMask:u,ellipsisMask:c,newAxisMask:l,shrinkAxisMask:d};return i.BV.runKernel(o.m2,p,h)}});var Un=(0,u.op)({tan_:function(e){var t={x:(0,s._1)(e,"x","tan","float32")};return i.BV.runKernel(o.sE,t)}}),jn=n(2442),Wn=n(7960);function Gn(e,t){(0,f.Cq)(e);var n=(0,s.C)(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return(0,Wn.H)(e,null,n,t)}function Hn(e,t,n){if((0,f.Cq)(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=(0,s.C)(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return(0,Wn.H)(e,t,r,n)}var qn=n(3123);function Xn(e,t,n){if((0,f.Cq)(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=(0,s.C)(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return(0,Wn.H)(e,t,r,n)}function Kn(e,t,n){if((0,f.Cq)(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=(0,s.C)(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return(0,Wn.H)(e,t,r,n)}function Yn(e,t,n){if((0,f.Cq)(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=(0,s.C)(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return t=t||r,(0,Wn.H)(e,t,r,n)}var Qn=(0,u.op)({topk_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=(0,s._1)(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(a,") ")+"but got ".concat(t));var u={x:r},c={k:t,sorted:n},l=i.BV.runKernel(o.cW,u,c),d=(0,k.Z)(l,2),f=d[0],p=d[1];return{values:f,indices:p}}});var $n=(0,u.op)({truncatedNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");for(var i=new $t(t,n,r,!0,a),o=(0,H.f)(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var Jn=(0,u.op)({unique_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,s._1)(e,"x","unique","string_or_numeric");(0,f.hu)(n.rank>0,(function(){return"The input tensor must be at least 1D"}));var r={x:n},a={axis:t},u=i.BV.runKernel(o.kp,r,a),c=(0,k.Z)(u,2),l=c[0],d=c[1];return{values:l,indices:d}}});var er=(0,u.op)({unsortedSegmentSum_:function(e,t,n){var r=(0,s._1)(e,"x","unsortedSegmentSum"),a=(0,s._1)(t,"segmentIds","unsortedSegmentSum","int32");(0,f.hu)((0,f.GN)(n),(function(){return"numSegments must be of dtype int"}));var u={x:r,segmentIds:a},c={numSegments:n};return i.BV.runKernel(o.Qv,u,c)}});var tr=(0,u.op)({unstack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,s._1)(e,"x","unstack","string_or_numeric");f.hu(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")}));var r={value:n},a={axis:t};return i.BV.runKernel(o.To,r,a)}});function nr(e,t){return gt(e,t,"right")}function rr(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return i.BV.makeVariable(e,t,n,r)}var ar=n(4189);function ir(){return(ir=(0,kn.Z)((0,xn.Z)().mark((function e(t){var n,r,a;return(0,xn.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,s._1)(t,"condition","whereAsync","bool"),e.next=3,n.data();case 3:return r=e.sent,a=(0,ar.Z)(n.shape,r),t!==n&&n.dispose(),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var or=function(e){return ir.apply(this,arguments)};function sr(){return sr=(0,kn.Z)((0,xn.Z)().mark((function e(t,n,r){var a,i,o,u,c,l,d,p,h,m,v,g,y;return(0,xn.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=(0,s._1)(t,"tensor","boolMask"),i=(0,s._1)(n,"mask","boolMask","bool"),o=null==r?0:r,u=i.rank,c=a.shape,f.hu(u>0,(function(){return"mask cannot be scalar"})),f.k5(c.slice(o,o+u),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),l=1,d=o;d<o+u;d++)l*=c[d];return p=c.slice(0,o).concat([l],c.slice(o+u)),h=(0,T.X)(a,p),m=(0,T.X)(i,[-1]),e.next=14,or(m);case 14:return v=e.sent,g=Ln(v,[1]),y=Ge(h,g,o),t!==a&&a.dispose(),n!==i&&i.dispose(),g.dispose(),h.dispose(),m.dispose(),v.dispose(),e.abrupt("return",y);case 24:case"end":return e.stop()}}),e)}))),sr.apply(this,arguments)}var ur=function(e,t,n){return sr.apply(this,arguments)},cr=n(1240);var lr=(0,u.op)({movingAverage_:function(e,t,n,r){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=(0,s._1)(e,"v","movingAverage"),o=(0,s._1)(t,"x","movingAverage"),u=(0,s._1)(n,"decay","movingAverage");(0,w.assertTypesMatch)(i,o),f.hu(f.cO(i.shape,o.shape),(function(){return"Shape mismatch in v and x"}));var c=(0,Oe.i)(1),l=(0,ct.l)(c,u),p=(0,P.d)((0,ct.l)(o,i),l);if(a){f.hu(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var h=(0,s._1)(r,"step","movingAverage");p=(0,ve.h)(p,(0,ct.l)(c,(0,Ne.s)(u,h)))}return(0,d.I)(i,p)}}),dr=n(8604);var fr=(0,u.op)({scatterND_:function(e,t,n){var r=(0,s._1)(e,"indices","scatterND","int32"),a=(0,s._1)(t,"updates","scatterND");dr.validateInput(a,r,n);var u={indices:r,updates:a},c={shape:n};return i.BV.runKernel(o.xQ,u,c)}});function pr(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type,"+" but the dtype was ".concat(e.dtype,"."));if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix,"+" but got shape ".concat(e.shape,"."));var a=e.rank>0?e.shape[0]:1,i=e.rank>1?e.shape[1]:1;if(n.length!==i)throw new Error("outputShape has incorrect number of elements:,"+" ".concat(n.length,", should be: ").concat(i,"."));var o=t.size;if(0!==t.rank&&(1!==t.rank||o!==a))throw new Error("sparseValues has incorrect shape "+"".concat(t.shape,", should be [] or [").concat(a,"]"));if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}var hr=(0,u.op)({sparseToDense_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=(0,s._1)(e,"sparseIndices","sparseToDense","int32"),u=(0,s._1)(t,"sparseValues","sparseToDense","string_or_numeric"),c=(0,s._1)(r,"defaultValue","sparseToDense",u.dtype);pr(a,u,n,c);var l={sparseIndices:a,sparseValues:u,defaultValue:c},d={outputShape:n};return i.BV.runKernel(o.D2,l,d)}});var mr=(0,u.op)({gatherND_:function(e,t){var n=(0,s._1)(t,"indices","gatherND","int32"),r={params:(0,s._1)(e,"x","gatherND","string_or_numeric"),indices:n};return i.BV.runKernel(o.q1,r)}});var vr=(0,u.op)({dropout_:function(e,t,n,r){var a=(0,s._1)(e,"x","dropout");if(f.hu("float32"===a.dtype,(function(){return"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(a.dtype," tensor instead.")})),f.hu(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got ".concat(t,".")})),0===t)return e instanceof It.es?a.clone():a;var i=function(e,t){if(null==t)return e.shape.slice();if(f.cO(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),o=1-t,u=(0,ve.h)(je((0,d.I)(an(i,0,1,"float32",r),o)),o);return(0,P.d)(a,u)}});function gr(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function yr(e,t,n){for(var r=1-e%2,a=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+r-1);a[i]=t-n*Math.cos(o)}return Gn(a,"float32")}function br(){return br=(0,kn.Z)((0,xn.Z)().mark((function e(t,n){var r,a,i,o,u,c,l,d,p,h,m,v,g,y,b,x=arguments;return(0,xn.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x.length>2&&void 0!==x[2]?x[2]:1,a=(0,s._1)(t,"predictions","inTopK"),i=(0,s._1)(n,"targets","inTopK"),(0,f.hu)(a.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, "+"but got ".concat(a.rank)})),(0,f.hu)(a.rank-1===i.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+"".concat(a.rank," and targets rank ").concat(i.rank)})),(0,f.k5)(a.shape.slice(0,a.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=a.shape[a.shape.length-1],(0,f.hu)(r>0&&r<=o,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last "+"dimension (".concat(o,"), but got ").concat(r)})),e.next=10,a.data();case 10:return u=e.sent,e.next=13,i.data();case 13:c=e.sent,l=u.length/o,d=o,p=(0,f.WP)("bool",l),h=0;case 17:if(!(h<l)){e.next=35;break}for(m=h*d,v=u.subarray(m,m+d),g=[],y=0;y<v.length;y++)g.push({value:v[y],index:y});g.sort((function(e,t){return t.value-e.value})),p[h]=0,b=0;case 25:if(!(b<r)){e.next=32;break}if(g[b].index!==c[h]){e.next=29;break}return p[h]=1,e.abrupt("break",32);case 29:b++,e.next=25;break;case 32:h++,e.next=17;break;case 35:return t!==a&&a.dispose(),n!==i&&i.dispose(),e.abrupt("return",(0,jn.X)(p,i.shape,"bool"));case 38:case"end":return e.stop()}}),e)}))),br.apply(this,arguments)}var xr=function(e,t){return br.apply(this,arguments)};var kr=(0,u.op)({conv2DBackpropFilter_:function(e,t,n,r,a){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",u=arguments.length>6?arguments[6]:void 0,c=e;3===e.rank&&(c=(0,T.X)(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var l=t;3===l.rank&&(l=(0,T.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]])),f.hu(4===c.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(c.shape,".")})),f.hu(4===l.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(l.shape,".")})),f.hu(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,".")}));var d="NHWC"===s?c.shape[3]:c.shape[1],p="NHWC"===s?l.shape[3]:l.shape[1];f.hu(d===n[2],(function(){return"Error in conv2dDerFilter: depth of input ".concat(d,") must ")+"match input depth in filter (".concat(n[2],".")})),f.hu(p===n[3],(function(){return"Error in conv2dDerFilter: depth of dy (".concat(p,") must ")+"match output depth for filter (".concat(n[3],").")})),I.m("conv2dDerFilter",a,u);var h={x:c,dy:l},m={strides:r,pad:a,dataFormat:s,dimRoundingMode:u,filterShape:n};return i.BV.runKernel(o.wU,h,m)}}),wr=n(5171);var Sr=(0,u.op)({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,u=e.dataFormat,c=void 0===u?"NHWC":u,l=e.dilations,p=void 0===l?[1,1]:l,h=e.dimRoundingMode,m=e.bias,v=e.activation,g=void 0===v?"linear":v,y=e.preluActivationWeights,b=e.leakyreluAlpha;if(g=g||"linear",!1===(0,wr.uy)(i.BV.state.gradientDepth,g)){f.hu("NHWC"===c,(function(){return"Error in fused conv2d: got dataFormat of ".concat(c," but ")+"only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear."}));var x=ee(t,n,r,a,c,p,h);return null!=m&&(x=(0,d.I)(x,m)),(0,wr.QH)(x,g,y,b)}var S=(0,s._1)(t,"x","conv2d","float32"),C=(0,s._1)(n,"filter","conv2d","float32"),_=S,E=!1;3===S.rank&&(E=!0,_=(0,T.X)(S,[1,S.shape[0],S.shape[1],S.shape[2]])),f.hu(4===_.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(_.rank,".")})),f.hu(4===C.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(C.rank,".")})),I.m("fused conv2d",a,h);var N="NHWC"===c?_.shape[3]:_.shape[1];f.hu(C.shape[2]===N,(function(){return"Error in conv2d: depth of input (".concat(N,") must match ")+"input depth for filter ".concat(C.shape[2],".")})),f.hu(I.jT(r,p),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(r," and dilations '").concat(p,"'")}));var O,A,R=I.Ix(_.shape,C.shape,r,p,a,h);if(null!=m){O=(0,s._1)(m,"bias","fused conv2d");var P=(0,w.makeTypesMatch)(O,S),D=(0,k.Z)(P,1);O=D[0],"NHWC"===c?ge.assertAndGetBroadcastShape(R.outShape,O.shape):(f.hu(O.shape.length<=1,(function(){return"Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of "+"rank-".concat(O.shape.length,".")})),f.hu(0===O.shape.length||O.shape[0]===R.outChannels||1===O.shape[0],(function(){return"Error in fused conv2d: bias shape (".concat(O.shape,") is not ")+"compatible with the number of output channels "+"(".concat(R.outChannels,")")})))}if(null!=y){var B=y.shape;if(f.hu(B.length<=1||3===B.length,(function(){return"Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of "+"rank-".concat(B.length,".")})),1===B.length)f.hu(1===B[0]||B[0]===R.outChannels,(function(){return"Error in fused conv2d: PReLU activation weights "+"(".concat(B,") is not compatible with the number of output ")+"channels (".concat(R.outChannels,").")}));else if(3===B.length)try{ge.assertAndGetBroadcastShape(B,R.outShape)}catch(U){var M="Error in fused conv2d: PReLU activation weights (".concat(B,") ")+"is not compatible with the output shape of the conv2d "+"(".concat(R.outShape,").");throw Error(M)}A=(0,s._1)(y,"prelu weights","fused conv2d")}var F=function(e,t){f.hu("NHWC"===c,(function(){return"Error in gradient of fused conv2D: got dataFormat of ".concat(c," but only NHWC is currently supported.")}));var n=(0,k.Z)(t,4),i=n[0],o=n[1],s=n[2],u=n[3],l=(0,wr.Fr)(e,s,g);f.hu(I.I0(p),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(p,"'")}));var d=[ne(o.shape,l,i,r,a),kr(o,l,i.shape,r,a)];if(null!=u){var h=(0,wr.pf)(u,l);d.push(h)}return d},L={x:_,filter:C,bias:O,preluActivationWeights:A},V={strides:r,pad:a,dataFormat:c,dilations:p,dimRoundingMode:h,activation:g,leakyreluAlpha:b};if(null==m){var z=(0,it.cb)((function(e,t,n){var r=i.BV.runKernel(o._V,L,V);return n([t,e,r]),E&&(r=(0,T.X)(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:F}}));return z(_,C)}var Z=(0,it.cb)((function(e,t,n,r){var a=i.BV.runKernel(o._V,L,V);return r([t,e,a,n]),E&&(a=(0,T.X)(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:F}}));return Z(_,C,O)}});var Cr=(0,u.op)({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,a){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],u=arguments.length>6?arguments[6]:void 0,c=e;3===e.rank&&(c=(0,T.X)(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var l=t;3===l.rank&&(l=(0,T.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var d={x:c,dy:l},f={strides:r,pad:a,dimRoundingMode:u,dilations:s,filterShape:n};return i.BV.runKernel(o.sL,d,f)}});var _r=(0,u.op)({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,a){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],u=arguments.length>6?arguments[6]:void 0,c=t,l=!1;3===t.rank&&(l=!0,c=(0,T.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var d={dy:c,filter:n},f={strides:r,pad:a,dimRoundingMode:u,dilations:s,inputShape:e},p=i.BV.runKernel(o.y7,d,f);return l?(0,T.X)(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});var Ir=(0,u.op)({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,u=e.dataFormat,c=void 0===u?"NHWC":u,l=e.dilations,p=void 0===l?[1,1]:l,h=e.dimRoundingMode,m=e.bias,v=e.activation,g=void 0===v?"linear":v,y=e.preluActivationWeights,b=e.leakyreluAlpha;if(!1===(0,wr.uy)(i.BV.state.gradientDepth,g)){var x=pe(t,n,r,a,c,p,h);return null!=m&&(x=(0,d.I)(x,m)),(0,wr.QH)(x,g,y,b)}var S=(0,s._1)(t,"x","depthwiseConv2d","float32"),C=(0,s._1)(n,"filter","depthwiseConv2d","float32"),_=S,E=!1;3===S.rank&&(E=!0,_=(0,T.X)(S,[1,S.shape[0],S.shape[1],S.shape[2]])),f.hu(4===_.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(_.rank,".")})),f.hu(4===C.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, "+"but got rank ".concat(C.rank,".")})),f.hu(_.shape[3]===C.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels "+"(".concat(_.shape[3],") must match the inChannels dimension in ")+"filter ".concat(C.shape[2],".")})),null==p&&(p=[1,1]),f.hu(I.jT(r,p),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must "+"be 1. Got strides ".concat(r," and dilations '").concat(p,"'")})),I.m("fused depthwiseConv2d",a,h);var N,O,A=I.Ix(_.shape,C.shape,r,p,a,h,!0);if(null!=m){N=(0,s._1)(m,"bias","fused conv2d");var R=(0,w.makeTypesMatch)(N,S),P=(0,k.Z)(R,1);N=P[0],ge.assertAndGetBroadcastShape(A.outShape,N.shape)}null!=y&&(O=(0,s._1)(y,"prelu weights","fused depthwiseConv2d"));var D=function(e,t){f.hu(I.I0(p),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(p,"'")}));var n=(0,k.Z)(t,4),i=n[0],o=n[1],s=n[2],u=n[3],c=(0,wr.Fr)(e,s,g),l=_r(o.shape,c,i,r,a,p,h),d=Cr(o,c,i.shape,r,a,p,h);return null!=u?[l,d,(0,wr.pf)(N,c)]:[l,d]},B={x:_,filter:C,bias:N,preluActivationWeights:O},M={strides:r,pad:a,dataFormat:c,dilations:p,dimRoundingMode:h,activation:g,leakyreluAlpha:b};if(null==m){var F=(0,it.cb)((function(e,t,n){var r=i.BV.runKernel(o.lu,B,M);return n([t,e,r]),E&&(r=(0,T.X)(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:D}}));return F(_,C)}var L=(0,it.cb)((function(e,t,n,r){var a=i.BV.runKernel(o.lu,B,M);return r([t,e,a,n]),E&&(a=(0,T.X)(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:D}}));return L(_,C,N)}});var Tr=(0,u.op)({fusedMatMul_:function(e){var t=e.a,n=e.b,r=e.transposeA,a=void 0!==r&&r,u=e.transposeB,c=void 0!==u&&u,l=e.bias,p=e.activation,h=void 0===p?"linear":p,m=e.preluActivationWeights,v=e.leakyreluAlpha,g=void 0===v?.2:v;if(!1===(0,wr.uy)(i.BV.state.gradientDepth,h)){var y=(0,R.O)(t,n,a,c);return null!=l&&(y=(0,d.I)(y,l)),(0,wr.QH)(y,h,m,g)}var b=(0,s._1)(t,"a","fused matMul"),x=(0,s._1)(n,"b","fused matMul"),S=(0,w.makeTypesMatch)(b,x),C=(0,k.Z)(S,2);b=C[0],x=C[1];var _=a?b.shape[b.rank-2]:b.shape[b.rank-1],I=c?x.shape[x.rank-1]:x.shape[x.rank-2],E=a?b.shape[b.rank-1]:b.shape[b.rank-2],N=c?x.shape[x.rank-2]:x.shape[x.rank-1],O=b.shape.slice(0,-2),A=x.shape.slice(0,-2),P=f.NA(O),D=f.NA(A);f.hu(_===I,(function(){return"Error in fused matMul: inner shapes (".concat(_,") and (")+"".concat(I,") of Tensors with shapes ").concat(b.shape," and ")+"".concat(x.shape," and transposeA=").concat(a)+" and transposeB=".concat(c," must match.")}));var B,M,F=ge.assertAndGetBroadcastShape(b.shape.slice(0,-2),x.shape.slice(0,-2)).concat([E,N]),L=a?(0,T.X)(b,[P,_,E]):(0,T.X)(b,[P,E,_]),V=c?(0,T.X)(x,[D,N,I]):(0,T.X)(x,[D,I,N]);if(null!=l){B=(0,s._1)(l,"bias","fused matMul");var z=(0,w.makeTypesMatch)(B,b);B=(0,k.Z)(z,1)[0],ge.assertAndGetBroadcastShape(F,B.shape)}null!=m&&(M=(0,s._1)(m,"prelu weights","fused matMul"));var Z=function(e,t){var n,r,i=(0,k.Z)(t,4),o=i[0],s=i[1],u=i[2],d=i[3],f=(0,wr.Fr)((0,T.X)(e,u.shape),u,h);return a||c?!a&&c?(n=(0,R.O)(f,s,!1,!1),r=(0,R.O)(f,o,!0,!1)):a&&!c?(n=(0,R.O)(s,f,!1,!0),r=(0,R.O)(o,f,!1,!1)):(n=(0,R.O)(s,f,!0,!0),r=(0,R.O)(f,o,!0,!0)):(n=(0,R.O)(f,s,!1,!0),r=(0,R.O)(o,f,!0,!1)),null!=l?[n,r,(0,wr.pf)(d,f)]:[n,r]},U={a:L,b:V,bias:B,preluActivationWeights:M},j={transposeA:a,transposeB:c,activation:h,leakyreluAlpha:g};if(null==l){var W=(0,it.cb)((function(e,t,n){var r=i.BV.runKernel(o.us,U,j);return n([e,t,r]),{value:(0,T.X)(r,F),gradFunc:Z}}));return W(L,V)}var G=(0,it.cb)((function(e,t,n,r){var a=i.BV.runKernel(o.us,U,j);return r([e,t,a,n]),{value:(0,T.X)(a,F),gradFunc:Z}}));return G(L,V,B)}});var Er=(0,u.op)({hammingWindow_:function(e){return yr(e,.54,.46)}});var Nr=(0,u.op)({hannWindow_:function(e){return yr(e,.5,.5)}});var Or=(0,u.op)({frame_:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=0,o=[];i+t<=e.size;)o.push(B(e,i,t)),i+=n;if(r)for(;i<e.size;){var s=i+t-e.size,u=A([B(e,i,t-s),(0,Ue.h)([s],a)]);o.push(u),i+=n}return 0===o.length?Hn([],[0,t]):(0,T.X)(A(o),[o.length,t])}});var Ar=(0,u.op)({stft_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Nr;null==r&&(r=gr(t));var i=Or(e,t,n),o=(0,P.d)(i,a(t));return Mn(o,r)}});var Rr=(0,u.op)({cropAndResize_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=(0,s._1)(e,"image","cropAndResize"),l=(0,s._1)(t,"boxes","cropAndResize","float32"),d=(0,s._1)(n,"boxInd","cropAndResize","int32"),p=l.shape[0];f.hu(4===c.rank,(function(){return"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(c.rank,".")})),f.hu(2===l.rank&&4===l.shape[1],(function(){return"Error in cropAndResize: boxes must be have size [".concat(p,",4] ")+"but had shape ".concat(l.shape,".")})),f.hu(1===d.rank&&d.shape[0]===p,(function(){return"Error in cropAndResize: boxInd must be have size [".concat(p,"] ")+"but had shape ".concat(l.shape,".")})),f.hu(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(r.length,".")})),f.hu(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was ".concat(r)})),f.hu("bilinear"===a||"nearest"===a,(function(){return"method must be bilinear or nearest, but was ".concat(a)}));var h={image:c,boxes:l,boxInd:d},m={method:a,extrapolationValue:u,cropSize:r},v=i.BV.runKernel(o.Vc,h,m);return v}});var Pr=(0,u.op)({flipLeftRight_:function(e){var t=(0,s._1)(e,"image","flipLeftRight","float32");f.hu(4===t.rank,(function(){return"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,".")}));var n={image:t};return i.BV.runKernel(o.Uy,n,{})}});var Dr=(0,u.op)({grayscaleToRGB_:function(e){var t=(0,s._1)(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];f.hu(t.rank>=2,(function(){return"Error in grayscaleToRGB: images must be at least rank 2, "+"but got rank ".concat(t.rank,".")})),f.hu(1===r,(function(){return"Error in grayscaleToRGB: last dimension of a grayscale image "+"should be size 1, but got size ".concat(r,".")}));var a=new Array(t.rank);return a.fill(1,0,n),a[n]=3,ze(t,a)}});var Br=(0,u.op)({rotateWithOffset_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=(0,s._1)(e,"image","rotateWithOffset","float32");f.hu(4===a.rank,(function(){return"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(a.rank,".")}));var u={image:a},c={radians:t,fillValue:n,center:r},l=i.BV.runKernel(o.b9,u,c);return l}});function Mr(e,t,n,r,a,i){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==i&&(i=0);var o=e.shape[0];return n=Math.min(n,o),f.hu(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '".concat(r,"'")})),f.hu(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")})),f.hu(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])})),f.hu(1===t.rank,(function(){return"scores must be a 1D tensor"})),f.hu(t.shape[0]===o,(function(){return"scores has incompatible shape with boxes. Expected ".concat(o,", ")+"but was ".concat(t.shape[0])})),f.hu(0<=i&&i<=1,(function(){return"softNmsSigma must be in [0, 1], but was '".concat(i,"'")})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}var Fr=(0,u.op)({nonMaxSuppression_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,u=(0,s._1)(e,"boxes","nonMaxSuppression","float32"),c=(0,s._1)(t,"scores","nonMaxSuppression","float32"),l=Mr(u,c,n,r,a),d={maxOutputSize:n=l.maxOutputSize,iouThreshold:r=l.iouThreshold,scoreThreshold:a=l.scoreThreshold};return i.BV.runKernel(o.uv,{boxes:u,scores:c},d)}}),Lr=n(745);function Vr(){return Vr=(0,kn.Z)((0,xn.Z)().mark((function e(t,n,r){var a,i,o,u,c,l,d,f,p,h,m=arguments;return(0,xn.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=m.length>3&&void 0!==m[3]?m[3]:.5,i=m.length>4&&void 0!==m[4]?m[4]:Number.NEGATIVE_INFINITY,o=(0,s._1)(t,"boxes","nonMaxSuppressionAsync"),u=(0,s._1)(n,"scores","nonMaxSuppressionAsync"),c=Mr(o,u,r,a,i),r=c.maxOutputSize,a=c.iouThreshold,i=c.scoreThreshold,e.next=10,Promise.all([o.data(),u.data()]);case 10:return l=e.sent,d=l[0],f=l[1],p=(0,Lr.GP)(d,f,r,a,i),h=p.selectedIndices,o!==t&&o.dispose(),u!==n&&u.dispose(),e.abrupt("return",Gn(h,"int32"));case 17:case"end":return e.stop()}}),e)}))),Vr.apply(this,arguments)}var zr=function(e,t,n){return Vr.apply(this,arguments)};var Zr=(0,u.op)({nonMaxSuppressionWithScore_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=(0,s._1)(e,"boxes","nonMaxSuppression"),l=(0,s._1)(t,"scores","nonMaxSuppression"),d=Mr(c,l,n,r,a,u),f={boxes:c,scores:l},p={maxOutputSize:n=d.maxOutputSize,iouThreshold:r=d.iouThreshold,scoreThreshold:a=d.scoreThreshold,softNmsSigma:u=d.softNmsSigma},h=i.BV.runKernel(o.W0,f,p);return{selectedIndices:h[0],selectedScores:h[1]}}});function Ur(){return Ur=(0,kn.Z)((0,xn.Z)().mark((function e(t,n,r){var a,i,o,u,c,l,d,f,p,h,m,v,g=arguments;return(0,xn.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g.length>3&&void 0!==g[3]?g[3]:.5,i=g.length>4&&void 0!==g[4]?g[4]:Number.NEGATIVE_INFINITY,o=g.length>5&&void 0!==g[5]?g[5]:0,u=(0,s._1)(t,"boxes","nonMaxSuppressionAsync"),c=(0,s._1)(n,"scores","nonMaxSuppressionAsync"),l=Mr(u,c,r,a,i,o),r=l.maxOutputSize,a=l.iouThreshold,i=l.scoreThreshold,o=l.softNmsSigma,e.next=12,Promise.all([u.data(),c.data()]);case 12:return d=e.sent,f=d[0],p=d[1],h=(0,Lr.pA)(f,p,r,a,i,o),m=h.selectedIndices,v=h.selectedScores,u!==t&&u.dispose(),c!==n&&c.dispose(),e.abrupt("return",{selectedIndices:Gn(m,"int32"),selectedScores:Gn(v)});case 19:case"end":return e.stop()}}),e)}))),Ur.apply(this,arguments)}var jr=function(e,t,n){return Ur.apply(this,arguments)};var Wr=(0,u.op)({nonMaxSuppressionPadded_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,u=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=(0,s._1)(e,"boxes","nonMaxSuppression"),l=(0,s._1)(t,"scores","nonMaxSuppression"),d=Mr(c,l,n,r,a,null),f=d.maxOutputSize,p=d.iouThreshold,h=d.scoreThreshold,m={boxes:c,scores:l},v={maxOutputSize:f,iouThreshold:p,scoreThreshold:h,padToMaxOutputSize:u},g=i.BV.runKernel(o.cy,m,v);return{selectedIndices:g[0],validOutputs:g[1]}}});function Gr(){return Gr=(0,kn.Z)((0,xn.Z)().mark((function e(t,n,r){var a,i,o,u,c,l,d,f,p,h,m,v,g,y,b,x,w=arguments;return(0,xn.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=w.length>3&&void 0!==w[3]?w[3]:.5,i=w.length>4&&void 0!==w[4]?w[4]:Number.NEGATIVE_INFINITY,o=w.length>5&&void 0!==w[5]&&w[5],u=(0,s._1)(t,"boxes","nonMaxSuppressionAsync"),c=(0,s._1)(n,"scores","nonMaxSuppressionAsync"),l=Mr(u,c,r,a,i,null),d=l.maxOutputSize,f=l.iouThreshold,p=l.scoreThreshold,e.next=11,Promise.all([u.data(),c.data()]);case 11:return h=e.sent,m=(0,k.Z)(h,2),v=m[0],g=m[1],y=(0,Lr.qP)(v,g,d,f,p,o),b=y.selectedIndices,x=y.validOutputs,u!==t&&u.dispose(),c!==n&&c.dispose(),e.abrupt("return",{selectedIndices:Gn(b,"int32"),validOutputs:(0,Oe.i)(x,"int32")});case 19:case"end":return e.stop()}}),e)}))),Gr.apply(this,arguments)}var Hr=function(e,t,n){return Gr.apply(this,arguments)},qr=n(3878),Xr=n(9199),Kr=n(181),Yr=n(5267);function Qr(e){return(0,qr.Z)(e)||(0,Xr.Z)(e)||(0,Kr.Z)(e)||(0,Yr.Z)()}var $r=(0,u.op)({resizeBilinear_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=(0,s._1)(e,"images","resizeBilinear");f.hu(3===a.rank||4===a.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),f.hu(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,".")})),f.hu(!1===r||!1===n,(function(){return"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."}));var u=a,c=!1;3===a.rank&&(c=!0,u=(0,T.X)(a,[1,a.shape[0],a.shape[1],a.shape[2]])),Qr(t);var l={images:u},d={alignCorners:n,halfPixelCenters:r,size:t},p=i.BV.runKernel(o._Y,l,d);return c?(0,T.X)(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});var Jr=(0,u.op)({resizeNearestNeighbor_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=(0,s._1)(e,"images","resizeNearestNeighbor");f.hu(3===a.rank||4===a.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),f.hu(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,".")})),f.hu("float32"===a.dtype||"int32"===a.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"})),f.hu(!1===r||!1===n,(function(){return"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."}));var u=a,c=!1;3===a.rank&&(c=!0,u=(0,T.X)(a,[1,a.shape[0],a.shape[1],a.shape[2]])),Qr(t);var l={images:u},d={alignCorners:n,halfPixelCenters:r,size:t},p=i.BV.runKernel(o.dp,l,d);return c?(0,T.X)(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});function ea(e,t){for(var n,r,a,i,o,s,u=Gn([-1]),c=Gn([0]),l=Gn([0]),f=0;f<e.size-1;f++){n=B(e,0,f+1),r=B(e,f+1),o=(0,ve.h)((0,Pe.S)(n),t),s=(0,ve.h)((0,Pe.S)(r),t);var p=(0,Pe.S)((0,P.d)(n,on(0,n.size)));a=(0,ve.h)(p,(0,Pe.S)(n));var h=(0,Ue.h)(r.shape,n.size),m=(0,d.I)(on(0,r.size),h),v=(0,P.d)(r,m);i=(0,ve.h)((0,Pe.S)(v),(0,Pe.S)(r));var g=(0,ct.l)(a,i),y=(0,ct.l)(a,i),b=(0,P.d)(o,s);l=(0,P.d)((0,P.d)(b,g),y);var x=He(l,c);c=be(x,l,c),u=be(x,Gn([f]),u)}return u}var ta=(0,u.op)({threshold_:function(e){var t,n,r,a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,c=(0,s._1)(e,"image","threshold"),l=.2989,p=.587,h=.114,m=c.shape[0]*c.shape[1],v=(0,P.d)(Gn([u]),255);if(f.hu(3===c.rank,(function(){return"Error in threshold: image must be rank 3,"+"but got rank ".concat(c.rank,".")})),f.hu(3===c.shape[2]||1===c.shape[2],(function(){return"Error in threshold: image color channel must be equal to 3 or 1"+"but got ".concat(c.shape[2],".")})),f.hu("int32"===c.dtype||"float32"===c.dtype,(function(){return"Error in dtype: image dtype must be int32 or float32,"+"but got dtype ".concat(c.dtype,".")})),f.hu("otsu"===i||"binary"===i,(function(){return"Method must be binary or otsu, but was ".concat(i)})),3===c.shape[2]){var g=Bn(c,[1,1,1],-1),y=(0,k.Z)(g,3);t=y[0],n=y[1],r=y[2];var b=(0,P.d)(t,l),x=(0,P.d)(n,p),w=(0,P.d)(r,h);a=(0,d.I)((0,d.I)(b,x),w)}else a=e;if("otsu"===i){var S=j((0,_.p)(vn(a),"int32"),(0,jn.X)([]),256);v=ea(S,m)}var C=o?et(a,v):He(a,v),I=(0,_.p)((0,P.d)(C,255),"int32");return I}});var na=(0,u.op)({transform_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5?arguments[5]:void 0,c=(0,s._1)(e,"image","transform","float32"),l=(0,s._1)(t,"transforms","transform","float32");f.hu(4===c.rank,(function(){return"Error in transform: image must be rank 4,"+"but got rank ".concat(c.rank,".")})),f.hu(2===l.rank&&(l.shape[0]===c.shape[0]||1===l.shape[0])&&8===l.shape[1],(function(){return"Error in transform: Input transform should be batch x 8 or 1 x 8"})),f.hu(null==u||2===u.length,(function(){return"Error in transform: outputShape must be [height, width] or null, "+"but got ".concat(u,".")}));var d={image:c,transforms:l},p={interpolation:n,fillMode:r,fillValue:a,outputShape:u};return i.BV.runKernel(o.wx,d,p)}});var ra=(0,u.op)({bandPart_:function(e,t,n){(0,f.hu)(t%1===0,(function(){return"bandPart(): numLower must be an integer, got ".concat(t,".")})),(0,f.hu)(n%1===0,(function(){return"bandPart(): numUpper must be an integer, got ".concat(n,".")}));var r=(0,s._1)(e,"a","bandPart");(0,f.hu)(r.rank>=2,(function(){return"bandPart(): Rank must be at least 2, got ".concat(r.rank,".")}));var a=r.shape,i=r.shape.slice(-2),o=(0,k.Z)(i,2),u=o[0],c=o[1];if(!(t<=u))throw new Error("bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(u,")."));if(!(n<=c))throw new Error("bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(c,")."));t<0&&(t=u),n<0&&(n=c);var l=(0,T.X)(on(0,u,1,"int32"),[-1,1]),d=on(0,c,1,"int32"),p=(0,ct.l)(l,d),h=ft(et(p,(0,Oe.i)(+t,"int32")),qe(p,(0,Oe.i)(-n,"int32"))),m=Ct([u,c],r.dtype);return(0,T.X)(Vn(tr((0,T.X)(r,[-1,u,c])).map((function(e){return be(h,e,m)}))),a)}});var aa=(0,u.op)({gramSchmidt_:function(e){var t;Array.isArray(e)?function(){t=!1,(0,f.hu)(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){(0,f.hu)(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[t].shape[0]," vs. ").concat(n,")")}))},a=1;a<e.length;++a)r(a)}():(t=!0,e=Bn(e,e.shape[0],0).map((function(e){return Ln(e,[0])}))),(0,f.hu)(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],").")}));for(var n=[],r=e,a=function(e){n.push(i.BV.tidy((function(){var t=r[e];if(e>0)for(var a=0;a<e;++a){var i=(0,P.d)((0,Pe.S)((0,P.d)(n[a],t)),n[a]);t=(0,ct.l)(t,i)}return(0,ve.h)(t,Be(t,"euclidean"))})))},o=0;o<e.length;++o)a(o);return t?Vn(n,0):n}}),ia=n(5875);function oa(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i.BV.tidy((function(){(0,f.hu)(2===e.shape.length,(function(){return"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor.")}));for(var n=e.shape[0],r=e.shape[1],a=Ze(n),o=(0,O.d)(e),s=Hn([[1]],[1,1]),u=(0,O.d)(s),c=n>=r?r:n,l=function(e){var t=o,c=u,l=a,d=i.BV.tidy((function(){var t=B(o,[e,e],[n-e,1]),i=Be(t),c=B(o,[e,e],[1,1]),l=be(He(c,0),Hn([[-1]]),Hn([[1]])),d=(0,ct.l)(c,(0,P.d)(l,i)),f=(0,ve.h)(t,d);u=1===f.shape[0]?(0,O.d)(s):A([s,B(f,[1,0],[f.shape[0]-1,f.shape[1]])],0);var p=(0,ot.W)((0,ve.h)((0,R.O)(l,d),i)),h=B(o,[e,0],[n-e,r]),m=(0,P.d)(p,u),v=(0,cr.p)(u);if(0===e)o=(0,ct.l)(h,(0,R.O)(m,(0,R.O)(v,h)));else{var g=(0,ct.l)(h,(0,R.O)(m,(0,R.O)(v,h)));o=A([B(o,[0,0],[e,r]),g],0)}var y=(0,cr.p)(m),b=B(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=(0,ct.l)(b,(0,R.O)((0,R.O)(b,u),y));else{var x=(0,ct.l)(b,(0,R.O)((0,R.O)(b,u),y));a=A([B(a,[0,0],[n,e]),x],1)}return[u,o,a]})),f=(0,k.Z)(d,3);u=f[0],o=f[1],a=f[2],(0,ia.B9)([t,c,l])},d=0;d<c;++d)l(d);return!t&&n>r&&(a=B(a,[0,0],[n,r]),o=B(o,[0,0],[r,r])),[a,o]}))}var sa=(0,u.op)({qr_:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((0,f.hu)(e.rank>=2,(function(){return"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)})),2===e.rank)return oa(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=tr((0,T.X)(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];r.forEach((function(e){var n=oa(e,t),r=(0,k.Z)(n,2),o=r[0],s=r[1];a.push(o),i.push(s)}));var o=(0,T.X)(Vn(a,0),e.shape),s=(0,T.X)(Vn(i,0),e.shape);return[o,s]}}),ua=n(7627);var ca=(0,u.op)({computeWeightedLoss_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ua.I.SUM_BY_NONZERO_WEIGHTS,r=(0,s._1)(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=(0,s._1)(t,"weights","computeWeightedLoss"));var i=null==a?r:(0,P.d)(r,a);if(n===ua.I.NONE)return i;if(n===ua.I.SUM)return(0,Pe.S)(i);if(n===ua.I.MEAN){if(null==a)return St(i);var o=r.size/a.size,u=(0,ve.h)((0,Pe.S)(i),(0,Pe.S)(a));return o>1?(0,ve.h)(u,(0,Oe.i)(o)):u}if(n===ua.I.SUM_BY_NONZERO_WEIGHTS){if(null==a)return(0,ve.h)((0,Pe.S)(i),(0,Oe.i)(r.size));var c=(0,P.d)(a,_t(r.shape)),l=(0,_.p)((0,Pe.S)(Dt(c,(0,Oe.i)(0))),"float32");return(0,ve.h)((0,Pe.S)(i),l)}throw Error("Unknown reduction: ".concat(n))}});var la=(0,u.op)({absoluteDifference_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ua.I.SUM_BY_NONZERO_WEIGHTS,i=(0,s._1)(e,"labels","absoluteDifference"),o=(0,s._1)(t,"predictions","absoluteDifference"),u=null;null!=n&&(u=(0,s._1)(n,"weights","absoluteDifference")),(0,f.k5)(i.shape,o.shape,"Error in absoluteDifference: ");var c=(0,a.W)((0,ct.l)(i,o));return ca(c,u,r)}});var da=(0,u.op)({cosineDistance_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ua.I.SUM_BY_NONZERO_WEIGHTS,i=(0,s._1)(e,"labels","cosineDistance"),o=(0,s._1)(t,"predictions","cosineDistance"),u=null;null!=r&&(u=(0,s._1)(r,"weights","cosineDistance")),(0,f.k5)(i.shape,o.shape,"Error in cosineDistance: ");var c=(0,Oe.i)(1),l=(0,ct.l)(c,(0,Pe.S)((0,P.d)(i,o),n,!0));return ca(l,u,a)}});var fa=(0,u.op)({hingeLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ua.I.SUM_BY_NONZERO_WEIGHTS,a=(0,s._1)(e,"labels","hingeLoss"),i=(0,s._1)(t,"predictions","hingeLoss"),o=null;null!=n&&(o=(0,s._1)(n,"weights","hingeLoss")),(0,f.k5)(a.shape,i.shape,"Error in hingeLoss: ");var u=(0,Oe.i)(1);a=(0,ct.l)((0,P.d)((0,Oe.i)(2),a),u);var c=(0,cn.U)((0,ct.l)(u,(0,P.d)(a,i)));return ca(c,o,r)}});var pa=(0,u.op)({huberLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ua.I.SUM_BY_NONZERO_WEIGHTS,o=(0,s._1)(e,"labels","huberLoss"),u=(0,s._1)(t,"predictions","huberLoss"),c=null;null!=n&&(c=(0,s._1)(n,"weights","huberLoss")),(0,f.k5)(o.shape,u.shape,"Error in huberLoss: ");var l=(0,Oe.i)(r),p=(0,a.W)((0,ct.l)(u,o)),h=Et(p,l),m=(0,ct.l)(p,h),v=(0,d.I)((0,P.d)((0,Oe.i)(.5),(0,Re.h)(h)),(0,P.d)(l,m));return ca(v,c,i)}});var ha=(0,u.op)({logLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ua.I.SUM_BY_NONZERO_WEIGHTS,i=(0,s._1)(e,"labels","logLoss"),o=(0,s._1)(t,"predictions","logLoss"),u=null;null!=n&&(u=(0,s._1)(n,"weights","logLoss")),(0,f.k5)(i.shape,o.shape,"Error in logLoss: ");var c=(0,Oe.i)(1),l=(0,Oe.i)(r),p=(0,ot.W)((0,P.d)(i,rt((0,d.I)(o,l)))),h=(0,P.d)((0,ct.l)(c,i),rt((0,d.I)((0,ct.l)(c,o),l))),m=(0,ct.l)(p,h);return ca(m,u,a)}});var ma=(0,u.op)({meanSquaredError_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ua.I.SUM_BY_NONZERO_WEIGHTS,a=(0,s._1)(e,"labels","meanSquaredError"),i=(0,s._1)(t,"predictions","meanSquaredError"),o=null;null!=n&&(o=(0,s._1)(n,"weights","meanSquaredError")),(0,f.k5)(a.shape,i.shape,"Error in meanSquaredError: ");var u=Fn(a,i);return ca(u,o,r)}});function va(e,t){var n=(0,s._1)(e,"labels","sigmoidCrossEntropyWithLogits"),r=(0,s._1)(t,"logits","sigmoidCrossEntropyWithLogits");(0,f.k5)(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var i=(0,cn.U)(r),o=(0,P.d)(r,n),u=at(Fe((0,ot.W)((0,a.W)(r))));return(0,d.I)((0,ct.l)(i,o),u)}var ga=(0,u.op)({sigmoidCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ua.I.SUM_BY_NONZERO_WEIGHTS,i=(0,s._1)(e,"multiClassLabels","sigmoidCrossEntropy"),o=(0,s._1)(t,"logits","sigmoidCrossEntropy"),u=null;if(null!=n&&(u=(0,s._1)(n,"weights","sigmoidCrossEntropy")),(0,f.k5)(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var c=(0,Oe.i)(r),l=(0,Oe.i)(1),p=(0,Oe.i)(.5);i=(0,d.I)((0,P.d)(i,(0,ct.l)(l,c)),(0,P.d)(p,c))}var h=va(i,o);return ca(h,u,a)}});function ya(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+"supported. Labels / logits was rank ".concat(t.rank," ")+"and dim was ".concat(n));var r=(0,it.cb)((function(e,t,r){var a=dt(t,[n],!0),i=(0,ct.l)((0,_.p)(t,"float32"),a);r([e,i]);var o=(0,ot.W)((0,P.d)(i,e));return{value:(0,Pe.S)(o,[n]),gradFunc:function(e,t){var r=(0,k.Z)(t,2),a=r[0],i=r[1],o=(0,Ie.rv)(e.shape,[n]);return[(0,P.d)((0,T.X)(e,o),(0,ct.l)((0,_.p)(a,"float32"),Fe(i))),(0,P.d)((0,T.X)(e,o),(0,ct.l)(Fe(i),(0,_.p)(a,"float32")))]}}}));return r(e,t)}var ba=(0,u.op)({softmaxCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ua.I.SUM_BY_NONZERO_WEIGHTS,i=(0,s._1)(e,"onehotLabels","softmaxCrossEntropy"),o=(0,s._1)(t,"logits","softmaxCrossEntropy"),u=null;if(null!=n&&(u=(0,s._1)(n,"weights","softmaxCrossEntropy")),(0,f.k5)(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var c=(0,Oe.i)(r),l=(0,Oe.i)(1),p=(0,Oe.i)(i.shape[1]);i=(0,d.I)((0,P.d)(i,(0,ct.l)(l,c)),(0,ve.h)(c,p))}var h=ya(i,o);return ca(h,u,a)}});var xa=(0,u.op)({sparseFillEmptyRows_:function(e,t,n,r){var a=(0,s._1)(e,"indices","sparseFillEmptyRows","int32"),u=(0,s._1)(t,"values","sparseFillEmptyRows"),c=(0,s._1)(n,"denseShape","sparseFillEmptyRows","int32"),l=(0,s._1)(r,"defaultValue","sparseFillEmptyRows",u.dtype);if(2!==a.rank)throw new Error("Indices should be Tensor2D but received shape\n        ".concat(a.shape));if(1!==u.rank)throw new Error("Values should be Tensor1D but received shape ".concat(u.shape));if(1!==c.rank)throw new Error("Dense shape should be Tensor1D but received shape ".concat(c.shape));if(0!==l.rank)throw new Error("Default value should be a scalar but received shape ".concat(l.shape));var d={indices:a,values:u,denseShape:c,defaultValue:l},f=i.BV.runKernel(o.O3,d);return{outputIndices:f[0],outputValues:f[1],emptyRowIndicator:f[2],reverseIndexMap:f[3]}}});var ka=(0,u.op)({sparseReshape_:function(e,t,n){var r=(0,s._1)(e,"inputIndices","sparseReshape","int32"),a=(0,s._1)(t,"inputShape","sparseReshape","int32"),u=(0,s._1)(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error("Input indices should be Tensor2D but received shape\n        ".concat(r.shape));if(1!==a.rank)throw new Error("Input shape should be Tensor1D but received shape ".concat(a.shape));if(1!==u.rank)throw new Error("New shape should be Tensor1D but received shape ".concat(u.shape));var c={inputIndices:r,inputShape:a,newShape:u},l=i.BV.runKernel(o.nh,c);return{outputIndices:l[0],outputShape:l[1]}}});var wa=(0,u.op)({sparseSegmentMean_:function(e,t,n){var r=(0,s._1)(e,"data","sparseSegmentMean"),a=(0,s._1)(t,"indices","sparseSegmentMean","int32"),u=(0,s._1)(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n          ".concat(a.shape));if(1!==u.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          ".concat(u.shape));var c={data:r,indices:a,segmentIds:u};return i.BV.runKernel(o.YW,c)}});var Sa=(0,u.op)({sparseSegmentSum_:function(e,t,n){var r=(0,s._1)(e,"data","sparseSegmentSum"),a=(0,s._1)(t,"indices","sparseSegmentSum","int32"),u=(0,s._1)(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n         ".concat(a.shape));if(1!==u.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         ".concat(u.shape));var c={data:r,indices:a,segmentIds:u};return i.BV.runKernel(o.Zj,c)}});var Ca=(0,u.op)({stringNGrams_:function(e,t,n,r,a,u,c,l){var d=(0,s._1)(e,"data","stringNGrams","string");if("string"!==d.dtype)throw new Error("Data must be of datatype string");if(1!==d.shape.length)throw new Error("Data must be a vector, saw: ".concat(d.shape));var f=(0,s._1)(t,"dataSplits","stringNGrams");if("int32"!==f.dtype)throw new Error("Data splits must be of datatype int32");var p={separator:n,nGramWidths:r,leftPad:a,rightPad:u,padWidth:c,preserveShortSequences:l},h={data:d,dataSplits:f},m=i.BV.runKernel(o._J,h,p);return{nGrams:m[0],nGramsSplits:m[1]}}});var _a=(0,u.op)({stringSplit_:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=(0,s._1)(e,"input","stringSplit","string"),a=(0,s._1)(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error("Input should be Tensor1D but received shape ".concat(r.shape));if(0!==a.rank)throw new Error("Delimiter should be a scalar but received shape ".concat(a.shape));var u={skipEmpty:n},c={input:r,delimiter:a},l=i.BV.runKernel(o.s1,c,u);return{indices:l[0],values:l[1],shape:l[2]}}});var Ia=(0,u.op)({stringToHashBucketFast_:function(e,t){var n=(0,s._1)(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");var a={input:n};return i.BV.runKernel(o.Xk,a,r)}}),Ta={fft:Rn,ifft:Pn,rfft:Mn,irfft:Dn},Ea={hammingWindow:Er,hannWindow:Nr,frame:Or,stft:Ar},Na={flipLeftRight:Pr,grayscaleToRGB:Dr,resizeNearestNeighbor:Jr,resizeBilinear:$r,rotateWithOffset:Br,cropAndResize:Rr,nonMaxSuppression:Fr,nonMaxSuppressionAsync:zr,nonMaxSuppressionWithScore:Zr,nonMaxSuppressionWithScoreAsync:jr,nonMaxSuppressionPadded:Wr,nonMaxSuppressionPaddedAsync:Hr,threshold:ta,transform:na},Oa={bandPart:ra,gramSchmidt:aa,qr:sa},Aa={absoluteDifference:la,computeWeightedLoss:ca,cosineDistance:da,hingeLoss:fa,huberLoss:pa,logLoss:ha,meanSquaredError:ma,sigmoidCrossEntropy:ga,softmaxCrossEntropy:ba},Ra={sparseFillEmptyRows:xa,sparseReshape:ka,sparseSegmentMean:wa,sparseSegmentSum:Sa},Pa={stringNGrams:Ca,stringSplit:_a,stringToHashBucketFast:Ia}},4334:function(e,t,n){"use strict";n.d(t,{s:function(){return u}});var r=n(9439),a=n(318),i=n(2145),o=n(9064),s=n(8354);var u=(0,n(8640).op)({pow_:function(e,t){var n=(0,s._1)(e,"base","pow"),u=(0,s._1)(t,"exp","pow"),c=(0,o.makeTypesMatch)(n,u),l=(0,r.Z)(c,2),d={a:n=l[0],b:u=l[1]};return a.BV.runKernel(i.pe,d)}})},6859:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({prelu_:function(e,t){var n={x:(0,i._1)(e,"x","prelu"),alpha:(0,i._1)(t,"alpha","prelu")};return r.BV.runKernel(a.o0,n)}})},4600:function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}n.d(t,{S:function(){return r}})},6972:function(e,t,n){"use strict";n.d(t,{k:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({real_:function(e){var t={input:(0,i._1)(e,"input","real")};return r.BV.runKernel(a.xJ,t)}})},7539:function(e,t,n){"use strict";n.d(t,{U:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({relu_:function(e){var t={x:(0,i._1)(e,"x","relu")};return r.BV.runKernel(a.qk,t)}})},5900:function(e,t,n){"use strict";n.d(t,{b:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({relu6_:function(e){var t={x:(0,i._1)(e,"x","relu6")};return r.BV.runKernel(a.Sb,t)}})},5561:function(e,t,n){"use strict";n.d(t,{X:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({reshape_:function(e,t){var n={x:(0,i._1)(e,"x","reshape","string_or_numeric")},o={shape:t};return r.BV.runKernel(a.HZ,n,o)}})},7067:function(e,t,n){"use strict";n.d(t,{i:function(){return i}});var r=n(6147),a=n(7960);function i(e,t){if(((0,r.fU)(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&(0,r.fU)(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return(0,a.H)(e,[],[],t)}},8604:function(e,t,n){"use strict";n.r(t),n.d(t,{calculateShapes:function(){return s},validateInput:function(){return o},validateUpdateShape:function(){return i}});var r=n(3433),a=n(6147);function i(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + "+"shape[sliceDim:], got updates.shape: ".concat(n.shape)+", indices.shape: ".concat(t.shape,", shape: ").concat(e)+", sliceDim: ".concat(r,", and batchDim: ").concat(a,".");if(n.rank<a)throw new Error(i+" update.rank < ".concat(a,". "));if(e.length<r+(n.rank-a))throw new Error(i+" Output shape length < ".concat(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(i+" update.rank != ".concat(a+e.length-r));for(var o=0;o<a;++o)if(n.shape[o]!==t.shape[o])throw new Error(i+" updates.shape[".concat(o,"] (").concat(n.shape[o],") != indices.shape[").concat(o,"] (").concat(t.shape[o],")."));for(var s=0;s<n.rank-a;++s)if(n.shape[s+a]!==e[s+r])throw new Error(i+" updates.shape[".concat(s+a,"] (").concat(n.shape[s+a],") != shape[").concat(s+a,"] (").concat(e[s+a],")"))}function o(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+" but the rank was ".concat(e.rank,"."));if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(0===e.size)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}i(n,t,e)}function s(e,t,n){for(var i=t.shape.length,o=i>1?t.shape[i-1]:1,s=n.length,u=1,c=o;c<s;++c)u*=n[c];var l=o<1?1:o;return{sliceRank:o,numUpdates:(0,a.NA)(t.shape)/l,sliceSize:u,strides:[].concat((0,r.Z)((0,a.e3)(n.slice(0,o))),[1]),outputSize:(0,a.NA)(n)}}},7643:function(e,t,n){"use strict";n.d(t,{X:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({sigmoid_:function(e){var t={x:(0,i._1)(e,"x","sigmoid","float32")};return r.BV.runKernel(a.a5,t)}})},6902:function(e,t,n){"use strict";n.d(t,{_:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({sqrt_:function(e){var t={x:(0,i._1)(e,"x","sqrt","float32")};return r.BV.runKernel(a.FK,t)}})},7391:function(e,t,n){"use strict";n.d(t,{h:function(){return i}});var r=n(318),a=n(8354);var i=(0,n(8640).op)({square_:function(e){var t=(0,a._1)(e,"x","square");return r.BV.runKernel("Square",{x:t},{})}})},4031:function(e,t,n){"use strict";n.d(t,{N:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({step_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,i._1)(e,"x","step"),o={x:n},s={alpha:t};return r.BV.runKernel(a.h8,o,s)}})},4774:function(e,t,n){"use strict";n.d(t,{l:function(){return u}});var r=n(9439),a=n(318),i=n(2145),o=n(9064),s=n(8354);var u=(0,n(8640).op)({sub_:function(e,t){var n=(0,s._1)(e,"a","sub"),u=(0,s._1)(t,"b","sub"),c=(0,o.makeTypesMatch)(n,u),l=(0,r.Z)(c,2),d={a:n=l[0],b:u=l[1]};return a.BV.runKernel(i.Tr,d)}})},227:function(e,t,n){"use strict";n.d(t,{S:function(){return s}});var r=n(318),a=n(2145),i=n(8354),o=n(9118);var s=(0,n(8640).op)({sum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=(0,i._1)(e,"x","sum");"bool"===s.dtype&&(s=(0,o.p)(s,"int32"));var u={x:s},c={axis:t,keepDims:n};return r.BV.runKernel(a.GB,u,c)}})},2442:function(e,t,n){"use strict";n.d(t,{X:function(){return i}});var r=n(8354),a=n(7960);function i(e,t,n){var i=(0,r.C)(e,n);return(0,a.H)(e,t,i,n)}},3123:function(e,t,n){"use strict";n.d(t,{w:function(){return o}});var r=n(8354),a=n(6147),i=n(7960);function o(e,t,n){if((0,a.Cq)(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var o=(0,r.C)(e,n);if(3!==o.length&&1!==o.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===o.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return(0,i.H)(e,t,o,n)}},7960:function(e,t,n){"use strict";n.d(t,{H:function(){return o}});var r=n(318),a=n(6147),i=n(115);function o(e,t,n,o){if(null==o&&(o=(0,a.D2)(e)),"complex64"===o)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!(0,a.fU)(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){(0,a.Mu)(t);var s=(0,a.NA)(t),u=(0,a.NA)(n);(0,a.hu)(s===u,(function(){return"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(s," values but has ").concat(u)}));for(var c=0;c<n.length;++c){var l=n[c],d=c!==n.length-1||l!==(0,a.NA)(t.slice(c));(0,a.hu)(n[c]===t[c]||!d,(function(){return"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). ")}))}}return(0,a.fU)(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==o?(0,i.toTypedArray)(e,o):(0,a.xH)(e,[],!0),r.BV.makeTensor(e,t,o)}},1240:function(e,t,n){"use strict";n.d(t,{p:function(){return p}});var r=n(318),a=n(5875),i=n(2145),o=n(8354),s=n(6147),u=n(9253),c=n(6996),l=n(4362),d=n(8640),f=n(6972);var p=(0,d.op)({transpose_:function(e,t,n){var d=(0,o._1)(e,"x","transpose");if(null==t&&(t=d.shape.map((function(e,t){return t})).reverse()),s.hu(d.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(d.rank," ")+"must match length of perm ".concat(t,".")})),t.forEach((function(e){s.hu(e>=0&&e<d.rank,(function(){return"All entries in 'perm' must be between 0 and ".concat(d.rank-1)+" but got ".concat(t)}))})),d.rank<=1)return d.clone();var p={x:d},h={perm:t};return"complex64"===d.dtype?(0,a.lu)((function(){var e=(0,f.k)(d),t=(0,c.a)(d);return e=r.BV.runKernel(i.G3,{x:e},h),t=r.BV.runKernel(i.G3,{x:t},h),n&&(t=(0,l.W)(t)),(0,u.P)(e,t)})):r.BV.runKernel(i.G3,p,h)}})},7293:function(e,t,n){"use strict";n.d(t,{P:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({zerosLike_:function(e){var t={x:(0,i._1)(e,"x","zerosLike")};return r.BV.runKernel(a.Ru,t)}})},4376:function(e,t,n){"use strict";n.d(t,{es:function(){return C},YD:function(){return y},_w:function(){return _},FZ:function(){return S},Vp:function(){return w},Vi:function(){return k}});var r=n(136),a=n(9388),i=n(4165),o=n(5861),s=n(5671),u=n(3144),c=n(6581),l=n(3433),d=n(6147);function f(e,t,n,r){var a=(0,d.e3)(t),i=function(e,t,n,r){var a=(0,d.NA)(t),i=r[r.length-1],o=new Array(i).fill(0),s=t.length,u="complex64"===n?v(e):e;if(s>1)for(var c=0;c<a/i;c++)for(var l=c*i,f=0;f<i;f++)o[f]=Math.max(o[f],p(u[l+f],0,n).length);return o}(e,t,n,a),o=t.length,s=m(e,t,n,a,i),u=["Tensor"];return r&&(u.push("  dtype: ".concat(n)),u.push("  rank: ".concat(o)),u.push("  shape: [".concat(t,"]")),u.push("  values:")),u.push(s.map((function(e){return"    "+e})).join("\n")),u.join("\n")}function p(e,t,n){var r;return r=Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(7))," + ")+"".concat(parseFloat(e[1].toFixed(7)),"j"):(0,d.HD)(e)?"'".concat(e,"'"):"bool"===n?h(e):parseFloat(e.toFixed(7)).toString(),(0,d.oj)(r,t)}function h(e){return 0===e?"false":"true"}function m(e,t,n,r,a){var i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o="complex64"===n?2:1,s=t[0],u=t.length;if(0===u){if("complex64"===n){var c=v(e);return[p(c[0],0,n)]}return"bool"===n?[h(e[0])]:[e[0].toString()]}if(1===u){if(s>20){var d=3*o,f=Array.from(e.slice(0,d)),g=Array.from(e.slice((s-3)*o,s*o));return"complex64"===n&&(f=v(f),g=v(g)),["["+f.map((function(e,t){return p(e,a[t],n)})).join(", ")+", ..., "+g.map((function(e,t){return p(e,a[s-3+t],n)})).join(", ")+"]"]}var y="complex64"===n?v(e):Array.from(e);return["["+y.map((function(e,t){return p(e,a[t],n)})).join(", ")+"]"]}var b=t.slice(1),x=r.slice(1),k=r[0]*o,w=[];if(s>20){for(var S=0;S<3;S++){var C=S*k,_=C+k;w.push.apply(w,(0,l.Z)(m(e.slice(C,_),b,n,x,a,!1)))}w.push("...");for(var I=s-3;I<s;I++){var T=I*k,E=T+k;w.push.apply(w,(0,l.Z)(m(e.slice(T,E),b,n,x,a,I===s-1)))}}else for(var N=0;N<s;N++){var O=N*k,A=O+k;w.push.apply(w,(0,l.Z)(m(e.slice(O,A),b,n,x,a,N===s-1)))}var R=2===u?",":"";w[0]="["+w[0]+R;for(var P=1;P<w.length-1;P++)w[P]=" "+w[P]+R;for(var D=",\n",B=2;B<u;B++)D+="\n";return w[w.length-1]=" "+w[w.length-1]+"]"+(i?"":D),w}function v(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var g=n(115),y=function(){function e(t,n,r){var a=this;if((0,s.Z)(this,e),this.dtype=n,this.shape=t.slice(),this.size=d.NA(t),null!=r){var i=r.length;d.hu(i===this.size,(function(){return"Length of values '".concat(i,"' does not match the size ")+"inferred by the shape '".concat(a.size,"'.")}))}if("complex64"===n)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||d.rQ(n,this.size),this.strides=(0,d.e3)(t)}return(0,u.Z)(e,[{key:"set",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];0===r.length&&(r=[0]),d.hu(r.length===this.rank,(function(){return"The number of provided coordinates (".concat(r.length,") must ")+"match the rank (".concat(t.rank,")")}));var i=this.locToIndex(r);this.values[i]=e}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);for(var r=0,a=0,i=t;a<i.length;a++){var o=i[a];if(o<0||o>=this.shape[r]){var s="Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape);throw new Error(s)}r++}for(var u=t[t.length-1],c=0;c<t.length-1;++c)u+=this.strides[c]*t[c];return this.values[u]}},{key:"locToIndex",value:function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}},{key:"indexToLoc",value:function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}},{key:"rank",get:function(){return this.shape.length}},{key:"toTensor",value:function(){return b().makeTensor(this.values,this.shape,this.dtype)}}]),e}(),b=null,x=null;function k(e){b=e}function w(e){x=e}function S(e){e}var C=function(){function e(t,n,r,a){(0,s.Z)(this,e),this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=d.NA(t),this.strides=(0,d.e3)(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return(0,u.Z)(e,[{key:"rank",get:function(){return this.shape.length}},{key:"buffer",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",x.buffer(this.shape,this.dtype,t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bufferSync",value:function(){return x.buffer(this.shape,this.dtype,this.dataSync())}},{key:"array",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",(0,d.GX)(this.shape,t,"complex64"===this.dtype));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"arraySync",value:function(){return(0,d.GX)(this.shape,this.dataSync(),"complex64"===this.dtype)}},{key:"data",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwIfDisposed(),t=b().read(this.dataId),"string"!==this.dtype){e.next=13;break}return e.next=5,t;case 5:return n=e.sent,e.prev=6,e.abrupt("return",n.map((function(e){return g.decodeString(e)})));case 10:throw e.prev=10,e.t0=e.catch(6),new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this,[[6,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"dataToGPU",value:function(e){return this.throwIfDisposed(),b().readToGPU(this.dataId,e)}},{key:"dataSync",value:function(){this.throwIfDisposed();var e=b().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return g.decodeString(e)}))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}},{key:"bytes",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfDisposed(),e.next=3,b().read(this.dataId);case 3:if(t=e.sent,"string"!==this.dtype){e.next=8;break}return e.abrupt("return",t);case 8:return e.abrupt("return",new Uint8Array(t.buffer));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){this.isDisposed||(b().disposeTensor(this),this.isDisposedInternal=!0)}},{key:"isDisposed",get:function(){return this.isDisposedInternal}},{key:"throwIfDisposed",value:function(){if(this.isDisposed)throw new Error("Tensor is disposed.")}},{key:"print",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return x.print(this,e)}},{key:"clone",value:function(){return this.throwIfDisposed(),x.clone(this)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.dataSync();return f(t,this.shape,this.dtype,e)}},{key:"cast",value:function(e){return this.throwIfDisposed(),x.cast(this,e)}},{key:"variable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),b().makeVariable(this,e,t,n)}}]),e}();Object.defineProperty(C,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}}),(0,c.R)("Tensor",(function(){return C}));var _=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e,r,a,i){var o;return(0,s.Z)(this,n),(o=t.call(this,e.shape,e.dtype,e.dataId,i)).trainable=r,o.name=a,o}return(0,u.Z)(n,[{key:"assign",value:function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!d.cO(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));b().disposeTensor(this),this.dataId=e.dataId,b().incRef(this,null)}},{key:"dispose",value:function(){b().disposeVariable(this),this.isDisposedInternal=!0}}]),n}(C);Object.defineProperty(_,Symbol.hasInstance,{value:function(e){return e instanceof C&&null!=e.assign&&e.assign instanceof Function}})},9064:function(e,t,n){"use strict";n.r(t),n.d(t,{assertTypesMatch:function(){return s},getTensorsInContainer:function(){return c},isTensorInList:function(){return u},makeTypesMatch:function(){return o}});var r=n(4376),a=n(3525),i=n(6147);function o(e,t){if(e.dtype===t.dtype)return[e,t];var n=(0,a.x8)(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function s(e,t){(0,i.hu)(e.dtype===t.dtype,(function(){return"The dtypes of the first(".concat(e.dtype,") and")+" second(".concat(t.dtype,") input must match")}))}function u(e,t){return t.some((function(t){return t.id===e.id}))}function c(e){var t=[];return l(e,t,new Set),t}function l(e,t,n){if(null!=e)if(e instanceof r.es)t.push(e);else if(a=e,Array.isArray(a)||"object"===typeof a){var a,i=e;for(var o in i){var s=i[o];n.has(s)||(n.add(s),l(s,t,n))}}}},8354:function(e,t,n){"use strict";n.d(t,{C:function(){return u},_1:function(){return d},sI:function(){return f}});var r=n(318),a=n(5050),i=n(4376),o=n(6147),s=n(115);function u(e,t){var n=e;if((0,o.fU)(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||(0,o.fU)(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&(0,a.OB)().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&c(e,r,[]),r}function c(e,t,n){if(n=n||[],Array.isArray(e)||(0,o.fU)(e)){(0,o.hu)(t.length>0,(function(){return"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements")})),(0,o.hu)(e.length===t[0],(function(){return"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements")}));for(var r=t.slice(1),a=0;a<e.length;++a)c(e[a],r,n.concat(a))}else(0,o.hu)(0===t.length,(function(){return"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements")}))}function l(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function d(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof i.es)return l(a,e.dtype,t,n),e;var c=(0,o.D2)(e);if("string"!==c&&["bool","int32","float32"].indexOf(a)>=0&&(c=a),l(a,c,t,n),null==e||!(0,o.fU)(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){var d=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(d,"'"))}var f=u(e,c);(0,o.fU)(e)||Array.isArray(e)||(e=[e]);var p=!0,h="string"!==c?(0,s.toTypedArray)(e,c):(0,o.xH)(e,[],p);return r.BV.makeTensor(h,f,c)}function f(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");var a=e;return a.map((function(e,a){return d(e,"".concat(t,"[").concat(a,"]"),n,r)}))}},3525:function(e,t,n){"use strict";var r,a,i,o,s;n.d(t,{x8:function(){return c},yw:function(){return r},z4:function(){return l}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(r||(r={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(a||(a={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(i||(i={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(o||(o={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(s||(s={}));var u={float32:o,int32:a,bool:i,complex64:s};function c(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return u[e][t]}function l(e){return c(e,"int32")}},115:function(e,t,n){"use strict";n.r(t),n.d(t,{arraysEqual:function(){return a.cO},assert:function(){return a.hu},assertNonNegativeIntegerDimensions:function(){return a.Mu},assertNonNull:function(){return a.Cq},assertShapesMatch:function(){return a.k5},bytesFromStringArray:function(){return a.Ub},bytesPerElement:function(){return a.bT},checkConversionForErrors:function(){return a.D5},clamp:function(){return a.uZ},computeStrides:function(){return a.e3},createScalarValue:function(){return w},createShuffledIndices:function(){return a.U$},decodeString:function(){return T},distSquared:function(){return a.E7},encodeString:function(){return I},fetch:function(){return _},fingerPrint64:function(){return k},flatten:function(){return a.xH},getArrayFromDType:function(){return a.rQ},getTypedArrayFromDType:function(){return a.WP},hasEncodingLoss:function(){return a.QB},hexToLong:function(){return s},indexToLoc:function(){return a.NE},inferDtype:function(){return a.D2},inferFromImplicitShape:function(){return a.JZ},isBoolean:function(){return a.jn},isFunction:function(){return a.mf},isInt:function(){return a.GN},isNumber:function(){return a.hj},isPromise:function(){return a.tI},isScalarShape:function(){return a.N9},isString:function(){return a.HD},isTypedArray:function(){return a.fU},isValidDtype:function(){return a.LP},locToIndex:function(){return a.qy},makeOnesTypedArray:function(){return a.p8},makeZerosNestedTypedArray:function(){return a.l6},makeZerosTypedArray:function(){return a.wT},nearestDivisor:function(){return a.jP},nearestLargerEven:function(){return a.nY},now:function(){return C},parseAxisParam:function(){return a.EC},randUniform:function(){return a.bj},repeatedTry:function(){return a.WD},rightPad:function(){return a.oj},shuffle:function(){return a.TV},shuffleCombo:function(){return a.d7},sizeFromShape:function(){return a.NA},sizeToSquarishShape:function(){return a.YP},squeezeShape:function(){return a.bp},sum:function(){return a.Sm},swap:function(){return a.LF},tanh:function(){return a.AE},toNestedArray:function(){return a.GX},toTypedArray:function(){return S}});var r=n(5050),a=n(6147),i=n(8987),o=n.n(i)()||i;function s(e){return o.fromString(e,!0,16)}var u=s("c3a5c85c97cb3127"),c=s("b492b66fbe98f273"),l=s("9ae16a3b2f90404f");function d(e){return e.xor(e.shru(47))}function f(e,t,n){var r=e.slice(t,t+n);return o.fromBytes(Array.from(r),!0,!0)}function p(e,t){return f(e,t,8)}function h(e,t){return f(e,t,4)}function m(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s("9ddfea08eb382d69"),r=e.xor(t).mul(n);r=r.xor(r.shru(47));var a=t.xor(r).mul(n);return a=(a=a.xor(a.shru(47))).mul(n)}function g(e,t,n,r){return function(e,t,n,r,a,i){a=a.add(e),i=m(i.add(a).add(r),21);var o=a;return a=(a=a.add(t)).add(n),i=i.add(m(a,44)),[a.add(r),i.add(o)]}(p(e,t),p(e,t+8),p(e,t+16),p(e,t+24),n,r)}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){var n=l.add(2*t),r=p(e,0).add(l),a=p(e,t-8),i=m(a,37).mul(n).add(r),o=m(r,25).add(a).mul(n);return v(i,o,n)}if(t>=4){var s=l.add(2*t),c=h(e,0);return v(c.shl(3).add(t),h(e,t-4),s)}if(t>0){var f=e[0],g=e[t>>1],y=e[t-1],b=f+(g<<8),x=t+(y<<2);return d(l.mul(b).xor(u.mul(x))).mul(l)}return l}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=l.add(2*t),r=p(e,0).mul(c),a=p(e,8),i=p(e,t-8).mul(n),o=p(e,t-16).mul(l);return v(m(r.add(a),43).add(m(i,30)).add(o),r.add(m(a.add(l),18)).add(i),n)}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=l.add(2*t),r=p(e,0).mul(l),a=p(e,8),i=p(e,t-8).mul(n),o=p(e,t-16).mul(l),s=m(r.add(a),43).add(m(i,30)).add(o),u=v(s,r.add(m(a.add(l),18)).add(i),n),c=p(e,16).mul(n),d=p(e,24),f=s.add(p(e,t-32)).mul(n),h=u.add(p(e,t-24)).mul(n);return v(m(c.add(d),43).add(m(f,30)).add(h),c.add(m(d.add(r),18)).add(f),n)}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=o.fromNumber(81,!0);if(t<=32)return t<=16?y(e,t):b(e,t);if(t<=64)return x(e,t);var r=n,a=n.mul(c).add(113),i=d(a.mul(l).add(113)).mul(l),s=[o.UZERO,o.UZERO],f=[o.UZERO,o.UZERO];r=r.mul(l).add(p(e,0));var h=0,k=64*(t-1>>6),w=k+(t-1&63)-63;do{r=m(r.add(a).add(s[0]).add(p(e,h+8)),37).mul(c),a=m(a.add(s[1]).add(p(e,h+48)),42).mul(c),r=r.xor(f[1]),a=a.add(s[0]).add(p(e,h+40)),i=m(i.add(f[0]),33).mul(c),s=g(e,h,s[1].mul(c),r.add(f[0])),f=g(e,h+32,i.add(f[1]),a.add(p(e,h+16)));var S=[r,i];i=S[0],r=S[1],h+=64}while(h!==k);var C=c.add(i.and(255).shl(1));h=w,f[0]=f[0].add(t-1&63),s[0]=s[0].add(f[0]),f[0]=f[0].add(s[0]),r=m(r.add(a).add(s[0]).add(p(e,h+8)),37).mul(C),a=m(a.add(s[1]).add(p(e,h+48)),42).mul(C),r=r.xor(f[1].mul(9)),a=a.add(s[0].mul(9).add(p(e,h+40))),i=m(i.add(f[0]),33).mul(C),s=g(e,h,s[1].mul(C),r.add(f[0])),f=g(e,h+32,i.add(f[1]),a.add(p(e,h+16)));var _=[r,i];return i=_[0],r=_[1],v(v(s[0],f[0],C).add(d(a).mul(u)).add(i),v(s[1],f[1],C).add(r),C)}function w(e,t){return"string"===t?I(e):S([e],t)}function S(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=a.xH(e)),(0,r.OB)().getBool("DEBUG")&&a.D5(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var n=new Uint8Array(e.length),i=0;i<n.length;++i)0!==Math.round(e[i])&&(n[i]=1);return n}throw new Error("Unknown data type ".concat(t))}function C(){return(0,r.OB)().platform.now()}function _(e,t){return(0,r.OB)().platform.fetch(e,t)}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",(0,r.OB)().platform.encode(e,t)}function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",(0,r.OB)().platform.decode(e,t)}},6147:function(e,t,n){"use strict";function r(e){for(var t=e.length,n=0;t>0;)n=Math.random()*t|0,s(e,--t,n)}function a(e,t){if(e.length!==t.length)throw new Error("Array sizes must match to be shuffled together "+"First array length was ".concat(e.length)+"Second array length was ".concat(t.length));for(var n=e.length,r=0;n>0;)r=Math.random()*n|0,s(e,--n,r),s(t,n,r)}function i(e,t,n){return Math.max(e,Math.min(t,n))}function o(e){return e%2===0?e:e+1}function s(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function u(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function c(e,t){var n=Math.random();return t*n+(1-n)*e}function l(e,t){for(var n=0,r=0;r<e.length;r++){var a=Number(e[r])-Number(t[r]);n+=a*a}return n}function d(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function f(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";d(g(e,t),(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}function p(e){d(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),Array.isArray(e)||R(e)&&!n)for(var r=0;r<e.length;++r)h(e[r],t,n);else t.push(e);return t}function m(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function v(e){return 0===e.length}function g(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function y(e){return e%1===0}function b(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function x(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function k(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return r(t),t}function w(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return 0},n=arguments.length>2?arguments[2]:void 0;return new Promise((function(r,a){var i=0;!function o(){if(e())r();else{i++;var s=t(i);null!=n&&i>=n?a():setTimeout(o,s)}}()}))}function C(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(r," and dim ").concat(a));r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found ".concat(e[a]," at dim ").concat(a));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));var i=e.slice();return i[r]=t/n,i}function _(e,t){var n=t.length;return d((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e)})),d(e.every((function(e){return y(e)})),(function(){return"All values in axis param must be integers but "+"got axis ".concat(e)})),e.map((function(e){return e<0?n+e:e}))}function I(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,i=null==t||a?null:_(t,e).sort(),o=0,s=0;s<e.length;++s){if(null!=i){if(i[o]===s&&1!==e[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(e[s],"' is not 1"));(null==i[o]||i[o]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),i[o]<=s&&o++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function T(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type ".concat(e));n=new Uint8Array(t)}return n}function E(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function N(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}function O(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function A(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function R(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}function P(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function D(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}function B(e){return"string"===typeof e||e instanceof String}function M(e){return"boolean"===typeof e}function F(e){return"number"===typeof e}function L(e){return Array.isArray(e)?L(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":F(e)?"float32":B(e)?"string":M(e)?"bool":"float32"}function V(e){return!!(e&&e.constructor&&e.call&&e.apply)}function z(e,t){for(var n=t;n<e;++n)if(e%n===0)return n;return e}function Z(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function U(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=new Array;if(1===t.length)for(var i=t[0]*(r?2:1),o=0;o<i;o++)a[o]=n[e+o];else for(var s=t[0],u=t.slice(1),c=u.reduce((function(e,t){return e*t}))*(r?2:1),l=0;l<s;l++)a[l]=U(e+l*c,u,n,r);return a}function j(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];var r=e.reduce((function(e,t){return e*t}))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return U(0,e,t,n)}function W(e,t){for(var n=G(e,t),r=0;r<n.length;r++)n[r]=1;return n}function G(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function H(e,t){var n=e.reduce((function(e,t){return e*t}),1);if(null==t||"float32"===t)return j(e,new Float32Array(n));if("int32"===t)return j(e,new Int32Array(n));if("bool"===t)return j(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function q(e){e.forEach((function(t){d(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"].")}))}))}function X(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function K(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function Y(e){return e&&e.then&&"function"===typeof e.then}n.d(t,{AE:function(){return b},Cq:function(){return p},D2:function(){return L},D5:function(){return N},E7:function(){return l},EC:function(){return _},GN:function(){return y},GX:function(){return j},HD:function(){return B},JZ:function(){return C},LF:function(){return s},LP:function(){return O},Mu:function(){return q},N9:function(){return v},NA:function(){return m},NE:function(){return K},QB:function(){return A},Sm:function(){return u},TV:function(){return r},U$:function(){return k},Ub:function(){return D},WD:function(){return S},WP:function(){return T},YP:function(){return x},bT:function(){return P},bj:function(){return c},bp:function(){return I},cO:function(){return g},d7:function(){return a},e3:function(){return Z},fU:function(){return R},hj:function(){return F},hu:function(){return d},jP:function(){return z},jn:function(){return M},k5:function(){return f},l6:function(){return H},mf:function(){return V},nY:function(){return o},oj:function(){return w},p8:function(){return W},qy:function(){return X},rQ:function(){return E},tI:function(){return Y},uZ:function(){return i},wT:function(){return G},xH:function(){return h}})},9412:function(e){"use strict";var t="%[a-f0-9]{2}",n=new RegExp(t,"gi"),r=new RegExp("("+t+")+","gi");function a(e,t){try{return decodeURIComponent(e.join(""))}catch(i){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],a(n),a(r))}function i(e){try{return decodeURIComponent(e)}catch(i){for(var t=e.match(n),r=1;r<t.length;r++)t=(e=a(t,r).join("")).match(n);return e}}e.exports=function(e){if("string"!==typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var n={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},a=r.exec(e);a;){try{n[a[0]]=decodeURIComponent(a[0])}catch(t){var o=i(a[0]);o!==a[0]&&(n[a[0]]=o)}a=r.exec(e)}n["%C2"]="\ufffd";for(var s=Object.keys(n),u=0;u<s.length;u++){var c=s[u];e=e.replace(new RegExp(c,"g"),n[c])}return e}(e)}}},2683:function(e){"use strict";e.exports=function(e,t){for(var n={},r=Object.keys(e),a=Array.isArray(t),i=0;i<r.length;i++){var o=r[i],s=e[o];(a?-1!==t.indexOf(o):t(o,s,e))&&(n[o]=s)}return n}},8987:function(e){e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(_){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var a={},i={};function o(e,t){var n,r,o;return t?(o=0<=(e>>>=0)&&e<256)&&(r=i[e])?r:(n=u(e,(0|e)<0?-1:0,!0),o&&(i[e]=n),n):(o=-128<=(e|=0)&&e<128)&&(r=a[e])?r:(n=u(e,e<0?-1:0,!1),o&&(a[e]=n),n)}function s(e,t){if(isNaN(e))return t?g:v;if(t){if(e<0)return g;if(e>=p)return w}else{if(e<=-h)return S;if(e+1>=h)return k}return e<0?s(-e,t).neg():u(e%f|0,e/f|0,t)}function u(e,t,r){return new n(e,t,r)}n.fromInt=o,n.fromNumber=s,n.fromBits=u;var c=Math.pow;function l(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return v;if("number"===typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return l(e.substring(1),t,n).neg();for(var a=s(c(n,8)),i=v,o=0;o<e.length;o+=8){var u=Math.min(8,e.length-o),d=parseInt(e.substring(o,o+u),n);if(u<8){var f=s(c(n,u));i=i.mul(f).add(s(d))}else i=(i=i.mul(a)).add(s(d))}return i.unsigned=t,i}function d(e,t){return"number"===typeof e?s(e,t):"string"===typeof e?l(e,t):u(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}n.fromString=l,n.fromValue=d;var f=4294967296,p=f*f,h=p/2,m=o(1<<24),v=o(0);n.ZERO=v;var g=o(0,!0);n.UZERO=g;var y=o(1);n.ONE=y;var b=o(1,!0);n.UONE=b;var x=o(-1);n.NEG_ONE=x;var k=u(-1,2147483647,!1);n.MAX_VALUE=k;var w=u(-1,-1,!0);n.MAX_UNSIGNED_VALUE=w;var S=u(0,-2147483648,!1);n.MIN_VALUE=S;var C=n.prototype;C.toInt=function(){return this.unsigned?this.low>>>0:this.low},C.toNumber=function(){return this.unsigned?(this.high>>>0)*f+(this.low>>>0):this.high*f+(this.low>>>0)},C.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var t=s(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=s(c(e,6),this.unsigned),i=this,o="";;){var u=i.div(a),l=(i.sub(u.mul(a)).toInt()>>>0).toString(e);if((i=u).isZero())return l+o;for(;l.length<6;)l="0"+l;o=""+l+o}},C.getHighBits=function(){return this.high},C.getHighBitsUnsigned=function(){return this.high>>>0},C.getLowBits=function(){return this.low},C.getLowBitsUnsigned=function(){return this.low>>>0},C.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},C.isZero=function(){return 0===this.high&&0===this.low},C.eqz=C.isZero,C.isNegative=function(){return!this.unsigned&&this.high<0},C.isPositive=function(){return this.unsigned||this.high>=0},C.isOdd=function(){return 1===(1&this.low)},C.isEven=function(){return 0===(1&this.low)},C.equals=function(e){return r(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},C.eq=C.equals,C.notEquals=function(e){return!this.eq(e)},C.neq=C.notEquals,C.ne=C.notEquals,C.lessThan=function(e){return this.comp(e)<0},C.lt=C.lessThan,C.lessThanOrEqual=function(e){return this.comp(e)<=0},C.lte=C.lessThanOrEqual,C.le=C.lessThanOrEqual,C.greaterThan=function(e){return this.comp(e)>0},C.gt=C.greaterThan,C.greaterThanOrEqual=function(e){return this.comp(e)>=0},C.gte=C.greaterThanOrEqual,C.ge=C.greaterThanOrEqual,C.compare=function(e){if(r(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},C.comp=C.compare,C.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(y)},C.neg=C.negate,C.add=function(e){r(e)||(e=d(e));var t=this.high>>>16,n=65535&this.high,a=this.low>>>16,i=65535&this.low,o=e.high>>>16,s=65535&e.high,c=e.low>>>16,l=0,f=0,p=0,h=0;return p+=(h+=i+(65535&e.low))>>>16,f+=(p+=a+c)>>>16,l+=(f+=n+s)>>>16,l+=t+o,u((p&=65535)<<16|(h&=65535),(l&=65535)<<16|(f&=65535),this.unsigned)},C.subtract=function(e){return r(e)||(e=d(e)),this.add(e.neg())},C.sub=C.subtract,C.multiply=function(e){if(this.isZero())return v;if(r(e)||(e=d(e)),t)return u(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return v;if(this.eq(S))return e.isOdd()?S:v;if(e.eq(S))return this.isOdd()?S:v;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return s(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,a=65535&this.high,i=this.low>>>16,o=65535&this.low,c=e.high>>>16,l=65535&e.high,f=e.low>>>16,p=65535&e.low,h=0,g=0,y=0,b=0;return y+=(b+=o*p)>>>16,g+=(y+=i*p)>>>16,y&=65535,g+=(y+=o*f)>>>16,h+=(g+=a*p)>>>16,g&=65535,h+=(g+=i*f)>>>16,g&=65535,h+=(g+=o*l)>>>16,h+=n*p+a*f+i*l+o*c,u((y&=65535)<<16|(b&=65535),(h&=65535)<<16|(g&=65535),this.unsigned)},C.mul=C.multiply,C.divide=function(e){if(r(e)||(e=d(e)),e.isZero())throw Error("division by zero");var n,a,i;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?g:v;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return g;if(e.gt(this.shru(1)))return b;i=g}else{if(this.eq(S))return e.eq(y)||e.eq(x)?S:e.eq(S)?y:(n=this.shr(1).div(e).shl(1)).eq(v)?e.isNegative()?y:x:(a=this.sub(e.mul(n)),i=n.add(a.div(e)));if(e.eq(S))return this.unsigned?g:v;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=v}for(a=this;a.gte(e);){n=Math.max(1,Math.floor(a.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(n)/Math.LN2),l=o<=48?1:c(2,o-48),f=s(n),p=f.mul(e);p.isNegative()||p.gt(a);)p=(f=s(n-=l,this.unsigned)).mul(e);f.isZero()&&(f=y),i=i.add(f),a=a.sub(p)}return i},C.div=C.divide,C.modulo=function(e){return r(e)||(e=d(e)),t?u((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},C.mod=C.modulo,C.rem=C.modulo,C.not=function(){return u(~this.low,~this.high,this.unsigned)},C.and=function(e){return r(e)||(e=d(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},C.or=function(e){return r(e)||(e=d(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},C.xor=function(e){return r(e)||(e=d(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},C.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},C.shl=C.shiftLeft,C.shiftRight=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},C.shr=C.shiftRight,C.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?u(this.low>>>e|t<<32-e,t>>>e,this.unsigned):u(32===e?t:t>>>e-32,0,this.unsigned)},C.shru=C.shiftRightUnsigned,C.shr_u=C.shiftRightUnsigned,C.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},C.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},C.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},C.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},C.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},4245:function(e,t,n){"use strict";var r=n(8416).default,a=n(7424).default,i=n(4704).default,o=n(861).default,s=n(499),u=n(9412),c=n(845),l=n(2683),d=Symbol("encodeFragmentIdentifier");function f(e){if("string"!==typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function p(e,t){return t.encode?t.strict?s(e):encodeURIComponent(e):e}function h(e,t){return t.decode?u(e):e}function m(e){return Array.isArray(e)?e.sort():"object"===typeof e?m(Object.keys(e)).sort((function(e,t){return Number(e)-Number(t)})).map((function(t){return e[t]})):e}function v(e){var t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function g(e){var t=(e=v(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function y(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"===typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function b(e,t){f((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);var n=function(e){var t;switch(e.arrayFormat){case"index":return function(e,n,r){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return function(e,n,r){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"colon-list-separator":return function(e,n,r){t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"comma":case"separator":return function(t,n,r){var a="string"===typeof n&&n.includes(e.arrayFormatSeparator),i="string"===typeof n&&!a&&h(n,e).includes(e.arrayFormatSeparator);n=i?h(n,e):n;var o=a||i?n.split(e.arrayFormatSeparator).map((function(t){return h(t,e)})):null===n?n:h(n,e);r[t]=o};case"bracket-separator":return function(t,n,r){var a=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),a){var i=null===n?[]:n.split(e.arrayFormatSeparator).map((function(t){return h(t,e)}));void 0!==r[t]?r[t]=[].concat(r[t],i):r[t]=i}else r[t]=n?h(n,e):n};default:return function(e,t,n){void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),r=Object.create(null);if("string"!==typeof e)return r;if(!(e=e.trim().replace(/^[?#&]/,"")))return r;var o,s=i(e.split("&"));try{for(s.s();!(o=s.n()).done;){var u=o.value;if(""!==u){var l=c(t.decode?u.replace(/\+/g," "):u,"="),d=a(l,2),p=d[0],v=d[1];v=void 0===v?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?v:h(v,t),n(h(p,t),v,r)}}}catch(_){s.e(_)}finally{s.f()}for(var g=0,b=Object.keys(r);g<b.length;g++){var x=b[g],k=r[x];if("object"===typeof k&&null!==k)for(var w=0,S=Object.keys(k);w<S.length;w++){var C=S[w];k[C]=y(k[C],t)}else r[x]=y(k,t)}return!1===t.sort?r:(!0===t.sort?Object.keys(r).sort():Object.keys(r).sort(t.sort)).reduce((function(e,t){var n=r[t];return Boolean(n)&&"object"===typeof n&&!Array.isArray(n)?e[t]=m(n):e[t]=n,e}),Object.create(null))}t.extract=g,t.parse=b,t.stringify=function(e,t){if(!e)return"";f((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);for(var n=function(n){return t.skipNull&&(null===(r=e[n])||void 0===r)||t.skipEmptyString&&""===e[n];var r},r=function(e){switch(e.arrayFormat){case"index":return function(t){return function(n,r){var a=n.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:[].concat(o(n),null===r?[[p(t,e),"[",a,"]"].join("")]:[[p(t,e),"[",p(a,e),"]=",p(r,e)].join("")])}};case"bracket":return function(t){return function(n,r){return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:[].concat(o(n),null===r?[[p(t,e),"[]"].join("")]:[[p(t,e),"[]=",p(r,e)].join("")])}};case"colon-list-separator":return function(t){return function(n,r){return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:[].concat(o(n),null===r?[[p(t,e),":list="].join("")]:[[p(t,e),":list=",p(r,e)].join("")])}};case"comma":case"separator":case"bracket-separator":var t="bracket-separator"===e.arrayFormat?"[]=":"=";return function(n){return function(r,a){return void 0===a||e.skipNull&&null===a||e.skipEmptyString&&""===a?r:(a=null===a?"":a,0===r.length?[[p(n,e),t,p(a,e)].join("")]:[[r,p(a,e)].join(e.arrayFormatSeparator)])}};default:return function(t){return function(n,r){return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:[].concat(o(n),null===r?[p(t,e)]:[[p(t,e),"=",p(r,e)].join("")])}}}}(t),a={},i=0,s=Object.keys(e);i<s.length;i++){var u=s[i];n(u)||(a[u]=e[u])}var c=Object.keys(a);return!1!==t.sort&&c.sort(t.sort),c.map((function(n){var a=e[n];return void 0===a?"":null===a?p(n,t):Array.isArray(a)?0===a.length&&"bracket-separator"===t.arrayFormat?p(n,t)+"[]":a.reduce(r(n),[]).join("&"):p(n,t)+"="+p(a,t)})).filter((function(e){return e.length>0})).join("&")},t.parseUrl=function(e,t){t=Object.assign({decode:!0},t);var n=c(e,"#"),r=a(n,2),i=r[0],o=r[1];return Object.assign({url:i.split("?")[0]||"",query:b(g(e),t)},t&&t.parseFragmentIdentifier&&o?{fragmentIdentifier:h(o,t)}:{})},t.stringifyUrl=function(e,n){n=Object.assign(r({encode:!0,strict:!0},d,!0),n);var a=v(e.url).split("?")[0]||"",i=t.extract(e.url),o=t.parse(i,{sort:!1}),s=Object.assign(o,e.query),u=t.stringify(s,n);u&&(u="?".concat(u));var c=function(e){var t="",n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(e.url);return e.fragmentIdentifier&&(c="#".concat(n[d]?p(e.fragmentIdentifier,n):e.fragmentIdentifier)),"".concat(a).concat(u).concat(c)},t.pick=function(e,n,a){a=Object.assign(r({parseFragmentIdentifier:!0},d,!1),a);var i=t.parseUrl(e,a),o=i.url,s=i.query,u=i.fragmentIdentifier;return t.stringifyUrl({url:o,query:l(s,n),fragmentIdentifier:u},a)},t.exclude=function(e,n,r){var a=Array.isArray(n)?function(e){return!n.includes(e)}:function(e,t){return!n(e,t)};return t.pick(e,a,r)}},4463:function(e,t,n){"use strict";var r=n(2791),a=n(5296);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},h={};function m(e,t,n,r,a,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var a=v.hasOwnProperty(t)?v[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!d.call(h,e)||!d.call(p,e)&&(f.test(e)?h[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,y);v[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,y);v[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,y);v[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),T=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function B(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,F=Object.assign;function L(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function z(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),i=r.stack.split("\n"),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(1!==o||1!==s)do{if(o--,0>--s||a[o]!==i[s]){var u="\n"+a[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?L(e):""}function Z(e){switch(e.tag){case 5:return L(e.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case w:return"Portal";case _:return"Profiler";case C:return"StrictMode";case N:return"Suspense";case O:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return U(e(t))}catch(n){}}return null}function j(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function $(e,t){Q(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ie(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,de=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},he=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ve(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(pe).forEach((function(e){he.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ge=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function ke(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Se=null,Ce=null;function _e(e){if(e=ba(e)){if("function"!==typeof we)throw Error(i(280));var t=e.stateNode;t&&(t=ka(t),we(e.stateNode,e.type,t))}}function Ie(e){Se?Ce?Ce.push(e):Ce=[e]:Se=e}function Te(){if(Se){var e=Se,t=Ce;if(Ce=Se=null,_e(e),t)for(e=0;e<t.length;e++)_e(t[e])}}function Ee(e,t){return e(t)}function Ne(){}var Oe=!1;function Ae(e,t,n){if(Oe)return e(t,n);Oe=!0;try{return Ee(e,t,n)}finally{Oe=!1,(null!==Se||null!==Ce)&&(Ne(),Te())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=ka(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Pe=!1;if(l)try{var De={};Object.defineProperty(De,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(le){Pe=!1}function Be(e,t,n,r,a,i,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Le=!1,Ve=null,ze={onError:function(e){Me=!0,Fe=e}};function Ze(e,t,n,r,a,i,o,s,u){Me=!1,Fe=null,Be.apply(ze,arguments)}function Ue(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function je(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Ue(e)!==e)throw Error(i(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(r=a.return)){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return We(a),e;if(o===r)return We(a),t;o=o.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=o;else{for(var s=!1,u=a.child;u;){if(u===n){s=!0,n=a,r=o;break}if(u===r){s=!0,r=a,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=a;break}if(u===r){s=!0,r=o,n=a;break}u=u.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var qe=a.unstable_scheduleCallback,Xe=a.unstable_cancelCallback,Ke=a.unstable_shouldYield,Ye=a.unstable_requestPaint,Qe=a.unstable_now,$e=a.unstable_getCurrentPriorityLevel,Je=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,it=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var ct=64,lt=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~a;0!==s?r=dt(s):0!==(i&=o)&&(r=dt(i))}else 0!==(o=n&~a)?r=dt(o):0!==i&&(r=dt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(i=t&-t)||16===a&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-ot(t)),r|=e[n],t&=~a;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ht(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var kt,wt,St,Ct,_t,It=!1,Tt=[],Et=null,Nt=null,Ot=null,At=new Map,Rt=new Map,Pt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bt(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Ot=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},null!==t&&(null!==(t=ba(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Ft(e){var t=ya(e.target);if(null!==t){var n=Ue(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=je(n)))return e.blockedOn=t,void _t(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Lt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ba(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Vt(e,t,n){Lt(e)&&n.delete(t)}function zt(){It=!1,null!==Et&&Lt(Et)&&(Et=null),null!==Nt&&Lt(Nt)&&(Nt=null),null!==Ot&&Lt(Ot)&&(Ot=null),At.forEach(Vt),Rt.forEach(Vt)}function Zt(e,t){e.blockedOn===t&&(e.blockedOn=null,It||(It=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,zt)))}function Ut(e){function t(t){return Zt(t,e)}if(0<Tt.length){Zt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Et&&Zt(Et,e),null!==Nt&&Zt(Nt,e),null!==Ot&&Zt(Ot,e),At.forEach(t),Rt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Pt.shift()}var jt=x.ReactCurrentBatchConfig,Wt=!0;function Gt(e,t,n,r){var a=bt,i=jt.transition;jt.transition=null;try{bt=1,qt(e,t,n,r)}finally{bt=a,jt.transition=i}}function Ht(e,t,n,r){var a=bt,i=jt.transition;jt.transition=null;try{bt=4,qt(e,t,n,r)}finally{bt=a,jt.transition=i}}function qt(e,t,n,r){if(Wt){var a=Kt(e,t,n,r);if(null===a)Wr(e,t,r,Xt,n),Bt(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return Et=Mt(Et,e,t,n,r,a),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,a),!0;case"mouseover":return Ot=Mt(Ot,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return At.set(i,Mt(At.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,Rt.set(i,Mt(Rt.get(i)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Bt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==a;){var i=ba(a);if(null!==i&&kt(i),null===(i=Kt(e,t,n,r))&&Wr(e,t,r,Xt,n),i===a)break;a=i}null!==a&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Xt=null;function Kt(e,t,n,r){if(Xt=null,null!==(e=ya(e=ke(r))))if(null===(t=Ue(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=je(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,$t=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=$t,r=n.length,a="value"in Qt?Qt.value:Qt.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===a[i-t];t++);return Jt=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,a,i){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),dn=F({},cn,{view:0,detail:0}),fn=an(dn),pn=F({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_n,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),hn=an(pn),mn=an(F({},pn,{dataTransfer:0})),vn=an(F({},dn,{relatedTarget:0})),gn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(yn),xn=an(F({},cn,{data:0})),kn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function _n(){return Cn}var In=F({},dn,{key:function(e){if(e.key){var t=kn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_n,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(In),En=an(F({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_n})),On=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=F({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(An),Pn=[9,13,27,32],Dn=l&&"CompositionEvent"in window,Bn=null;l&&"documentMode"in document&&(Bn=document.documentMode);var Mn=l&&"TextEvent"in window&&!Bn,Fn=l&&(!Dn||Bn&&8<Bn&&11>=Bn),Ln=String.fromCharCode(32),Vn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Un=!1;var jn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!jn[e.type]:"textarea"===t}function Gn(e,t,n,r){Ie(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,qn=null;function Xn(e){Lr(e,0)}function Kn(e){if(q(xa(e)))return e}function Yn(e,t){if("change"===e)return t}var Qn=!1;if(l){var $n;if(l){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}$n=Jn}else $n=!1;Qn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),qn=Hn=null)}function nr(e){if("value"===e.propertyName&&Kn(qn)){var t=[];Gn(t,qn,e,ke(e)),Ae(Xn,t)}}function rr(e,t,n){"focusin"===e?(tr(),qn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kn(qn)}function ir(e,t){if("click"===e)return Kn(t)}function or(e,t){if("input"===e||"change"===e)return Kn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!d.call(t,a)||!sr(e[a],t[a]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function hr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=void 0===r.end?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=lr(n,i);var o=lr(n,r);a&&o&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=l&&"documentMode"in document&&11>=document.documentMode,vr=null,gr=null,yr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==vr||vr!==X(r)||("selectionStart"in(r=vr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ur(yr,r)||(yr=r,0<(r=Hr(gr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}function kr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:kr("Animation","AnimationEnd"),animationiteration:kr("Animation","AnimationIteration"),animationstart:kr("Animation","AnimationStart"),transitionend:kr("Transition","TransitionEnd")},Sr={},Cr={};function _r(e){if(Sr[e])return Sr[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Cr)return Sr[e]=n[t];return e}l&&(Cr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Ir=_r("animationend"),Tr=_r("animationiteration"),Er=_r("animationstart"),Nr=_r("transitionend"),Or=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Or.set(e,t),u(t,[e])}for(var Pr=0;Pr<Ar.length;Pr++){var Dr=Ar[Pr];Rr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Rr(Ir,"onAnimationEnd"),Rr(Tr,"onAnimationIteration"),Rr(Er,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Br="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Br));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,o,s,u,c){if(Ze.apply(this,arguments),Me){if(!Me)throw Error(i(198));var l=Fe;Me=!1,Fe=null,Le||(Le=!0,Ve=l)}}(r,t,void 0,e),e.currentTarget=null}function Lr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==i&&a.isPropagationStopped())break e;Fr(a,s,c),i=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==i&&a.isPropagationStopped())break e;Fr(a,s,c),i=u}}}if(Le)throw e=Ve,Le=!1,Ve=null,e}function Vr(e,t){var n=t[ma];void 0===n&&(n=t[ma]=new Set);var r=e+"__bubble";n.has(r)||(jr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),jr(n,e,r,t)}var Zr="_reactListening"+Math.random().toString(36).slice(2);function Ur(e){if(!e[Zr]){e[Zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||zr(t,!1,e),zr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Zr]||(t[Zr]=!0,zr("selectionchange",!1,t))}}function jr(e,t,n,r){switch(Yt(t)){case 1:var a=Gt;break;case 4:a=Ht;break;default:a=qt}n=a.bind(null,t,n,e),a=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,a){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===a||8===u.nodeType&&u.parentNode===a))return;o=o.return}for(;null!==s;){if(null===(o=ya(s)))return;if(5===(u=o.tag)||6===u){r=i=o;continue e}s=s.parentNode}}r=r.return}Ae((function(){var r=i,a=ke(n),o=[];e:{var s=Or.get(e);if(void 0!==s){var u=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=Tn;break;case"focusin":c="focus",u=vn;break;case"focusout":c="blur",u=vn;break;case"beforeblur":case"afterblur":u=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Nn;break;case Ir:case Tr:case Er:u=gn;break;case Nr:u=On;break;case"scroll":u=fn;break;case"wheel":u=Rn;break;case"copy":case"cut":case"paste":u=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=En}var l=0!==(4&t),d=!l&&"scroll"===e,f=l?null!==s?s+"Capture":null:s;l=[];for(var p,h=r;null!==h;){var m=(p=h).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==f&&(null!=(m=Re(h,f))&&l.push(Gr(h,m,p)))),d)break;h=h.return}0<l.length&&(s=new u(s,c,null,n,a),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!ya(c)&&!c[ha])&&(u||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?ya(c):null)&&(c!==(d=Ue(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=hn,m="onMouseLeave",f="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(l=En,m="onPointerLeave",f="onPointerEnter",h="pointer"),d=null==u?s:xa(u),p=null==c?s:xa(c),(s=new l(m,h+"leave",u,n,a)).target=d,s.relatedTarget=p,m=null,ya(a)===r&&((l=new l(f,h+"enter",c,n,a)).target=p,l.relatedTarget=d,m=l),d=m,u&&c)e:{for(f=c,h=0,p=l=u;p;p=qr(p))h++;for(p=0,m=f;m;m=qr(m))p++;for(;0<h-p;)l=qr(l),h--;for(;0<p-h;)f=qr(f),p--;for(;h--;){if(l===f||null!==f&&l===f.alternate)break e;l=qr(l),f=qr(f)}l=null}else l=null;null!==u&&Xr(o,s,u,l,!1),null!==c&&null!==d&&Xr(o,d,c,l,!0)}if("select"===(u=(s=r?xa(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var v=Yn;else if(Wn(s))if(Qn)v=or;else{v=ar;var g=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(v=ir);switch(v&&(v=v(e,r))?Gn(o,v,n,a):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ee(s,"number",s.value)),g=r?xa(r):window,e){case"focusin":(Wn(g)||"true"===g.contentEditable)&&(vr=g,gr=r,yr=null);break;case"focusout":yr=gr=vr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(o,n,a);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(o,n,a)}var y;if(Dn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Un?zn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Un||"onCompositionStart"!==b?"onCompositionEnd"===b&&Un&&(y=en()):($t="value"in(Qt=a)?Qt.value:Qt.textContent,Un=!0)),0<(g=Hr(r,b)).length&&(b=new xn(b,e,null,n,a),o.push({event:b,listeners:g}),y?b.data=y:null!==(y=Zn(n))&&(b.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return Zn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Ln);case"textInput":return(e=t.data)===Ln&&Vn?null:e;default:return null}}(e,n):function(e,t){if(Un)return"compositionend"===e||!Dn&&zn(e,t)?(e=en(),Jt=$t=Qt=null,Un=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(a=new xn("onBeforeInput","beforeinput",null,n,a),o.push({event:a,listeners:r}),a.data=y))}Lr(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=Re(e,n))&&r.unshift(Gr(e,i,a)),null!=(i=Re(e,t))&&r.push(Gr(e,i,a))),e=e.return}return r}function qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xr(e,t,n,r,a){for(var i=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,a?null!=(u=Re(n,i))&&o.unshift(Gr(n,u,s)):a||null!=(u=Re(n,i))&&o.push(Gr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Kr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace(Kr,"\n").replace(Yr,"")}function $r(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(i(425))}function Jr(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,ia="function"===typeof Promise?Promise:void 0,oa="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ia?function(e){return ia.resolve(null).then(e).catch(sa)}:ra;function sa(e){setTimeout((function(){throw e}))}function ua(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void Ut(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);Ut(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function la(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),fa="__reactFiber$"+da,pa="__reactProps$"+da,ha="__reactContainer$"+da,ma="__reactEvents$"+da,va="__reactListeners$"+da,ga="__reactHandles$"+da;function ya(e){var t=e[fa];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ha]||n[fa]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=la(e);null!==e;){if(n=e[fa])return n;e=la(e)}return t}n=(e=n).parentNode}return null}function ba(e){return!(e=e[fa]||e[ha])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function ka(e){return e[pa]||null}var wa=[],Sa=-1;function Ca(e){return{current:e}}function _a(e){0>Sa||(e.current=wa[Sa],wa[Sa]=null,Sa--)}function Ia(e,t){Sa++,wa[Sa]=e.current,e.current=t}var Ta={},Ea=Ca(Ta),Na=Ca(!1),Oa=Ta;function Aa(e,t){var n=e.type.contextTypes;if(!n)return Ta;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in n)i[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ra(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pa(){_a(Na),_a(Ea)}function Da(e,t,n){if(Ea.current!==Ta)throw Error(i(168));Ia(Ea,t),Ia(Na,n)}function Ba(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(i(108,j(e)||"Unknown",a));return F({},n,r)}function Ma(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ta,Oa=Ea.current,Ia(Ea,e),Ia(Na,Na.current),!0}function Fa(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Ba(e,t,Oa),r.__reactInternalMemoizedMergedChildContext=e,_a(Na),_a(Ea),Ia(Ea,e)):_a(Na),Ia(Na,n)}var La=null,Va=!1,za=!1;function Za(e){null===La?La=[e]:La.push(e)}function Ua(){if(!za&&null!==La){za=!0;var e=0,t=bt;try{var n=La;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}La=null,Va=!1}catch(a){throw null!==La&&(La=La.slice(e+1)),qe(Je,Ua),a}finally{bt=t,za=!1}}return null}var ja=[],Wa=0,Ga=null,Ha=0,qa=[],Xa=0,Ka=null,Ya=1,Qa="";function $a(e,t){ja[Wa++]=Ha,ja[Wa++]=Ga,Ga=e,Ha=t}function Ja(e,t,n){qa[Xa++]=Ya,qa[Xa++]=Qa,qa[Xa++]=Ka,Ka=e;var r=Ya;e=Qa;var a=32-ot(r)-1;r&=~(1<<a),n+=1;var i=32-ot(t)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Ya=1<<32-ot(t)+a|n<<a|r,Qa=i+e}else Ya=1<<i|n<<a|r,Qa=e}function ei(e){null!==e.return&&($a(e,1),Ja(e,1,0))}function ti(e){for(;e===Ga;)Ga=ja[--Wa],ja[Wa]=null,Ha=ja[--Wa],ja[Wa]=null;for(;e===Ka;)Ka=qa[--Xa],qa[Xa]=null,Qa=qa[--Xa],qa[Xa]=null,Ya=qa[--Xa],qa[Xa]=null}var ni=null,ri=null,ai=!1,ii=null;function oi(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function si(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,ri=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,ri=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ka?{id:Ya,overflow:Qa}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ni=e,ri=null,!0);default:return!1}}function ui(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ci(e){if(ai){var t=ri;if(t){var n=t;if(!si(e,t)){if(ui(e))throw Error(i(418));t=ca(n.nextSibling);var r=ni;t&&si(e,t)?oi(r,n):(e.flags=-4097&e.flags|2,ai=!1,ni=e)}}else{if(ui(e))throw Error(i(418));e.flags=-4097&e.flags|2,ai=!1,ni=e}}}function li(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function di(e){if(e!==ni)return!1;if(!ai)return li(e),ai=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=ri)){if(ui(e))throw fi(),Error(i(418));for(;t;)oi(e,t),t=ca(t.nextSibling)}if(li(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ri=ca(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ri=null}}else ri=ni?ca(e.stateNode.nextSibling):null;return!0}function fi(){for(var e=ri;e;)e=ca(e.nextSibling)}function pi(){ri=ni=null,ai=!1}function hi(e){null===ii?ii=[e]:ii.push(e)}var mi=x.ReactCurrentBatchConfig;function vi(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var gi=Ca(null),yi=null,bi=null,xi=null;function ki(){xi=bi=yi=null}function wi(e){var t=gi.current;_a(gi),e._currentValue=t}function Si(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ci(e,t){yi=e,xi=bi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xs=!0),e.firstContext=null)}function _i(e){var t=e._currentValue;if(xi!==e)if(e={context:e,memoizedValue:t,next:null},null===bi){if(null===yi)throw Error(i(308));bi=e,yi.dependencies={lanes:0,firstContext:e}}else bi=bi.next=e;return t}var Ii=null;function Ti(e){null===Ii?Ii=[e]:Ii.push(e)}function Ei(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,Ti(t)):(n.next=a.next,a.next=n),t.interleaved=n,Ni(e,r)}function Ni(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Oi=!1;function Ai(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ri(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Di(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Eu)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Ni(e,n)}return null===(a=r.interleaved)?(t.next=t,Ti(r)):(t.next=a.next,a.next=t),r.interleaved=t,Ni(e,n)}function Bi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Mi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?a=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fi(e,t,n,r){var a=e.updateQueue;Oi=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var u=s,c=u.next;u.next=null,null===o?i=c:o.next=c,o=u;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===s?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u))}if(null!==i){var d=a.baseState;for(o=0,l=c=u=null,s=i;;){var f=s.lane,p=s.eventTime;if((r&f)===f){null!==l&&(l=l.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var h=e,m=s;switch(f=t,p=n,m.tag){case 1:if("function"===typeof(h=m.payload)){d=h.call(p,d,f);break e}d=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null===(f="function"===typeof(h=m.payload)?h.call(p,d,f):h)||void 0===f)break e;d=F({},d,f);break e;case 2:Oi=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=a.effects)?a.effects=[s]:f.push(s))}else p={eventTime:p,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(c=l=p,u=d):l=l.next=p,o|=f;if(null===(s=s.next)){if(null===(s=a.shared.pending))break;s=(f=s).next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}if(null===l&&(u=d),a.baseState=u,a.firstBaseUpdate=c,a.lastBaseUpdate=l,null!==(t=a.shared.interleaved)){a=t;do{o|=a.lane,a=a.next}while(a!==t)}else null===i&&(a.shared.lanes=0);Mu|=o,e.lanes=o,e.memoizedState=d}}function Li(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(i(191,a));a.call(r)}}}var Vi=(new r.Component).refs;function zi(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Zi={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),a=tc(e),i=Pi(r,a);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Di(e,i,a))&&(nc(t,e,a,r),Bi(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),a=tc(e),i=Pi(r,a);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Di(e,i,a))&&(nc(t,e,a,r),Bi(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),a=Pi(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Di(e,a,r))&&(nc(t,e,r,n),Bi(t,e,r))}};function Ui(e,t,n,r,a,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(a,i))}function ji(e,t,n){var r=!1,a=Ta,i=t.contextType;return"object"===typeof i&&null!==i?i=_i(i):(a=Ra(t)?Oa:Ea.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Aa(e,a):Ta),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Zi,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Wi(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Zi.enqueueReplaceState(t,t.state,null)}function Gi(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=Vi,Ai(e);var i=t.contextType;"object"===typeof i&&null!==i?a.context=_i(i):(i=Ra(t)?Oa:Ea.current,a.context=Aa(e,i)),a.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(zi(e,t,i,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&Zi.enqueueReplaceState(a,a.state,null),Fi(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function Hi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var a=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=a.refs;t===Vi&&(t=a.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function qi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Xi(e){return(0,e._init)(e._payload)}function Ki(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===R&&Xi(i)===t.type)?((r=a(t,n.props)).ref=Hi(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=Hi(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Lc(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Bc(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case k:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=Hi(e,null,t),n.return=e,n;case w:return(t=Lc(t,e.mode,n)).return=e,t;case R:return f(e,(0,t._init)(t._payload),n)}if(te(t)||B(t))return(t=Bc(t,e.mode,n,null)).return=e,t;qi(e,t)}return null}function p(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case k:return n.key===a?c(e,t,n,r):null;case w:return n.key===a?l(e,t,n,r):null;case R:return p(e,t,(a=n._init)(n._payload),r)}if(te(n)||B(n))return null!==a?null:d(e,t,n,r,null);qi(e,n)}return null}function h(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case k:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case w:return l(t,e=e.get(null===r.key?n:r.key)||null,r,a);case R:return h(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||B(r))return d(t,e=e.get(n)||null,r,a,null);qi(t,r)}return null}function m(a,i,s,u){for(var c=null,l=null,d=i,m=i=0,v=null;null!==d&&m<s.length;m++){d.index>m?(v=d,d=null):v=d.sibling;var g=p(a,d,s[m],u);if(null===g){null===d&&(d=v);break}e&&d&&null===g.alternate&&t(a,d),i=o(g,i,m),null===l?c=g:l.sibling=g,l=g,d=v}if(m===s.length)return n(a,d),ai&&$a(a,m),c;if(null===d){for(;m<s.length;m++)null!==(d=f(a,s[m],u))&&(i=o(d,i,m),null===l?c=d:l.sibling=d,l=d);return ai&&$a(a,m),c}for(d=r(a,d);m<s.length;m++)null!==(v=h(d,a,m,s[m],u))&&(e&&null!==v.alternate&&d.delete(null===v.key?m:v.key),i=o(v,i,m),null===l?c=v:l.sibling=v,l=v);return e&&d.forEach((function(e){return t(a,e)})),ai&&$a(a,m),c}function v(a,s,u,c){var l=B(u);if("function"!==typeof l)throw Error(i(150));if(null==(u=l.call(u)))throw Error(i(151));for(var d=l=null,m=s,v=s=0,g=null,y=u.next();null!==m&&!y.done;v++,y=u.next()){m.index>v?(g=m,m=null):g=m.sibling;var b=p(a,m,y.value,c);if(null===b){null===m&&(m=g);break}e&&m&&null===b.alternate&&t(a,m),s=o(b,s,v),null===d?l=b:d.sibling=b,d=b,m=g}if(y.done)return n(a,m),ai&&$a(a,v),l;if(null===m){for(;!y.done;v++,y=u.next())null!==(y=f(a,y.value,c))&&(s=o(y,s,v),null===d?l=y:d.sibling=y,d=y);return ai&&$a(a,v),l}for(m=r(a,m);!y.done;v++,y=u.next())null!==(y=h(m,a,v,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?v:y.key),s=o(y,s,v),null===d?l=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(a,e)})),ai&&$a(a,v),l}return function e(r,i,o,u){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case k:e:{for(var c=o.key,l=i;null!==l;){if(l.key===c){if((c=o.type)===S){if(7===l.tag){n(r,l.sibling),(i=a(l,o.props.children)).return=r,r=i;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Xi(c)===l.type){n(r,l.sibling),(i=a(l,o.props)).ref=Hi(r,l,o),i.return=r,r=i;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===S?((i=Bc(o.props.children,r.mode,u,o.key)).return=r,r=i):((u=Dc(o.type,o.key,o.props,null,r.mode,u)).ref=Hi(r,i,o),u.return=r,r=u)}return s(r);case w:e:{for(l=o.key;null!==i;){if(i.key===l){if(4===i.tag&&i.stateNode.containerInfo===o.containerInfo&&i.stateNode.implementation===o.implementation){n(r,i.sibling),(i=a(i,o.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Lc(o,r.mode,u)).return=r,r=i}return s(r);case R:return e(r,i,(l=o._init)(o._payload),u)}if(te(o))return m(r,i,o,u);if(B(o))return v(r,i,o,u);qi(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==i&&6===i.tag?(n(r,i.sibling),(i=a(i,o)).return=r,r=i):(n(r,i),(i=Fc(o,r.mode,u)).return=r,r=i),s(r)):n(r,i)}}var Yi=Ki(!0),Qi=Ki(!1),$i={},Ji=Ca($i),eo=Ca($i),to=Ca($i);function no(e){if(e===$i)throw Error(i(174));return e}function ro(e,t){switch(Ia(to,t),Ia(eo,e),Ia(Ji,$i),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}_a(Ji),Ia(Ji,t)}function ao(){_a(Ji),_a(eo),_a(to)}function io(e){no(to.current);var t=no(Ji.current),n=ue(t,e.type);t!==n&&(Ia(eo,e),Ia(Ji,n))}function oo(e){eo.current===e&&(_a(Ji),_a(eo))}var so=Ca(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=x.ReactCurrentDispatcher,po=x.ReactCurrentBatchConfig,ho=0,mo=null,vo=null,go=null,yo=!1,bo=!1,xo=0,ko=0;function wo(){throw Error(i(321))}function So(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function Co(e,t,n,r,a,o){if(ho=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?ss:us,e=n(r,a),bo){o=0;do{if(bo=!1,xo=0,25<=o)throw Error(i(301));o+=1,go=vo=null,t.updateQueue=null,fo.current=cs,e=n(r,a)}while(bo)}if(fo.current=os,t=null!==vo&&null!==vo.next,ho=0,go=vo=mo=null,yo=!1,t)throw Error(i(300));return e}function _o(){var e=0!==xo;return xo=0,e}function Io(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===go?mo.memoizedState=go=e:go=go.next=e,go}function To(){if(null===vo){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=vo.next;var t=null===go?mo.memoizedState:go.next;if(null!==t)go=t,vo=e;else{if(null===e)throw Error(i(310));e={memoizedState:(vo=e).memoizedState,baseState:vo.baseState,baseQueue:vo.baseQueue,queue:vo.queue,next:null},null===go?mo.memoizedState=go=e:go=go.next=e}return go}function Eo(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=vo,a=r.baseQueue,o=n.pending;if(null!==o){if(null!==a){var s=a.next;a.next=o.next,o.next=s}r.baseQueue=a=o,n.pending=null}if(null!==a){o=a.next,r=r.baseState;var u=s=null,c=null,l=o;do{var d=l.lane;if((ho&d)===d)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:d,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=f,s=r):c=c.next=f,mo.lanes|=d,Mu|=d}l=l.next}while(null!==l&&l!==o);null===c?s=r:c.next=u,sr(r,t.memoizedState)||(xs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{o=a.lane,mo.lanes|=o,Mu|=o,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Oo(e){var t=To(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{o=e(o,s.action),s=s.next}while(s!==a);sr(o,t.memoizedState)||(xs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ao(){}function Ro(e,t){var n=mo,r=To(),a=t(),o=!sr(r.memoizedState,a);if(o&&(r.memoizedState=a,xs=!0),r=r.queue,Wo(Bo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==go&&1&go.memoizedState.tag){if(n.flags|=2048,Vo(9,Do.bind(null,n,r,a,t),void 0,null),null===Nu)throw Error(i(349));0!==(30&ho)||Po(n,t,a)}return a}function Po(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Bo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Fo(e){var t=Ni(e,1);null!==t&&nc(t,e,1,-1)}function Lo(e){var t=Io();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Eo,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,mo,e),[t.memoizedState,e]}function Vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function zo(){return To().memoizedState}function Zo(e,t,n,r){var a=Io();mo.flags|=e,a.memoizedState=Vo(1|t,n,void 0,void 0===r?null:r)}function Uo(e,t,n,r){var a=To();r=void 0===r?null:r;var i=void 0;if(null!==vo){var o=vo.memoizedState;if(i=o.destroy,null!==r&&So(r,o.deps))return void(a.memoizedState=Vo(t,n,i,r))}mo.flags|=e,a.memoizedState=Vo(1|t,n,i,r)}function jo(e,t){return Zo(8390656,8,e,t)}function Wo(e,t){return Uo(2048,8,e,t)}function Go(e,t){return Uo(4,2,e,t)}function Ho(e,t){return Uo(4,4,e,t)}function qo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Xo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Uo(4,4,qo.bind(null,t,e),n)}function Ko(){}function Yo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Qo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $o(e,t,n){return 0===(21&ho)?(e.baseState&&(e.baseState=!1,xs=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),mo.lanes|=n,Mu|=n,e.baseState=!0),t)}function Jo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=po.transition;po.transition={};try{e(!1),t()}finally{bt=n,po.transition=r}}function es(){return To().memoizedState}function ts(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))as(t,n);else if(null!==(n=Ei(e,t,n,r))){nc(n,e,r,ec()),is(n,t,r)}}function ns(e,t,n){var r=tc(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))as(t,a);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=i(o,n);if(a.hasEagerState=!0,a.eagerState=s,sr(s,o)){var u=t.interleaved;return null===u?(a.next=a,Ti(t)):(a.next=u.next,u.next=a),void(t.interleaved=a)}}catch(c){}null!==(n=Ei(e,t,a,r))&&(nc(n,e,r,a=ec()),is(n,t,r))}}function rs(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function as(e,t){bo=yo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function is(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var os={readContext:_i,useCallback:wo,useContext:wo,useEffect:wo,useImperativeHandle:wo,useInsertionEffect:wo,useLayoutEffect:wo,useMemo:wo,useReducer:wo,useRef:wo,useState:wo,useDebugValue:wo,useDeferredValue:wo,useTransition:wo,useMutableSource:wo,useSyncExternalStore:wo,useId:wo,unstable_isNewReconciler:!1},ss={readContext:_i,useCallback:function(e,t){return Io().memoizedState=[e,void 0===t?null:t],e},useContext:_i,useEffect:jo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Zo(4194308,4,qo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Zo(4,2,e,t)},useMemo:function(e,t){var n=Io();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Io();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Io().memoizedState=e},useState:Lo,useDebugValue:Ko,useDeferredValue:function(e){return Io().memoizedState=e},useTransition:function(){var e=Lo(!1),t=e[0];return e=Jo.bind(null,e[1]),Io().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mo,a=Io();if(ai){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Nu)throw Error(i(349));0!==(30&ho)||Po(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,jo(Bo.bind(null,r,o,e),[e]),r.flags|=2048,Vo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Io(),t=Nu.identifierPrefix;if(ai){var n=Qa;t=":"+t+"R"+(n=(Ya&~(1<<32-ot(Ya)-1)).toString(32)+n),0<(n=xo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ko++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:_i,useCallback:Yo,useContext:_i,useEffect:Wo,useImperativeHandle:Xo,useInsertionEffect:Go,useLayoutEffect:Ho,useMemo:Qo,useReducer:No,useRef:zo,useState:function(){return No(Eo)},useDebugValue:Ko,useDeferredValue:function(e){return $o(To(),vo.memoizedState,e)},useTransition:function(){return[No(Eo)[0],To().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Ro,useId:es,unstable_isNewReconciler:!1},cs={readContext:_i,useCallback:Yo,useContext:_i,useEffect:Wo,useImperativeHandle:Xo,useInsertionEffect:Go,useLayoutEffect:Ho,useMemo:Qo,useReducer:Oo,useRef:zo,useState:function(){return Oo(Eo)},useDebugValue:Ko,useDeferredValue:function(e){var t=To();return null===vo?t.memoizedState=e:$o(t,vo.memoizedState,e)},useTransition:function(){return[Oo(Eo)[0],To().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Ro,useId:es,unstable_isNewReconciler:!1};function ls(e,t){try{var n="",r=t;do{n+=Z(r),r=r.return}while(r);var a=n}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:a,digest:null}}function ds(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ps="function"===typeof WeakMap?WeakMap:Map;function hs(e,t,n){(n=Pi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wu||(Wu=!0,Gu=r),fs(0,t)},n}function ms(e,t,n){(n=Pi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){fs(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){fs(0,t),"function"!==typeof r&&(null===Hu?Hu=new Set([this]):Hu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function vs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ps;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=_c.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Pi(-1,1)).tag=2,Di(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var bs=x.ReactCurrentOwner,xs=!1;function ks(e,t,n,r){t.child=null===e?Qi(t,null,n,r):Yi(t,e.child,n,r)}function ws(e,t,n,r,a){n=n.render;var i=t.ref;return Ci(t,a),r=Co(e,t,n,r,i,a),n=_o(),null===e||xs?(ai&&n&&ei(t),t.flags|=1,ks(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ws(e,t,a))}function Ss(e,t,n,r,a){if(null===e){var i=n.type;return"function"!==typeof i||Rc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Cs(e,t,i,r,a))}if(i=e.child,0===(e.lanes&a)){var o=i.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Ws(e,t,a)}return t.flags|=1,(e=Pc(i,r)).ref=t.ref,e.return=t,t.child=e}function Cs(e,t,n,r,a){if(null!==e){var i=e.memoizedProps;if(ur(i,r)&&e.ref===t.ref){if(xs=!1,t.pendingProps=r=i,0===(e.lanes&a))return t.lanes=e.lanes,Ws(e,t,a);0!==(131072&e.flags)&&(xs=!0)}}return Ts(e,t,n,r,a)}function _s(e,t,n){var r=t.pendingProps,a=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ia(Pu,Ru),Ru|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ia(Pu,Ru),Ru|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Ia(Pu,Ru),Ru|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ia(Pu,Ru),Ru|=r;return ks(e,t,a,n),t.child}function Is(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ts(e,t,n,r,a){var i=Ra(n)?Oa:Ea.current;return i=Aa(t,i),Ci(t,a),n=Co(e,t,n,r,i,a),r=_o(),null===e||xs?(ai&&r&&ei(t),t.flags|=1,ks(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ws(e,t,a))}function Es(e,t,n,r,a){if(Ra(n)){var i=!0;Ma(t)}else i=!1;if(Ci(t,a),null===t.stateNode)js(e,t),ji(t,n,r),Gi(t,n,r,a),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=_i(c):c=Aa(t,c=Ra(n)?Oa:Ea.current);var l=n.getDerivedStateFromProps,d="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&Wi(t,o,r,c),Oi=!1;var f=t.memoizedState;o.state=f,Fi(t,r,o,a),u=t.memoizedState,s!==r||f!==u||Na.current||Oi?("function"===typeof l&&(zi(t,n,l,r),u=t.memoizedState),(s=Oi||Ui(t,n,s,r,f,u,c))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ri(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:vi(t.type,s),o.props=c,d=t.pendingProps,f=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=_i(u):u=Aa(t,u=Ra(n)?Oa:Ea.current);var p=n.getDerivedStateFromProps;(l="function"===typeof p||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==d||f!==u)&&Wi(t,o,r,u),Oi=!1,f=t.memoizedState,o.state=f,Fi(t,r,o,a);var h=t.memoizedState;s!==d||f!==h||Na.current||Oi?("function"===typeof p&&(zi(t,n,p,r),h=t.memoizedState),(c=Oi||Ui(t,n,c,r,f,h,u)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,h,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,h,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=h),o.props=r,o.state=h,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Ns(e,t,n,r,i,a)}function Ns(e,t,n,r,a,i){Is(e,t);var o=0!==(128&t.flags);if(!r&&!o)return a&&Fa(t,n,!1),Ws(e,t,i);r=t.stateNode,bs.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Yi(t,e.child,null,i),t.child=Yi(t,null,s,i)):ks(e,t,s,i),t.memoizedState=r.state,a&&Fa(t,n,!0),t.child}function Os(e){var t=e.stateNode;t.pendingContext?Da(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Da(0,t.context,!1),ro(e,t.containerInfo)}function As(e,t,n,r,a){return pi(),hi(a),t.flags|=256,ks(e,t,n,r),t.child}var Rs,Ps,Ds,Bs={dehydrated:null,treeContext:null,retryLane:0};function Ms(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fs(e,t,n){var r,a=t.pendingProps,o=so.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ia(so,1&o),null===e)return ci(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=a.children,e=a.fallback,s?(a=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&a)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Mc(u,a,0,null),e=Bc(e,a,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ms(n),t.memoizedState=Bs,e):Ls(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,a,o,s){if(n)return 256&t.flags?(t.flags&=-257,Vs(e,t,s,r=ds(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,a=t.mode,r=Mc({mode:"visible",children:r.children},a,0,null),(o=Bc(o,a,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Yi(t,e.child,null,s),t.child.memoizedState=Ms(s),t.memoizedState=Bs,o);if(0===(1&t.mode))return Vs(e,t,s,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var u=r.dgst;return r=u,Vs(e,t,s,r=ds(o=Error(i(419)),r,void 0))}if(u=0!==(s&e.childLanes),xs||u){if(null!==(r=Nu)){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|s))?0:a)&&a!==o.retryLane&&(o.retryLane=a,Ni(e,a),nc(r,e,a,-1))}return mc(),Vs(e,t,s,r=ds(Error(i(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,ri=ca(a.nextSibling),ni=t,ai=!0,ii=null,null!==e&&(qa[Xa++]=Ya,qa[Xa++]=Qa,qa[Xa++]=Ka,Ya=e.id,Qa=e.overflow,Ka=t),(t=Ls(t,r.children)).flags|=4096,t)}(e,t,u,a,r,o,n);if(s){s=a.fallback,u=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&u)&&t.child!==o?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Pc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Pc(r,s):(s=Bc(s,u,n,null)).flags|=2,s.return=t,a.return=t,a.sibling=s,t.child=a,a=s,s=t.child,u=null===(u=e.child.memoizedState)?Ms(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Bs,a}return e=(s=e.child).sibling,a=Pc(s,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function Ls(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vs(e,t,n,r){return null!==r&&hi(r),Yi(t,e.child,null,n),(e=Ls(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Si(e.return,t,n)}function Zs(e,t,n,r,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function Us(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(ks(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zs(e,n,t);else if(19===e.tag)zs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ia(so,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Zs(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===uo(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Zs(t,!0,n,null,i);break;case"together":Zs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function js(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ws(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Mu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gs(e,t){if(!ai)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function qs(e,t,n){var r=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hs(t),null;case 1:case 17:return Ra(t.type)&&Pa(),Hs(t),null;case 3:return r=t.stateNode,ao(),_a(Na),_a(Ea),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(di(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(oc(ii),ii=null))),Hs(t),null;case 5:oo(t);var a=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ps(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Hs(t),null}if(e=no(Ji.current),di(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fa]=t,r[pa]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(a=0;a<Br.length;a++)Vr(Br[a],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":Y(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ae(r,o),Vr("invalid",r)}for(var u in ye(n,o),a=null,o)if(o.hasOwnProperty(u)){var c=o[u];"children"===u?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,c,e),a=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,c,e),a=["children",""+c]):s.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&Vr("scroll",r)}switch(n){case"input":H(r),J(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Jr)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[fa]=t,e[pa]=r,Rs(e,t),t.stateNode=e;e:{switch(u=be(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),a=r;break;case"iframe":case"object":case"embed":Vr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Br.length;a++)Vr(Br[a],e);a=r;break;case"source":Vr("error",e),a=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),a=r;break;case"details":Vr("toggle",e),a=r;break;case"input":Y(e,r),a=K(e,r),Vr("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=F({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),Vr("invalid",e)}for(o in ye(n,a),c=a)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ve(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&de(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&fe(e,l):"number"===typeof l&&fe(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Vr("scroll",e):null!=l&&b(e,o,l,u))}switch(n){case"input":H(e),J(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hs(t),null;case 6:if(e&&null!=t.stateNode)Ds(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=no(to.current),no(Ji.current),di(t)){if(r=t.stateNode,n=t.memoizedProps,r[fa]=t,(o=r.nodeValue!==n)&&null!==(e=ni))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fa]=t,t.stateNode=r}return Hs(t),null;case 13:if(_a(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ai&&null!==ri&&0!==(1&t.mode)&&0===(128&t.flags))fi(),pi(),t.flags|=98560,o=!1;else if(o=di(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(i(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(i(317));o[fa]=t}else pi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hs(t),o=!1}else null!==ii&&(oc(ii),ii=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Du&&(Du=3):mc())),null!==t.updateQueue&&(t.flags|=4),Hs(t),null);case 4:return ao(),null===e&&Ur(t.stateNode.containerInfo),Hs(t),null;case 10:return wi(t.type._context),Hs(t),null;case 19:if(_a(so),null===(o=t.memoizedState))return Hs(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)Gs(o,!1);else{if(0!==Du||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,Gs(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ia(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Qe()>Uu&&(t.flags|=128,r=!0,Gs(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ai)return Hs(t),null}else 2*Qe()-o.renderingStartTime>Uu&&1073741824!==n&&(t.flags|=128,r=!0,Gs(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Qe(),t.sibling=null,n=so.current,Ia(so,r?1&n|2:1&n),t):(Hs(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ru)&&(Hs(t),6&t.subtreeFlags&&(t.flags|=8192)):Hs(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Xs(e,t){switch(ti(t),t.tag){case 1:return Ra(t.type)&&Pa(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ao(),_a(Na),_a(Ea),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(_a(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));pi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return _a(so),null;case 4:return ao(),null;case 10:return wi(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Rs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ps=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,no(Ji.current);var i,o=null;switch(n){case"input":a=K(e,a),r=K(e,r),o=[];break;case"select":a=F({},a,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":a=re(e,a),r=re(e,r),o=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(l in ye(n,r),n=null,a)if(!r.hasOwnProperty(l)&&a.hasOwnProperty(l)&&null!=a[l])if("style"===l){var u=a[l];for(i in u)u.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(u=null!=a?a[l]:void 0,r.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(i in u)!u.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&u[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Vr("scroll",e),o||u===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ds=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ks=!1,Ys=!1,Qs="function"===typeof WeakSet?WeakSet:Set,$s=null;function Js(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Cc(e,t,r)}else n.current=null}function eu(e,t,n){try{n()}catch(r){Cc(e,t,r)}}var tu=!1;function nu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,void 0!==i&&eu(t,n,i)}a=a.next}while(a!==r)}}function ru(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function au(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function iu(e){var t=e.alternate;null!==t&&(e.alternate=null,iu(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fa],delete t[pa],delete t[ma],delete t[va],delete t[ga])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ou(e){return 5===e.tag||3===e.tag||4===e.tag}function su(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ou(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(uu(e,t,n),e=e.sibling;null!==e;)uu(e,t,n),e=e.sibling}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}var lu=null,du=!1;function fu(e,t,n){for(n=n.child;null!==n;)pu(e,t,n),n=n.sibling}function pu(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(at,n)}catch(s){}switch(n.tag){case 5:Ys||Js(n,t);case 6:var r=lu,a=du;lu=null,fu(e,t,n),du=a,null!==(lu=r)&&(du?(e=lu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):lu.removeChild(n.stateNode));break;case 18:null!==lu&&(du?(e=lu,n=n.stateNode,8===e.nodeType?ua(e.parentNode,n):1===e.nodeType&&ua(e,n),Ut(e)):ua(lu,n.stateNode));break;case 4:r=lu,a=du,lu=n.stateNode.containerInfo,du=!0,fu(e,t,n),lu=r,du=a;break;case 0:case 11:case 14:case 15:if(!Ys&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,void 0!==o&&(0!==(2&i)||0!==(4&i))&&eu(n,t,o),a=a.next}while(a!==r)}fu(e,t,n);break;case 1:if(!Ys&&(Js(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Cc(n,t,s)}fu(e,t,n);break;case 21:fu(e,t,n);break;case 22:1&n.mode?(Ys=(r=Ys)||null!==n.memoizedState,fu(e,t,n),Ys=r):fu(e,t,n);break;default:fu(e,t,n)}}function hu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qs),t.forEach((function(t){var r=Ec.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function mu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:lu=u.stateNode,du=!1;break e;case 3:case 4:lu=u.stateNode.containerInfo,du=!0;break e}u=u.return}if(null===lu)throw Error(i(160));pu(o,s,a),lu=null,du=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(l){Cc(a,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vu(t,e),t=t.sibling}function vu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mu(t,e),gu(e),4&r){try{nu(3,e,e.return),ru(3,e)}catch(v){Cc(e,e.return,v)}try{nu(5,e,e.return)}catch(v){Cc(e,e.return,v)}}break;case 1:mu(t,e),gu(e),512&r&&null!==n&&Js(n,n.return);break;case 5:if(mu(t,e),gu(e),512&r&&null!==n&&Js(n,n.return),32&e.flags){var a=e.stateNode;try{fe(a,"")}catch(v){Cc(e,e.return,v)}}if(4&r&&null!=(a=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===o.type&&null!=o.name&&Q(a,o),be(u,s);var l=be(u,o);for(s=0;s<c.length;s+=2){var d=c[s],f=c[s+1];"style"===d?ve(a,f):"dangerouslySetInnerHTML"===d?de(a,f):"children"===d?fe(a,f):b(a,d,f,l)}switch(u){case"input":$(a,o);break;case"textarea":ie(a,o);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var h=o.value;null!=h?ne(a,!!o.multiple,h,!1):p!==!!o.multiple&&(null!=o.defaultValue?ne(a,!!o.multiple,o.defaultValue,!0):ne(a,!!o.multiple,o.multiple?[]:"",!1))}a[pa]=o}catch(v){Cc(e,e.return,v)}}break;case 6:if(mu(t,e),gu(e),4&r){if(null===e.stateNode)throw Error(i(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(v){Cc(e,e.return,v)}}break;case 3:if(mu(t,e),gu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ut(t.containerInfo)}catch(v){Cc(e,e.return,v)}break;case 4:default:mu(t,e),gu(e);break;case 13:mu(t,e),gu(e),8192&(a=e.child).flags&&(o=null!==a.memoizedState,a.stateNode.isHidden=o,!o||null!==a.alternate&&null!==a.alternate.memoizedState||(Zu=Qe())),4&r&&hu(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Ys=(l=Ys)||d,mu(t,e),Ys=l):mu(t,e),gu(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!d&&0!==(1&e.mode))for($s=e,d=e.child;null!==d;){for(f=$s=d;null!==$s;){switch(h=(p=$s).child,p.tag){case 0:case 11:case 14:case 15:nu(4,p,p.return);break;case 1:Js(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(v){Cc(r,n,v)}}break;case 5:Js(p,p.return);break;case 22:if(null!==p.memoizedState){ku(f);continue}}null!==h?(h.return=p,$s=h):ku(f)}d=d.sibling}e:for(d=null,f=e;;){if(5===f.tag){if(null===d){d=f;try{a=f.stateNode,l?"function"===typeof(o=a.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=f.stateNode,s=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=me("display",s))}catch(v){Cc(e,e.return,v)}}}else if(6===f.tag){if(null===d)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(v){Cc(e,e.return,v)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:mu(t,e),gu(e),4&r&&hu(e);case 21:}}function gu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ou(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(fe(a,""),r.flags&=-33),cu(e,su(e),a);break;case 3:case 4:var o=r.stateNode.containerInfo;uu(e,su(e),o);break;default:throw Error(i(161))}}catch(s){Cc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yu(e,t,n){$s=e,bu(e,t,n)}function bu(e,t,n){for(var r=0!==(1&e.mode);null!==$s;){var a=$s,i=a.child;if(22===a.tag&&r){var o=null!==a.memoizedState||Ks;if(!o){var s=a.alternate,u=null!==s&&null!==s.memoizedState||Ys;s=Ks;var c=Ys;if(Ks=o,(Ys=u)&&!c)for($s=a;null!==$s;)u=(o=$s).child,22===o.tag&&null!==o.memoizedState?wu(a):null!==u?(u.return=o,$s=u):wu(a);for(;null!==i;)$s=i,bu(i,t,n),i=i.sibling;$s=a,Ks=s,Ys=c}xu(e)}else 0!==(8772&a.subtreeFlags)&&null!==i?(i.return=a,$s=i):xu(e)}}function xu(e){for(;null!==$s;){var t=$s;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ys||ru(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ys)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:vi(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Li(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Li(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var d=l.memoizedState;if(null!==d){var f=d.dehydrated;null!==f&&Ut(f)}}}break;default:throw Error(i(163))}Ys||512&t.flags&&au(t)}catch(p){Cc(t,t.return,p)}}if(t===e){$s=null;break}if(null!==(n=t.sibling)){n.return=t.return,$s=n;break}$s=t.return}}function ku(e){for(;null!==$s;){var t=$s;if(t===e){$s=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$s=n;break}$s=t.return}}function wu(e){for(;null!==$s;){var t=$s;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ru(4,t)}catch(u){Cc(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(u){Cc(t,a,u)}}var i=t.return;try{au(t)}catch(u){Cc(t,i,u)}break;case 5:var o=t.return;try{au(t)}catch(u){Cc(t,o,u)}}}catch(u){Cc(t,t.return,u)}if(t===e){$s=null;break}var s=t.sibling;if(null!==s){s.return=t.return,$s=s;break}$s=t.return}}var Su,Cu=Math.ceil,_u=x.ReactCurrentDispatcher,Iu=x.ReactCurrentOwner,Tu=x.ReactCurrentBatchConfig,Eu=0,Nu=null,Ou=null,Au=0,Ru=0,Pu=Ca(0),Du=0,Bu=null,Mu=0,Fu=0,Lu=0,Vu=null,zu=null,Zu=0,Uu=1/0,ju=null,Wu=!1,Gu=null,Hu=null,qu=!1,Xu=null,Ku=0,Yu=0,Qu=null,$u=-1,Ju=0;function ec(){return 0!==(6&Eu)?Qe():-1!==$u?$u:$u=Qe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Eu)&&0!==Au?Au&-Au:null!==mi.transition?(0===Ju&&(Ju=mt()),Ju):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nc(e,t,n,r){if(50<Yu)throw Yu=0,Qu=null,Error(i(185));gt(e,n,r),0!==(2&Eu)&&e===Nu||(e===Nu&&(0===(2&Eu)&&(Fu|=n),4===Du&&sc(e,Au)),rc(e,r),1===n&&0===Eu&&0===(1&t.mode)&&(Uu=Qe()+500,Va&&Ua()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ot(i),s=1<<o,u=a[o];-1===u?0!==(s&n)&&0===(s&r)||(a[o]=pt(s,t)):u<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var r=ft(e,e===Nu?Au:0);if(0===r)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){Va=!0,Za(e)}(uc.bind(null,e)):Za(uc.bind(null,e)),oa((function(){0===(6&Eu)&&Ua()})),n=null;else{switch(xt(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if($u=-1,Ju=0,0!==(6&Eu))throw Error(i(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var r=ft(e,e===Nu?Au:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var a=Eu;Eu|=2;var o=hc();for(Nu===e&&Au===t||(ju=null,Uu=Qe()+500,fc(e,t));;)try{yc();break}catch(u){pc(e,u)}ki(),_u.current=o,Eu=a,null!==Ou?t=0:(Nu=null,Au=0,t=Du)}if(0!==t){if(2===t&&(0!==(a=ht(e))&&(r=a,t=ic(e,a))),1===t)throw n=Bu,fc(e,0),sc(e,r),rc(e,Qe()),n;if(6===t)sc(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!sr(i(),a))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=vc(e,r))&&(0!==(o=ht(e))&&(r=o,t=ic(e,o))),1===t))throw n=Bu,fc(e,0),sc(e,r),rc(e,Qe()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:kc(e,zu,ju);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Zu+500-Qe())){if(0!==ft(e,0))break;if(((a=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(kc.bind(null,e,zu,ju),t);break}kc(e,zu,ju);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>a&&(a=s),r&=~o}if(r=a,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cu(r/1960))-r)){e.timeoutHandle=ra(kc.bind(null,e,zu,ju),r);break}kc(e,zu,ju);break;default:throw Error(i(329))}}}return rc(e,Qe()),e.callbackNode===n?ac.bind(null,e):null}function ic(e,t){var n=Vu;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=zu,zu=n,null!==t&&oc(t)),e}function oc(e){null===zu?zu=e:zu.push.apply(zu,e)}function sc(e,t){for(t&=~Lu,t&=~Fu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function uc(e){if(0!==(6&Eu))throw Error(i(327));wc();var t=ft(e,0);if(0===(1&t))return rc(e,Qe()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=ht(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Bu,fc(e,0),sc(e,t),rc(e,Qe()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kc(e,zu,ju),rc(e,Qe()),null}function cc(e,t){var n=Eu;Eu|=1;try{return e(t)}finally{0===(Eu=n)&&(Uu=Qe()+500,Va&&Ua())}}function lc(e){null!==Xu&&0===Xu.tag&&0===(6&Eu)&&wc();var t=Eu;Eu|=1;var n=Tu.transition,r=bt;try{if(Tu.transition=null,bt=1,e)return e()}finally{bt=r,Tu.transition=n,0===(6&(Eu=t))&&Ua()}}function dc(){Ru=Pu.current,_a(Pu)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==Ou)for(n=Ou.return;null!==n;){var r=n;switch(ti(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pa();break;case 3:ao(),_a(Na),_a(Ea),lo();break;case 5:oo(r);break;case 4:ao();break;case 13:case 19:_a(so);break;case 10:wi(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Nu=e,Ou=e=Pc(e.current,null),Au=Ru=t,Du=0,Bu=null,Lu=Fu=Mu=0,zu=Vu=null,null!==Ii){for(t=0;t<Ii.length;t++)if(null!==(r=(n=Ii[t]).interleaved)){n.interleaved=null;var a=r.next,i=n.pending;if(null!==i){var o=i.next;i.next=a,r.next=o}n.pending=r}Ii=null}return e}function pc(e,t){for(;;){var n=Ou;try{if(ki(),fo.current=os,yo){for(var r=mo.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}yo=!1}if(ho=0,go=vo=mo=null,bo=!1,xo=0,Iu.current=null,null===n||null===n.return){Du=1,Bu=t,Ou=null;break}e:{var o=e,s=n.return,u=n,c=t;if(t=Au,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,d=u,f=d.tag;if(0===(1&d.mode)&&(0===f||11===f||15===f)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=gs(s);if(null!==h){h.flags&=-257,ys(h,s,u,0,t),1&h.mode&&vs(o,l,t),c=l;var m=(t=h).updateQueue;if(null===m){var v=new Set;v.add(c),t.updateQueue=v}else m.add(c);break e}if(0===(1&t)){vs(o,l,t),mc();break e}c=Error(i(426))}else if(ai&&1&u.mode){var g=gs(s);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),ys(g,s,u,0,t),hi(ls(c,u));break e}}o=c=ls(c,u),4!==Du&&(Du=2),null===Vu?Vu=[o]:Vu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Mi(o,hs(0,c,t));break e;case 1:u=c;var y=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Hu||!Hu.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Mi(o,ms(o,u,t));break e}}o=o.return}while(null!==o)}xc(n)}catch(x){t=x,Ou===n&&null!==n&&(Ou=n=n.return);continue}break}}function hc(){var e=_u.current;return _u.current=os,null===e?os:e}function mc(){0!==Du&&3!==Du&&2!==Du||(Du=4),null===Nu||0===(268435455&Mu)&&0===(268435455&Fu)||sc(Nu,Au)}function vc(e,t){var n=Eu;Eu|=2;var r=hc();for(Nu===e&&Au===t||(ju=null,fc(e,t));;)try{gc();break}catch(a){pc(e,a)}if(ki(),Eu=n,_u.current=r,null!==Ou)throw Error(i(261));return Nu=null,Au=0,Du}function gc(){for(;null!==Ou;)bc(Ou)}function yc(){for(;null!==Ou&&!Ke();)bc(Ou)}function bc(e){var t=Su(e.alternate,e,Ru);e.memoizedProps=e.pendingProps,null===t?xc(e):Ou=t,Iu.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=qs(n,t,Ru)))return void(Ou=n)}else{if(null!==(n=Xs(n,t)))return n.flags&=32767,void(Ou=n);if(null===e)return Du=6,void(Ou=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ou=t);Ou=t=e}while(null!==t);0===Du&&(Du=5)}function kc(e,t,n){var r=bt,a=Tu.transition;try{Tu.transition=null,bt=1,function(e,t,n,r){do{wc()}while(null!==Xu);if(0!==(6&Eu))throw Error(i(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-ot(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}(e,o),e===Nu&&(Ou=Nu=null,Au=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||qu||(qu=!0,Nc(tt,(function(){return wc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Tu.transition,Tu.transition=null;var s=bt;bt=1;var u=Eu;Eu|=4,Iu.current=null,function(e,t){if(ea=Wt,pr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(k){n=null;break e}var s=0,u=-1,c=-1,l=0,d=0,f=e,p=null;t:for(;;){for(var h;f!==n||0!==a&&3!==f.nodeType||(u=s+a),f!==o||0!==r&&3!==f.nodeType||(c=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(h=f.firstChild);)p=f,f=h;for(;;){if(f===e)break t;if(p===n&&++l===a&&(u=s),p===o&&++d===r&&(c=s),null!==(h=f.nextSibling))break;p=(f=p).parentNode}f=h}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},Wt=!1,$s=t;null!==$s;)if(e=(t=$s).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$s=e;else for(;null!==$s;){t=$s;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var v=m.memoizedProps,g=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?v:vi(t.type,v),g);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(i(163))}}catch(k){Cc(t,t.return,k)}if(null!==(e=t.sibling)){e.return=t.return,$s=e;break}$s=t.return}m=tu,tu=!1}(e,n),vu(n,e),hr(ta),Wt=!!ea,ta=ea=null,e.current=n,yu(n,e,a),Ye(),Eu=u,bt=s,Tu.transition=o}else e.current=n;if(qu&&(qu=!1,Xu=e,Ku=a),0===(o=e.pendingLanes)&&(Hu=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((a=t[n]).value,{componentStack:a.stack,digest:a.digest});if(Wu)throw Wu=!1,e=Gu,Gu=null,e;0!==(1&Ku)&&0!==e.tag&&wc(),0!==(1&(o=e.pendingLanes))?e===Qu?Yu++:(Yu=0,Qu=e):Yu=0,Ua()}(e,t,n,r)}finally{Tu.transition=a,bt=r}return null}function wc(){if(null!==Xu){var e=xt(Ku),t=Tu.transition,n=bt;try{if(Tu.transition=null,bt=16>e?16:e,null===Xu)var r=!1;else{if(e=Xu,Xu=null,Ku=0,0!==(6&Eu))throw Error(i(331));var a=Eu;for(Eu|=4,$s=e.current;null!==$s;){var o=$s,s=o.child;if(0!==(16&$s.flags)){var u=o.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for($s=l;null!==$s;){var d=$s;switch(d.tag){case 0:case 11:case 15:nu(8,d,o)}var f=d.child;if(null!==f)f.return=d,$s=f;else for(;null!==$s;){var p=(d=$s).sibling,h=d.return;if(iu(d),d===l){$s=null;break}if(null!==p){p.return=h,$s=p;break}$s=h}}}var m=o.alternate;if(null!==m){var v=m.child;if(null!==v){m.child=null;do{var g=v.sibling;v.sibling=null,v=g}while(null!==v)}}$s=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,$s=s;else e:for(;null!==$s;){if(0!==(2048&(o=$s).flags))switch(o.tag){case 0:case 11:case 15:nu(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,$s=y;break e}$s=o.return}}var b=e.current;for($s=b;null!==$s;){var x=(s=$s).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,$s=x;else e:for(s=b;null!==$s;){if(0!==(2048&(u=$s).flags))try{switch(u.tag){case 0:case 11:case 15:ru(9,u)}}catch(w){Cc(u,u.return,w)}if(u===s){$s=null;break e}var k=u.sibling;if(null!==k){k.return=u.return,$s=k;break e}$s=u.return}}if(Eu=a,Ua(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(at,e)}catch(w){}r=!0}return r}finally{bt=n,Tu.transition=t}}return!1}function Sc(e,t,n){e=Di(e,t=hs(0,t=ls(n,t),1),1),t=ec(),null!==e&&(gt(e,1,t),rc(e,t))}function Cc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hu||!Hu.has(r))){t=Di(t,e=ms(t,e=ls(n,e),1),1),e=ec(),null!==t&&(gt(t,1,e),rc(t,e));break}}t=t.return}}function _c(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Nu===e&&(Au&n)===n&&(4===Du||3===Du&&(130023424&Au)===Au&&500>Qe()-Zu?fc(e,0):Lu|=n),rc(e,t)}function Ic(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Ni(e,t))&&(gt(e,t,n),rc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ic(e,n)}function Ec(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Ic(e,n)}function Nc(e,t){return qe(e,t)}function Oc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,r){return new Oc(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,a,o){var s=2;if(r=e,"function"===typeof e)Rc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case S:return Bc(n.children,a,o,t);case C:s=8,a|=8;break;case _:return(e=Ac(12,n,t,2|a)).elementType=_,e.lanes=o,e;case N:return(e=Ac(13,n,t,a)).elementType=N,e.lanes=o,e;case O:return(e=Ac(19,n,t,a)).elementType=O,e.lanes=o,e;case P:return Mc(n,a,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:s=10;break e;case T:s=9;break e;case E:s=11;break e;case A:s=14;break e;case R:s=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Ac(s,n,t,a)).elementType=e,t.type=r,t.lanes=o,t}function Bc(e,t,n,r){return(e=Ac(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Ac(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function Lc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vt(0),this.expirationTimes=vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,a,i,o,s,u){return e=new Vc(e,t,n,s,u),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Ac(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ai(i),e}function Zc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Uc(e){if(!e)return Ta;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ra(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Ra(n))return Ba(e,n,t)}return t}function jc(e,t,n,r,a,i,o,s,u){return(e=zc(n,r,!0,e,0,i,0,s,u)).context=Uc(null),n=e.current,(i=Pi(r=ec(),a=tc(n))).callback=void 0!==t&&null!==t?t:null,Di(n,i,a),e.current.lanes=a,gt(e,a,r),rc(e,r),e}function Wc(e,t,n,r){var a=t.current,i=ec(),o=tc(a);return n=Uc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Pi(i,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Di(a,t,o))&&(nc(e,a,o,i),Bi(e,a,o)),o}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Su=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Na.current)xs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xs=!1,function(e,t,n){switch(t.tag){case 3:Os(t),pi();break;case 5:io(t);break;case 1:Ra(t.type)&&Ma(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Ia(gi,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ia(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fs(e,t,n):(Ia(so,1&so.current),null!==(e=Ws(e,t,n))?e.sibling:null);Ia(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Us(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ia(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,_s(e,t,n)}return Ws(e,t,n)}(e,t,n);xs=0!==(131072&e.flags)}else xs=!1,ai&&0!==(1048576&t.flags)&&Ja(t,Ha,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;js(e,t),e=t.pendingProps;var a=Aa(t,Ea.current);Ci(t,n),a=Co(null,t,r,e,a,n);var o=_o();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ra(r)?(o=!0,Ma(t)):o=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Ai(t),a.updater=Zi,t.stateNode=a,a._reactInternals=t,Gi(t,r,e,n),t=Ns(null,t,r,!0,o,n)):(t.tag=0,ai&&o&&ei(t),ks(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(js(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===A)return 14}return 2}(r),e=vi(r,e),a){case 0:t=Ts(null,t,r,e,n);break e;case 1:t=Es(null,t,r,e,n);break e;case 11:t=ws(null,t,r,e,n);break e;case 14:t=Ss(null,t,r,vi(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,Ts(e,t,r,a=t.elementType===r?a:vi(r,a),n);case 1:return r=t.type,a=t.pendingProps,Es(e,t,r,a=t.elementType===r?a:vi(r,a),n);case 3:e:{if(Os(t),null===e)throw Error(i(387));r=t.pendingProps,a=(o=t.memoizedState).element,Ri(e,t),Fi(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=As(e,t,r,n,a=ls(Error(i(423)),t));break e}if(r!==a){t=As(e,t,r,n,a=ls(Error(i(424)),t));break e}for(ri=ca(t.stateNode.containerInfo.firstChild),ni=t,ai=!0,ii=null,n=Qi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pi(),r===a){t=Ws(e,t,n);break e}ks(e,t,r,n)}t=t.child}return t;case 5:return io(t),null===e&&ci(t),r=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,s=a.children,na(r,a)?s=null:null!==o&&na(r,o)&&(t.flags|=32),Is(e,t),ks(e,t,s,n),t.child;case 6:return null===e&&ci(t),null;case 13:return Fs(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Yi(t,null,r,n):ks(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,ws(e,t,r,a=t.elementType===r?a:vi(r,a),n);case 7:return ks(e,t,t.pendingProps,n),t.child;case 8:case 12:return ks(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,o=t.memoizedProps,s=a.value,Ia(gi,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===a.children&&!Na.current){t=Ws(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Pi(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var d=(l=l.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Si(o.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(i(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),Si(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ks(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Ci(t,n),r=r(a=_i(a)),t.flags|=1,ks(e,t,r,n),t.child;case 14:return a=vi(r=t.type,t.pendingProps),Ss(e,t,r,a=vi(r.type,a),n);case 15:return Cs(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:vi(r,a),js(e,t),t.tag=1,Ra(r)?(e=!0,Ma(t)):e=!1,Ci(t,n),ji(t,r,a),Gi(t,r,a,n),Ns(null,t,r,!0,e,n);case 19:return Us(e,t,n);case 22:return _s(e,t,n)}throw Error(i(156,t.tag))};var Xc="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function el(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i;if("function"===typeof a){var s=a;a=function(){var e=Gc(o);s.call(e)}}Wc(t,o,e,a)}else o=function(e,t,n,r,a){if(a){if("function"===typeof r){var i=r;r=function(){var e=Gc(o);i.call(e)}}var o=jc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=o,e[ha]=o.current,Ur(8===e.nodeType?e.parentNode:e),lc(),o}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var s=r;r=function(){var e=Gc(u);s.call(e)}}var u=zc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=u,e[ha]=u.current,Ur(8===e.nodeType?e.parentNode:e),lc((function(){Wc(t,u,n,r)})),u}(n,t,e,a,r);return Gc(o)}Yc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Wc(e,t,null,null)},Yc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){Wc(null,e,null,null)})),t[ha]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ft(e)}},kt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Qe()),0===(6&Eu)&&(Uu=Qe()+500,Ua()))}break;case 13:lc((function(){var t=Ni(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),qc(e,1)}},wt=function(e){if(13===e.tag){var t=Ni(e,134217728);if(null!==t)nc(t,e,134217728,ec());qc(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),n=Ni(e,t);if(null!==n)nc(n,e,t,ec());qc(e,t)}},Ct=function(){return bt},_t=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},we=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=ka(r);if(!a)throw Error(i(90));q(r),$(r,a)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ee=cc,Ne=lc;var tl={usingClientEntryPoint:!1,Events:[ba,xa,ka,Ie,Te,cc]},nl={findFiberByHostInstance:ya,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var al=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!al.isDisabled&&al.supportsFiber)try{at=al.inject(rl),it=al}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(i(200));return Zc(e,t,null,n)},t.createRoot=function(e,t){if(!Qc(e))throw Error(i(299));var n=!1,r="",a=Xc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,a),e[ha]=t.current,Ur(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(i(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qc(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,a=!1,o="",s=Xc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=jc(t,null,e,1,null!=n?n:null,a,0,o,s),e[ha]=t.current,Ur(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Yc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(i(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(i(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[ha]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$c(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,n){"use strict";var r=n(4164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},6374:function(e,t,n){"use strict";var r=n(2791),a=Symbol.for("react.element"),i=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:l,props:i,_owner:s.current}}t.jsx=c,t.jsxs=c},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,v={};function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||h}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||h}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var x=b.prototype=new y;x.constructor=b,m(x,g.prototype),x.isPureReactComponent=!0;var k=Array.isArray,w=Object.prototype.hasOwnProperty,S={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,r){var a,i={},o=null,s=null;if(null!=t)for(a in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,a)&&!C.hasOwnProperty(a)&&(i[a]=t[a]);var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(a in u=e.defaultProps)void 0===i[a]&&(i[a]=u[a]);return{$$typeof:n,type:e,key:o,ref:s,props:i,_owner:S.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,a,i,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===i?"."+E(u,0):i,k(o)?(a="",null!=e&&(a=e.replace(T,"$&/")+"/"),N(o,t,a,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,a+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(u=0,i=""===i?".":i+":",k(e))for(var c=0;c<e.length;c++){var l=i+E(s=e[c],c);u+=N(s,t,a,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=N(s=s.value,t,a,l=i+E(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function O(e,t,n){if(null==e)return e;var r=[],a=0;return N(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},P={transition:null},D={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:P,ReactCurrentOwner:S};t.Children={map:O,forEach:function(e,t,n){O(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return O(e,(function(){t++})),t},toArray:function(e){return O(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=a,t.Profiler=o,t.PureComponent=b,t.StrictMode=i,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=m({},e.props),i=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=S.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)w.call(t,c)&&!C.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];a.children=u}return{$$typeof:n,type:e.type,key:i,ref:o,props:a,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<i(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,u=e[s],c=s+1,l=e[c];if(0>i(u,n))c<a&&0>i(l,u)?(e[r]=l,e[c]=n,r=c):(e[r]=u,e[s]=n,r=s);else{if(!(c<a&&0>i(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],l=[],d=1,f=null,p=3,h=!1,m=!1,v=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(l);null!==t;){if(null===t.callback)a(l);else{if(!(t.startTime<=e))break;a(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function k(e){if(v=!1,x(e),!m)if(null!==r(c))m=!0,P(w);else{var t=r(l);null!==t&&D(k,t.startTime-e)}}function w(e,n){m=!1,v&&(v=!1,y(I),I=-1),h=!0;var i=p;try{for(x(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!N());){var o=f.callback;if("function"===typeof o){f.callback=null,p=f.priorityLevel;var s=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?f.callback=s:f===r(c)&&a(c),x(n)}else a(c);f=r(c)}if(null!==f)var u=!0;else{var d=r(l);null!==d&&D(k,d.startTime-n),u=!1}return u}finally{f=null,p=i,h=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,C=!1,_=null,I=-1,T=5,E=-1;function N(){return!(t.unstable_now()-E<T)}function O(){if(null!==_){var e=t.unstable_now();E=e;var n=!0;try{n=_(!0,e)}finally{n?S():(C=!1,_=null)}}else C=!1}if("function"===typeof b)S=function(){b(O)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,R=A.port2;A.port1.onmessage=O,S=function(){R.postMessage(null)}}else S=function(){g(O,0)};function P(e){_=e,C||(C=!0,S())}function D(e,n){I=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,P(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,a,i){var o=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?o+i:o:i=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>o?(e.sortIndex=i,n(l,e),null===r(c)&&e===r(l)&&(v?(y(I),I=-1):v=!0,D(k,i-o))):(e.sortIndex=s,n(c,e),m||h||(m=!0,P(w))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},6699:function(e,t,n){var r=n(2501),a=n(9112),i=n(2132),o=n(890),s=n(4113),u=n(1725),c=n(3411);c.alea=r,c.xor128=a,c.xorwow=i,c.xorshift7=o,c.xor4096=s,c.tychei=u,e.exports=c},2501:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n=function(){var e=4022871197;return function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function u(e,t){var n=new o(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.alea=u}(0,e=n.nmd(e),n.amdD)},1725:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.tychei=u}(0,e=n.nmd(e),n.amdD)},9112:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor128=u}(0,e=n.nmd(e),n.amdD)},4113:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,i=-32;i<u;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=s[127&i]^=r+o)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=o,e.X=s,e.i=a}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor4096=u}(0,e=n.nmd(e),n.amdD)},890:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorshift7=u}(0,e=n.nmd(e),n.amdD)},2132:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorwow=u}(0,e=n.nmd(e),n.amdD)},3411:function(e,t,n){var r;!function(a,i,o){var s,u=256,c=o.pow(u,6),l=o.pow(2,52),d=2*l,f=255;function p(e,t,n){var r=[],f=g(v((t=1==t?{entropy:!0}:t||{}).entropy?[e,y(i)]:null==e?function(){try{var e;return s&&(e=s.randomBytes)?e=e(u):(e=new Uint8Array(u),(a.crypto||a.msCrypto).getRandomValues(e)),y(e)}catch(r){var t=a.navigator,n=t&&t.plugins;return[+new Date,a,n,a.screen,y(i)]}}():e,3),r),p=new h(r),b=function(){for(var e=p.g(6),t=c,n=0;e<l;)e=(e+n)*u,t*=u,n=p.g(1);for(;e>=d;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|p.g(4)},b.quick=function(){return p.g(4)/4294967296},b.double=b,g(y(p.S),i),(t.pass||n||function(e,t,n,r){return r&&(r.S&&m(r,p),e.state=function(){return m(p,{})}),n?(o.random=e,t):e})(b,f,"global"in t?t.global:this==o,t.state)}function h(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<u;)o[a]=a++;for(a=0;a<u;a++)o[a]=o[i=f&i+e[a%n]+(t=o[a])],o[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,o=r.S;e--;)t=o[a=f&a+1],n=n*u+o[f&(o[a]=o[i=f&i+t])+(o[i]=t)];return r.i=a,r.j=i,n})(u)}function m(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function v(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(v(e[n],t-1))}catch(i){}return r.length?r:"string"==a?e:e+"\0"}function g(e,t){for(var n,r=e+"",a=0;a<r.length;)t[f&a]=f&(n^=19*t[f&a])+r.charCodeAt(a++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(g(o.random(),i),e.exports){e.exports=p;try{s=n(5042)}catch(b){}}else void 0===(r=function(){return p}.call(t,n,t,e))||(e.exports=r)}("undefined"!==typeof self?self:this,[],Math)},845:function(e){"use strict";e.exports=function(e,t){if("string"!==typeof e||"string"!==typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];var n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},499:function(e){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%".concat(e.charCodeAt(0).toString(16).toUpperCase())}))}},5658:function(e,t,n){"use strict";var r;n.r(t),n.d(t,{NIL:function(){return R},parse:function(){return v},stringify:function(){return f},v1:function(){return m},v3:function(){return I},v4:function(){return T},v5:function(){return A},validate:function(){return s},version:function(){return P}});var a=new Uint8Array(16);function i(){if(!r&&!(r="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(a)}var o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var s=function(e){return"string"===typeof e&&o.test(e)},u=[],c=0;c<256;++c)u.push((c+256).toString(16).substr(1));var l,d,f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]).toLowerCase();if(!s(n))throw TypeError("Stringified UUID is invalid");return n},p=0,h=0;var m=function(e,t,n){var r=t&&n||0,a=t||new Array(16),o=(e=e||{}).node||l,s=void 0!==e.clockseq?e.clockseq:d;if(null==o||null==s){var u=e.random||(e.rng||i)();null==o&&(o=l=[1|u[0],u[1],u[2],u[3],u[4],u[5]]),null==s&&(s=d=16383&(u[6]<<8|u[7]))}var c=void 0!==e.msecs?e.msecs:Date.now(),m=void 0!==e.nsecs?e.nsecs:h+1,v=c-p+(m-h)/1e4;if(v<0&&void 0===e.clockseq&&(s=s+1&16383),(v<0||c>p)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");p=c,h=m,d=s;var g=(1e4*(268435455&(c+=122192928e5))+m)%4294967296;a[r++]=g>>>24&255,a[r++]=g>>>16&255,a[r++]=g>>>8&255,a[r++]=255&g;var y=c/4294967296*1e4&268435455;a[r++]=y>>>8&255,a[r++]=255&y,a[r++]=y>>>24&15|16,a[r++]=y>>>16&255,a[r++]=s>>>8|128,a[r++]=255&s;for(var b=0;b<6;++b)a[r+b]=o[b];return t||f(a)};var v=function(e){if(!s(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n};function g(e,t,n){function r(e,r,a,i){if("string"===typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"===typeof r&&(r=v(r)),16!==r.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var o=new Uint8Array(16+e.length);if(o.set(r),o.set(e,r.length),(o=n(o))[6]=15&o[6]|t,o[8]=63&o[8]|128,a){i=i||0;for(var s=0;s<16;++s)a[i+s]=o[s];return a}return f(o)}try{r.name=e}catch(a){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}function y(e){return 14+(e+64>>>9<<4)+1}function b(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function x(e,t,n,r,a,i){return b((o=b(b(t,e),b(r,i)))<<(s=a)|o>>>32-s,n);var o,s}function k(e,t,n,r,a,i,o){return x(t&n|~t&r,e,t,a,i,o)}function w(e,t,n,r,a,i,o){return x(t&r|n&~r,e,t,a,i,o)}function S(e,t,n,r,a,i,o){return x(t^n^r,e,t,a,i,o)}function C(e,t,n,r,a,i,o){return x(n^(t|~r),e,t,a,i,o)}var _=function(e){if("string"===typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){for(var t=[],n=32*e.length,r="0123456789abcdef",a=0;a<n;a+=8){var i=e[a>>5]>>>a%32&255,o=parseInt(r.charAt(i>>>4&15)+r.charAt(15&i),16);t.push(o)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[y(t)-1]=t;for(var n=1732584193,r=-271733879,a=-1732584194,i=271733878,o=0;o<e.length;o+=16){var s=n,u=r,c=a,l=i;n=k(n,r,a,i,e[o],7,-680876936),i=k(i,n,r,a,e[o+1],12,-389564586),a=k(a,i,n,r,e[o+2],17,606105819),r=k(r,a,i,n,e[o+3],22,-1044525330),n=k(n,r,a,i,e[o+4],7,-176418897),i=k(i,n,r,a,e[o+5],12,1200080426),a=k(a,i,n,r,e[o+6],17,-1473231341),r=k(r,a,i,n,e[o+7],22,-45705983),n=k(n,r,a,i,e[o+8],7,1770035416),i=k(i,n,r,a,e[o+9],12,-1958414417),a=k(a,i,n,r,e[o+10],17,-42063),r=k(r,a,i,n,e[o+11],22,-1990404162),n=k(n,r,a,i,e[o+12],7,1804603682),i=k(i,n,r,a,e[o+13],12,-40341101),a=k(a,i,n,r,e[o+14],17,-1502002290),n=w(n,r=k(r,a,i,n,e[o+15],22,1236535329),a,i,e[o+1],5,-165796510),i=w(i,n,r,a,e[o+6],9,-1069501632),a=w(a,i,n,r,e[o+11],14,643717713),r=w(r,a,i,n,e[o],20,-373897302),n=w(n,r,a,i,e[o+5],5,-701558691),i=w(i,n,r,a,e[o+10],9,38016083),a=w(a,i,n,r,e[o+15],14,-660478335),r=w(r,a,i,n,e[o+4],20,-405537848),n=w(n,r,a,i,e[o+9],5,568446438),i=w(i,n,r,a,e[o+14],9,-1019803690),a=w(a,i,n,r,e[o+3],14,-187363961),r=w(r,a,i,n,e[o+8],20,1163531501),n=w(n,r,a,i,e[o+13],5,-1444681467),i=w(i,n,r,a,e[o+2],9,-51403784),a=w(a,i,n,r,e[o+7],14,1735328473),n=S(n,r=w(r,a,i,n,e[o+12],20,-1926607734),a,i,e[o+5],4,-378558),i=S(i,n,r,a,e[o+8],11,-2022574463),a=S(a,i,n,r,e[o+11],16,1839030562),r=S(r,a,i,n,e[o+14],23,-35309556),n=S(n,r,a,i,e[o+1],4,-1530992060),i=S(i,n,r,a,e[o+4],11,1272893353),a=S(a,i,n,r,e[o+7],16,-155497632),r=S(r,a,i,n,e[o+10],23,-1094730640),n=S(n,r,a,i,e[o+13],4,681279174),i=S(i,n,r,a,e[o],11,-358537222),a=S(a,i,n,r,e[o+3],16,-722521979),r=S(r,a,i,n,e[o+6],23,76029189),n=S(n,r,a,i,e[o+9],4,-640364487),i=S(i,n,r,a,e[o+12],11,-421815835),a=S(a,i,n,r,e[o+15],16,530742520),n=C(n,r=S(r,a,i,n,e[o+2],23,-995338651),a,i,e[o],6,-198630844),i=C(i,n,r,a,e[o+7],10,1126891415),a=C(a,i,n,r,e[o+14],15,-1416354905),r=C(r,a,i,n,e[o+5],21,-57434055),n=C(n,r,a,i,e[o+12],6,1700485571),i=C(i,n,r,a,e[o+3],10,-1894986606),a=C(a,i,n,r,e[o+10],15,-1051523),r=C(r,a,i,n,e[o+1],21,-2054922799),n=C(n,r,a,i,e[o+8],6,1873313359),i=C(i,n,r,a,e[o+15],10,-30611744),a=C(a,i,n,r,e[o+6],15,-1560198380),r=C(r,a,i,n,e[o+13],21,1309151649),n=C(n,r,a,i,e[o+4],6,-145523070),i=C(i,n,r,a,e[o+11],10,-1120210379),a=C(a,i,n,r,e[o+2],15,718787259),r=C(r,a,i,n,e[o+9],21,-343485551),n=b(n,s),r=b(r,u),a=b(a,c),i=b(i,l)}return[n,r,a,i]}(function(e){if(0===e.length)return[];for(var t=8*e.length,n=new Uint32Array(y(t)),r=0;r<t;r+=8)n[r>>5]|=(255&e[r/8])<<r%32;return n}(e),8*e.length))},I=g("v3",48,_);var T=function(e,t,n){var r=(e=e||{}).random||(e.rng||i)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var a=0;a<16;++a)t[n+a]=r[a];return t}return f(r)};function E(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:case 3:return t^n^r;case 2:return t&n^t&r^n&r}}function N(e,t){return e<<t|e>>>32-t}var O=function(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"===typeof e){var r=unescape(encodeURIComponent(e));e=[];for(var a=0;a<r.length;++a)e.push(r.charCodeAt(a))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var i=e.length/4+2,o=Math.ceil(i/16),s=new Array(o),u=0;u<o;++u){for(var c=new Uint32Array(16),l=0;l<16;++l)c[l]=e[64*u+4*l]<<24|e[64*u+4*l+1]<<16|e[64*u+4*l+2]<<8|e[64*u+4*l+3];s[u]=c}s[o-1][14]=8*(e.length-1)/Math.pow(2,32),s[o-1][14]=Math.floor(s[o-1][14]),s[o-1][15]=8*(e.length-1)&4294967295;for(var d=0;d<o;++d){for(var f=new Uint32Array(80),p=0;p<16;++p)f[p]=s[d][p];for(var h=16;h<80;++h)f[h]=N(f[h-3]^f[h-8]^f[h-14]^f[h-16],1);for(var m=n[0],v=n[1],g=n[2],y=n[3],b=n[4],x=0;x<80;++x){var k=Math.floor(x/20),w=N(m,5)+E(k,v,g,y)+b+t[k]+f[x]>>>0;b=y,y=g,g=N(v,30)>>>0,v=m,m=w}n[0]=n[0]+m>>>0,n[1]=n[1]+v>>>0,n[2]=n[2]+g>>>0,n[3]=n[3]+y>>>0,n[4]=n[4]+b>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]},A=g("v5",80,O),R="00000000-0000-0000-0000-000000000000";var P=function(e){if(!s(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},2506:function(e,t,n){var r=n(1444).MY,a=n(1444).cx,i={unpack:function(e){return new o(e).unpack()},pack:function(e){var t=new s;return t.pack(e),t.getBuffer()}};function o(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}function s(){this.bufferBuilder=new r}function u(e){var t=e.charCodeAt(0);return t<=2047?"00":t<=65535?"000":t<=2097151?"0000":t<=67108863?"00000":"000000"}e.exports=i,o.prototype.unpack=function(){var e,t=this.unpack_uint8();if(t<128)return t;if((224^t)<32)return(224^t)-32;if((e=160^t)<=15)return this.unpack_raw(e);if((e=176^t)<=15)return this.unpack_string(e);if((e=144^t)<=15)return this.unpack_array(e);if((e=128^t)<=15)return this.unpack_map(e);switch(t){case 192:return null;case 193:case 212:case 213:case 214:case 215:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 216:return e=this.unpack_uint16(),this.unpack_string(e);case 217:return e=this.unpack_uint32(),this.unpack_string(e);case 218:return e=this.unpack_uint16(),this.unpack_raw(e);case 219:return e=this.unpack_uint32(),this.unpack_raw(e);case 220:return e=this.unpack_uint16(),this.unpack_array(e);case 221:return e=this.unpack_uint32(),this.unpack_array(e);case 222:return e=this.unpack_uint16(),this.unpack_map(e);case 223:return e=this.unpack_uint32(),this.unpack_map(e)}},o.prototype.unpack_uint8=function(){var e=255&this.dataView[this.index];return this.index++,e},o.prototype.unpack_uint16=function(){var e=this.read(2),t=256*(255&e[0])+(255&e[1]);return this.index+=2,t},o.prototype.unpack_uint32=function(){var e=this.read(4),t=256*(256*(256*e[0]+e[1])+e[2])+e[3];return this.index+=4,t},o.prototype.unpack_uint64=function(){var e=this.read(8),t=256*(256*(256*(256*(256*(256*(256*e[0]+e[1])+e[2])+e[3])+e[4])+e[5])+e[6])+e[7];return this.index+=8,t},o.prototype.unpack_int8=function(){var e=this.unpack_uint8();return e<128?e:e-256},o.prototype.unpack_int16=function(){var e=this.unpack_uint16();return e<32768?e:e-65536},o.prototype.unpack_int32=function(){var e=this.unpack_uint32();return e<Math.pow(2,31)?e:e-Math.pow(2,32)},o.prototype.unpack_int64=function(){var e=this.unpack_uint64();return e<Math.pow(2,63)?e:e-Math.pow(2,64)},o.prototype.unpack_raw=function(e){if(this.length<this.index+e)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+e+" "+this.length);var t=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,t},o.prototype.unpack_string=function(e){for(var t,n,r=this.read(e),a=0,i="";a<e;)(t=r[a])<128?(i+=String.fromCharCode(t),a++):(192^t)<32?(n=(192^t)<<6|63&r[a+1],i+=String.fromCharCode(n),a+=2):(n=(15&t)<<12|(63&r[a+1])<<6|63&r[a+2],i+=String.fromCharCode(n),a+=3);return this.index+=e,i},o.prototype.unpack_array=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=this.unpack();return t},o.prototype.unpack_map=function(e){for(var t={},n=0;n<e;n++){var r=this.unpack(),a=this.unpack();t[r]=a}return t},o.prototype.unpack_float=function(){var e=this.unpack_uint32(),t=(e>>23&255)-127;return(0===e>>31?1:-1)*(8388607&e|8388608)*Math.pow(2,t-23)},o.prototype.unpack_double=function(){var e=this.unpack_uint32(),t=this.unpack_uint32(),n=(e>>20&2047)-1023;return(0===e>>31?1:-1)*((1048575&e|1048576)*Math.pow(2,n-20)+t*Math.pow(2,n-52))},o.prototype.read=function(e){var t=this.index;if(t+e<=this.length)return this.dataView.subarray(t,t+e);throw new Error("BinaryPackFailure: read index out of range")},s.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()},s.prototype.pack=function(e){var t=typeof e;if("string"===t)this.pack_string(e);else if("number"===t)Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if("boolean"===t)!0===e?this.bufferBuilder.append(195):!1===e&&this.bufferBuilder.append(194);else if("undefined"===t)this.bufferBuilder.append(192);else{if("object"!==t)throw new Error('Type "'+t+'" not yet supported');if(null===e)this.bufferBuilder.append(192);else{var n=e.constructor;if(n==Array)this.pack_array(e);else if(n==Blob||n==File||e instanceof Blob||e instanceof File)this.pack_bin(e);else if(n==ArrayBuffer)a.useArrayBufferView?this.pack_bin(new Uint8Array(e)):this.pack_bin(e);else if("BYTES_PER_ELEMENT"in e)a.useArrayBufferView?this.pack_bin(new Uint8Array(e.buffer)):this.pack_bin(e.buffer);else if(n==Object||n.toString().startsWith("class"))this.pack_object(e);else if(n==Date)this.pack_string(e.toString());else{if("function"!==typeof e.toBinaryPack)throw new Error('Type "'+n.toString()+'" not yet supported');this.bufferBuilder.append(e.toBinaryPack())}}}this.bufferBuilder.flush()},s.prototype.pack_bin=function(e){var t=e.length||e.byteLength||e.size;if(t<=15)this.pack_uint8(160+t);else if(t<=65535)this.bufferBuilder.append(218),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(219),this.pack_uint32(t)}this.bufferBuilder.append(e)},s.prototype.pack_string=function(e){var t=function(e){return e.length>600?new Blob([e]).size:e.replace(/[^\u0000-\u007F]/g,u).length}(e);if(t<=15)this.pack_uint8(176+t);else if(t<=65535)this.bufferBuilder.append(216),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(217),this.pack_uint32(t)}this.bufferBuilder.append(e)},s.prototype.pack_array=function(e){var t=e.length;if(t<=15)this.pack_uint8(144+t);else if(t<=65535)this.bufferBuilder.append(220),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(221),this.pack_uint32(t)}for(var n=0;n<t;n++)this.pack(e[n])},s.prototype.pack_integer=function(e){if(e>=-32&&e<=127)this.bufferBuilder.append(255&e);else if(e>=0&&e<=255)this.bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this.bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this.bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this.bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this.bufferBuilder.append(210),this.pack_int32(e);else if(e>=-0x8000000000000000&&e<=0x8000000000000000)this.bufferBuilder.append(211),this.pack_int64(e);else{if(!(e>=0&&e<=0x10000000000000000))throw new Error("Invalid integer");this.bufferBuilder.append(207),this.pack_uint64(e)}},s.prototype.pack_double=function(e){var t=0;e<0&&(t=1,e=-e);var n=Math.floor(Math.log(e)/Math.LN2),r=e/Math.pow(2,n)-1,a=Math.floor(r*Math.pow(2,52)),i=Math.pow(2,32),o=t<<31|n+1023<<20|a/i&1048575,s=a%i;this.bufferBuilder.append(203),this.pack_int32(o),this.pack_int32(s)},s.prototype.pack_object=function(e){var t=Object.keys(e).length;if(t<=15)this.pack_uint8(128+t);else if(t<=65535)this.bufferBuilder.append(222),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(223),this.pack_uint32(t)}for(var n in e)e.hasOwnProperty(n)&&(this.pack(n),this.pack(e[n]))},s.prototype.pack_uint8=function(e){this.bufferBuilder.append(e)},s.prototype.pack_uint16=function(e){this.bufferBuilder.append(e>>8),this.bufferBuilder.append(255&e)},s.prototype.pack_uint32=function(e){var t=4294967295&e;this.bufferBuilder.append((4278190080&t)>>>24),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t)},s.prototype.pack_uint64=function(e){var t=e/Math.pow(2,32),n=e%Math.pow(2,32);this.bufferBuilder.append((4278190080&t)>>>24),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t),this.bufferBuilder.append((4278190080&n)>>>24),this.bufferBuilder.append((16711680&n)>>>16),this.bufferBuilder.append((65280&n)>>>8),this.bufferBuilder.append(255&n)},s.prototype.pack_int8=function(e){this.bufferBuilder.append(255&e)},s.prototype.pack_int16=function(e){this.bufferBuilder.append((65280&e)>>8),this.bufferBuilder.append(255&e)},s.prototype.pack_int32=function(e){this.bufferBuilder.append(e>>>24&255),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e)},s.prototype.pack_int64=function(e){var t=Math.floor(e/Math.pow(2,32)),n=e%Math.pow(2,32);this.bufferBuilder.append((4278190080&t)>>>24),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t),this.bufferBuilder.append((4278190080&n)>>>24),this.bufferBuilder.append((16711680&n)>>>16),this.bufferBuilder.append((65280&n)>>>8),this.bufferBuilder.append(255&n)}},1444:function(e){var t={};t.useBlobBuilder=function(){try{return new Blob([]),!1}catch(e){return!0}}(),t.useArrayBufferView=!t.useBlobBuilder&&function(){try{return 0===new Blob([new Uint8Array([])]).size}catch(e){return!0}}(),e.exports.cx=t;var n=e.exports.xE;function r(){this._pieces=[],this._parts=[]}"undefined"!==typeof window&&(n=e.exports.xE=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder),r.prototype.append=function(e){"number"===typeof e?this._pieces.push(e):(this.flush(),this._parts.push(e))},r.prototype.flush=function(){if(this._pieces.length>0){var e=new Uint8Array(this._pieces);t.useArrayBufferView||(e=e.buffer),this._parts.push(e),this._pieces=[]}},r.prototype.getBuffer=function(){if(this.flush(),t.useBlobBuilder){for(var e=new n,r=0,a=this._parts.length;r<a;r++)e.append(this._parts[r]);return e.getBlob()}return new Blob(this._parts)},e.exports.MY=r},1146:function(e,t,n){"use strict";var r=n(2365);function a(e,t,n,a,i){var o=r.writeRtpDescription(e.kind,t);if(o+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":i||"active"),o+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var s=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=s;var u="msid:"+(a?a.id:"-")+" "+s+"\r\n";o+="a="+u,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+u,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+u,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),o}function i(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},a=function(e,t,n,a){var i=r(e.parameters.apt,n),o=r(t.parameters.apt,a);return i&&o&&i.name.toLowerCase()===o.name.toLowerCase()};return e.codecs.forEach((function(r){for(var i=0;i<t.codecs.length;i++){var o=t.codecs[i];if(r.name.toLowerCase()===o.name.toLowerCase()&&r.clockRate===o.clockRate){if("rtx"===r.name.toLowerCase()&&r.parameters&&o.parameters.apt&&!a(r,o,e.codecs,t.codecs))continue;(o=JSON.parse(JSON.stringify(o))).numChannels=Math.min(r.numChannels,o.numChannels),n.codecs.push(o),o.rtcpFeedback=o.rtcpFeedback.filter((function(e){for(var t=0;t<r.rtcpFeedback.length;t++)if(r.rtcpFeedback[t].type===e.type&&r.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var r=0;r<t.headerExtensions.length;r++){var a=t.headerExtensions[r];if(e.uri===a.uri){n.headerExtensions.push(a);break}}})),n}function o(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function s(e,t){var n=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return n||e.addRemoteCandidate(t),!n}function u(e,t){var n=new Error(t);return n.name=e,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],n}e.exports=function(e,t){function n(t,n){n.addTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function c(t,n,r,a){var i=new Event("track");i.track=n,i.receiver=r,i.transceiver={receiver:r},i.streams=a,e.setTimeout((function(){t._dispatchEvent("track",i)}))}var l=function(n){var a=this,i=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){a[e]=i[e].bind(i)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",n=JSON.parse(JSON.stringify(n||{})),this.usingBundle="max-bundle"===n.bundlePolicy,"negotiate"===n.rtcpMuxPolicy)throw u("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy="require"),n.iceTransportPolicy){case"all":case"relay":break;default:n.iceTransportPolicy="all"}switch(n.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:n.bundlePolicy="balanced"}if(n.iceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var r=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var a="string"===typeof r;return a&&(r=[r]),r=r.filter((function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||n?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(n=!0,!0)})),delete e.url,e.urls=a?r[0]:r,!!r.length}}))}(n.iceServers||[],t),this._iceGatherers=[],n.iceCandidatePoolSize)for(var o=n.iceCandidatePoolSize;o>0;o--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy}));else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=r.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(l.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(l.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),l.prototype.onicecandidate=null,l.prototype.onaddstream=null,l.prototype.ontrack=null,l.prototype.onremovestream=null,l.prototype.onsignalingstatechange=null,l.prototype.oniceconnectionstatechange=null,l.prototype.onconnectionstatechange=null,l.prototype.onicegatheringstatechange=null,l.prototype.onnegotiationneeded=null,l.prototype.ondatachannel=null,l.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"===typeof this["on"+e]&&this["on"+e](t))},l.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},l.prototype.getConfiguration=function(){return this._config},l.prototype.getLocalStreams=function(){return this.localStreams},l.prototype.getRemoteStreams=function(){return this.remoteStreams},l.prototype._createTransceiver=function(e,t){var n=this.transceivers.length>0,r={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&n)r.iceTransport=this.transceivers[0].iceTransport,r.dtlsTransport=this.transceivers[0].dtlsTransport;else{var a=this._createIceAndDtlsTransports();r.iceTransport=a.iceTransport,r.dtlsTransport=a.dtlsTransport}return t||this.transceivers.push(r),r},l.prototype.addTrack=function(t,n){if(this._isClosed)throw u("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r;if(this.transceivers.find((function(e){return e.track===t})))throw u("InvalidAccessError","Track already exists.");for(var a=0;a<this.transceivers.length;a++)this.transceivers[a].track||this.transceivers[a].kind!==t.kind||(r=this.transceivers[a]);return r||(r=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),r.track=t,r.stream=n,r.rtpSender=new e.RTCRtpSender(t,r.dtlsTransport),r.rtpSender},l.prototype.addStream=function(e){var n=this;if(t>=15025)e.getTracks().forEach((function(t){n.addTrack(t,e)}));else{var r=e.clone();e.getTracks().forEach((function(e,t){var n=r.getTracks()[t];e.addEventListener("enabled",(function(e){n.enabled=e.enabled}))})),r.getTracks().forEach((function(e){n.addTrack(e,r)}))}},l.prototype.removeTrack=function(t){if(this._isClosed)throw u("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find((function(e){return e.rtpSender===t}));if(!n)throw u("InvalidAccessError","Sender was not created by this connection.");var r=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(r)&&this.localStreams.indexOf(r)>-1&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},l.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var n=t.getSenders().find((function(t){return t.track===e}));n&&t.removeTrack(n)}))},l.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},l.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},l.prototype._createIceGatherer=function(t,n){var r=this;if(n&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var a=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(a,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var n=!e.candidate||0===Object.keys(e.candidate).length;a.state=n?"completed":"gathering",null!==r.transceivers[t].bufferedCandidateEvents&&r.transceivers[t].bufferedCandidateEvents.push(e)},a.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),a},l.prototype._gather=function(t,n){var a=this,i=this.transceivers[n].iceGatherer;if(!i.onlocalcandidate){var o=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,i.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),i.onlocalcandidate=function(e){if(!(a.usingBundle&&n>0)){var o=new Event("icecandidate");o.candidate={sdpMid:t,sdpMLineIndex:n};var s=e.candidate,u=!s||0===Object.keys(s).length;if(u)"new"!==i.state&&"gathering"!==i.state||(i.state="completed");else{"new"===i.state&&(i.state="gathering"),s.component=1,s.ufrag=i.getLocalParameters().usernameFragment;var c=r.writeCandidate(s);o.candidate=Object.assign(o.candidate,r.parseCandidate(c)),o.candidate.candidate=c,o.candidate.toJSON=function(){return{candidate:o.candidate.candidate,sdpMid:o.candidate.sdpMid,sdpMLineIndex:o.candidate.sdpMLineIndex,usernameFragment:o.candidate.usernameFragment}}}var l=r.getMediaSections(a._localDescription.sdp);l[o.candidate.sdpMLineIndex]+=u?"a=end-of-candidates\r\n":"a="+o.candidate.candidate+"\r\n",a._localDescription.sdp=r.getDescription(a._localDescription.sdp)+l.join("");var d=a.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==a.iceGatheringState&&(a.iceGatheringState="gathering",a._emitGatheringStateChange()),u||a._dispatchEvent("icecandidate",o),d&&(a._dispatchEvent("icecandidate",new Event("icecandidate")),a.iceGatheringState="complete",a._emitGatheringStateChange())}},e.setTimeout((function(){o.forEach((function(e){i.onlocalcandidate(e)}))}),0)}},l.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var r=new e.RTCDtlsTransport(n);return r.ondtlsstatechange=function(){t._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:r}},l.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var r=this.transceivers[e].dtlsTransport;r&&(delete r.ondtlsstatechange,delete r.onerror,delete this.transceivers[e].dtlsTransport)},l.prototype._transceive=function(e,n,a){var o=i(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(o.encodings=e.sendEncodingParameters,o.rtcp={cname:r.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(o.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(o)),a&&e.rtpReceiver&&o.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?o.encodings=e.recvEncodingParameters:o.encodings=[{}],o.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(o.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(o.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(o))},l.prototype.setLocalDescription=function(e){var t,n,a=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(u("TypeError",'Unsupported type "'+e.type+'"'));if(!o("setLocalDescription",e.type,a.signalingState)||a._isClosed)return Promise.reject(u("InvalidStateError","Can not set local "+e.type+" in state "+a.signalingState));if("offer"===e.type)t=r.splitSections(e.sdp),n=t.shift(),t.forEach((function(e,t){var n=r.parseRtpParameters(e);a.transceivers[t].localCapabilities=n})),a.transceivers.forEach((function(e,t){a._gather(e.mid,t)}));else if("answer"===e.type){t=r.splitSections(a._remoteDescription.sdp),n=t.shift();var s=r.matchPrefix(n,"a=ice-lite").length>0;t.forEach((function(e,t){var o=a.transceivers[t],u=o.iceGatherer,c=o.iceTransport,l=o.dtlsTransport,d=o.localCapabilities,f=o.remoteCapabilities;if(!(r.isRejected(e)&&0===r.matchPrefix(e,"a=bundle-only").length)&&!o.rejected){var p=r.getIceParameters(e,n),h=r.getDtlsParameters(e,n);s&&(h.role="server"),a.usingBundle&&0!==t||(a._gather(o.mid,t),"new"===c.state&&c.start(u,p,s?"controlling":"controlled"),"new"===l.state&&l.start(h));var m=i(d,f);a._transceive(o,m.codecs.length>0,!1)}}))}return a._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?a._updateSignalingState("have-local-offer"):a._updateSignalingState("stable"),Promise.resolve()},l.prototype.setRemoteDescription=function(a){var l=this;if(-1===["offer","answer"].indexOf(a.type))return Promise.reject(u("TypeError",'Unsupported type "'+a.type+'"'));if(!o("setRemoteDescription",a.type,l.signalingState)||l._isClosed)return Promise.reject(u("InvalidStateError","Can not set remote "+a.type+" in state "+l.signalingState));var d={};l.remoteStreams.forEach((function(e){d[e.id]=e}));var f=[],p=r.splitSections(a.sdp),h=p.shift(),m=r.matchPrefix(h,"a=ice-lite").length>0,v=r.matchPrefix(h,"a=group:BUNDLE ").length>0;l.usingBundle=v;var g=r.matchPrefix(h,"a=ice-options:")[0];return l.canTrickleIceCandidates=!!g&&g.substr(14).split(" ").indexOf("trickle")>=0,p.forEach((function(o,u){var c=r.splitLines(o),p=r.getKind(o),g=r.isRejected(o)&&0===r.matchPrefix(o,"a=bundle-only").length,y=c[0].substr(2).split(" ")[2],b=r.getDirection(o,h),x=r.parseMsid(o),k=r.getMid(o)||r.generateIdentifier();if(g||"application"===p&&("DTLS/SCTP"===y||"UDP/DTLS/SCTP"===y))l.transceivers[u]={mid:k,kind:p,protocol:y,rejected:!0};else{var w,S,C,_,I,T,E,N,O;!g&&l.transceivers[u]&&l.transceivers[u].rejected&&(l.transceivers[u]=l._createTransceiver(p,!0));var A,R,P=r.parseRtpParameters(o);g||(A=r.getIceParameters(o,h),(R=r.getDtlsParameters(o,h)).role="client"),E=r.parseRtpEncodingParameters(o);var D=r.parseRtcpParameters(o),B=r.matchPrefix(o,"a=end-of-candidates",h).length>0,M=r.matchPrefix(o,"a=candidate:").map((function(e){return r.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===a.type||"answer"===a.type)&&!g&&v&&u>0&&l.transceivers[u]&&(l._disposeIceAndDtlsTransports(u),l.transceivers[u].iceGatherer=l.transceivers[0].iceGatherer,l.transceivers[u].iceTransport=l.transceivers[0].iceTransport,l.transceivers[u].dtlsTransport=l.transceivers[0].dtlsTransport,l.transceivers[u].rtpSender&&l.transceivers[u].rtpSender.setTransport(l.transceivers[0].dtlsTransport),l.transceivers[u].rtpReceiver&&l.transceivers[u].rtpReceiver.setTransport(l.transceivers[0].dtlsTransport)),"offer"!==a.type||g){if("answer"===a.type&&!g){S=(w=l.transceivers[u]).iceGatherer,C=w.iceTransport,_=w.dtlsTransport,I=w.rtpReceiver,T=w.sendEncodingParameters,N=w.localCapabilities,l.transceivers[u].recvEncodingParameters=E,l.transceivers[u].remoteCapabilities=P,l.transceivers[u].rtcpParameters=D,M.length&&"new"===C.state&&(!m&&!B||v&&0!==u?M.forEach((function(e){s(w.iceTransport,e)})):C.setRemoteCandidates(M)),v&&0!==u||("new"===C.state&&C.start(S,A,"controlling"),"new"===_.state&&_.start(R)),!i(w.localCapabilities,w.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&w.sendEncodingParameters[0].rtx&&delete w.sendEncodingParameters[0].rtx,l._transceive(w,"sendrecv"===b||"recvonly"===b,"sendrecv"===b||"sendonly"===b),!I||"sendrecv"!==b&&"sendonly"!==b?delete w.rtpReceiver:(O=I.track,x?(d[x.stream]||(d[x.stream]=new e.MediaStream),n(O,d[x.stream]),f.push([O,I,d[x.stream]])):(d.default||(d.default=new e.MediaStream),n(O,d.default),f.push([O,I,d.default])))}}else{(w=l.transceivers[u]||l._createTransceiver(p)).mid=k,w.iceGatherer||(w.iceGatherer=l._createIceGatherer(u,v)),M.length&&"new"===w.iceTransport.state&&(!B||v&&0!==u?M.forEach((function(e){s(w.iceTransport,e)})):w.iceTransport.setRemoteCandidates(M)),N=e.RTCRtpReceiver.getCapabilities(p),t<15019&&(N.codecs=N.codecs.filter((function(e){return"rtx"!==e.name}))),T=w.sendEncodingParameters||[{ssrc:1001*(2*u+2)}];var F,L=!1;if("sendrecv"===b||"sendonly"===b){if(L=!w.rtpReceiver,I=w.rtpReceiver||new e.RTCRtpReceiver(w.dtlsTransport,p),L)O=I.track,x&&"-"===x.stream||(x?(d[x.stream]||(d[x.stream]=new e.MediaStream,Object.defineProperty(d[x.stream],"id",{get:function(){return x.stream}})),Object.defineProperty(O,"id",{get:function(){return x.track}}),F=d[x.stream]):(d.default||(d.default=new e.MediaStream),F=d.default)),F&&(n(O,F),w.associatedRemoteMediaStreams.push(F)),f.push([O,I,F])}else w.rtpReceiver&&w.rtpReceiver.track&&(w.associatedRemoteMediaStreams.forEach((function(t){var n=t.getTracks().find((function(e){return e.id===w.rtpReceiver.track.id}));n&&function(t,n){n.removeTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(n,t)})),w.associatedRemoteMediaStreams=[]);w.localCapabilities=N,w.remoteCapabilities=P,w.rtpReceiver=I,w.rtcpParameters=D,w.sendEncodingParameters=T,w.recvEncodingParameters=E,l._transceive(l.transceivers[u],!1,L)}}})),void 0===l._dtlsRole&&(l._dtlsRole="offer"===a.type?"active":"passive"),l._remoteDescription={type:a.type,sdp:a.sdp},"offer"===a.type?l._updateSignalingState("have-remote-offer"):l._updateSignalingState("stable"),Object.keys(d).forEach((function(t){var n=d[t];if(n.getTracks().length){if(-1===l.remoteStreams.indexOf(n)){l.remoteStreams.push(n);var r=new Event("addstream");r.stream=n,e.setTimeout((function(){l._dispatchEvent("addstream",r)}))}f.forEach((function(e){var t=e[0],r=e[1];n.id===e[2].id&&c(l,t,r,[n])}))}})),f.forEach((function(e){e[2]||c(l,e[0],e[1],[])})),e.setTimeout((function(){l&&l.transceivers&&l.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},l.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},l.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},l.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},l.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},l.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var n=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",n)}},l.prototype.createOffer=function(){var n=this;if(n._isClosed)return Promise.reject(u("InvalidStateError","Can not call createOffer after close"));var i=n.transceivers.filter((function(e){return"audio"===e.kind})).length,o=n.transceivers.filter((function(e){return"video"===e.kind})).length,s=arguments[0];if(s){if(s.mandatory||s.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==s.offerToReceiveAudio&&(i=!0===s.offerToReceiveAudio?1:!1===s.offerToReceiveAudio?0:s.offerToReceiveAudio),void 0!==s.offerToReceiveVideo&&(o=!0===s.offerToReceiveVideo?1:!1===s.offerToReceiveVideo?0:s.offerToReceiveVideo)}for(n.transceivers.forEach((function(e){"audio"===e.kind?--i<0&&(e.wantReceive=!1):"video"===e.kind&&--o<0&&(e.wantReceive=!1)}));i>0||o>0;)i>0&&(n._createTransceiver("audio"),i--),o>0&&(n._createTransceiver("video"),o--);var c=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.transceivers.forEach((function(a,i){var o=a.track,s=a.kind,u=a.mid||r.generateIdentifier();a.mid=u,a.iceGatherer||(a.iceGatherer=n._createIceGatherer(i,n.usingBundle));var c=e.RTCRtpSender.getCapabilities(s);t<15019&&(c.codecs=c.codecs.filter((function(e){return"rtx"!==e.name}))),c.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),a.remoteCapabilities&&a.remoteCapabilities.codecs&&a.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),c.headerExtensions.forEach((function(e){(a.remoteCapabilities&&a.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var l=a.sendEncodingParameters||[{ssrc:1001*(2*i+1)}];o&&t>=15019&&"video"===s&&!l[0].rtx&&(l[0].rtx={ssrc:l[0].ssrc+1}),a.wantReceive&&(a.rtpReceiver=new e.RTCRtpReceiver(a.dtlsTransport,s)),a.localCapabilities=c,a.sendEncodingParameters=l})),"max-compat"!==n._config.bundlePolicy&&(c+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),c+="a=ice-options:trickle\r\n",n.transceivers.forEach((function(e,t){c+=a(e,e.localCapabilities,"offer",e.stream,n._dtlsRole),c+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===n.iceGatheringState||0!==t&&n.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,c+="a="+r.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(c+="a=end-of-candidates\r\n"))}));var l=new e.RTCSessionDescription({type:"offer",sdp:c});return Promise.resolve(l)},l.prototype.createAnswer=function(){var n=this;if(n._isClosed)return Promise.reject(u("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==n.signalingState&&"have-local-pranswer"!==n.signalingState)return Promise.reject(u("InvalidStateError","Can not call createAnswer in signalingState "+n.signalingState));var o=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.usingBundle&&(o+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),o+="a=ice-options:trickle\r\n";var s=r.getMediaSections(n._remoteDescription.sdp).length;n.transceivers.forEach((function(e,r){if(!(r+1>s)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?o+="m=application 0 DTLS/SCTP 5000\r\n":o+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?o+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(o+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(o+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var u;if(e.stream)"audio"===e.kind?u=e.stream.getAudioTracks()[0]:"video"===e.kind&&(u=e.stream.getVideoTracks()[0]),u&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1});var c=i(e.localCapabilities,e.remoteCapabilities);!c.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,o+=a(e,c,"answer",e.stream,n._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(o+="a=rtcp-rsize\r\n")}}));var c=new e.RTCSessionDescription({type:"answer",sdp:o});return Promise.resolve(c)},l.prototype.addIceCandidate=function(e){var t,n=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(a,i){if(!n._remoteDescription)return i(u("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var o=e.sdpMLineIndex;if(e.sdpMid)for(var c=0;c<n.transceivers.length;c++)if(n.transceivers[c].mid===e.sdpMid){o=c;break}var l=n.transceivers[o];if(!l)return i(u("OperationError","Can not add ICE candidate"));if(l.rejected)return a();var d=Object.keys(e.candidate).length>0?r.parseCandidate(e.candidate):{};if("tcp"===d.protocol&&(0===d.port||9===d.port))return a();if(d.component&&1!==d.component)return a();if((0===o||o>0&&l.iceTransport!==n.transceivers[0].iceTransport)&&!s(l.iceTransport,d))return i(u("OperationError","Can not add ICE candidate"));var f=e.candidate.trim();0===f.indexOf("a=")&&(f=f.substr(2)),(t=r.getMediaSections(n._remoteDescription.sdp))[o]+="a="+(d.type?f:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join("")}else for(var p=0;p<n.transceivers.length&&(n.transceivers[p].rejected||(n.transceivers[p].iceTransport.addRemoteCandidate({}),(t=r.getMediaSections(n._remoteDescription.sdp))[p]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join(""),!n.usingBundle));p++);a()}))},l.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var n=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)})),!n)throw u("InvalidAccessError","Invalid selector.");return n.getStats()}var r=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&r.push(e[t].getStats())}))})),Promise.all(r).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))};["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var n=e[t];if(n&&n.prototype&&n.prototype.getStats){var r=n.prototype.getStats;n.prototype.getStats=function(){return r.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(n){var r;e[n].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(r=e[n]).type]||r.type,t.set(n,e[n])})),t}))}}}));var d=["createOffer","createAnswer"];return d.forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"===typeof e[0]||"function"===typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"===typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"===typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(d=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"===typeof e[1]||"function"===typeof e[2]?t.apply(this,arguments).then((function(){"function"===typeof e[1]&&e[1].apply(null)}),(function(t){"function"===typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"===typeof e[1]?t.apply(this,arguments).then((function(){"function"===typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),l}},2365:function(e){"use strict";var t={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},t.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},t.getDescription=function(e){var n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){var n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter((function(e){return 0===e.indexOf(n)}))},t.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:n[t[r]]=t[r+1]}return n},t.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substr(14).split(" ")},t.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},t.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),a=0;a<r.length;a++)n[(t=r[a].trim().split("="))[0].trim()]=t[1];return n},t.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},t.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},t.getMid=function(e){var n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substr(6)},t.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"===typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){var r=t.matchPrefix(e+n,"a=ice-ufrag:")[0],a=t.matchPrefix(e+n,"a=ice-pwd:")[0];return r&&a?{usernameFragment:r.substr(12),password:a.substr(10)}:null},t.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},t.parseRtpParameters=function(e){for(var n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" "),a=3;a<r.length;a++){var i=r[a],o=t.matchPrefix(e,"a=rtpmap:"+i+" ")[0];if(o){var s=t.parseRtpMap(o),u=t.matchPrefix(e,"a=fmtp:"+i+" ");switch(s.parameters=u.length?t.parseFmtp(u[0]):{},s.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+i+" ").map(t.parseRtcpFb),n.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(s.name.toUpperCase())}}}return t.matchPrefix(e,"a=extmap:").forEach((function(e){n.headerExtensions.push(t.parseExtmap(e))})),n},t.writeRtpDescription=function(e,n){var r="";r+="m="+e+" ",r+=n.codecs.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=n.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((function(e){r+=t.writeRtpMap(e),r+=t.writeFmtp(e),r+=t.writeRtcpFb(e)}));var a=0;return n.codecs.forEach((function(e){e.maxptime>a&&(a=e.maxptime)})),a>0&&(r+="a=maxptime:"+a+"\r\n"),r+="a=rtcp-mux\r\n",n.headerExtensions&&n.headerExtensions.forEach((function(e){r+=t.writeExtmap(e)})),r},t.parseRtpEncodingParameters=function(e){var n,r=[],a=t.parseRtpParameters(e),i=-1!==a.fecMechanisms.indexOf("RED"),o=-1!==a.fecMechanisms.indexOf("ULPFEC"),s=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),u=s.length>0&&s[0].ssrc,c=t.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));c.length>0&&c[0].length>1&&c[0][0]===u&&(n=c[0][1]),a.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var t={ssrc:u,codecPayloadType:parseInt(e.parameters.apt,10)};u&&n&&(t.rtx={ssrc:n}),r.push(t),i&&((t=JSON.parse(JSON.stringify(t))).fec={ssrc:u,mechanism:o?"red+ulpfec":"red"},r.push(t))}})),0===r.length&&u&&r.push({ssrc:u});var l=t.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substr(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substr(5),10)*.95-16e3:void 0,r.forEach((function(e){e.maxBitrate=l}))),r},t.parseRtcpParameters=function(e){var n={},r=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);var a=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=a.length>0,n.compound=0===a.length;var i=t.matchPrefix(e,"a=rtcp-mux");return n.mux=i.length>0,n},t.parseMsid=function(e){var n,r=t.matchPrefix(e,"a=msid:");if(1===r.length)return{stream:(n=r[0].substr(7).split(" "))[0],track:n[1]};var a=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return a.length>0?{stream:(n=a[0].value.split(" "))[0],track:n[1]}:void 0},t.parseSctpDescription=function(e){var n,r=t.parseMLine(e),a=t.matchPrefix(e,"a=max-message-size:");a.length>0&&(n=parseInt(a[0].substr(19),10)),isNaN(n)&&(n=65536);var i=t.matchPrefix(e,"a=sctp-port:");if(i.length>0)return{port:parseInt(i[0].substr(12),10),protocol:r.fmt,maxMessageSize:n};if(t.matchPrefix(e,"a=sctpmap:").length>0){var o=t.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(o[0],10),protocol:o[1],maxMessageSize:n}}},t.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(e,n,r){var a=void 0!==n?n:2;return"v=0\r\no="+(r||"thisisadapterortc")+" "+(e||t.generateSessionId())+" "+a+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.writeMediaSection=function(e,n,r,a){var i=t.writeRtpDescription(e.kind,n);if(i+=t.writeIceParameters(e.iceGatherer.getLocalParameters()),i+=t.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":"active"),i+="a=mid:"+e.mid+"\r\n",e.direction?i+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?i+="a=sendrecv\r\n":e.rtpSender?i+="a=sendonly\r\n":e.rtpReceiver?i+="a=recvonly\r\n":i+="a=inactive\r\n",e.rtpSender){var o="msid:"+a.id+" "+e.rtpSender.track.id+"\r\n";i+="a="+o,i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+o,e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+o,i+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+t.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+t.localCName+"\r\n"),i},t.getDirection=function(e,n){for(var r=t.splitLines(e),a=0;a<r.length;a++)switch(r[a]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[a].substr(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substr(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){var n=t.splitLines(e)[0].substr(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){var n=t.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!==typeof e||0===e.length)return!1;for(var n=t.splitLines(e),r=0;r<n.length;r++)if(n[r].length<2||"="!==n[r].charAt(1))return!1;return!0},e.exports=t},5410:function(){},8628:function(){},5042:function(){},3897:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},5372:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},3405:function(e,t,n){var r=n(3897);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},7156:function(e){function t(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,a)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(a,i){var o=e.apply(n,r);function s(e){t(o,a,i,s,u,"next",e)}function u(e){t(o,a,i,s,u,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},6690:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},9728:function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},4704:function(e,t,n){var r=n(6116);e.exports=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}},e.exports.__esModule=!0,e.exports.default=e.exports},8416:function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},9498:function(e){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},8872:function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(u){s=!0,a=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}},e.exports.__esModule=!0,e.exports.default=e.exports},2218:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},2281:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},7061:function(e,t,n){var r=n(8698).default;function a(){"use strict";e.exports=a=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,i=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(N){l=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var a=t&&t.prototype instanceof h?t:h,i=Object.create(a.prototype),o=new I(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return E()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=S(o,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}t.wrap=d;var p={};function h(){}function m(){}function v(){}var g={};l(g,s,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(T([])));b&&b!==n&&i.call(b,s)&&(g=b);var x=v.prototype=h.prototype=Object.create(g);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(a,o,s,u){var c=f(e[a],e,o);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==r(d)&&i.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,u)}),(function(e){n("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,u)}))}u(c.arg)}var a;this._invoke=function(e,r){function i(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(i,i):i()}}function S(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=f(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,p;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function T(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:E}}function E(){return{value:void 0,done:!0}}return m.prototype=v,l(x,"constructor",v),l(v,"constructor",m),m.displayName=l(v,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},k(w.prototype),l(w.prototype,u,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,a,i){void 0===i&&(i=Promise);var o=new w(d(e,n,r,a),i);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(x),l(x,c,"Generator"),l(x,s,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;_(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},t}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},7424:function(e,t,n){var r=n(5372),a=n(8872),i=n(6116),o=n(2218);e.exports=function(e,t){return r(e)||a(e,t)||i(e,t)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},861:function(e,t,n){var r=n(3405),a=n(9498),i=n(6116),o=n(2281);e.exports=function(e){return r(e)||a(e)||i(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},8698:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},6116:function(e,t,n){var r=n(3897);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},3878:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{Z:function(){return r}})},7326:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return r}})},5861:function(e,t,n){"use strict";function r(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function s(e){r(o,a,i,s,u,"next",e)}function u(e){r(o,a,i,s,u,"throw",e)}s(void 0)}))}}n.d(t,{Z:function(){return a}})},5671:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return r}})},3144:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n.d(t,{Z:function(){return a}})},7762:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(181);function a(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,r.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}},9388:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(1120),a=n(8814),i=n(2963);function o(e){var t=(0,a.Z)();return function(){var n,a=(0,r.Z)(e);if(t){var o=(0,r.Z)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return(0,i.Z)(this,n)}}},1752:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(1120);function a(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,r.Z)(e)););return e}function i(){return i="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=a(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},i.apply(this,arguments)}},1120:function(e,t,n){"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}n.d(t,{Z:function(){return r}})},136:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(9611);function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,r.Z)(e,t)}},8814:function(e,t,n){"use strict";function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}n.d(t,{Z:function(){return r}})},9199:function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:function(){return r}})},5267:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:function(){return r}})},2963:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(1002),a=n(7326);function i(e,t){if(t&&("object"===(0,r.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,a.Z)(e)}},4165:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(1002);function a(){a=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(E){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof p?t:p,i=Object.create(a.prototype),o=new _(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return T()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=d(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=l;var f={};function p(){}function h(){}function m(){}var v={};c(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(I([])));y&&y!==t&&n.call(y,o)&&(v=y);var b=m.prototype=p.prototype=Object.create(v);function x(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function a(i,o,s,u){var c=d(e[i],e,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==(0,r.Z)(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){a("next",e,s,u)}),(function(e){a("throw",e,s,u)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return a("throw",e,s,u)}))}u(c.arg)}var i;this._invoke=function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return i=i?i.then(r,r):r()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=d(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function I(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:T}}function T(){return{value:void 0,done:!0}}return h.prototype=m,c(b,"constructor",m),c(m,"constructor",h),h.displayName=c(m,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},x(k.prototype),c(k.prototype,s,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new k(l(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(b),c(b,u,"Generator"),c(b,o,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}},9611:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{Z:function(){return r}})},9439:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(3878);var a=n(181),i=n(5267);function o(e,t){return(0,r.Z)(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(u){s=!0,a=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||(0,a.Z)(e,t)||(0,i.Z)()}},3433:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(907);var a=n(9199),i=n(181);function o(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,a.Z)(e)||(0,i.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},1002:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:function(){return r}})},181:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(907);function a(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},n.p="/",function(){"use strict";var e={};n.r(e),n.d(e,{fixNegotiationNeeded:function(){return kc},shimAddTrackRemoveTrack:function(){return bc},shimAddTrackRemoveTrackWithNative:function(){return yc},shimGetDisplayMedia:function(){return fc},shimGetSendersWithDtmf:function(){return mc},shimGetStats:function(){return vc},shimGetUserMedia:function(){return dc},shimMediaStream:function(){return pc},shimOnTrack:function(){return hc},shimPeerConnection:function(){return xc},shimSenderReceiverGetStats:function(){return gc}});var t={};n.r(t),n.d(t,{shimGetDisplayMedia:function(){return _c},shimGetUserMedia:function(){return Cc},shimPeerConnection:function(){return Ic},shimReplaceTrack:function(){return Tc}});var r={};n.r(r),n.d(r,{shimAddTransceiver:function(){return Mc},shimCreateAnswer:function(){return Vc},shimCreateOffer:function(){return Lc},shimGetDisplayMedia:function(){return Nc},shimGetParameters:function(){return Fc},shimGetUserMedia:function(){return Ec},shimOnTrack:function(){return Oc},shimPeerConnection:function(){return Ac},shimRTCDataChannel:function(){return Bc},shimReceiverGetStats:function(){return Pc},shimRemoveStream:function(){return Dc},shimSenderGetStats:function(){return Rc}});var a={};n.r(a),n.d(a,{shimAudioContext:function(){return Xc},shimCallbacksAPI:function(){return Uc},shimConstraints:function(){return Wc},shimCreateOfferLegacy:function(){return qc},shimGetUserMedia:function(){return jc},shimLocalStreamsAPI:function(){return zc},shimRTCIceServerUrls:function(){return Gc},shimRemoteStreamsAPI:function(){return Zc},shimTrackEventTransceiver:function(){return Hc}});var i={};n.r(i),n.d(i,{removeExtmapAllowMixed:function(){return tl},shimAddIceCandidateNullOrEmpty:function(){return nl},shimConnectionState:function(){return el},shimMaxMessageSize:function(){return $c},shimRTCIceCandidate:function(){return Qc},shimSendThrowTypeError:function(){return Jc}});var o={};n.r(o),n.d(o,{Decoder:function(){return Cf},Encoder:function(){return Sf},PacketType:function(){return kf},protocol:function(){return wf}});var s=n(2791),u=n(1250),c=n(5671),l=n(3144),d=n(136),f=n(9388),p=n(2963),h=n(7762),m=n(9439),v=n(3433),g=n(4165),y=n(7326),b=n(1120),x=n(9611);var k=n(8814);function w(e,t,n){return w=(0,k.Z)()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&(0,x.Z)(a,n.prototype),a},w.apply(null,arguments)}function S(e){var t="function"===typeof Map?new Map:void 0;return S=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return w(e,arguments,(0,b.Z)(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),(0,x.Z)(n,e)},S(e)}function C(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{u(r.next(e))}catch(Ln){i(Ln)}}function s(e){try{u(r.throw(e))}catch(Ln){i(Ln)}}function u(e){e.done?a(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,s)}u((r=r.apply(e,t||[])).next())}))}var _,I=(0,l.Z)((function e(t){return(0,c.Z)(this,e),this.channelCount=void 0,this.latency=void 0,this.sampleRate=void 0,this.sampleSize=void 0,this.volume=void 0,this.whiteBalanceMode=void 0,this.exposureMode=void 0,this.focusMode=void 0,this.pointOfInterest=void 0,this.exposureCompensation=void 0,this.colorTemperature=void 0,this.iso=void 0,this.brightness=void 0,this.contrast=void 0,this.saturation=void 0,this.sharpness=void 0,this.focusDistance=void 0,this.zoom=void 0,this.torch=void 0,this.aspectRatio=void 0,this.frameRate=void 0,this.height=void 0,this.width=void 0,this.resizeMode=void 0,this.cursor=["always","motion","never"],this.displaySurface=["application","browser","monitor","window"],this.logicalSurface=!1,console.error("TODO: Get Constraints",t),this})),T=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;(0,c.Z)(this,n),r=t.call(this,e);var a=e.getConstraints();return r.deviceId=a.deviceId,r.groupId=a.groupId,r.autoGainControl=a.autoGainControl,r.channelCount=a.channelCount,r.echoCancellation=a.echoCancellation,r.latency=a.latency,r.noiseSuppression=a.noiseSuppression,r.sampleRate=a.sampleRate,r.sampleSize=a.sampleSize,r.volume=a.volume,r.aspectRatio=a.aspectRatio,r.facingMode=a.facingMode,r.frameRate=a.frameRate,r.height=a.height,r.width=a.width,r.resizeMode=a.resizeMode,r.cursor=a.cursor,r.displaySurface=a.displaySurface,r.logicalSurface=a.logicalSurface,r}return(0,l.Z)(n)}(I),E=(0,l.Z)((function e(t){(0,c.Z)(this,e),console.error("TODO: Get Capabilities",t)})),N=new Uint8Array(16);function O(){if(!_&&!(_="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _(N)}var A=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function R(e){return"string"===typeof e&&A.test(e)}for(var P=[],D=0;D<256;++D)P.push((D+256).toString(16).substr(1));function B(e,t,n){var r=(e=e||{}).random||(e.rng||O)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var a=0;a<16;++a)t[n+a]=r[a];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(P[e[t+0]]+P[e[t+1]]+P[e[t+2]]+P[e[t+3]]+"-"+P[e[t+4]]+P[e[t+5]]+"-"+P[e[t+6]]+P[e[t+7]]+"-"+P[e[t+8]]+P[e[t+9]]+"-"+P[e[t+10]]+P[e[t+11]]+P[e[t+12]]+P[e[t+13]]+P[e[t+14]]+P[e[t+15]]).toLowerCase();if(!R(n))throw TypeError("Stringified UUID is invalid");return n}(r)}var M=function(){return globalThis.crypto?globalThis.crypto.randomUUID():B()},F=function(e,t){(0,d.Z)(r,e);var n=(0,f.Z)(r);function r(e,t){var a,i,o,s,u,l,d,f,p,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";(0,c.Z)(this,r),(a=n.call(this)).contentHint="",a.enabled=!1,a.isolated=!1,a.muted=!1,a.remote=!1,a.id="",a.kind="",a.label="",a.readyState="live",a.data=[],a.timestamps=[],a.writable=new WritableStream({start:function(){},write:function(e){return a.addData(e,Date.now())}}),a.callbacks=new Map,a.pipeline=[],a._bufferSize=30720,a.deinit=function(){a.dispatchEvent(new Event("ended"))},a.applyConstraints=function(){return C((0,y.Z)(a),void 0,void 0,(0,g.Z)().mark((function e(){return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))},a.clone=function(){return(0,y.Z)(a)},a.getCapabilities=function(){return new E((0,y.Z)(a))},a.getConstraints=function(){return new I((0,y.Z)(a))},a.getSettings=function(){return new T((0,y.Z)(a))},a.stop=function(){a.readable.cancel(),a.writable.abort()},a.addData=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[Date.now()];Array.isArray(e)||(e=[e]),(t=a.data).push.apply(t,(0,v.Z)(e)),Array.isArray(r)||(r=[r]);var i=r[r.length-1];e.length!==r.length&&(r=Array.from({length:e.length},(function(e,t){var n;return null!==(n=null===r||void 0===r?void 0:r[t])&&void 0!==n?n:i}))),(n=a.timestamps).push.apply(n,(0,v.Z)(r)),a.controller&&e.forEach((function(e){var t;return null===(t=a.controller)||void 0===t?void 0:t.enqueue(e)}));for(var o=a.data.length-a._bufferSize,s=o;s>0;s--)a.data.shift();a.ondata(e,r)},a.ondata=function(e,t){a.callbacks.forEach((function(n){n(e,t)}))},a.subscribe=function(e){var t=M();return a.callbacks.set(t,e),t},a.unsubscribe=function(e){return a.callbacks.delete(e)},a.id=null!==(i=null===e||void 0===e?void 0:e.id)&&void 0!==i?i:M(),a.kind=null!==(s=null===(o=null===e||void 0===e?void 0:e.constraints)||void 0===o?void 0:o.kind)&&void 0!==s?s:a.kind,a.label=null!==(l=null===(u=null===e||void 0===e?void 0:e.constraints)||void 0===u?void 0:u.label)&&void 0!==l?l:a.label,a.callbacks=new Map,a.data=[],"string"===typeof a.contentHint&&(a.contentHint=h),a._bufferSize=null!==(f=null===(d=null===e||void 0===e?void 0:e.constraints)||void 0===d?void 0:d.bufferSize)&&void 0!==f?f:a._bufferSize,a.pipeline=[];var b=function(){},x=function(){return a.controller=void 0};if(a.readable=new ReadableStream({start:function(e){a.controller=e},pull:b,cancel:x}),t)if("MediaStreamTrackProcessor"in globalThis){var k=null===(p=new MediaStreamTrackProcessor({track:t}))||void 0===p?void 0:p.readable,w=k.tee(),S=(0,m.Z)(w,2),_=S[0],N=S[1];_.pipeTo(new WritableStream({start:function(){},write:function(e){return a.addData(e,Date.now())}})),a.readable=N}else alert("Your browser does not support the experimental MediaStreamTrack API for Insertable Streams of Media");return a}return(0,l.Z)(r,[{key:t,get:function(){return"DataStreamTrack"}}]),r}(S(EventTarget),Symbol.toStringTag),L=function(e){var t=new Set;return Array.isArray(e.protocols)?e.protocols.forEach((function(e){return t.add(e)})):(e.serviceUUID&&t.add("bluetooth"),e.usbVendorId&&t.add("serial"),e.url&&(t.add("wifi"),t.add("websocket"))),{deviceId:M(),groupId:M(),kind:e.kind,label:e.label,protocols:Array.from(t),modes:null===e||void 0===e?void 0:e.modes}},V=function(e,t){(0,d.Z)(r,e);var n=(0,f.Z)(r);function r(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,c.Z)(this,r),(e=n.call(this,t)).tracks=new Map,e.addTrack=e.addTrack,e.getDataTracks=function(){return(0,v.Z)(e.tracks.values())},e._addTrack=e.addTrack,e._getTracks=e.getTracks,e._removeTrack=e.removeTrack,e.addTrack=function(t){return(0,v.Z)(e.tracks.values()).includes(t)||(t instanceof MediaStreamTrack&&(e._addTrack(t),t=new F(void 0,t)),e.tracks.set(t.contentHint||e.tracks.size,t),e.dispatchEvent(new CustomEvent("addtrack",{detail:t}))),t},e.removeTrack=function(t){if((0,v.Z)(e.tracks.values()).includes(t)){try{e._removeTrack(t)}catch(o){}var n,r=(0,h.Z)(e.tracks.entries());try{for(r.s();!(n=r.n()).done;){var a=(0,m.Z)(n.value,2),i=a[0];a[1]===t&&(e.tracks.delete(i),e.dispatchEvent(new CustomEvent("removetrack",{detail:t})))}}catch(s){r.e(s)}finally{r.f()}}return t},e.getTracks=function(){var t=e._getTracks(),n=e.getDataTracks();return[].concat((0,v.Z)(t),(0,v.Z)(n))},e.addEventListener("addtrack",(function(e){e.track=e.detail,delete e.detail})),e.addEventListener("removetrack",(function(e){e.track=e.detail,delete e.detail}));var a=Array.isArray(t)?(0,v.Z)(t):(0,v.Z)(t.getTracks());return a.forEach((function(t){return e.addTrack(t)})),e}return(0,l.Z)(r,[{key:t,get:function(){return"DataStream"}}]),r}(S(MediaStream),Symbol.toStringTag),z=(0,l.Z)((function e(t){var n,r=this;(0,c.Z)(this,e),this.id=M(),this._ondata=function(e){return e},this.active=!1,this.debug=!1,this.init=function(e){var t,n,a;r.active&&r.disconnect(),e&&(Object.assign(r.constraints,e),r.onconnect=null!==(t=r.constraints.onconnect)&&void 0!==t?t:r.onconnect,r.ondisconnect=null!==(n=r.constraints.ondisconnect)&&void 0!==n?n:r.ondisconnect,r.constraints.ondata&&(r._ondata=r.constraints.ondata),r.onerror=null!==(a=r.constraints.onerror)&&void 0!==a?a:r.onerror,r.constraints.encode instanceof Function?r.encode=r.constraints.encode:r.encoder=new TextEncoder,r.constraints.decode instanceof Function?r.decode=r.constraints.decode:r.decoder=new TextDecoder("utf-8"),r.constraints.oninit instanceof Function&&(r.oninit=r.constraints.oninit)),r.oninit(r)},this.connect=function(){return C(r,void 0,void 0,(0,g.Z)().mark((function t(){return(0,g.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.device instanceof e||!this.device.connect){t.next=3;break}return t.next=3,this.device.connect();case 3:this.active=!0,this._connect(),this.onconnect(this);case 6:case"end":return t.stop()}}),t,this)})))},this.disconnect=function(){return C(r,void 0,void 0,(0,g.Z)().mark((function t(){var n,r=this;return(0,g.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.device instanceof e||!this.device.disconnect){t.next=3;break}return t.next=3,this.device.disconnect();case 3:this.active=!1,null===(n=this.stream)||void 0===n||n.tracks.forEach((function(e){var t;return null===(t=r.stream)||void 0===t?void 0:t.removeTrack(e)})),this._disconnect(),this.ondisconnect(this);case 7:case"end":return t.stop()}}),t,this)})))},this._connect=function(){return C(r,void 0,void 0,(0,g.Z)().mark((function e(){return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))},this._disconnect=function(){return C(r,void 0,void 0,(0,g.Z)().mark((function e(){return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))},this.send=function(e,t){return C(r,void 0,void 0,(0,g.Z)().mark((function n(){return(0,g.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.onsend(e,t);case 1:case"end":return n.stop()}}),n,this)})))},this.encode=function(e,t){return r.encoder.encode(e)},this.decode=function(e,t){return r.decoder.decode(e)},this.oninit=function(){return C(r,void 0,void 0,(0,g.Z)().mark((function e(){return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))},this.onconnect=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;return C(r,void 0,void 0,(0,g.Z)().mark((function t(){return(0,g.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.debug?console.log("".concat(e.constructor.name," connected!")):{});case 1:case"end":return t.stop()}}),t,this)})))},this.ondisconnect=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;return C(r,void 0,void 0,(0,g.Z)().mark((function t(){return(0,g.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.debug?console.log("".concat(e.constructor.name," disconnected!")):{});case 1:case"end":return t.stop()}}),t,this)})))},this.onsend=function(e,t){return C(r,void 0,void 0,(0,g.Z)().mark((function n(){return(0,g.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.debug?console.log("Sent ".concat(e," from ").concat(t)):{});case 1:case"end":return n.stop()}}),n,this)})))},this.onerror=function(e){return C(r,void 0,void 0,(0,g.Z)().mark((function t(){return(0,g.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.debug?console.log("".concat(this.constructor.name," Error: ").concat(e)):{});case 1:case"end":return t.stop()}}),t,this)})))},this.ondata=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[Date.now()],n=arguments.length>2?arguments[2]:void 0;if(r._ondata instanceof Function){var a=r._ondata(e,n);if(r.stream){var i=Object.keys(a);i.forEach((function(e){var n;if(r.stream){var i=null!==(n=r.stream.tracks.get(e))&&void 0!==n?n:r._createTrack(String(e));i instanceof F&&i.addData(a[e],t)}}))}}},this._createTrack=function(e){if(r.stream){var t=new F(r,void 0,e);return r.stream.addTrack(t)}},Array.isArray(t)?(this.constraints=t[0],this.options=(0,v.Z)(t)):(this.constraints=t,this.options=[t]),this.device=this.constraints.device?new this.constraints.device(this.constraints):this,this.stream=this.constraints.stream,this.debug=null!==(n=this.constraints.debug)&&void 0!==n&&n,this.init(this.constraints)})),Z=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this,e)).characteristics={},r.connect=function(){return C((0,y.Z)(r),void 0,void 0,(0,g.Z)().mark((function e(){var t,n=this;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=[]).push({services:this.options.map((function(e){return"string"===typeof e.serviceUUID?e.serviceUUID.toLowerCase():e.serviceUUID})).filter((function(e){return!!e}))}),this.options.forEach((function(e){e.namePrefix&&t.push({namePrefix:e.namePrefix})})),e.next=5,navigator.bluetooth.requestDevice({filters:t}).then((function(e){n.source=e;var t=e.gatt;return t?t.connect():Promise.reject()})).then((function(e){var t,r=null===(t=n.options.find((function(t){var n;return(null===t||void 0===t?void 0:t.namePrefix)&&(null===(n=e.device.name)||void 0===n?void 0:n.includes(t.namePrefix))})))||void 0===t?void 0:t.serviceUUID;return r?(n.server=e,e.getPrimaryService(r)):Promise.reject()})).then((function(e){return C(n,void 0,void 0,(0,g.Z)().mark((function t(){var n,r=this;return(0,g.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.service=e,this.source&&this.source.addEventListener("gattserverdisconnected",(function(){r.ondisconnect(r)})),t.t0=(0,g.Z)().keys(this.constraints.characteristics);case 3:if((t.t1=t.t0()).done){t.next=9;break}return n=t.t1.value,t.next=7,this.connectCharacteristic(n,this.constraints.characteristics[n]);case 7:t.next=3;break;case 9:this.onconnect(this);case 10:case"end":return t.stop()}}),t,this)})))})).catch((function(e){return console.error(e),n.onerror(e),Promise.reject()}));case 5:case"end":return e.stop()}}),e,this)})))},r._disconnect=function(){return C((0,y.Z)(r),void 0,void 0,(0,g.Z)().mark((function e(){var t;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(t=this.server)||void 0===t||t.disconnect();case 1:case"end":return e.stop()}}),e,this)})))},r.send=function(e,t){return C((0,y.Z)(r),void 0,void 0,(0,g.Z)().mark((function n(){return(0,g.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.transmitCharacteristic){n.next=2;break}return n.abrupt("return",this.transmitCharacteristic.writeValue(this.encode(e,t)));case 2:case"end":return n.stop()}}),n,this)})))},r.onnotification=function(e,t){r.ondata(r.decode(e.target.value,t),Date.now(),t)},r.connectCharacteristic=function(e,t){return C((0,y.Z)(r),void 0,void 0,(0,g.Z)().mark((function n(){var r,a,i=this;return(0,g.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!Array.isArray(t)){n.next=5;break}return n.next=3,Promise.all(t.map((function(t,n){return i.connectCharacteristic("".concat(e).concat(n),t)})));case 3:n.next=16;break;case 5:if(t="string"===typeof t?t.toLowerCase():t,!this.service){n.next=16;break}return n.next=9,this.service.getCharacteristic(t);case 9:if(r=n.sent,this.characteristics[e]=r,((a=r.properties).write||a.writeWithoutResponse)&&(this.transmitCharacteristic=r),!a.notify){n.next=16;break}return r.addEventListener("characteristicvaluechanged",(function(t){i.onnotification(t,e)})),n.abrupt("return",r.startNotifications());case 16:case"end":return n.stop()}}),n,this)})))},console.log(e),r}return(0,l.Z)(n)}(z),U=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this,e)).displayPorts=[],r.encodedBuffer="",r.connected=!1,r.recordData=!1,r.recorded=[],r.port=null,r.decoder=new TextDecoder,r.subscribed=!1,r.readable=null,r.writer=null,r.monitoring=!1,r.newSamples=0,r.monitorSamples=1e4,r.monitorData=[],r.monitorIdx=0,r.connect=function(){return C((0,y.Z)(r),void 0,void 0,(0,g.Z)().mark((function e(){var t,n,r,a,i;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.constraints,n=t.usbVendorId,r=t.usbProductId,console.log(this.constraints),a=/[0-9A-Fa-f]{6}/g,n&&"string"!==typeof n&&!a.test(n+"")&&(n="0x".concat(n.toString(16))),r&&"string"!==typeof r&&!a.test(r+"")&&(r="0x".concat(r.toString(16))),i=[{usbVendorId:n,usbProductId:r}],e.next=8,navigator.serial.requestPort({filters:i}).then(this.onPortSelected);case 8:case"end":return e.stop()}}),e,this)})))},r.send=function(e){return C((0,y.Z)(r),void 0,void 0,(0,g.Z)().mark((function t(){var n,r,a,i;return(0,g.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=unescape(encodeURIComponent(e+="\n")),r=new Uint8Array(n.length),a=0;a<n.length;++a)r[a]=n.charCodeAt(a);if(!navigator.serial){t.next=10;break}if(!this.port.writable){t.next=10;break}return i=this.port.writable.getWriter(),t.next=9,i.write(r.buffer);case 9:i.releaseLock();case 10:case"end":return t.stop()}}),t,this)})))},r.subscribe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.port;return C((0,y.Z)(r),void 0,void 0,(0,g.Z)().mark((function t(){var n,r,a=this;return(0,g.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.readable||!0!==this.subscribed){t.next=9;break}return this.readable=e.readable,console.error("Managing the readable stream internally"),n=function(e){return C(a,void 0,void 0,(0,g.Z)().mark((function t(){return(0,g.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("streaming"),this.subscribed){t.next=3;break}throw Error("Device disconnected");case 3:return this.onReceive(e),t.abrupt("return",e);case 5:case"end":return t.stop()}}),t,this)})))},r=new TransformStream({transform:n}),this.readable.pipeThrough(r).pipeTo(new WritableStream({})).then((function(){return console.log("All data successfully written!")})).catch((function(e){return a.handleError(e)})),t.abrupt("return",!0);case 9:return t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t,this)})))},r.handleError=function(e){return C((0,y.Z)(r),void 0,void 0,(0,g.Z)().mark((function t(){var n=this;return(0,g.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(e),!(e.message.includes("framing")||e.message.includes("overflow")||e.message.includes("overrun")||e.message.includes("Overflow")||e.message.includes("break"))){t.next=6;break}this.subscribed=!1,setTimeout((function(){return C(n,void 0,void 0,(0,g.Z)().mark((function e(){return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.readable){e.next=4;break}return e.next=3,this.readable.cancel();case 3:this.readable=null;case 4:this.subscribed=!0,this.subscribe(this.port);case 6:case"end":return e.stop()}}),e,this)})))}),30),t.next=12;break;case 6:if(!e.message.includes("parity")&&!e.message.includes("Parity")){t.next=10;break}this.port&&(this.subscribed=!1,setTimeout((function(){return C(n,void 0,void 0,(0,g.Z)().mark((function e(){var t=this;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.readable){e.next=4;break}return e.next=3,this.readable.cancel();case 3:this.readable=null;case 4:return e.next=6,this.port.close();case 6:this.connected=!1,setTimeout((function(){t.onPortSelected(t.port)}),100);case 8:case"end":return e.stop()}}),e,this)})))}),50)),t.next=12;break;case 10:return t.next=12,this._disconnect();case 12:case"end":return t.stop()}}),t,this)})))},r.onPortSelected=function(e){return C((0,y.Z)(r),void 0,void 0,(0,g.Z)().mark((function t(){var n;return(0,g.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.port=e,navigator.serial.addEventListener("disconnect",this.disconnect),n={baudRate:115200,bufferSize:1e3},"object"===typeof this.constraints.serial&&Object.assign(n,this.constraints.serial),"object"===typeof this.constraints.usb&&Object.assign(n,this.constraints.usb),t.prev=5,t.next=8,e.open(n);case 8:t.next=14;break;case 10:return t.prev=10,t.t0=t.catch(5),t.next=14,e.open(n);case 14:return this.active=!0,this.onconnect(this),this.connected=!0,this.subscribed=!0,t.next=20,this.subscribe(e);case 20:case"end":return t.stop()}}),t,this,[[5,10]])})))},r.onReceive=function(e){var t;for(r.encodedBuffer+=r.decoder.decode(e);(t=r.encodedBuffer.indexOf("\n"))>=0;){var n=r.encodedBuffer.substr(0,t+1);1==r.recordData&&r.recorded.push(n),(r.monitoring=!0)&&(r.newSamples++,r.monitorData.push(n)),r.ondata(n),r.encodedBuffer=r.encodedBuffer.substr(t+1)}},r._disconnect=function(){return C((0,y.Z)(r),void 0,void 0,(0,g.Z)().mark((function e(){return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.closePort();case 1:case"end":return e.stop()}}),e,this)})))},r.closePort=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.port;return C((0,y.Z)(r),void 0,void 0,(0,g.Z)().mark((function t(){var n=this;return(0,g.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.port&&(this.subscribed=!1,setTimeout((function(){return C(n,void 0,void 0,(0,g.Z)().mark((function t(){return(0,g.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,console.log("clsing",this.readable),!this.readable){t.next=6;break}return t.next=5,this.readable.cancel();case 5:this.readable=null;case 6:return t.next=8,e.close();case 8:this.connected=!1,t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.error(t.t0);case 14:case"end":return t.stop()}}),t,this,[[0,11]])})))}),50));case 1:case"end":return t.stop()}}),t,this)})))},navigator.serial?r.decoder=new TextDecoder:(console.log("ERROR: Cannot locate navigator.serial. Enable #experimental-web-platform-features in chrome://flags"),alert("Serial support not found. Enable #experimental-web-platform-features in chrome://flags or use a chrome extension")),r}return(0,l.Z)(n)}(z),j=(0,l.Z)((function e(t){(0,c.Z)(this,e),console.log("Logic not implemented",t)})),W=function e(t){if("string"===typeof t&&(t=JSON.parse(t)),"object"===typeof t){for(var n in t){var r=t[n],a=new RegExp("(|[a-zA-Z]w*|([a-zA-Z]w*(,s*[a-zA-Z]w*)*))s*=>"),i="string"===typeof r&&"function"==r.substring(0,8),o="string"===typeof r&&a.test(r);try{t[n]=i||o?new Function(r):r}catch(Ln){t[n]=r}"object"===typeof t[n]&&e(t[n])}return t}return{}},G=function e(t){for(var n in t)t[n]instanceof Function&&(t[n]=t[n].toString()),t[n]instanceof Object&&e(t[n]);return JSON.stringify(t)},H=(0,l.Z)((function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http://localhost",r=arguments.length>1?arguments[1]:void 0;(0,c.Z)(this,e),this.sendBuffer=[],this.callbacks=new Map,this.ready=!1,this._onopen=function(){t.ready=!0,t.sendBuffer.forEach((function(e){t.ws&&t.ws.send(e)})),t.onopen()},this._onclose=function(){t.ready=!1,t.onclose()},this._onerror=function(e){return console.error(e),t.onerror(e),e},this._onmessage=function(e){try{var n=W(e.data);if(n.error)console.error(n.error);else{var r=n.callbackId,a=n;if(r){a=a.data;var i=t.callbacks.get(r);i&&i(a)}a&&t.onmessage(a)}}catch(Ln){console.error("Error parsing WebSocket message from server: ",e.data,Ln)}},this.onopen=function(){},this.onclose=function(){},this.onerror=function(){},this.onmessage=function(){},this.addEventListener=function(e,n){t.ws&&("message"===e?t.ws.addEventListener(e,(function(e){n(JSON.parse(e.data))})):t.ws.addEventListener(e,n))},this.close=function(){t.ws&&t.ws.close()},this.send=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"websocket";return new Promise((function(r){var a=M();t.callbacks.set(a,(function(e){r(e),t.callbacks.delete(a)}));var i=G({data:e,callbackId:a,service:n});t.ready&&t.ws?t.ws.send(i):t.sendBuffer.push(i)}))},this.url=n;var a=new URL(n),i=[];if(Object.keys(r).forEach((function(e){i.push("".concat(e,".brainsatplay.com%").concat(r[e]))})),console.log(i),"http:"===a.protocol)this.ws=new WebSocket("ws://"+a.host,i.join(";"));else{if("https:"!==a.protocol)return void console.log("invalid protocol");this.ws=new WebSocket("wss://"+a.host,i.join(";"))}this.sendBuffer=[],this.callbacks=new Map,this.ws.onopen=this._onopen,this.ws.onerror=this._onerror,this.ws.onmessage=this._onmessage,this.ws.onclose=this._onclose,globalThis.onunload=globalThis.onbeforeunload=function(){t.ws&&(t.ws.onclose=function(){}),console.log("C:OSING"),t.close()}})),q=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this,e))._connect=function(){return C((0,y.Z)(r),void 0,void 0,(0,g.Z)().mark((function e(){var t=this;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.socket&&this.socket.url==this.constraints.url||(this.socket=new H(this.constraints.url,{services:["websocket"]}),this.socket.onmessage=function(e){"websocket"===e.service&&t.ondata(e.data,null===e||void 0===e?void 0:e.timestamp)});case 1:case"end":return e.stop()}}),e,this)})))},r._disconnect=function(){return C((0,y.Z)(r),void 0,void 0,(0,g.Z)().mark((function e(){var t;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(t=this.socket)||void 0===t||t.close();case 1:case"end":return e.stop()}}),e,this)})))},r.send=function(e){return C((0,y.Z)(r),void 0,void 0,(0,g.Z)().mark((function t(){var n;return(0,g.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null===(n=this.socket)||void 0===n?void 0:n.send(e));case 1:case"end":return t.stop()}}),t,this)})))},r}return(0,l.Z)(n)}(z),X=function(e,t){(0,d.Z)(r,e);var n=(0,f.Z)(r);function r(){var e;return(0,c.Z)(this,r),(e=n.call(this)).devices=[],e.load=function(t){var n;Array.isArray(t)?(n=e.devices).push.apply(n,(0,v.Z)(t)):t&&e.devices.push(t)},e.enumerateDevices=function(){return C((0,y.Z)(e),void 0,void 0,(0,g.Z)().mark((function e(){var t,n,r,a;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.usb.getDevices();case 2:return t=e.sent,e.next=5,navigator.serial.getPorts();case 5:return n=e.sent,r=[],e.next=9,navigator.mediaDevices.enumerateDevices();case 9:return a=e.sent,e.abrupt("return",[].concat((0,v.Z)(a),(0,v.Z)(n),(0,v.Z)(t),r));case 11:case"end":return e.stop()}}),e)})))},e.getSupportedDevices=function(t){return C((0,y.Z)(e),void 0,void 0,(0,g.Z)().mark((function e(){var n;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],t&&"media"!==t){e.next=5;break}return e.next=4,navigator.mediaDevices.enumerateDevices();case 4:n=e.sent;case 5:return e.abrupt("return",[].concat((0,v.Z)(n),(0,v.Z)(this.devices)));case 6:case"end":return e.stop()}}),e,this)})))},e.getDeviceInfo=function(e){return L(e)},e.getSupportedConstraints=function(){return C((0,y.Z)(e),void 0,void 0,(0,g.Z)().mark((function e(){return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new j(this));case 1:case"end":return e.stop()}}),e,this)})))},e.getDevice=function(t){var n,r,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=(0,v.Z)(e.devices),o=[];t.bluetooth&&o.push("bluetooth"),(t.usb||t.serial)&&o.push("usb","serial"),t.websocket&&o.push("websocket"),o.length>0&&(i=i.filter((function(e){if(e.protocols)return e.protocols.find((function(e){return o.includes(e)}))})));var s=t.label;s&&(i=i.filter((function(e){return s===e.label})));var u=t.mode;u&&(i=i.filter((function(e){if(e.modes)return e.modes.includes(u)}))),0===i.length&&i.push(t);var c=null===i||void 0===i?void 0:i[0],l=!!(null===(n=null===i||void 0===i?void 0:i[0])||void 0===n?void 0:n.device);0===o.length&&o.push.apply(o,(0,v.Z)(null!==(r=null===c||void 0===c?void 0:c.protocols)&&void 0!==r?r:[]));var d=function(){return new z(c?i.map((function(e){return Object.assign(e,t)})):t)};return l?d():c&&o.includes("bluetooth")&&(null===c||void 0===c?void 0:c.serviceUUID)?new Z(i.map((function(e){return Object.assign(e,t)}))):c&&(o.includes("usb")||o.includes("serial")&&(null===c||void 0===c?void 0:c.usbVendorId)&&(null===c||void 0===c?void 0:c.usbProductId))?new U(i.map((function(e){return Object.assign(e,t)}))):c&&o.includes("websocket")?new q(i.map((function(e){return Object.assign(e,t)}))):a?d():void 0},e.startDataStream=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new V;return C((0,y.Z)(e),void 0,void 0,(0,g.Z)().mark((function e(){var r,a;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stream=n,(a=Object.assign({},t)).device||t.video||t.audio||t.screen?r=new z(a):(r=this.getDevice(a))||(L(t).protocols.forEach((function(e){return a[e]=!0})),r=this.getDevice(a,!0)),!r){e.next=6;break}return e.next=6,r.connect().then((function(e){return e})).catch((function(e){throw console.warn("Device not connected"),e}));case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})))},e.getUserDevice=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return C((0,y.Z)(e),void 0,void 0,(0,g.Z)().mark((function e(){var n,r,a;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.video&&!t.audio){e.next=4;break}return e.next=3,navigator.mediaDevices.getUserMedia(t);case 3:n=e.sent;case 4:if(r=new V(n),!t.screen){e.next=10;break}return e.next=8,navigator.mediaDevices.getDisplayMedia({video:!0});case 8:e.sent.getTracks().forEach(r.addTrack);case 10:return e.next=12,this.startDataStream(t,r);case 12:return a=e.sent,r.getTracks().forEach((function(e){e.applyConstraints(t)})),e.abrupt("return",a);case 15:case"end":return e.stop()}}),e,this)})))},e}return(0,l.Z)(r,[{key:t,get:function(){return"DataDevices"}}]),r}(S(EventTarget),Symbol.toStringTag),K=[],Y=[],Q=function(e,t){return t.push(e)},$=function(e,t){return t[t.length-1].pipeTo(e)},J=function(e,t,n){t.push(e),n.push(n[n.length-1].pipeThrough(e))};self.onmessage=function(e){return C(void 0,void 0,void 0,(0,g.Z)().mark((function t(){return(0,g.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"init"===e.data.cmd&&e.data.data.source.pipeThrough(e.data.data.transformer).pipeTo(e.data.data.sink),"add"===e.data.cmd&&J(e.data.data,K,Y),"source"===e.data.cmd&&Q(e.data.data,Y),"sink"===e.data.cmd&&$(e.data.data,Y);case 4:case"end":return t.stop()}}),t)})))};self;var ee=function(e,t){return ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},ee(e,t)};function te(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}ee(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function ne(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))}function re(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function ae(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ie(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o}function oe(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}function se(e){return this instanceof se?(this.v=e,this):new se(e)}function ue(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,a=n.apply(e,t||[]),i=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(e){a[e]&&(r[e]=function(t){return new Promise((function(n,r){i.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=a[e](t)).value instanceof se?Promise.resolve(n.value.v).then(u,c):l(i[0][2],n)}catch(e){l(i[0][3],e)}var n}function u(e){s("next",e)}function c(e){s("throw",e)}function l(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}function ce(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=ae(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,a){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,a,(t=e[n](t)).done,t.value)}))}}}function le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return de(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?de(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,a)}function he(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){pe(i,r,a,o,s,"next",e)}function s(e){pe(i,r,a,o,s,"throw",e)}o(void 0)}))}}function me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ge={exports:{}};!function(e){var t=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),o=new E(r||[]);return i._invoke=function(e,t,n){var r=d;return function(a,i){if(r===p)throw new Error("Generator is already running");if(r===h){if("throw"===a)throw i;return O()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=_(o,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?h:f,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=h,n.method="throw",n.arg=u.arg)}}}(e,n,o),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d="suspendedStart",f="suspendedYield",p="executing",h="completed",m={};function v(){}function g(){}function y(){}var b={};u(b,i,(function(){return this}));var x=Object.getPrototypeOf,k=x&&x(x(N([])));k&&k!==n&&r.call(k,i)&&(b=k);var w=y.prototype=v.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(a,i,o,s){var u=l(e[a],e,i);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(u.arg)}var a;this._invoke=function(e,r){function i(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(i,i):i()}}function _(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,_(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var a=l(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function N(e){if(e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:O}}function O(){return{value:t,done:!0}}return g.prototype=y,u(w,"constructor",y),u(y,"constructor",g),g.displayName=u(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},S(C.prototype),u(C.prototype,o,(function(){return this})),e.AsyncIterator=C,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new C(c(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(w),u(w,s,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=N,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return s.type="throw",s.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;T(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}(ge);var ye=ge.exports;function be(e){return"function"==typeof e}function xe(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var ke=xe((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function we(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Se=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,n,r,a;if(!this.closed){this.closed=!0;var i=this._parentage;if(i)if(this._parentage=null,Array.isArray(i))try{for(var o=ae(i),s=o.next();!s.done;s=o.next())s.value.remove(this)}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}else i.remove(this);var u=this.initialTeardown;if(be(u))try{u()}catch(e){a=e instanceof ke?e.errors:[e]}var c=this._finalizers;if(c){this._finalizers=null;try{for(var l=ae(c),d=l.next();!d.done;d=l.next()){var f=d.value;try{Ie(f)}catch(e){a=null!=a?a:[],e instanceof ke?a=oe(oe([],ie(a)),ie(e.errors)):a.push(e)}}}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}}if(a)throw new ke(a)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)Ie(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&we(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&we(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}(),Ce=Se.EMPTY;function _e(e){return e instanceof Se||e&&"closed"in e&&be(e.remove)&&be(e.add)&&be(e.unsubscribe)}function Ie(e){be(e)?e():e.unsubscribe()}var Te=null,Ee=void 0,Ne=!1,Oe=!1,Ae={setTimeout:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var a=Ae.delegate;return(null==a?void 0:a.setTimeout)?a.setTimeout.apply(a,oe([e,t],ie(n))):setTimeout.apply(void 0,oe([e,t],ie(n)))})),clearTimeout:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=Ae.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)})),delegate:void 0};function Re(e){Ae.setTimeout((function(){throw e}))}function Pe(){}var De=Be("C",void 0,void 0);function Be(e,t,n){return{kind:e,value:t,error:n}}var Me=null;function Fe(e){if(Ne){var t=!Me;if(t&&(Me={errorThrown:!1,error:null}),e(),t){var n=Me,r=n.errorThrown,a=n.error;if(Me=null,r)throw a}}else e()}var Le=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,_e(t)&&t.add(n)):n.destination=Ge,n}return te(t,e),t.create=function(e,t,n){return new Ue(e,t,n)},t.prototype.next=function(e){this.isStopped?We(function(e){return Be("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?We(Be("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?We(De,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Se),Ve=Function.prototype.bind;function ze(e,t){return Ve.call(e,t)}var Ze=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){je(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){je(e)}else je(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){je(e)}},e}(),Ue=function(e){function t(t,n,r){var a,i,o=e.call(this)||this;return be(t)||!t?a={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:o&&Oe?((i=Object.create(t)).unsubscribe=function(){return o.unsubscribe()},a={next:t.next&&ze(t.next,i),error:t.error&&ze(t.error,i),complete:t.complete&&ze(t.complete,i)}):a=t,o.destination=new Ze(a),o}return te(t,e),t}(Le);function je(e){Re(e)}function We(e,t){var n=Te;n&&Ae.setTimeout((function(){return n(e,t)}))}var Ge={closed:!0,next:Pe,error:function(e){throw e},complete:Pe},He="function"==typeof Symbol&&Symbol.observable||"@@observable";function qe(e){return e}function Xe(e){return 0===e.length?qe:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var Ke=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r,a=this,i=(r=e)&&r instanceof Le||function(e){return e&&be(e.next)&&be(e.error)&&be(e.complete)}(r)&&_e(r)?e:new Ue(e,t,n);return Fe((function(){var e=a,t=e.operator,n=e.source;i.add(t?t.call(i,n):n?a._subscribe(i):a._trySubscribe(i))})),i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(te){e.error(te)}},e.prototype.forEach=function(e,t){var n=this;return new(t=Ye(t))((function(t,r){var a=new Ue({next:function(t){try{e(t)}catch(e){r(e),a.unsubscribe()}},error:r,complete:t});n.subscribe(a)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[He]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Xe(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=Ye(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function Ye(e){var t;return null!==(t=null!=e?e:Ee)&&void 0!==t?t:Promise}function Qe(e){return function(t){if(function(e){return be(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}function $e(e,t,n,r,a){return new Je(e,t,n,r,a)}var Je=function(e){function t(t,n,r,a,i,o){var s=e.call(this,t)||this;return s.onFinalize=i,s.shouldUnsubscribe=o,s._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,s._error=a?function(e){try{a(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,s}return te(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(Le),et=xe((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),tt=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return te(t,e),t.prototype.lift=function(e){var t=new nt(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new et},t.prototype.next=function(e){var t=this;Fe((function(){var n,r;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var a=ae(t.currentObservers),i=a.next();!i.done;i=a.next())i.value.next(e)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}))},t.prototype.error=function(e){var t=this;Fe((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}}))},t.prototype.complete=function(){var e=this;Fe((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this,r=n.hasError,a=n.isStopped,i=n.observers;return r||a?Ce:(this.currentObservers=null,i.push(e),new Se((function(){t.currentObservers=null,we(i,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,r=t.thrownError,a=t.isStopped;n?e.error(r):a&&e.complete()},t.prototype.asObservable=function(){var e=new Ke;return e.source=this,e},t.create=function(e,t){return new nt(e,t)},t}(Ke),nt=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return te(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:Ce},t}(tt),rt=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return te(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){var e=this,t=e.hasError,n=e.thrownError,r=e._value;if(t)throw n;return this._throwIfClosed(),r},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(tt),at=new Ke((function(e){return e.complete()})),it=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e},ot="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function st(e){if(e instanceof Ke)return e;if(null!=e){if(function(e){return be(e[He])}(e))return i=e,new Ke((function(e){var t=i[He]();if(be(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(it(e))return a=e,new Ke((function(e){for(var t=0;t<a.length&&!e.closed;t++)e.next(a[t]);e.complete()}));if(be(null==(r=e)?void 0:r.then))return n=e,new Ke((function(e){n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,Re)}));if(function(e){return Symbol.asyncIterator&&be(null==e?void 0:e[Symbol.asyncIterator])}(e))return ut(e);if(function(e){return be(null==e?void 0:e[ot])}(e))return t=e,new Ke((function(e){var n,r;try{for(var a=ae(t),i=a.next();!i.done;i=a.next()){var o=i.value;if(e.next(o),e.closed)return}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}e.complete()}));if(function(e){return be(null==e?void 0:e.getReader)}(e))return ut(function(e){return ue(this,arguments,(function(){var t,n,r;return re(this,(function(a){switch(a.label){case 0:t=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,se(t.read())];case 3:return n=a.sent(),r=n.value,n.done?[4,se(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,se(r)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}(e))}var t,n,r,a,i;throw function(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}(e)}function ut(e){return new Ke((function(t){(function(e,t){var n,r,a,i;return ne(this,void 0,void 0,(function(){var o,s;return re(this,(function(u){switch(u.label){case 0:u.trys.push([0,5,6,11]),n=ce(e),u.label=1;case 1:return[4,n.next()];case 2:if((r=u.sent()).done)return[3,4];if(o=r.value,t.next(o),t.closed)return[2];u.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=u.sent(),a={error:s},[3,11];case 6:return u.trys.push([6,,9,10]),r&&!r.done&&(i=n.return)?[4,i.call(n)]:[3,8];case 7:u.sent(),u.label=8;case 8:return[3,10];case 9:if(a)throw a.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}var ct=xe((function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}}));function lt(e,t){return Qe((function(n,r){var a=0;n.subscribe($e(r,(function(n){r.next(e.call(t,n,a++))})))}))}var dt=Array.isArray;function ft(e,t,n){return void 0===n&&(n=1/0),be(t)?ft((function(n,r){return lt((function(e,a){return t(n,e,r,a)}))(st(e(n,r)))}),n):("number"==typeof t&&(n=t),Qe((function(t,r){return function(e,t,n,r,a,i,o,s){var u=[],c=0,l=0,d=!1,f=function(){!d||u.length||c||t.complete()},p=function(e){return c<r?h(e):u.push(e)},h=function e(a){c++;var i=!1;st(n(a,l++)).subscribe($e(t,(function(e){t.next(e)}),(function(){i=!0}),void 0,(function(){if(i)try{c--;for(var n=function(){var t=u.shift();e(t)};u.length&&c<r;)n();f()}catch(n){t.error(n)}})))};return e.subscribe($e(t,p,(function(){d=!0,f()}))),function(){}}(t,r,e,n)})))}var pt=["addListener","removeListener"],ht=["addEventListener","removeEventListener"],mt=["on","off"];function vt(e,t,n,r){if(be(n)&&(r=n,n=void 0),r)return vt(e,t,n).pipe(function(e){return lt((function(t){return function(e,t){return dt(t)?e.apply(void 0,oe([],ie(t))):e(t)}(e,t)}))}(r));var a=ie(function(e){return be(e.addEventListener)&&be(e.removeEventListener)}(e)?ht.map((function(r){return function(a){return e[r](t,a,n)}})):function(e){return be(e.addListener)&&be(e.removeListener)}(e)?pt.map(gt(e,t)):function(e){return be(e.on)&&be(e.off)}(e)?mt.map(gt(e,t)):[],2),i=a[0],o=a[1];if(!i&&it(e))return ft((function(e){return vt(e,t,n)}))(st(e));if(!i)throw new TypeError("Invalid event target");return new Ke((function(e){var t=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.next(1<t.length?t:t[0])};return i(t),function(){return o(t)}}))}function gt(e,t){return function(n){return function(r){return e[n](t,r)}}}function yt(e,t){return Qe((function(n,r){var a=0;n.subscribe($e(r,(function(n){return e.call(t,n,a++)&&r.next(n)})))}))}function bt(e){return Qe((function(t,n){var r=!1;t.subscribe($e(n,(function(e){r=!0,n.next(e)}),(function(){r||n.next(e),n.complete()})))}))}function xt(e){return e<=0?function(){return at}:Qe((function(t,n){var r=0;t.subscribe($e(n,(function(t){++r<=e&&(n.next(t),e<=r&&n.complete())})))}))}function kt(e){return void 0===e&&(e=wt),Qe((function(t,n){var r=!1;t.subscribe($e(n,(function(e){r=!0,n.next(e)}),(function(){return r?n.complete():n.error(e())})))}))}function wt(){return new ct}function St(e){return Qe((function(t,n){st(e).subscribe($e(n,(function(){return n.complete()}),Pe)),!n.closed&&t.subscribe(n)}))}function Ct(e,t,n){var r=be(e)||t||n?{next:e,error:t,complete:n}:e;return r?Qe((function(e,t){var n;null===(n=r.subscribe)||void 0===n||n.call(r);var a=!0;e.subscribe($e(t,(function(e){var n;null===(n=r.next)||void 0===n||n.call(r,e),t.next(e)}),(function(){var e;a=!1,null===(e=r.complete)||void 0===e||e.call(r),t.complete()}),(function(e){var n;a=!1,null===(n=r.error)||void 0===n||n.call(r,e),t.error(e)}),(function(){var e,t;a&&(null===(e=r.unsubscribe)||void 0===e||e.call(r)),null===(t=r.finalize)||void 0===t||t.call(r)})))})):qe}function _t(e){return _t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_t(e)}var It="\nLIS3DH Registers\n0x07.0\n0x08.0\n0x09.0\n0x0A.0\n0x0B.0\n0x0C.0\n0x0D.0\n0x0E.0\n0x0F.33\n\n0x1F.0\n0x20.8\n0x21.0\n0x22.0\n0x23.18\n0x24.0\n0x25.0\n0x26.0\n0x27.0\n0x28.0\n0x29.0\n0x2A.0\n0x2B.0\n0x2C.0\n0x2D.0\n0x2E.0\n0x2F.20\n0x30.0\n0x31.0\n0x32.0\n0x33.0\n\n0x38.0\n0x39.0\n0x3A.0\n0x3B.0\n0x3C.0\n0x3D.0\n",Tt="\nLIS3DH Registers\n0x07 00\n0x08 00\n0x09 00\n0x0A 00\n0x0B 00\n0x0C 00\n0x0D 00\n0x0E 00\n0x0F 33\n\n0x1F 00\n0x20 08\n0x21 00\n0x22 00\n0x23 18\n0x24 00\n0x25 00\n0x26 00\n0x27 00\n0x28 00\n0x29 00\n0x2A 00\n0x2B 00\n0x2C 00\n0x2D 00\n0x2E 00\n0x2F 20\n0x30 00\n0x31 00\n0x32 00\n0x33 00\n\n0x38 00\n0x39 00\n0x3A 00\n0x3B 00\n0x3C 00\n0x3D 00\n",Et="\nBoard ADS Registers\nADS_ID, 00, 3E, 0, 0, 1, 1, 1, 1, 1, 0\nCONFIG1, 01, 96, 1, 0, 0, 1, 0, 1, 1, 0\nCONFIG2, 02, C0, 1, 1, 0, 0, 0, 0, 0, 0\nCONFIG3, 03, EC, 1, 1, 1, 0, 1, 1, 0, 0\nLOFF, 04, 02, 0, 0, 0, 0, 0, 0, 1, 0\nCH1SET, 05, 68, 0, 1, 1, 0, 1, 0, 0, 0\nCH2SET, 06, 68, 0, 1, 1, 0, 1, 0, 0, 0\nCH3SET, 07, 68, 0, 1, 1, 0, 1, 0, 0, 0\nCH4SET, 08, 68, 0, 1, 1, 0, 1, 0, 0, 0\nCH5SET, 09, 68, 0, 1, 1, 0, 1, 0, 0, 0\nCH6SET, 0A, 68, 0, 1, 1, 0, 1, 0, 0, 0\nCH7SET, 0B, 68, 0, 1, 1, 0, 1, 0, 0, 0\nCH8SET, 0C, 68, 0, 1, 1, 0, 1, 0, 0, 0\nBIAS_SENSP, 0D, FF, 1, 1, 1, 1, 1, 1, 1, 1\nBIAS_SENSN, 0E, FF, 1, 1, 1, 1, 1, 1, 1, 1\nLOFF_SENSP, 0F, 00, 0, 0, 0, 0, 0, 0, 0, 0\nLOFF_SENSN, 10, 00, 0, 0, 0, 0, 0, 0, 0, 0\nLOFF_FLIP, 11, 00, 0, 0, 0, 0, 0, 0, 0, 0\nLOFF_STATP, 12, 00, 0, 0, 0, 0, 0, 0, 0, 0\nLOFF_STATN, 13, 00, 0, 0, 0, 0, 0, 0, 0, 0\nGPIO, 14, 0F, 0, 0, 0, 0, 1, 1, 1, 1\nMISC1, 15, 00, 0, 0, 0, 0, 0, 0, 0, 0\nMISC2, 16, 00, 0, 0, 0, 0, 0, 0, 0, 0\nCONFIG4, 17, 00, 0, 0, 0, 0, 0, 0, 0, 0\n",Nt="\nDaisy ADS Registers\nADS_ID, 00, 3E, 0, 0, 1, 1, 1, 1, 1, 0\nCONFIG1, 01, 96, 1, 0, 0, 1, 0, 1, 1, 0\nCONFIG2, 02, C0, 1, 1, 0, 0, 0, 0, 0, 0\nCONFIG3, 03, EC, 1, 1, 1, 0, 1, 1, 0, 0\nLOFF, 04, 02, 0, 0, 0, 0, 0, 0, 1, 0\nCH1SET, 05, 68, 0, 1, 1, 0, 1, 0, 0, 0\nCH2SET, 06, 68, 0, 1, 1, 0, 1, 0, 0, 0\nCH3SET, 07, 68, 0, 1, 1, 0, 1, 0, 0, 0\nCH4SET, 08, 68, 0, 1, 1, 0, 1, 0, 0, 0\nCH5SET, 09, 68, 0, 1, 1, 0, 1, 0, 0, 0\nCH6SET, 0A, 68, 0, 1, 1, 0, 1, 0, 0, 0\nCH7SET, 0B, 68, 0, 1, 1, 0, 1, 0, 0, 0\nCH8SET, 0C, 68, 0, 1, 1, 0, 1, 0, 0, 0\nBIAS_SENSP, 0D, FF, 1, 1, 1, 1, 1, 1, 1, 1\nBIAS_SENSN, 0E, FF, 1, 1, 1, 1, 1, 1, 1, 1\nLOFF_SENSP, 0F, 00, 0, 0, 0, 0, 0, 0, 0, 0\nLOFF_SENSN, 10, 00, 0, 0, 0, 0, 0, 0, 0, 0\nLOFF_FLIP, 11, 00, 0, 0, 0, 0, 0, 0, 0, 0\nLOFF_STATP, 12, 00, 0, 0, 0, 0, 0, 0, 0, 0\nLOFF_STATN, 13, 00, 0, 0, 0, 0, 0, 0, 0, 0\nGPIO, 14, 0F, 0, 0, 0, 0, 1, 1, 1, 1\nMISC1, 15, 00, 0, 0, 0, 0, 0, 0, 0, 0\nMISC2, 16, 00, 0, 0, 0, 0, 0, 0, 0, 0\nCONFIG4, 17, 00, 0, 0, 0, 0, 0, 0, 0, 0\n",Ot={OBCIChannelOff1:"1",OBCIChannelOff2:"2",OBCIChannelOff3:"3",OBCIChannelOff4:"4",OBCIChannelOff5:"5",OBCIChannelOff6:"6",OBCIChannelOff7:"7",OBCIChannelOff8:"8",OBCIChannelOff9:"q",OBCIChannelOff10:"w",OBCIChannelOff11:"e",OBCIChannelOff12:"r",OBCIChannelOff13:"t",OBCIChannelOff14:"y",OBCIChannelOff15:"u",OBCIChannelOff16:"i",commandChannelOff:function(e){return new Promise((function(t,n){switch(e){case 1:t("1");break;case 2:t("2");break;case 3:t("3");break;case 4:t("4");break;case 5:t("5");break;case 6:t("6");break;case 7:t("7");break;case 8:t("8");break;case 9:t("q");break;case 10:t("w");break;case 11:t("e");break;case 12:t("r");break;case 13:t("t");break;case 14:t("y");break;case 15:t("u");break;case 16:t("i");break;default:n(Error("Error [commandChannelOff]: Invalid Channel Number"))}}))},OBCIChannelOn1:"!",OBCIChannelOn2:"@",OBCIChannelOn3:"#",OBCIChannelOn4:"$",OBCIChannelOn5:"%",OBCIChannelOn6:"^",OBCIChannelOn7:"&",OBCIChannelOn8:"*",OBCIChannelOn9:"Q",OBCIChannelOn10:"W",OBCIChannelOn11:"E",OBCIChannelOn12:"R",OBCIChannelOn13:"T",OBCIChannelOn14:"Y",OBCIChannelOn15:"U",OBCIChannelOn16:"I",commandChannelOn:function(e){return new Promise((function(t,n){switch(e){case 1:t("!");break;case 2:t("@");break;case 3:t("#");break;case 4:t("$");break;case 5:t("%");break;case 6:t("^");break;case 7:t("&");break;case 8:t("*");break;case 9:t("Q");break;case 10:t("W");break;case 11:t("E");break;case 12:t("R");break;case 13:t("T");break;case 14:t("Y");break;case 15:t("U");break;case 16:t("I");break;default:n(Error("Error [commandChannelOn]: Invalid Channel Number"))}}))},OBCITestSignalConnectToDC:"p",OBCITestSignalConnectToGround:"0",OBCITestSignalConnectToPulse1xFast:"=",OBCITestSignalConnectToPulse1xSlow:"-",OBCITestSignalConnectToPulse2xFast:"]",OBCITestSignalConnectToPulse2xSlow:"[",getTestSignalCommand:function(e){return new Promise((function(t,n){switch(e){case"dc":t("p");break;case"ground":t("0");break;case"pulse1xFast":t("=");break;case"pulse1xSlow":t("-");break;case"pulse2xFast":t("]");break;case"pulse2xSlow":t("[");break;case"none":t("d");break;default:n(Error("Invalid selection! Check your spelling."))}}))},OBCIChannelCmdADCNormal:"0",OBCIChannelCmdADCShorted:"1",OBCIChannelCmdADCBiasDRP:"6",OBCIChannelCmdADCBiasDRN:"7",OBCIChannelCmdADCBiasMethod:"2",OBCIChannelCmdADCMVDD:"3",OBCIChannelCmdADCTemp:"4",OBCIChannelCmdADCTestSig:"5",OBCIChannelCmdBiasInclude:"1",OBCIChannelCmdBiasRemove:"0",OBCIChannelCmdChannel1:"1",OBCIChannelCmdChannel2:"2",OBCIChannelCmdChannel3:"3",OBCIChannelCmdChannel4:"4",OBCIChannelCmdChannel5:"5",OBCIChannelCmdChannel6:"6",OBCIChannelCmdChannel7:"7",OBCIChannelCmdChannel8:"8",OBCIChannelCmdChannel9:"Q",OBCIChannelCmdChannel10:"W",OBCIChannelCmdChannel11:"E",OBCIChannelCmdChannel12:"R",OBCIChannelCmdChannel13:"T",OBCIChannelCmdChannel14:"Y",OBCIChannelCmdChannel15:"U",OBCIChannelCmdChannel16:"I",commandChannelForCmd:Mt,OBCIChannelCmdGain1:"0",OBCIChannelCmdGain2:"1",OBCIChannelCmdGain4:"2",OBCIChannelCmdGain6:"3",OBCIChannelCmdGain8:"4",OBCIChannelCmdGain12:"5",OBCIChannelCmdGain24:"6",commandForGain:Bt,gainForCommand:function(e){switch(String(e)){case"0":return 1;case"1":return 2;case"2":return 4;case"3":return 6;case"4":return 8;case"5":return 12;case"6":return 24;default:throw new Error("Invalid gain setting of ".concat(e," gain must be (0,1,2,3,4,5,6)"))}},OBCIChannelCmdLatch:"X",OBCIChannelCmdPowerOff:"1",OBCIChannelCmdPowerOn:"0",OBCIChannelCmdSet:"x",OBCIChannelCmdSRB1Connect:"1",OBCIChannelCmdSRB1Diconnect:"0",OBCIChannelCmdSRB2Connect:"1",OBCIChannelCmdSRB2Diconnect:"0",channelSettingsObjectDefault:Ft,channelSettingsArrayInit:function(e){for(var t=[],n=0;n<e;n++)t.push(Ft(n));return t},OBCIStringADCNormal:"normal",OBCIStringADCShorted:"shorted",OBCIStringADCBiasMethod:"biasMethod",OBCIStringADCMvdd:"mvdd",OBCIStringADCTemp:"temp",OBCIStringADCTestSig:"testSig",OBCIStringADCBiasDrp:"biasDrp",OBCIStringADCBiasDrn:"biasDrn",commandForADCString:Dt,inputTypeForCommand:function(e){switch(String(e)){case"0":return"normal";case"1":return"shorted";case"2":return"biasMethod";case"3":return"mvdd";case"4":return"temp";case"5":return"testSig";case"6":return"biasDrp";case"7":return"biasDrn";default:throw new Error("Invalid input type, must be less than 8")}},OBCIChannelDefaultAllSet:"d",OBCIChannelDefaultAllGet:"D",OBCIChannelImpedanceLatch:"Z",OBCIChannelImpedanceSet:"z",OBCIChannelImpedanceTestSignalApplied:"1",OBCIChannelImpedanceTestSignalAppliedNot:"0",OBCISDLogForHour1:"G",OBCISDLogForHour2:"H",OBCISDLogForHour4:"J",OBCISDLogForHour12:"K",OBCISDLogForHour24:"L",OBCISDLogForMin5:"A",OBCISDLogForMin15:"S",OBCISDLogForMin30:"F",OBCISDLogForSec14:"a",OBCISDLogStop:"j",OBCIStringSDHour1:"1hour",OBCIStringSDHour2:"2hour",OBCIStringSDHour4:"4hour",OBCIStringSDHour12:"12hour",OBCIStringSDHour24:"24hour",OBCIStringSDMin5:"5min",OBCIStringSDMin15:"15min",OBCIStringSDMin30:"30min",OBCIStringSDSec14:"14sec",sdSettingForString:function(e){return new Promise((function(t,n){switch(e){case"1hour":t("G");break;case"2hour":t("H");break;case"4hour":t("J");break;case"12hour":t("K");break;case"24hour":t("L");break;case"5min":t("A");break;case"15min":t("S");break;case"30min":t("F");break;case"14sec":t("a");break;default:n(Error(TypeError))}}))},OBCIStreamStart:"b",OBCIStreamStop:"s",OBCIAccelStart:"n",OBCIAccelStop:"N",OBCIMiscQueryRegisterSettings:"?",OBCIMiscQueryRegisterSettingsChannel1:"CH1SET",OBCIMiscQueryRegisterSettingsChannel2:"CH2SET",OBCIMiscQueryRegisterSettingsChannel3:"CH3SET",OBCIMiscQueryRegisterSettingsChannel4:"CH4SET",OBCIMiscQueryRegisterSettingsChannel5:"CH5SET",OBCIMiscQueryRegisterSettingsChannel6:"CH6SET",OBCIMiscQueryRegisterSettingsChannel7:"CH7SET",OBCIMiscQueryRegisterSettingsChannel8:"CH8SET",channelSettingsKeyForChannel:function(e){return new Promise((function(t,n){switch(e){case 1:t(new Buffer("CH1SET"));break;case 2:t(new Buffer("CH2SET"));break;case 3:t(new Buffer("CH3SET"));break;case 4:t(new Buffer("CH4SET"));break;case 5:t(new Buffer("CH5SET"));break;case 6:t(new Buffer("CH6SET"));break;case 7:t(new Buffer("CH7SET"));break;case 8:t(new Buffer("CH8SET"));break;default:n(Error("Invalid channel number"))}}))},OBCIMiscSoftReset:"v",OBCIChannelMaxNumber8:"c",OBCIChannelMaxNumber16:"C",OBCIChannelMaxNumber8NoDaisyToRemove:"",OBCIChannelMaxNumber8SuccessDaisyRemoved:"daisy removed",OBCIChannelMaxNumber16DaisyAlreadyAttached:"16",OBCIChannelMaxNumber16DaisyAttached:"daisy attached16",OBCIChannelMaxNumber16NoDaisyAttached:"no daisy to attach!8",OBCIFilterDisable:"g",OBCIFilterEnable:"f",OBCITrigger:"`",OBCINumberOfChannelsCyton:8,OBCINumberOfChannelsCytonBLE:2,OBCINumberOfChannelsDaisy:16,OBCINumberOfChannelsDefault:8,OBCINumberOfChannelsGanglion:4,OBCIBoardCyton:"cyton",OBCIBoardCytonBLE:"cytonBLE",OBCIBoardDaisy:"daisy",OBCIBoardDefault:"default",OBCIBoardGanglion:"ganglion",OBCIBoardNone:"none",numberOfChannelsForBoardType:function(e){switch(e){case"daisy":return 16;case"ganglion":return 4;case"none":return 0;case"cytonBLE":return 2;default:return 8}},boardTypeForNumberOfChannels:function(e){switch(e){case 16:return"daisy";case 4:return"ganglion";case 0:return"none";case 2:return"cytonBLE";default:return"cyton"}},OBCISampleRate1000:1e3,OBCISampleRate125:125,OBCISampleRate12800:12800,OBCISampleRate1600:1600,OBCISampleRate16000:16e3,OBCISampleRate200:200,OBCISampleRate2000:2e3,OBCISampleRate250:250,OBCISampleRate25600:25600,OBCISampleRate3200:3200,OBCISampleRate400:400,OBCISampleRate4000:4e3,OBCISampleRate500:500,OBCISampleRate6400:6400,OBCISampleRate800:800,OBCISampleRate8000:8e3,OBCISampleNumberMax:255,OBCIPacketSize:33,OBCIPacketSizeBLECyton:20,OBCIPacketSizeBLERaw:12,OBCIByteStart:160,OBCIByteStop:192,OBCIErrorInvalidByteLength:"Invalid Packet Byte Length",OBCIErrorInvalidByteStart:"Invalid Start Byte",OBCIErrorInvalidByteStop:"Invalid Stop Byte",OBCIErrorInvalidData:"Invalid data - try again",OBCIErrorInvalidType:"Invalid type - check comments for input type",OBCIErrorMissingRegisterSetting:"Missing register setting",OBCIErrorMissingRequiredProperty:"Missing property in JSON",OBCIErrorNobleAlreadyScanning:"Scan already under way",OBCIErrorNobleNotAlreadyScanning:"No scan started",OBCIErrorNobleNotInPoweredOnState:"Please turn blue tooth on.",OBCIErrorTimeSyncIsNull:"'this.sync.curSyncObj' must not be null",OBCIErrorTimeSyncNoComma:"Missed the time sync sent confirmation. Try sync again",OBCIErrorUndefinedOrNullInput:"Undefined or Null Input",OBCIMasterBufferSize:4096,OBCILeadOffDriveInAmps:6e-9,OBCILeadOffFrequencyHz:31.5,getChannelSetter:function(e,t,n,r,a,i,o){var s,u,c,l;return new Promise((function(d,f){At(e)||f(Error("channelNumber must be of type 'number' ")),Rt(t)||f(Error("powerDown must be of type 'boolean' ")),At(n)||f(Error("gain must be of type 'number' ")),Pt(r)||f(Error("inputType must be of type 'string' ")),Rt(a)||f(Error("bias must be of type 'boolean' ")),Rt(i)||f(Error("srb1 must be of type 'boolean' ")),Rt(o)||f(Error("srb2 must be of type 'boolean' "));var p=Mt(e).catch((function(e){return f(e)}));s=t?"1":"0";var h=Bt(n).catch((function(e){return f(e)})),m=Dt(r).catch((function(e){return f(e)}));u=a?"1":"0",c=i?"1":"0",l=o?"1":"0";var v={channelNumber:e,powerDown:t,gain:n,inputType:r,bias:a,srb2:i,srb1:o};Promise.all([p,h,m]).then((function(e){var t=["x",e[0],s,e[1],e[2],u,c,l,"X"];d({commandArray:t,newChannelSettingsObject:v})}))}))},getImpedanceSetter:function(e,t,n){var r,a;return new Promise((function(i,o){At(e)||o(Error("channelNumber must be of type 'number' ")),Rt(t)||o(Error("pInputApplied must be of type 'boolean' ")),Rt(n)||o(Error("nInputApplied must be of type 'boolean' ")),a=t?"1":"0",r=n?"1":"0",Mt(e).then((function(e){i(["z",e,a,r,"Z"])})).catch((function(e){return o(e)}))}))},getSampleRateSetter:function(e,t){return new Promise((function(n,r){if(!Pt(e))return r(Error("board type must be of type 'string' "));if(!At(t))return r(Error("sampleRate must be of type 'number' "));var a;if(t=Math.floor(t),"cyton"===e||"daisy"===e)a=Vt;else{if("ganglion"!==e)return r(Error("boardType must be either ".concat("cyton"," or ").concat("ganglion")));a=zt}a(t).then((function(e){n(["~",e])})).catch((function(e){return r(e)}))}))},getBoardModeSetter:function(e){return new Promise((function(t,n){if(!Pt(e))return n(Error("board mode must be of type 'string' "));Zt(e).then((function(e){t(["/",e])})).catch((function(e){return n(e)}))}))},OBCIWriteIntervalDelayMSLong:50,OBCIWriteIntervalDelayMSNone:0,OBCIWriteIntervalDelayMSShort:10,OBCISyncTimeSent:",",OBCISyncTimeSet:"<",OBCIRadioKey:240,OBCIRadioCmdChannelGet:0,OBCIRadioCmdChannelSet:1,OBCIRadioCmdChannelSetOverride:2,OBCIRadioCmdPollTimeGet:3,OBCIRadioCmdPollTimeSet:4,OBCIRadioCmdBaudRateSetDefault:5,OBCIRadioCmdBaudRateSetFast:6,OBCIRadioCmdSystemStatus:7,OBCIImpedanceTextBad:"bad",OBCIImpedanceTextGood:"good",OBCIImpedanceTextInit:"init",OBCIImpedanceTextOk:"ok",OBCIImpedanceTextNone:"none",OBCIImpedanceThresholdBadMax:1e6,OBCIImpedanceSeriesResistor:2200,getTextForRawImpedance:function(e){return e>0&&e<5e3?"good":e>5001&&e<1e4?"ok":e>10001&&e<1e6?"bad":"none"},OBCISimulatorPortName:"OpenBCISimulator",OBCIStreamPacketStandardAccel:0,OBCIStreamPacketStandardRawAux:1,OBCIStreamPacketUserDefinedType:2,OBCIStreamPacketAccelTimeSyncSet:3,OBCIStreamPacketAccelTimeSynced:4,OBCIStreamPacketRawAuxTimeSyncSet:5,OBCIStreamPacketRawAuxTimeSynced:6,OBCIStreamPacketImpedance:7,isNumber:At,isBoolean:Rt,isString:Pt,isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},OBCIPacketPositionStartByte:0,OBCIPacketPositionStopByte:32,OBCIPacketPositionStartAux:26,OBCIPacketPositionStopAux:31,OBCIPacketPositionChannelDataStart:2,OBCIPacketPositionChannelDataStop:25,OBCIPacketPositionSampleNumber:1,OBCIPacketPositionTimeSyncAuxStart:26,OBCIPacketPositionTimeSyncAuxStop:28,OBCIPacketPositionTimeSyncTimeStart:28,OBCIPacketPositionTimeSyncTimeStop:32,OBCISimulatorLineNoiseHz60:"60Hz",OBCISimulatorLineNoiseHz50:"50Hz",OBCISimulatorLineNoiseNone:"none",OBCISimulatorFragmentationRandom:"random",OBCISimulatorFragmentationFullBuffers:"fullBuffers",OBCISimulatorFragmentationOneByOne:"oneByOne",OBCISimulatorFragmentationNone:"none",OBCIFirmwareV1:"v1",OBCIFirmwareV2:"v2",OBCIFirmwareV3:"v3",OBCIAccelAxisX:7,OBCIAccelAxisY:8,OBCIAccelAxisZ:9,OBCIStreamPacketTimeByteSize:4,OBCIParseDaisy:"Daisy",OBCIParseFailure:"Failure",OBCIParseFirmware:"v2",OBCIParseEOT:"$$$",OBCIParseSuccess:"Success",OBCIParsingChannelSettings:2,OBCIParsingEOT:4,OBCIParsingNormal:3,OBCIParsingReset:0,OBCIParsingTimeSyncSent:1,OBCITimeoutProcessBytes:500,OBCISimulatorRawAux:"rawAux",OBCISimulatorStandard:"standard",OBCIRadioChannelMax:25,OBCIRadioChannelMin:1,OBCIRadioPollTimeMax:255,OBCIRadioPollTimeMin:0,OBCITimeSyncArraySize:10,OBCITimeSyncMultiplierWithSyncConf:.9,OBCITimeSyncMultiplierWithoutSyncConf:.75,OBCITimeSyncThresholdTransFailureMS:10,OBCIBoardModeSet:"/",OBCIBoardModeCmdDefault:"0",OBCIBoardModeCmdDebug:"1",OBCIBoardModeCmdAnalog:"2",OBCIBoardModeCmdDigital:"3",OBCIBoardModeCmdGetCur:"/",OBCIBoardModeAnalog:"analog",OBCIBoardModeDefault:"default",OBCIBoardModeDebug:"debug",OBCIBoardModeDigital:"digital",OBCISampleRateSet:"~",OBCISampleRateCmdCyton16000:"0",OBCISampleRateCmdCyton8000:"1",OBCISampleRateCmdCyton4000:"2",OBCISampleRateCmdCyton2000:"3",OBCISampleRateCmdCyton1000:"4",OBCISampleRateCmdCyton500:"5",OBCISampleRateCmdCyton250:"6",OBCISampleRateCmdGang25600:"0",OBCISampleRateCmdGang12800:"1",OBCISampleRateCmdGang6400:"2",OBCISampleRateCmdGang3200:"3",OBCISampleRateCmdGang1600:"4",OBCISampleRateCmdGang800:"5",OBCISampleRateCmdGang400:"6",OBCISampleRateCmdGang200:"7",OBCISampleRateCmdGetCur:"~",OBCIWifiAttach:"{",OBCIWifiRemove:"}",OBCIWifiReset:";",OBCIWifiStatus:":",OBCIRadioBaudRateDefault:115200,OBCIRadioBaudRateDefaultStr:"default",OBCIRadioBaudRateFast:230400,OBCIRadioBaudRateFastStr:"fast",OBCIEmitterAccelerometer:"accelerometer",OBCIEmitterBlePoweredUp:"blePoweredOn",OBCIEmitterClose:"close",OBCIEmitterDroppedPacket:"droppedPacket",OBCIEmitterEot:"eot",OBCIEmitterError:"error",OBCIEmitterGanglionFound:"ganglionFound",OBCIEmitterHardSet:"hardSet",OBCIEmitterImpedance:"impedance",OBCIEmitterImpedanceArray:"impedanceArray",OBCIEmitterMessage:"message",OBCIEmitterQuery:"query",OBCIEmitterRawDataPacket:"rawDataPacket",OBCIEmitterReady:"ready",OBCIEmitterRFduino:"rfduino",OBCIEmitterSample:"sample",OBCIEmitterScanStopped:"scanStopped",OBCIEmitterSynced:"synced",OBCIEmitterWifiShield:"wifiShield",OBCIGanglionAccelAxisX:1,OBCIGanglionAccelAxisY:2,OBCIGanglionAccelAxisZ:3,OBCIGanglionBleSearchTime:2e4,OBCIGanglionByteIdUncompressed:0,OBCIGanglionByteId18Bit:{max:100,min:1},OBCIGanglionByteId19Bit:{max:200,min:101},OBCIGanglionByteIdImpedanceChannel1:201,OBCIGanglionByteIdImpedanceChannel2:202,OBCIGanglionByteIdImpedanceChannel3:203,OBCIGanglionByteIdImpedanceChannel4:204,OBCIGanglionByteIdImpedanceChannelReference:205,OBCIGanglionByteIdMultiPacket:206,OBCIGanglionByteIdMultiPacketStop:207,OBCIGanglionMCP3912Gain:51,OBCIGanglionMCP3912Vref:1.2,OBCIGanglionPacketSize:20,OBCIGanglionPacket18Bit:{auxByte:20,byteId:0,dataStart:1,dataStop:19},OBCIGanglionPacket19Bit:{byteId:0,dataStart:1,dataStop:20},OBCIGanglionPrefix:"Ganglion",OBCIGanglionSamplesPerPacket:2,OBCIGanglionSyntheticDataEnable:"t",OBCIGanglionSyntheticDataDisable:"T",OBCIGanglionImpedanceStart:"z",OBCIGanglionImpedanceStop:"Z",OBCIGanglionScaleFactorPerCountVolts:1.8699498629276494e-9,SimbleeUuidService:"fe84",SimbleeUuidReceive:"2d30c082f39f4ce6923f3484ea480596",SimbleeUuidSend:"2d30c083f39f4ce6923f3484ea480596",SimbleeUuidDisconnect:"2d30c084f39f4ce6923f3484ea480596",RFduinoUuidService:"2220",RFduinoUuidReceive:"2221",RFduinoUuidSend:"2222",RFduinoUuidSendTwo:"2223",OBCICytonBLESamplesPerPacket:3,OBCIGanglionAccelScaleFactor:.016,OBCINobleEmitterPeripheralConnect:"connect",OBCINobleEmitterPeripheralDisconnect:"disconnect",OBCINobleEmitterPeripheralDiscover:"discover",OBCINobleEmitterPeripheralServicesDiscover:"servicesDiscover",OBCINobleEmitterServiceCharacteristicsDiscover:"characteristicsDiscover",OBCINobleEmitterServiceRead:"read",OBCINobleEmitterDiscover:"discover",OBCINobleEmitterScanStart:"scanStart",OBCINobleEmitterScanStop:"scanStop",OBCINobleEmitterStateChange:"stateChange",OBCINobleStatePoweredOn:"poweredOn",getPeripheralLocalNames:function(e){return new Promise((function(t,n){var r=[];return e.forEach((function(e){r.push(e.advertisement.localName)})),r.length>0?t(r):n(Error("No peripherals discovered with prefix equal to ".concat("Ganglion")))}))},getPeripheralWithLocalName:function(e,t){return new Promise((function(n,r){return"object"!==_t(e)?r(Error("pArray must be of type Object")):(e.forEach((function(e){if(e.advertisement.hasOwnProperty("localName")&&e.advertisement.localName===t)return n(e)})),r(Error("No peripheral found with localName: ".concat(t))))}))},getVersionNumber:function(e){return Number(e[1])},isPeripheralGanglion:function(e){return!!(e&&e.hasOwnProperty("advertisement")&&null!==e.advertisement&&e.advertisement.hasOwnProperty("localName")&&void 0!==e.advertisement.localName&&null!==e.advertisement.localName&&e.advertisement.localName.indexOf("Ganglion")>-1)},commandSampleRateForCmdCyton:Vt,commandSampleRateForCmdGanglion:zt,commandBoardModeForMode:Zt,rawDataToSampleObjectDefault:function(e){return void 0===e&&(e=8),{accelArray:[0,0,0],channelSettings:Ot.channelSettingsArrayInit(e),decompressedSamples:Lt(e),lastSampleNumber:0,rawDataPacket:Buffer.alloc(33),rawDataPackets:[],scale:!0,sendCounts:!1,timeOffset:0,verbose:!1}},OBCIProtocolBLE:"ble",OBCIProtocolSerial:"serial",OBCIProtocolWifi:"wifi",OBCIRegisterQueryAccelerometerFirmwareV1:It,OBCIRegisterQueryAccelerometerFirmwareV3:Tt,OBCIRegisterQueryCyton:Et,OBCIRegisterQueryCytonDaisy:Nt,OBCIRegisterQueryNameMISC1:"MISC1",OBCIRegisterQueryNameBIASSENSP:"BIAS_SENSP",OBCIRegisterQueryNameCHnSET:["CH1SET","CH2SET","CH3SET","CH4SET","CH5SET","CH6SET","CH7SET","CH8SET"],OBCIRegisterQuerySizeCytonFirmwareV1:Et.length+It.length,OBCIRegisterQuerySizeCytonDaisyFirmwareV1:Et.length+Nt.length+It.length,OBCIRegisterQuerySizeCytonFirmwareV3:Et.length+Tt.length,OBCIRegisterQuerySizeCytonDaisyFirmwareV3:Et.length+Nt.length+Tt.length};function At(e){return"number"==typeof e}function Rt(e){return"boolean"==typeof e}function Pt(e){return"string"==typeof e}function Dt(e){return new Promise((function(t,n){switch(e){case"normal":t("0");break;case"shorted":t("1");break;case"biasMethod":t("2");break;case"mvdd":t("3");break;case"temp":t("4");break;case"testSig":t("5");break;case"biasDrp":t("6");break;case"biasDrn":t("7");break;default:n(Error("Invalid ADC string"))}}))}function Bt(e){return new Promise((function(t,n){switch(e){case 1:t("0");break;case 2:t("1");break;case 4:t("2");break;case 6:t("3");break;case 8:t("4");break;case 12:t("5");break;case 24:t("6");break;default:n(Error("Invalid gain setting of "+e+" gain must be (1,2,4,6,8,12,24)"))}}))}function Mt(e){return new Promise((function(t,n){switch(e){case 1:t("1");break;case 2:t("2");break;case 3:t("3");break;case 4:t("4");break;case 5:t("5");break;case 6:t("6");break;case 7:t("7");break;case 8:t("8");break;case 9:t("Q");break;case 10:t("W");break;case 11:t("E");break;case 12:t("R");break;case 13:t("T");break;case 14:t("Y");break;case 15:t("U");break;case 16:t("I");break;default:n(Error("Invalid channel number"))}}))}function Ft(e){return{channelNumber:e,powerDown:!1,gain:24,inputType:"normal",bias:!0,srb2:!0,srb1:!1}}function Lt(e){for(var t=[],n=0;n<3;n++)t.push(new Array(e));return t}function Vt(e){return new Promise((function(t,n){switch(e){case 16e3:t("0");break;case 8e3:t("1");break;case 4e3:t("2");break;case 2e3:t("3");break;case 1e3:t("4");break;case 500:t("5");break;case 250:t("6");break;default:n(Error("Invalid sample rate"))}}))}function zt(e){return new Promise((function(t,n){switch(e){case 25600:t("0");break;case 12800:t("1");break;case 6400:t("2");break;case 3200:t("3");break;case 1600:t("4");break;case 800:t("5");break;case 400:t("6");break;case 200:t("7");break;default:n(Error("Invalid sample rate"))}}))}function Zt(e){return new Promise((function(t,n){switch(e){case"default":t("0");break;case"debug":t("1");break;case"analog":t("2");break;case"digital":t("3");break;default:n(Error("Invalid sample rate"))}}))}var Ut=.002/Math.pow(2,4),jt={extractRawDataPackets:function(e){if(!e)return{buffer:e,rawDataPackets:[]};var t=e.length,n=[];if(t<Ot.OBCIPacketSize)return{buffer:e,rawDataPackets:n};for(var r=0;r<=t-Ot.OBCIPacketSize;){if(e[r]===Ot.OBCIByteStart&&Cn(e[r+Ot.OBCIPacketSize-1])){var a;a=Uint8Array.from(e.slice(r,r+Ot.OBCIPacketSize)),n.push(a);var i;i=r>0?Uint8Array.concat([Uint8Array.from(e.slice(0,r)),Uint8Array.from(e.slice(r+Ot.OBCIPacketSize))]):Uint8Array.from(e.slice(Ot.OBCIPacketSize)),e=0===i.length?null:Uint8Array.from(i),r=-1,t-=Ot.OBCIPacketSize}r++}return{buffer:e,rawDataPackets:n}},extractRawBLEDataPackets:function(e){var t=[];if(Ot.isNull(e))return t;if(e.byteLength!==Ot.OBCIPacketSizeBLECyton)return t;var n=[0,0,0];n[0]=e[1],n[1]=n[0]+1,n[1]>255&&(n[1]-=256),n[2]=n[1]+1,n[2]>255&&(n[2]-=256);for(var r=0;r<Ot.OBCICytonBLESamplesPerPacket;r++){var a=jt.samplePacketZero(n[r]);a[0]=Ot.OBCIByteStart,a[Ot.OBCIPacketPositionStopByte]=e[0],e.copy(a,Ot.OBCIPacketPositionChannelDataStart,Ot.OBCIPacketPositionChannelDataStart+6*r,Ot.OBCIPacketPositionChannelDataStart+6+6*r),t.push(a)}return t},transformRawDataPacketToSample:en,transformRawDataPacketsToSample:function(e){for(var t=[],n=0;n<e.rawDataPackets.length;n++){e.rawDataPacket=e.rawDataPackets[n];var r=en(e);t.push(r),r.hasOwnProperty("sampleNumber")?e.lastSampleNumber=r.sampleNumber:r.hasOwnProperty("impedanceValue")||(e.lastSampleNumber=e.rawDataPacket[Ot.OBCIPacketPositionSampleNumber])}return t},convertGanglionArrayToBuffer:function(e,t){for(var n=0;n<Ot.OBCINumberOfChannelsGanglion;n++)t.writeInt16BE(e[n]>>8,3*n),t.writeInt8(255&e[n],3*n+2)},getRawPacketType:hn,getFromTimePacketAccel:un,getFromTimePacketTime:sn,getFromTimePacketRawAux:cn,ganglionFillRawDataPacket:function(e){if(Ot.isUndefined(e)||Ot.isUndefined(e.rawDataPacket)||Ot.isNull(e.rawDataPacket)||Ot.isUndefined(e.data)||Ot.isNull(e.data))throw new Error(Ot.OBCIErrorUndefinedOrNullInput);if(!e.hasOwnProperty("sampleNumber"))throw new Error(Ot.OBCIErrorUndefinedOrNullInput);if(e.rawDataPacket.byteLength!==Ot.OBCIPacketSize)throw new Error(Ot.OBCIErrorInvalidByteLength);if(e.data.byteLength!==Ot.OBCIPacketSizeBLERaw)throw new Error(Ot.OBCIErrorInvalidByteLength);e.data.copy(e.rawDataPacket,Ot.OBCIPacketPositionChannelDataStart),e.rawDataPacket[Ot.OBCIPacketPositionSampleNumber]=e.sampleNumber,e.rawDataPacket[Ot.OBCIPacketPositionStartByte]=Ot.OBCIByteStart,e.rawDataPacket[Ot.OBCIPacketPositionStopByte]=Ot.OBCIStreamPacketStandardRawAux},parsePacketStandardAccel:function(e){if(Ot.isUndefined(e)||Ot.isUndefined(e.rawDataPacket)||Ot.isNull(e.rawDataPacket))throw new Error(Ot.OBCIErrorUndefinedOrNullInput);if(e.rawDataPacket.byteLength!==Ot.OBCIPacketSize)throw new Error(Ot.OBCIErrorInvalidByteLength);if(e.rawDataPacket[0]!==Ot.OBCIByteStart)throw new Error(Ot.OBCIErrorInvalidByteStart);var t={};return(Ot.isUndefined(e.scale)||Ot.isNull(e.scale))&&(e.scale=!0),e.scale?t.accelData=ln(e.rawDataPacket.slice(Ot.OBCIPacketPositionStartAux,Ot.OBCIPacketPositionStopAux+1)):t.accelDataCounts=dn(e.rawDataPacket.slice(Ot.OBCIPacketPositionStartAux,Ot.OBCIPacketPositionStopAux+1)),e.scale?t.channelData=fn(e):t.channelDataCounts=pn(e),t.auxData=Uint8Array.from(e.rawDataPacket.slice(Ot.OBCIPacketPositionStartAux,Ot.OBCIPacketPositionStopAux+1)),t.sampleNumber=e.rawDataPacket[Ot.OBCIPacketPositionSampleNumber],t.startByte=e.rawDataPacket[0],t.stopByte=e.rawDataPacket[Ot.OBCIPacketPositionStopByte],t.valid=!0,t.timestamp=Date.now(),t.boardTime=0,t},parsePacketStandardRawAux:function(e){if(Ot.isUndefined(e)||Ot.isUndefined(e.rawDataPacket)||Ot.isNull(e.rawDataPacket))throw new Error(Ot.OBCIErrorUndefinedOrNullInput);if(e.rawDataPacket.byteLength!==Ot.OBCIPacketSize)throw new Error(Ot.OBCIErrorInvalidByteLength);if(e.rawDataPacket[0]!==Ot.OBCIByteStart)throw new Error(Ot.OBCIErrorInvalidByteStart);var t={};return(Ot.isUndefined(e.scale)||Ot.isNull(e.scale))&&(e.scale=!0),e.scale?t.channelData=fn(e):t.channelDataCounts=pn(e),t.auxData=Uint8Array.from(e.rawDataPacket.slice(Ot.OBCIPacketPositionStartAux,Ot.OBCIPacketPositionStopAux+1)),t.sampleNumber=e.rawDataPacket[Ot.OBCIPacketPositionSampleNumber],t.startByte=e.rawDataPacket[0],t.stopByte=e.rawDataPacket[Ot.OBCIPacketPositionStopByte],t.valid=!0,t.timestamp=Date.now(),t.boardTime=0,t},parsePacketTimeSyncedAccel:function(e){if(Ot.isUndefined(e)||Ot.isUndefined(e.rawDataPacket)||Ot.isNull(e.rawDataPacket))throw new Error(Ot.OBCIErrorUndefinedOrNullInput);if(e.rawDataPacket.byteLength!==Ot.OBCIPacketSize)throw new Error(Ot.OBCIErrorInvalidByteLength);if(e.rawDataPacket[0]!==Ot.OBCIByteStart)throw new Error(Ot.OBCIErrorInvalidByteStart);var t={};return t.sampleNumber=e.rawDataPacket[Ot.OBCIPacketPositionSampleNumber],t.startByte=e.rawDataPacket[0],t.stopByte=e.rawDataPacket[Ot.OBCIPacketPositionStopByte],t.boardTime=sn(e.rawDataPacket),e.hasOwnProperty("timeOffset")?t.timestamp=t.boardTime+e.timeOffset:t.timestamp=Date.now(),t.auxData=cn(e.rawDataPacket),(Ot.isUndefined(e.scale)||Ot.isNull(e.scale))&&(e.scale=!0),e.scale?t.channelData=fn(e):t.channelDataCounts=pn(e),un(e)&&(e.scale?t.accelData=e.accelArray:t.accelDataCounts=e.accelArray),t.valid=!0,t},parsePacketTimeSyncedRawAux:function(e){if(Ot.isUndefined(e)||Ot.isUndefined(e.rawDataPacket)||Ot.isNull(e.rawDataPacket))throw new Error(Ot.OBCIErrorUndefinedOrNullInput);if(e.rawDataPacket.byteLength!==Ot.OBCIPacketSize)throw new Error(Ot.OBCIErrorInvalidByteLength);if(e.rawDataPacket[0]!==Ot.OBCIByteStart)throw new Error(Ot.OBCIErrorInvalidByteStart);var t={};return t.sampleNumber=e.rawDataPacket[Ot.OBCIPacketPositionSampleNumber],t.startByte=e.rawDataPacket[0],t.stopByte=e.rawDataPacket[Ot.OBCIPacketPositionStopByte],t.boardTime=sn(e.rawDataPacket),e.hasOwnProperty("timeOffset")?t.timestamp=t.boardTime+e.timeOffset:t.timestamp=Date.now(),t.auxData=cn(e.rawDataPacket),(Ot.isUndefined(e.scale)||Ot.isNull(e.scale))&&(e.scale=!0),e.scale?t.channelData=fn(e):t.channelDataCounts=pn(e),t.valid=!0,t},parsePacketImpedance:function(e){if(Ot.isUndefined(e)||Ot.isUndefined(e.rawDataPacket)||Ot.isNull(e.rawDataPacket))throw new Error(Ot.OBCIErrorUndefinedOrNullInput);if(e.rawDataPacket.byteLength!==Ot.OBCIPacketSize)throw new Error(Ot.OBCIErrorInvalidByteLength);var t={};return t.channelNumber=e.rawDataPacket[1],5===t.channelNumber&&(t.channelNumber=0),t.impedanceValue=Number(e.rawDataPacket.toString().match(/\d+/)[0]),t},convertSampleToPacketStandard:function(e){var t=new Uint8Array(Ot.OBCIPacketSize);t.fill(0),t[0]=Ot.OBCIByteStart,t[1]=e.sampleNumber;for(var n=0;n<Ot.OBCINumberOfChannelsDefault;n++)yn(e.channelData[n]).copy(t,2+3*n);for(var r=0;r<3;r++)bn(e.auxData[r]).copy(t,Ot.OBCIPacketSize-1-6+2*r);return t[Ot.OBCIPacketSize-1]=Ot.OBCIByteStop,t},convertSampleToPacketRawAux:function(e,t){var n=new Uint8Array(Ot.OBCIPacketSize);n.fill(0),n[0]=Ot.OBCIByteStart,n[1]=e.sampleNumber;for(var r=0;r<Ot.OBCINumberOfChannelsDefault;r++)yn(e.channelData[r]).copy(n,2+3*r);return t.copy(n,26),n[Ot.OBCIPacketSize-1]=Sn(Ot.OBCIStreamPacketStandardRawAux),n},convertSampleToPacketAccelTimeSyncSet:function(e,t){var n=wn(e,t);return n[Ot.OBCIPacketPositionStopByte]=Sn(Ot.OBCIStreamPacketAccelTimeSyncSet),n},convertSampleToPacketAccelTimeSynced:wn,convertSampleToPacketRawAuxTimeSyncSet:function(e,t,n){var r=kn(e,t,n);return r[Ot.OBCIPacketPositionStopByte]=Sn(Ot.OBCIStreamPacketRawAuxTimeSyncSet),r},convertSampleToPacketRawAuxTimeSynced:kn,debugPrettyPrint:function(e){if(null==e)console.log("== Sample is undefined ==");else{console.log("-- Sample --"),console.log("---- Start Byte: "+e.startByte),console.log("---- Sample Number: "+e.sampleNumber);for(var t=0;t<8;t++)console.log("---- Channel Data "+(t+1)+": "+e.channelData[t]);if(e.accelData)for(var n=0;n<3;n++)console.log("---- Accel Data "+n+": "+e.accelData[n]);e.auxData&&console.log("---- Aux Data "+e.auxData),console.log("---- Stop Byte: "+e.stopByte)}},samplePrintHeader:function(){return"All voltages in Volts!sampleNumber, channel1, channel2, channel3, channel4, channel5, channel6, channel7, channel8, aux1, aux2, aux3\n"},samplePrintLine:function(e){return new Promise((function(t,n){null==e&&n(Error("undefined sample")),t(e.sampleNumber+","+e.channelData[0].toFixed(8)+","+e.channelData[1].toFixed(8)+","+e.channelData[2].toFixed(8)+","+e.channelData[3].toFixed(8)+","+e.channelData[4].toFixed(8)+","+e.channelData[5].toFixed(8)+","+e.channelData[6].toFixed(8)+","+e.channelData[7].toFixed(8)+","+e.auxData[0].toFixed(8)+","+e.auxData[1].toFixed(8)+","+e.auxData[2].toFixed(8)+"\n")}))},floatTo3ByteBuffer:yn,floatTo2ByteBuffer:bn,impedanceCalculationForChannel:function(e,t){var n=Math.sqrt(2);return new Promise((function(r,a){null==e&&a(Error("Sample Object cannot be null or undefined")),void 0!==e.channelData&&null!==e.channelData||a(Error("Channel cannot be null or undefined")),(t<1||t>Ot.OBCINumberOfChannelsDefault)&&a(Error("Channel number invalid."));var i=t-1;e.channelData[i]<0&&(e.channelData[i]*=-1),r(n*e.channelData[i]/Ot.OBCILeadOffDriveInAmps)}))},impedanceCalculationForAllChannels:function(e){var t=Math.sqrt(2);return new Promise((function(n,r){null==e&&r(Error("Sample Object cannot be null or undefined")),void 0!==e.channelData&&null!==e.channelData||r(Error("Channel cannot be null or undefined"));for(var a=[],i=e.channelData.length,o=0;o<i;o++){e.channelData[o]<0&&(e.channelData[o]*=-1);var s=t*e.channelData[o]/Ot.OBCILeadOffDriveInAmps;a.push(s)}e.impedances=a,n(e)}))},interpret16bitAsInt32:function(e){var t=0;return e[0]>127&&(t=65535),t<<16|e[0]<<8|e[1]},interpret24bitAsInt32:function(e){var t=0;return e[0]>127&&(t=255),t<<24|e[0]<<16|e[1]<<8|e[2]},impedanceArray:function(e){for(var t=[],n=0;n<e;n++)t.push(Jt(n+1));return t},impedanceObject:Jt,impedanceSummarize:function(e){e.raw>Ot.OBCIImpedanceThresholdBadMax?e.text=Ot.OBCIImpedanceTextNone:e.text=Ot.getTextForRawImpedance(e.raw)},newSample:vn,newSampleNoScale:gn,scaleFactorAux:Ut,impedanceCalculateArray:function(e,t){if(t.buffer.push(e.channelData),t.count++,t.count>=t.window){for(var n=[],r=0;r<e.channelData.length;r++){for(var a=0,i=0;i<t.window;i++)t.buffer[r][i]>a&&(a=t.buffer[r][i]);for(var o=0,s=0;s<t.window;s++)t.buffer[r][s]<o&&(o=t.buffer[r][s]);var u=a-o;n.push(u/2/Ot.OBCILeadOffDriveInAmps)}return t.count=0,n}return null},impedanceTestObjDefault:function(e){var t=e||{};return t.active=!1,t.buffer=[],t.count=0,t.isTestingPInput=!1,t.isTestingNInput=!1,t.onChannel=0,t.sampleNumber=0,t.continuousMode=!1,t.impedanceForChannel=0,t.window=40,t},samplePacket:function(e){return new Uint8Array([160,mn(e),0,0,1,0,0,2,0,0,3,0,0,4,0,0,5,0,0,6,0,0,7,0,0,8,0,0,0,1,0,2,Sn(Ot.OBCIStreamPacketStandardAccel)])},samplePacketZero:function(e){return new Uint8Array([160,mn(e),0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,Sn(Ot.OBCIStreamPacketStandardAccel)])},samplePacketReal:function(e){return new Uint8Array([160,mn(e),143,242,64,143,223,244,144,43,182,143,191,191,127,255,255,127,255,255,148,37,52,32,182,125,0,224,0,224,15,112,Sn(Ot.OBCIStreamPacketStandardAccel)])},samplePacketStandardRawAux:function(e){return new Uint8Array([160,mn(e),0,0,1,0,0,2,0,0,3,0,0,4,0,0,5,0,0,6,0,0,7,0,0,8,0,1,2,3,4,5,Sn(Ot.OBCIStreamPacketStandardRawAux)])},samplePacketAccelTimeSyncSet:function(e){return new Uint8Array([160,mn(e),0,0,1,0,0,2,0,0,3,0,0,4,0,0,5,0,0,6,0,0,7,0,0,8,0,1,0,0,0,1,Sn(Ot.OBCIStreamPacketAccelTimeSyncSet)])},samplePacketAccelTimeSynced:function(e){return new Uint8Array([160,mn(e),0,0,1,0,0,2,0,0,3,0,0,4,0,0,5,0,0,6,0,0,7,0,0,8,0,1,0,0,0,1,Sn(Ot.OBCIStreamPacketAccelTimeSynced)])},samplePacketRawAuxTimeSyncSet:function(e){return new Uint8Array([160,mn(e),0,0,1,0,0,2,0,0,3,0,0,4,0,0,5,0,0,6,0,0,7,0,0,8,0,1,0,0,0,1,Sn(Ot.OBCIStreamPacketRawAuxTimeSyncSet)])},samplePacketRawAuxTimeSynced:function(e){return new Uint8Array([160,mn(e),0,0,1,0,0,2,0,0,3,0,0,4,0,0,5,0,0,6,0,0,7,0,0,8,0,1,0,0,0,1,Sn(Ot.OBCIStreamPacketRawAuxTimeSynced)])},samplePacketImpedance:function(e){return new Uint8Array([160,e,54,52,49,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,Sn(Ot.OBCIStreamPacketImpedance)])},samplePacketUserDefined:function(){return new Uint8Array([160,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,Sn(Ot.OBCIStreamPacketUserDefinedType)])},samplePacketCytonBLE:function(e){return new Uint8Array([192,mn(e),0,0,1,0,0,2,0,0,10,0,0,20,0,0,100,0,0,200])},getBiasSetFromADSRegisterQuery:rn,getBooleanFromRegisterQuery:tn,getChannelDataArray:fn,getChannelDataArrayNoScale:pn,getDataArrayAccel:ln,getDataArrayAccelNoScale:dn,getFirmware:function(e){var t=e.toString().match(/v\d.\d*.\d*/);if(t){var n=t[0].split(".");return{major:Number(n[0][1]),minor:Number(n[1]),patch:Number(n[2]),raw:t[0]}}return t},getSRB1FromADSRegisterQuery:nn,getNumFromThreeCSVADSRegisterQuery:an,isEven:xn,isOdd:function(e){return e%2==1},isStopByte:Cn,isTimeSyncSetConfirmationInBuffer:function(e){if(e){var t=e.length;switch(t){case 0:return!1;case 1:return e[0]===Ot.OBCISyncTimeSent.charCodeAt(0);case 2:return e[1]===Ot.OBCIByteStart?e[0]===Ot.OBCISyncTimeSent.charCodeAt(0):!!Cn(e[0])&&e[1]===Ot.OBCISyncTimeSent.charCodeAt(0);default:if(e[0]===Ot.OBCISyncTimeSent.charCodeAt(0)&&e[1]===Ot.OBCIByteStart)return!0;for(var n=1;n<t;n++)if(n===t-1){if(Cn(e[n-1]))return e[n]===Ot.OBCISyncTimeSent.charCodeAt(0)}else if(Cn(e[n-1])&&e[n+1]===Ot.OBCIByteStart)return e[n]===Ot.OBCISyncTimeSent.charCodeAt(0);return!1}}},makeDaisySampleObject:function(e,t){var n={};return e.hasOwnProperty("channelData")&&(n.channelData=e.channelData.concat(t.channelData)),e.hasOwnProperty("channelDataCounts")&&(n.channelDataCounts=e.channelDataCounts.concat(t.channelDataCounts)),n.sampleNumber=Math.floor(t.sampleNumber/2),n.auxData={lower:e.auxData,upper:t.auxData},n.stopByte=e.stopByte,n.timestamp=(e.timestamp+t.timestamp)/2,n._timestamps={lower:e.timestamp,upper:t.timestamp},e.hasOwnProperty("accelData")&&(e.accelData[0]>0||e.accelData[1]>0||e.accelData[2]>0?n.accelData=e.accelData:n.accelData=t.accelData),e.hasOwnProperty("accelDataCounts")&&(e.accelDataCounts[0]>0||e.accelDataCounts[1]>0||e.accelDataCounts[2]>0?n.accelDataCounts=e.accelDataCounts:n.accelDataCounts=t.accelDataCounts),n.valid=!0,n},makeDaisySampleObjectWifi:function(e,t){var n={};return e.hasOwnProperty("channelData")&&(n.channelData=e.channelData.concat(t.channelData)),e.hasOwnProperty("channelDataCounts")&&(n.channelDataCounts=e.channelDataCounts.concat(t.channelDataCounts)),n.sampleNumber=t.sampleNumber,n.auxData={lower:e.auxData,upper:t.auxData},e.hasOwnProperty("timestamp")&&(n.timestamp=e.timestamp),n.stopByte=e.stopByte,n._timestamps={lower:e.timestamp,upper:t.timestamp},e.hasOwnProperty("accelData")&&(e.accelData[0]>0||e.accelData[1]>0||e.accelData[2]>0?n.accelData=e.accelData:n.accelData=t.accelData),e.hasOwnProperty("accelDataCounts")&&(e.accelDataCounts[0]>0||e.accelDataCounts[1]>0||e.accelDataCounts[2]>0?n.accelDataCounts=e.accelDataCounts:n.accelDataCounts=t.accelDataCounts),n.valid=!0,n},makeTailByteFromPacketType:Sn,newSyncObject:function(){return{boardTime:0,correctedTransmissionTime:!1,error:null,timeSyncSent:0,timeSyncSentConfirmation:0,timeSyncSetPacket:0,timeRoundTrip:0,timeTransmission:0,timeOffset:0,timeOffsetMaster:0,valid:!1}},setChSetFromADSRegisterQuery:on,stripToEOTBuffer:function(e){var t=e.indexOf(Ot.OBCIParseEOT);return t>=0?(t+=Ot.OBCIParseEOT.length)<e.byteLength?Uint8Array.from(e.slice(t)):null:e},syncChannelSettingsWithRawData:function(e){if(Ot.isUndefined(e)||Ot.isUndefined(e.channelSettings)||Ot.isNull(e.channelSettings)||Ot.isUndefined(e.data)||Ot.isNull(e.data))throw new Error(Ot.OBCIErrorUndefinedOrNullInput);if(!Array.isArray(e.channelSettings))throw new Error("".concat(Ot.OBCIErrorInvalidType," channelSettings"));if(e.channelSettings.length===Ot.OBCINumberOfChannelsCyton){if(e.data.toString().match(/Daisy ADS/))throw new Error("raw data mismatch - expected only cyton register info but also found daisy");if(null==e.data.toString().match(/Board ADS/))throw new Error(Ot.OBCIErrorInvalidData)}else{if(null==e.data.toString().match(/Daisy ADS/))throw new Error("raw data mismatch - expected daisy register info but none found");if(null==e.data.toString().match(/Board ADS/))throw new Error("no Board ADS info found")}e.channelSettings.forEach((function(e){if(!(e.hasOwnProperty("channelNumber")&&e.hasOwnProperty("powerDown")&&e.hasOwnProperty("gain")&&e.hasOwnProperty("inputType")&&e.hasOwnProperty("bias")&&e.hasOwnProperty("srb2")&&e.hasOwnProperty("srb1")))throw new Error(Ot.OBCIErrorMissingRequiredProperty)}));var t=null,n=!1,r=!1,a=e.data.toString().match(/Board ADS/),i=e.data.toString().slice(a.index,Ot.OBCIRegisterQueryCyton.length);if(nn(i)&&(n=!0),e.channelSettings.length>Ot.OBCINumberOfChannelsCyton){var o=e.data.toString().match(/Daisy ADS/);t=e.data.toString().slice(o.index,o.index+Ot.OBCIRegisterQueryCytonDaisy.length),nn(i)&&(r=!0)}e.channelSettings.forEach((function(e){e.channelNumber<Ot.OBCINumberOfChannelsCyton?(on(i,e),e.bias=rn(i,e.channelNumber),e.srb1=n):(on(t,e),e.bias=rn(t,e.channelNumber-Ot.OBCINumberOfChannelsCyton),e.srb1=r)}))},droppedPacketCheck:function(e,t){if(e===Ot.OBCISampleNumberMax&&0===t)return null;if(t-e==1)return null;var n=[];if(e>t){for(var r=Ot.OBCISampleNumberMax-e,a=0;a<r;a++)n.push(e+a+1);e=-1}for(var i=1;i<t-e;i++)n.push(e+i);return n},convert18bitAsInt32:Kt,convert19bitAsInt32:Yt,decompressDeltas18Bit:Qt,decompressDeltas19Bit:$t,sampleCompressedData:function(e){return new Uint8Array([e,0,0,0,0,8,0,5,0,0,72,0,9,240,1,176,0,48,0,8])},sampleBLERaw:function(){return new Uint8Array([0,0,1,0,0,2,0,0,3,0,0,4])},sampleImpedanceChannel1:function(){return new Uint8Array([Ot.OBCIGanglionByteIdImpedanceChannel1,0,0,1])},sampleImpedanceChannel2:function(){return new Uint8Array([Ot.OBCIGanglionByteIdImpedanceChannel2,0,0,1])},sampleImpedanceChannel3:function(){return new Uint8Array([Ot.OBCIGanglionByteIdImpedanceChannel3,0,0,1])},sampleImpedanceChannel4:function(){return new Uint8Array([Ot.OBCIGanglionByteIdImpedanceChannel4,0,0,1])},sampleImpedanceChannelReference:function(){return new Uint8Array([Ot.OBCIGanglionByteIdImpedanceChannelReference,0,0,1])},sampleMultiBytePacket:function(e){var t=new Uint8Array([Ot.OBCIGanglionByteIdMultiPacket]);return Uint8Array.concat([t,e])},sampleMultiBytePacketStop:function(e){var t=new Uint8Array([Ot.OBCIGanglionByteIdMultiPacketStop]);return Uint8Array.concat([t,e])},sampleOtherData:function(e){var t=new Uint8Array([255]);return Uint8Array.concat([t,e])},sampleUncompressedData:function(){return new Uint8Array([0,0,0,1,0,0,2,0,0,3,0,0,4,1,2,3,4,5,6,7])},parseGanglion:function(e){var t=parseInt(e.rawDataPacket[0]);if(t<=Ot.OBCIGanglionByteId19Bit.max)return Xt(e);switch(t){case Ot.OBCIGanglionByteIdMultiPacket:return Wt(e);case Ot.OBCIGanglionByteIdMultiPacketStop:return Gt(e);case Ot.OBCIGanglionByteIdImpedanceChannel1:case Ot.OBCIGanglionByteIdImpedanceChannel2:case Ot.OBCIGanglionByteIdImpedanceChannel3:case Ot.OBCIGanglionByteIdImpedanceChannel4:case Ot.OBCIGanglionByteIdImpedanceChannelReference:return function(e){var t;switch(parseInt(e.rawDataPacket[0])){case Ot.OBCIGanglionByteIdImpedanceChannel1:t=1;break;case Ot.OBCIGanglionByteIdImpedanceChannel2:t=2;break;case Ot.OBCIGanglionByteIdImpedanceChannel3:t=3;break;case Ot.OBCIGanglionByteIdImpedanceChannel4:t=4;break;case Ot.OBCIGanglionByteIdImpedanceChannelReference:t=0}for(var n={channelNumber:t,impedanceValue:0},r=e.rawDataPacket.length;Number.isNaN(Number(e.rawDataPacket.slice(1,r)))&&0!==r;)r--;return 0!==r&&(n.impedanceValue=Number(e.rawDataPacket.slice(1,r))),n}(e);default:return null}},processMultiBytePacket:Wt,processMultiBytePacketStop:Gt};function Wt(e){e.multiPacketBuffer?e.multiPacketBuffer=Uint8Array.concat([Uint8Array.from(e.multiPacketBuffer),Uint8Array.from(e.rawDataPacket.slice(Ot.OBCIGanglionPacket19Bit.dataStart,Ot.OBCIGanglionPacket19Bit.dataStop))]):e.multiPacketBuffer=e.rawDataPacket.slice(Ot.OBCIGanglionPacket19Bit.dataStart,Ot.OBCIGanglionPacket19Bit.dataStop)}function Gt(e){Wt(e);var t=e.multiPacketBuffer.toString();return e.multiPacketBuffer=null,{message:t}}function Ht(e,t){for(var n=1;n<3;n++)for(var r=0;r<4;r++)e.decompressedSamples[n][r]=e.decompressedSamples[n-1][r]-t[n-1][r]}function qt(e,t,n){var r;if(n)(r=gn(e)).channelDataCounts=t;else{r=vn(e);for(var a=0;a<Ot.OBCINumberOfChannelsGanglion;a++)r.channelData.push(t[a]*Ot.OBCIGanglionScaleFactorPerCountVolts)}return r.timestamp=Date.now(),r}function Xt(e){return parseInt(e.rawDataPacket[0])===Ot.OBCIGanglionByteIdUncompressed?function(e){e.lastSampleNumber=Ot.OBCIGanglionByteIdUncompressed;for(var t=0;t<4;t++)e.decompressedSamples[0][t]=jt.interpret24bitAsInt32(e.rawDataPacket.slice(1+3*t,1+3*t+3));return[qt(0,e.decompressedSamples[0],e.sendCounts)]}(e):function(e){e.lastSampleNumber=parseInt(e.rawDataPacket[0]);var t=[];if(e.lastSampleNumber<=Ot.OBCIGanglionByteId18Bit.max)switch(Ht(e,Qt(e.rawDataPacket.slice(Ot.OBCIGanglionPacket18Bit.dataStart,Ot.OBCIGanglionPacket18Bit.dataStop))),t.push(qt(2*e.lastSampleNumber-1,e.decompressedSamples[1],e.sendCounts)),t.push(qt(2*e.lastSampleNumber,e.decompressedSamples[2],e.sendCounts)),e.lastSampleNumber%10){case Ot.OBCIGanglionAccelAxisX:e.accelArray[0]=e.sendCounts?e.rawDataPacket.readInt8(Ot.OBCIGanglionPacket18Bit.auxByte-1):e.rawDataPacket.readInt8(Ot.OBCIGanglionPacket18Bit.auxByte-1)*Ot.OBCIGanglionAccelScaleFactor;break;case Ot.OBCIGanglionAccelAxisY:e.accelArray[1]=e.sendCounts?e.rawDataPacket.readInt8(Ot.OBCIGanglionPacket18Bit.auxByte-1):e.rawDataPacket.readInt8(Ot.OBCIGanglionPacket18Bit.auxByte-1)*Ot.OBCIGanglionAccelScaleFactor;break;case Ot.OBCIGanglionAccelAxisZ:e.accelArray[2]=e.sendCounts?e.rawDataPacket.readInt8(Ot.OBCIGanglionPacket18Bit.auxByte-1):e.rawDataPacket.readInt8(Ot.OBCIGanglionPacket18Bit.auxByte-1)*Ot.OBCIGanglionAccelScaleFactor,e.sendCounts?t[0].accelData=e.accelArray:t[0].accelDataCounts=e.accelArray}else Ht(e,$t(e.rawDataPacket.slice(Ot.OBCIGanglionPacket19Bit.dataStart,Ot.OBCIGanglionPacket19Bit.dataStop))),t.push(qt(2*(e.lastSampleNumber-100)-1,e.decompressedSamples[1],e.sendCounts)),t.push(qt(2*(e.lastSampleNumber-100),e.decompressedSamples[2],e.sendCounts));for(var n=0;n<Ot.OBCINumberOfChannelsGanglion;n++)e.decompressedSamples[0][n]=e.decompressedSamples[2][n];return t}(e)}function Kt(e){var t=0;return!0&e[2]&&(t=16383),t<<18|e[0]<<16|e[1]<<8|e[2]}function Yt(e){var t=0;return!0&e[2]&&(t=8191),t<<19|e[0]<<16|e[1]<<8|e[2]}function Qt(e){var t=new Array(Ot.OBCIGanglionSamplesPerPacket);t[0]=[0,0,0,0],t[1]=[0,0,0,0];for(var n,r=[],a=0;a<Ot.OBCIGanglionSamplesPerPacket;a++)r.push([0,0,0,0]);return n=new Uint8Array([e[0]>>6,(63&e[0])<<2|e[1]>>6,(63&e[1])<<2|e[2]>>6]),r[0][0]=Kt(n),n=new Uint8Array([(63&e[2])>>4,e[2]<<4|e[3]>>4,e[3]<<4|e[4]>>4]),r[0][1]=Kt(n),n=new Uint8Array([(15&e[4])>>2,e[4]<<6|e[5]>>2,e[5]<<6|e[6]>>2]),r[0][2]=Kt(n),n=new Uint8Array([3&e[6],e[7],e[8]]),r[0][3]=Kt(n),n=new Uint8Array([e[9]>>6,(63&e[9])<<2|e[10]>>6,(63&e[10])<<2|e[11]>>6]),r[1][0]=Kt(n),n=new Uint8Array([(63&e[11])>>4,e[11]<<4|e[12]>>4,e[12]<<4|e[13]>>4]),r[1][1]=Kt(n),n=new Uint8Array([(15&e[13])>>2,e[13]<<6|e[14]>>2,e[14]<<6|e[15]>>2]),r[1][2]=Kt(n),n=new Uint8Array([3&e[15],e[16],e[17]]),r[1][3]=Kt(n),r}function $t(e){var t=new Array(Ot.OBCIGanglionSamplesPerPacket);t[0]=[0,0,0,0],t[1]=[0,0,0,0];for(var n,r=[],a=0;a<Ot.OBCIGanglionSamplesPerPacket;a++)r.push([0,0,0,0]);return n=new Uint8Array([e[0]>>5,(31&e[0])<<3|e[1]>>5,(31&e[1])<<3|e[2]>>5]),r[0][0]=Yt(n),n=new Uint8Array([(31&e[2])>>2,e[2]<<6|e[3]>>2,e[3]<<6|e[4]>>2]),r[0][1]=Yt(n),n=new Uint8Array([(3&e[4])<<1|e[5]>>7,(127&e[5])<<1|e[6]>>7,(127&e[6])<<1|e[7]>>7]),r[0][2]=Yt(n),n=new Uint8Array([(127&e[7])>>4,(15&e[7])<<4|e[8]>>4,(15&e[8])<<4|e[9]>>4]),r[0][3]=Yt(n),n=new Uint8Array([(15&e[9])>>1,e[9]<<7|e[10]>>1,e[10]<<7|e[11]>>1]),r[1][0]=Yt(n),n=new Uint8Array([(1&e[11])<<2|e[12]>>6,e[12]<<2|e[13]>>6,e[13]<<2|e[14]>>6]),r[1][1]=Yt(n),n=new Uint8Array([(56&e[14])>>3,(7&e[14])<<5|(248&e[15])>>3,(7&e[15])<<5|(248&e[16])>>3]),r[1][2]=Yt(n),n=new Uint8Array([7&e[16],e[17],e[18]]),r[1][3]=Yt(n),r}function Jt(e){return{channel:e,P:{raw:-1,text:Ot.OBCIImpedanceTextInit},N:{raw:-1,text:Ot.OBCIImpedanceTextInit}}}function en(e){var t;try{switch(hn(e.rawDataPacket[Ot.OBCIPacketPositionStopByte])){case Ot.OBCIStreamPacketStandardAccel:t=jt.parsePacketStandardAccel(e);break;case Ot.OBCIStreamPacketStandardRawAux:t=jt.parsePacketStandardRawAux(e);break;case Ot.OBCIStreamPacketAccelTimeSyncSet:case Ot.OBCIStreamPacketAccelTimeSynced:t=jt.parsePacketTimeSyncedAccel(e);break;case Ot.OBCIStreamPacketRawAuxTimeSyncSet:case Ot.OBCIStreamPacketRawAuxTimeSynced:t=jt.parsePacketTimeSyncedRawAux(e);break;case Ot.OBCIStreamPacketImpedance:t=jt.parsePacketImpedance(e);break;default:t={error:"bad stop byte ".concat(e.rawDataPacket.slice(32,33).toString("hex")),valid:!1,rawDataPacket:e.rawDataPacket},e.verbose&&console.log(t.error)}}catch(ne){t={error:ne,valid:!1,rawDataPacket:e.rawDataPacket},e.verbose&&console.log(ne)}return t}function tn(e,t,n){var r=e.match(t);if(r){var a=parseInt(e.charAt(r.index+n));if(Number.isNaN(a))throw new Error(Ot.OBCIErrorInvalidData);return Boolean(a)}throw new Error(Ot.OBCIErrorMissingRegisterSetting)}function nn(e){return tn(e,Ot.OBCIRegisterQueryNameMISC1,21)}function rn(e,t){return tn(e,Ot.OBCIRegisterQueryNameBIASSENSP,20+3*t)}function an(e,t,n){var r=e.match(t);if(r){var a=parseInt(e.charAt(r.index+n)),i=parseInt(e.charAt(r.index+n+3)),o=parseInt(e.charAt(r.index+n+6));if(Number.isNaN(a)||Number.isNaN(i)||Number.isNaN(o))throw new Error(Ot.OBCIErrorInvalidData);return a<<2|i<<1|o}throw new Error(Ot.OBCIErrorMissingRegisterSetting)}function on(e,t){var n=Ot.OBCIRegisterQueryNameCHnSET[t.channelNumber];void 0===n&&(n=Ot.OBCIRegisterQueryNameCHnSET[t.channelNumber-Ot.OBCINumberOfChannelsCyton]),t.powerDown=tn(e,n,16),t.gain=Ot.gainForCommand(an(e,n,19)),t.inputType=Ot.inputTypeForCommand(an(e,n,31)),t.srb2=tn(e,n,28)}function sn(e){var t=Ot.OBCIPacketSize-1;if(e.byteLength!==Ot.OBCIPacketSize)throw new Error(Ot.OBCIErrorInvalidByteLength);return e.readUInt32BE(t-Ot.OBCIStreamPacketTimeByteSize)}function un(e){var t=Ot.OBCIPacketSize-1-Ot.OBCIStreamPacketTimeByteSize-2;if(e.rawDataPacket.byteLength!==Ot.OBCIPacketSize)throw new Error(Ot.OBCIErrorInvalidByteLength);var n=e.rawDataPacket[Ot.OBCIPacketPositionSampleNumber],r=jt.interpret16bitAsInt32(e.rawDataPacket.slice(t,t+2));switch(n%10){case Ot.OBCIAccelAxisX:return e.accelArray[0]=e.scale?r*Ut:r,!1;case Ot.OBCIAccelAxisY:return e.accelArray[1]=e.scale?r*Ut:r,!1;case Ot.OBCIAccelAxisZ:return e.accelArray[2]=e.scale?r*Ut:r,!0;default:return!1}}function cn(e){if(e.byteLength!==Ot.OBCIPacketSize)throw new Error(Ot.OBCIErrorInvalidByteLength);return Uint8Array.from(e.slice(Ot.OBCIPacketPositionTimeSyncAuxStart,Ot.OBCIPacketPositionTimeSyncAuxStop))}function ln(e){for(var t=[],n=0;n<3;n++){var r=2*n;t.push(jt.interpret16bitAsInt32(e.slice(r,r+2))*Ut)}return t}function dn(e){for(var t=[],n=0;n<3;n++){var r=2*n;t.push(jt.interpret16bitAsInt32(e.slice(r,r+2)))}return t}function fn(e){if(!Array.isArray(e.channelSettings))throw new Error("Error [getChannelDataArray]: Channel Settings must be an array!");e.hasOwnProperty("protocol")||(e.protocol=Ot.OBCIProtocolSerial);var t=[],n=e.channelSettings.length,r=e.rawDataPacket[Ot.OBCIPacketPositionSampleNumber],a=n===Ot.OBCINumberOfChannelsDaisy,i=Ot.OBCINumberOfChannelsCyton;a||(i=e.channelSettings.length);for(var o=0;o<i;o++){if(!e.channelSettings[o].hasOwnProperty("gain"))throw new Error("Error [getChannelDataArray]: Invalid channel settings object at index ".concat(o));if(!Ot.isNumber(e.channelSettings[o].gain))throw new Error("Error [getChannelDataArray]: Property gain of channelSettingsObject not or type Number");var s=0;if(e.protocol===Ot.OBCIProtocolSerial)s=xn(r)&&a?4.5/e.channelSettings[o+Ot.OBCINumberOfChannelsDefault].gain/(Math.pow(2,23)-1):4.5/e.channelSettings[o].gain/(Math.pow(2,23)-1);else if(e.protocol===Ot.OBCIProtocolWifi)s=a?e.lastSampleNumber===r?4.5/e.channelSettings[o+Ot.OBCINumberOfChannelsDefault].gain/(Math.pow(2,23)-1):4.5/e.channelSettings[o].gain/(Math.pow(2,23)-1):e.channelSettings.length===Ot.OBCINumberOfChannelsCyton?4.5/e.channelSettings[o].gain/(Math.pow(2,23)-1):Ot.OBCIGanglionScaleFactorPerCountVolts;else{if(e.protocol!==Ot.OBCIProtocolBLE)throw new Error("Error [getChannelDataArray]: Invalid protocol must be wifi or serial");s=4.5/e.channelSettings[o].gain/(Math.pow(2,23)-1)}t.push(s*jt.interpret24bitAsInt32(e.rawDataPacket.slice(3*o+Ot.OBCIPacketPositionChannelDataStart,3*o+Ot.OBCIPacketPositionChannelDataStart+3)))}return t}function pn(e){if(!Array.isArray(e.channelSettings))throw new Error("Error [getChannelDataArrayNoScale]: Channel Settings must be an array!");var t=[],n=e.channelSettings.length;n>Ot.OBCINumberOfChannelsDefault&&(n=Ot.OBCINumberOfChannelsDefault);for(var r=0;r<n;r++)t.push(jt.interpret24bitAsInt32(e.rawDataPacket.slice(3*r+Ot.OBCIPacketPositionChannelDataStart,3*r+Ot.OBCIPacketPositionChannelDataStart+3)));return t}function hn(e){return 15&e}function mn(e){return e||0===e?e>255&&(e=255):e=69,e}function vn(e){return e||0===e?e>255&&(e=255):e=0,{startByte:Ot.OBCIByteStart,sampleNumber:e,channelData:[],accelData:[],auxData:null,stopByte:Ot.OBCIByteStop,boardTime:0,timestamp:0,valid:!0}}function gn(e){return e||0===e?e>255&&(e=255):e=0,{startByte:Ot.OBCIByteStart,sampleNumber:e,channelDataCounts:[],accelDataCounts:[],auxData:null,stopByte:Ot.OBCIByteStop,boardTime:0,timestamp:0,valid:!0}}function yn(e){var t=new Uint8Array(3);t.fill(0);var n=e/(.1875/(Math.pow(2,23)-1));return n=Math.floor(n),t[2]=255&n,t[1]=(65280&n)>>8,t[0]=(n&255<<16)>>16,t}function bn(e){var t=new Uint8Array(2);t.fill(0);var n=e/Ut;return n=Math.floor(n),t[1]=255&n,t[0]=(65280&n)>>8,t}function xn(e){return e%2==0}function kn(e,t,n){var r=new Uint8Array(Ot.OBCIPacketSize);r.fill(0),r[0]=Ot.OBCIByteStart,r[1]=e.sampleNumber;for(var a=0;a<Ot.OBCINumberOfChannelsDefault;a++)yn(e.channelData[a]).copy(r,2+3*a);return n.copy(r,26),r.writeInt32BE(t,28),r[Ot.OBCIPacketSize-1]=Sn(Ot.OBCIStreamPacketRawAuxTimeSynced),r}function wn(e,t){var n=new Uint8Array(Ot.OBCIPacketSize);n.fill(0),n[0]=Ot.OBCIByteStart,n[1]=e.sampleNumber;for(var r=0;r<Ot.OBCINumberOfChannelsDefault;r++)yn(e.channelData[r]).copy(n,2+3*r);return n.writeInt32BE(t,28),n[Ot.OBCIPacketSize-1]=Sn(Ot.OBCIStreamPacketAccelTimeSynced),n}function Sn(e){return(e<0||e>15)&&(e=0),Ot.OBCIByteStop|e}function Cn(e){return(240&e)===Ot.OBCIByteStop}var _n=["channelData"];function In(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?In(Object(n),!0).forEach((function(t){le(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):In(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var En=function(e){var t=e.channelData;return Tn(Tn({},function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,_n)),{},{data:t})},Nn={reader:"2d30c082-f39f-4ce6-923f-3484ea480596",writer:"2d30c083-f39f-4ce6-923f-3484ea480596",connection:"2d30c084-f39f-4ce6-923f-3484ea480596"},On={filters:[{namePrefix:"Ganglion-"}],optionalServices:[65156]},An={start:"b",accelData:"n"};function Rn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rn(Object(n),!0).forEach((function(t){le(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dn(e){var t=parseInt(e.rawDataPacket[0]);if(t<=Ot.OBCIGanglionByteId19Bit.max)return Xt(e);switch(t){case Ot.OBCIGanglionByteIdMultiPacket:return processMultiBytePacket(e);case Ot.OBCIGanglionByteIdMultiPacketStop:return processMultiBytePacketStop(e);case Ot.OBCIGanglionByteIdImpedanceChannel1:case Ot.OBCIGanglionByteIdImpedanceChannel2:case Ot.OBCIGanglionByteIdImpedanceChannel3:case Ot.OBCIGanglionByteIdImpedanceChannel4:case Ot.OBCIGanglionByteIdImpedanceChannelReference:return processImpedanceData(e);default:return null}}var Bn=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};function r(e){return{channelNumber:e,powerDown:!1,gain:24,inputType:"normal",bias:!0,srb2:!0,srb1:!1}}me(this,e),this.options=n,this.gatt=null,this.device=null,this.deviceName=null,this.service=null,this.characteristics=null,this.onDisconnect$=new tt,this.boardName="ganglion",this.channelSize=4;var a=function(e){for(var t=[],n=0;n<e;n++)t.push(r(n));return t};function i(e){for(var t=[],n=0;n<3;n++)t.push(new Array(e));return t}this.rawDataPacketToSample={accelArray:[0,0,0],channelSettings:a(4),decompressedSamples:i(4),lastSampleNumber:0,rawDataPacket:new Uint8Array(33).buffer,rawDataPackets:[],scale:!0,sendCounts:!1,timeOffset:0,verbose:!1},this.connectionStatus=new rt(!1),this.stream=(new tt).pipe(lt((function(e){return t.eventToBufferMapper(e)})),Ct((function(e){return t.setRawDataPacket(e)})),lt((function(){return Dn(t.rawDataPacketToSample)})),ft((function(e){return e})),lt(En),St(this.onDisconnect$)),this.accelData=this.stream.pipe(yt((function(e){return e.accelData.length})))}var t,n,r,a;return t=e,n=[{key:"eventToBufferMapper",value:function(e){return new Uint8Array(e.target.value.buffer)}},{key:"setRawDataPacket",value:function(e){this.rawDataPacketToSample.rawDataPacket=e}},{key:"connect",value:(a=he(ye.mark((function e(){return ye.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.bluetooth.requestDevice(On);case 2:return this.device=e.sent,this.addDisconnectedEvent(),e.next=6,this.device.gatt.connect();case 6:return this.gatt=e.sent,this.deviceName=this.gatt.device.name,e.next=10,this.gatt.getPrimaryService(65156);case 10:return this.service=e.sent,e.t0=this,e.next=14,this.service.getCharacteristics();case 14:e.t1=e.sent,e.t0.setCharacteristics.call(e.t0,e.t1),this.connectionStatus.next(!0);case 17:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"setCharacteristics",value:function(e){this.characteristics=Object.entries(Nn).reduce((function(t,n){var r=fe(n,2),a=r[0],i=r[1];return Pn(Pn({},t),{},le({},a,e.find((function(e){return e.uuid===i}))))}),{})}},{key:"start",value:(r=he(ye.mark((function e(){var t,n,r,a,i=this;return ye.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.characteristics,n=t.reader,r=t.writer,a=Object.entries(An).reduce((function(e,t){var n=fe(t,2),r=n[0],a=n[1];return Pn(Pn({},e),{},le({},r,(new TextEncoder).encode(a)))}),{}),n.startNotifications(),n.addEventListener("characteristicvaluechanged",(function(e){i.stream.next(e)})),!this.options.accelData){e.next=8;break}return e.next=7,r.writeValue(a.accelData);case 7:n.readValue();case 8:return e.next=10,r.writeValue(a.start);case 10:n.readValue();case 11:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"addDisconnectedEvent",value:function(){var e=this;vt(this.device,"gattserverdisconnected").pipe(function(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?yt((function(t,n){return e(t,n,r)})):qe,xt(1),n?bt(t):kt((function(){return new ct})))}}()).subscribe((function(){e.gatt=null,e.device=null,e.deviceName=null,e.service=null,e.characteristics=null,e.connectionStatus.next(!1)}))}},{key:"disconnect",value:function(){this.gatt&&(this.onDisconnect$.next(),this.gatt.disconnect())}}],n&&ve(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Mn=["FP1","FP2","C3","C4"],Fn={label:"ganglion",device:Bn,onconnect:function(e){return ne(void 0,void 0,void 0,(0,g.Z)().mark((function t(){var n;return(0,g.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.device,t.next=3,n.start();case 3:n.stream.subscribe((function(t){var n={};t.data.forEach((function(e,t){return n[Mn[t]]=e})),e.ondata(n,t.timestamp)}));case 4:case"end":return t.stop()}}),t)})))},protocols:["bluetooth"]};var Ln="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:{};function Vn(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})})),t}var zn={},Zn=function(e,t){return Zn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Zn(e,t)};function Un(e,t){function n(){this.constructor=e}Zn(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function jn(e){return"function"==typeof e}var Wn=!1,Gn={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack,Wn=e},get useDeprecatedSynchronousErrorHandling(){return Wn}};function Hn(e){setTimeout((function(){throw e}),0)}var qn={closed:!0,next:function(e){},error:function(e){if(Gn.useDeprecatedSynchronousErrorHandling)throw e;Hn(e)},complete:function(){}},Xn=Array.isArray||function(e){return e&&"number"==typeof e.length};function Kn(e){return null!==e&&"object"==typeof e}var Yn=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),Qn=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n=this,r=n._parentOrParents,a=n._ctorUnsubscribe,i=n._unsubscribe,o=n._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof e)r.remove(this);else if(null!==r)for(var s=0;s<r.length;++s)r[s].remove(this);if(jn(i)){a&&(this._unsubscribe=void 0);try{i.call(this)}catch(e){t=e instanceof Yn?$n(e.errors):[e]}}if(Xn(o)){s=-1;for(var u=o.length;++s<u;){var c=o[s];if(Kn(c))try{c.unsubscribe()}catch(e){t=t||[],e instanceof Yn?t=t.concat($n(e.errors)):t.push(e)}}}if(t)throw new Yn(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var a=n._parentOrParents;if(null===a)n._parentOrParents=this;else if(a instanceof e){if(a===this)return n;n._parentOrParents=[a,this]}else{if(-1!==a.indexOf(this))return n;a.push(this)}var i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();function $n(e){return e.reduce((function(e,t){return e.concat(t instanceof Yn?t.errors:t)}),[])}var Jn="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),er=function(e){function t(n,r,a){var i=e.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=qn;break;case 1:if(!n){i.destination=qn;break}if("object"==typeof n){n instanceof t?(i.syncErrorThrowable=n.syncErrorThrowable,i.destination=n,n.add(i)):(i.syncErrorThrowable=!0,i.destination=new tr(i,n));break}default:i.syncErrorThrowable=!0,i.destination=new tr(i,n,r,a)}return i}return Un(t,e),t.prototype[Jn]=function(){return this},t.create=function(e,n,r){var a=new t(e,n,r);return a.syncErrorThrowable=!1,a},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(Qn),tr=function(e){function t(t,n,r,a){var i,o=e.call(this)||this;o._parentSubscriber=t;var s=o;return jn(n)?i=n:n&&(i=n.next,r=n.error,a=n.complete,n!==qn&&(jn((s=Object.create(n)).unsubscribe)&&o.add(s.unsubscribe.bind(s)),s.unsubscribe=o.unsubscribe.bind(o))),o._context=s,o._next=i,o._error=r,o._complete=a,o}return Un(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;Gn.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=Gn.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):Hn(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;Hn(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};Gn.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),Gn.useDeprecatedSynchronousErrorHandling)throw e;Hn(e)}},t.prototype.__tryOrSetError=function(e,t,n){if(!Gn.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return Gn.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(Hn(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(er);function nr(e){for(;e;){var t=e,n=t.closed,r=t.destination,a=t.isStopped;if(n||a)return!1;e=r&&r instanceof er?r:null}return!0}var rr="function"==typeof Symbol&&Symbol.observable||"@@observable";function ar(e){return e}function ir(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return or(e)}function or(e){return 0===e.length?ar:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var sr=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,a=function(e,t,n){if(e){if(e instanceof er)return e;if(e[Jn])return e[Jn]()}return e||t||n?new er(e,t,n):new er(qn)}(e,t,n);if(r?a.add(r.call(a,this.source)):a.add(this.source||Gn.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),Gn.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(Ln){Gn.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=Ln),nr(e)?e.error(Ln):console.warn(Ln)}},e.prototype.forEach=function(e,t){var n=this;return new(t=ur(t))((function(t,r){var a;a=n.subscribe((function(t){try{e(t)}catch(e){r(e),a&&a.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[rr]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:or(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=ur(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function ur(e){if(e||(e=Gn.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var cr=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),lr=function(e){function t(t,n){var r=e.call(this)||this;return r.subject=t,r.subscriber=n,r.closed=!1,r}return Un(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(Qn),dr=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return Un(t,e),t}(er),fr=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return Un(t,e),t.prototype[Jn]=function(){return new dr(this)},t.prototype.lift=function(e){var t=new pr(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new cr;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),a=0;a<n;a++)r[a].next(e)},t.prototype.error=function(e){if(this.closed)throw new cr;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),a=0;a<n;a++)r[a].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new cr;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new cr;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new cr;return this.hasError?(e.error(this.thrownError),Qn.EMPTY):this.isStopped?(e.complete(),Qn.EMPTY):(this.observers.push(e),new lr(this,e))},t.prototype.asObservable=function(){var e=new sr;return e.source=this,e},t.create=function(e,t){return new pr(e,t)},t}(sr),pr=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return Un(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):Qn.EMPTY},t}(fr);function hr(){return function(e){return e.lift(new mr(e))}}var mr=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var r=new vr(e,n),a=t.subscribe(r);return r.closed||(r.connection=n.connect()),a},e}(),vr=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return Un(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},t}(er),gr=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return Un(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new Qn).add(this.source.subscribe(new br(this.getSubject(),this))),e.closed&&(this._connection=null,e=Qn.EMPTY)),e},t.prototype.refCount=function(){return hr()(this)},t}(sr),yr=function(){var e=gr.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}}(),br=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return Un(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(dr),xr=function(){function e(e,t,n,r){this.keySelector=e,this.elementSelector=t,this.durationSelector=n,this.subjectSelector=r}return e.prototype.call=function(e,t){return t.subscribe(new kr(e,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},e}(),kr=function(e){function t(t,n,r,a,i){var o=e.call(this,t)||this;return o.keySelector=n,o.elementSelector=r,o.durationSelector=a,o.subjectSelector=i,o.groups=null,o.attemptedToUnsubscribe=!1,o.count=0,o}return Un(t,e),t.prototype._next=function(e){var t;try{t=this.keySelector(e)}catch(e){return void this.error(e)}this._group(e,t)},t.prototype._group=function(e,t){var n=this.groups;n||(n=this.groups=new Map);var r,a=n.get(t);if(this.elementSelector)try{r=this.elementSelector(e)}catch(e){this.error(e)}else r=e;if(!a){a=this.subjectSelector?this.subjectSelector():new fr,n.set(t,a);var i=new Sr(t,a,this);if(this.destination.next(i),this.durationSelector){var o=void 0;try{o=this.durationSelector(new Sr(t,a))}catch(e){return void this.error(e)}this.add(o.subscribe(new wr(t,a,this)))}}a.closed||a.next(r)},t.prototype._error=function(e){var t=this.groups;t&&(t.forEach((function(t,n){t.error(e)})),t.clear()),this.destination.error(e)},t.prototype._complete=function(){var e=this.groups;e&&(e.forEach((function(e,t){e.complete()})),e.clear()),this.destination.complete()},t.prototype.removeGroup=function(e){this.groups.delete(e)},t.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&e.prototype.unsubscribe.call(this))},t}(er),wr=function(e){function t(t,n,r){var a=e.call(this,n)||this;return a.key=t,a.group=n,a.parent=r,a}return Un(t,e),t.prototype._next=function(e){this.complete()},t.prototype._unsubscribe=function(){var e=this.parent,t=this.key;this.key=this.parent=null,e&&e.removeGroup(t)},t}(er),Sr=function(e){function t(t,n,r){var a=e.call(this)||this;return a.key=t,a.groupSubject=n,a.refCountSubscription=r,a}return Un(t,e),t.prototype._subscribe=function(e){var t=new Qn,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&t.add(new Cr(n)),t.add(r.subscribe(e)),t},t}(sr),Cr=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,t.count++,n}return Un(t,e),t.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(e.prototype.unsubscribe.call(this),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},t}(Qn),_r=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return Un(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new cr;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(fr),Ir=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return Un(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(e){n=!0,r=!!e&&e||new Error(e)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(function(e){function t(t,n){return e.call(this)||this}return Un(t,e),t.prototype.schedule=function(e,t){return this},t}(Qn)),Tr=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return Un(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}(Ir),Er=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}(),Nr=function(e){function t(n,r){void 0===r&&(r=Er.now);var a=e.call(this,n,(function(){return t.delegate&&t.delegate!==a?t.delegate.now():r()}))||this;return a.actions=[],a.active=!1,a.scheduled=void 0,a}return Un(t,e),t.prototype.schedule=function(n,r,a){return void 0===r&&(r=0),t.delegate&&t.delegate!==this?t.delegate.schedule(n,r,a):e.prototype.schedule.call(this,n,r,a)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(Er),Or=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Un(t,e),t}(Nr))(Tr),Ar=Or,Rr=new sr((function(e){return e.complete()}));function Pr(e){return e?function(e){return new sr((function(t){return e.schedule((function(){return t.complete()}))}))}(e):Rr}function Dr(e){return e&&"function"==typeof e.schedule}var Br,Mr=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}};function Fr(e,t){return new sr((function(n){var r=new Qn,a=0;return r.add(t.schedule((function(){a!==e.length?(n.next(e[a++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}function Lr(e,t){return t?Fr(e,t):new sr(Mr(e))}function Vr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return Dr(n)?(e.pop(),Fr(e,n)):Lr(e)}function zr(e,t){return new sr(t?function(n){return t.schedule(Zr,0,{error:e,subscriber:n})}:function(t){return t.error(e)})}function Zr(e){var t=e.error;e.subscriber.error(t)}Br||(Br={});var Ur=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},e.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){switch(this.kind){case"N":return Vr(this.value);case"E":return zr(this.error);case"C":return Pr()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}(),jr=function(){function e(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return t.subscribe(new Wr(e,this.scheduler,this.delay))},e}(),Wr=function(e){function t(t,n,r){void 0===r&&(r=0);var a=e.call(this,t)||this;return a.scheduler=n,a.delay=r,a}return Un(t,e),t.dispatch=function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.destination.add(this.scheduler.schedule(t.dispatch,this.delay,new Gr(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(Ur.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(Ur.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(Ur.createComplete()),this.unsubscribe()},t}(er),Gr=function(e,t){this.notification=e,this.destination=t},Hr=function(e){function t(t,n,r){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var a=e.call(this)||this;return a.scheduler=r,a._events=[],a._infiniteTimeWindow=!1,a._bufferSize=t<1?1:t,a._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(a._infiniteTimeWindow=!0,a.next=a.nextInfiniteTimeWindow):a.next=a.nextTimeWindow,a}return Un(t,e),t.prototype.nextInfiniteTimeWindow=function(t){if(!this.isStopped){var n=this._events;n.push(t),n.length>this._bufferSize&&n.shift()}e.prototype.next.call(this,t)},t.prototype.nextTimeWindow=function(t){this.isStopped||(this._events.push(new qr(this._getNow(),t)),this._trimBufferThenGetEvents()),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),a=this.scheduler,i=r.length;if(this.closed)throw new cr;if(this.isStopped||this.hasError?t=Qn.EMPTY:(this.observers.push(e),t=new lr(this,e)),a&&e.add(e=new Wr(e,a)),n)for(var o=0;o<i&&!e.closed;o++)e.next(r[o]);else for(o=0;o<i&&!e.closed;o++)e.next(r[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||Ar).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,a=r.length,i=0;i<a&&!(e-r[i].time<n);)i++;return a>t&&(i=Math.max(i,a-t)),i>0&&r.splice(0,i),r},t}(fr),qr=function(e,t){this.time=e,this.value=t},Xr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.value=null,t.hasNext=!1,t.hasCompleted=!1,t}return Un(t,e),t.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),Qn.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),Qn.EMPTY):e.prototype._subscribe.call(this,t)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(t){this.hasCompleted||e.prototype.error.call(this,t)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(fr),Kr=1,Yr=Promise.resolve(),Qr={};function $r(e){return e in Qr&&(delete Qr[e],!0)}var Jr=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return Un(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=function(e){var t=Kr++;return Qr[t]=!0,Yr.then((function(){return $r(t)&&e()})),t}(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(function(e){$r(e)}(n),t.scheduled=void 0)},t}(Ir),ea=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Un(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,a=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<a&&(e=n.shift()));if(this.active=!1,t){for(;++r<a&&(e=n.shift());)e.unsubscribe();throw t}},t}(Nr),ta=new ea(Jr),na=ta,ra=new Nr(Ir),aa=ra,ia=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return Un(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame((function(){return t.flush(null)}))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(cancelAnimationFrame(n),t.scheduled=void 0)},t}(Ir),oa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Un(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,a=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<a&&(e=n.shift()));if(this.active=!1,t){for(;++r<a&&(e=n.shift());)e.unsubscribe();throw t}},t}(Nr),sa=new oa(ia),ua=sa,ca=function(e){function t(t,n){void 0===t&&(t=la),void 0===n&&(n=Number.POSITIVE_INFINITY);var r=e.call(this,t,(function(){return r.frame}))||this;return r.maxFrames=n,r.frame=0,r.index=-1,r}return Un(t,e),t.prototype.flush=function(){for(var e,t,n=this.actions,r=this.maxFrames;(t=n[0])&&t.delay<=r&&(n.shift(),this.frame=t.delay,!(e=t.execute(t.state,t.delay))););if(e){for(;t=n.shift();)t.unsubscribe();throw e}},t.frameTimeFactor=10,t}(Nr),la=function(e){function t(t,n,r){void 0===r&&(r=t.index+=1);var a=e.call(this,t,n)||this;return a.scheduler=t,a.work=n,a.index=r,a.active=!0,a.index=t.index=r,a}return Un(t,e),t.prototype.schedule=function(n,r){if(void 0===r&&(r=0),!this.id)return e.prototype.schedule.call(this,n,r);this.active=!1;var a=new t(this.scheduler,this.work);return this.add(a),a.schedule(n,r)},t.prototype.requestAsyncId=function(e,n,r){void 0===r&&(r=0),this.delay=e.frame+r;var a=e.actions;return a.push(this),a.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,t,n){},t.prototype._execute=function(t,n){if(!0===this.active)return e.prototype._execute.call(this,t,n)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(Ir);function da(){}var fa=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}(),pa=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}(),ha=function(){function e(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return e.prototype=Object.create(Error.prototype),e}();function ma(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new va(e,t))}}var va=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new ga(e,this.project,this.thisArg))},e}(),ga=function(e){function t(t,n,r){var a=e.call(this,t)||this;return a.project=n,a.count=0,a.thisArg=r||a,a}return Un(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(er);function ya(e){var t=this,n=e.args,r=e.subscriber,a=e.params,i=a.callbackFunc,o=a.context,s=a.scheduler,u=a.subject;if(!u){u=a.subject=new Xr;try{i.apply(o,n.concat([function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.length<=1?e[0]:e;t.add(s.schedule(ba,0,{value:r,subject:u}))}]))}catch(e){u.error(e)}}this.add(u.subscribe(r))}function ba(e){var t=e.value,n=e.subject;n.next(t),n.complete()}function xa(e){var t=this,n=e.params,r=e.subscriber,a=e.context,i=n.callbackFunc,o=n.args,s=n.scheduler,u=n.subject;if(!u){u=n.subject=new Xr;try{i.apply(a,o.concat([function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.shift();if(r)t.add(s.schedule(wa,0,{err:r,subject:u}));else{var a=e.length<=1?e[0]:e;t.add(s.schedule(ka,0,{value:a,subject:u}))}}]))}catch(e){this.add(s.schedule(wa,0,{err:e,subject:u}))}}this.add(u.subscribe(r))}function ka(e){var t=e.value,n=e.subject;n.next(t),n.complete()}function wa(e){var t=e.err;e.subject.error(t)}var Sa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Un(t,e),t.prototype.notifyNext=function(e,t,n,r,a){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(er),Ca=function(e){function t(t,n,r){var a=e.call(this)||this;return a.parent=t,a.outerValue=n,a.outerIndex=r,a.index=0,a}return Un(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(er);var _a="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",Ia=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function Ta(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var Ea=function(e){if(e&&"function"==typeof e[rr])return r=e,function(e){var t=r[rr]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(Ia(e))return Mr(e);if(Ta(e))return n=e,function(e){return n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,Hn),e};if(e&&"function"==typeof e[_a])return t=e,function(e){for(var n=t[_a]();;){var r=void 0;try{r=n.next()}catch(t){return e.error(t),e}if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add((function(){n.return&&n.return()})),e};var t,n,r,a=Kn(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+a+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function Na(e,t,n,r,a){if(void 0===a&&(a=new Ca(e,n,r)),!a.closed)return t instanceof sr?t.subscribe(a):Ea(t)(a)}var Oa={},Aa=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new Ra(e,this.resultSelector))},e}(),Ra=function(e){function t(t,n){var r=e.call(this,t)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return Un(t,e),t.prototype._next=function(e){this.values.push(Oa),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++){var r=e[n];this.add(Na(this,r,void 0,n))}}},t.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n){var r=this.values,a=r[n],i=this.toRespond?a===Oa?--this.toRespond:this.toRespond:0;r[n]=t,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))},t.prototype._tryResultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(Sa);function Pa(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[rr]}(e))return function(e,t){return new sr((function(n){var r=new Qn;return r.add(t.schedule((function(){var a=e[rr]();r.add(a.subscribe({next:function(e){r.add(t.schedule((function(){return n.next(e)})))},error:function(e){r.add(t.schedule((function(){return n.error(e)})))},complete:function(){r.add(t.schedule((function(){return n.complete()})))}}))}))),r}))}(e,t);if(Ta(e))return function(e,t){return new sr((function(n){var r=new Qn;return r.add(t.schedule((function(){return e.then((function(e){r.add(t.schedule((function(){n.next(e),r.add(t.schedule((function(){return n.complete()})))})))}),(function(e){r.add(t.schedule((function(){return n.error(e)})))}))}))),r}))}(e,t);if(Ia(e))return Fr(e,t);if(function(e){return e&&"function"==typeof e[_a]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new sr((function(n){var r,a=new Qn;return a.add((function(){r&&"function"==typeof r.return&&r.return()})),a.add(t.schedule((function(){r=e[_a](),a.add(t.schedule((function(){if(!n.closed){var e,t;try{var a=r.next();e=a.value,t=a.done}catch(e){return void n.error(e)}t?n.complete():(n.next(e),this.schedule())}})))}))),a}))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}function Da(e,t){return t?Pa(e,t):e instanceof sr?e:new sr(Ea(e))}var Ba=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,n}return Un(t,e),t.prototype._next=function(e){this.parent.notifyNext(e)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(er),Ma=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Un(t,e),t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(er);function Fa(e,t){if(!t.closed){if(e instanceof sr)return e.subscribe(t);var n;try{n=Ea(e)(t)}catch(e){t.error(e)}return n}}function La(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof t?function(r){return r.pipe(La((function(n,r){return Da(e(n,r)).pipe(ma((function(e,a){return t(n,e,r,a)})))}),n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new Va(e,n))})}var Va=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new za(e,this.project,this.concurrent))},e}(),za=function(e){function t(t,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var a=e.call(this,t)||this;return a.project=n,a.concurrent=r,a.hasCompleted=!1,a.buffer=[],a.active=0,a.index=0,a}return Un(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t)},t.prototype._innerSub=function(e){var t=new Ba(this),n=this.destination;n.add(t);var r=Fa(e,t);r!==t&&n.add(r)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(Ma),Za=La;function Ua(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),La(ar,e)}function ja(){return Ua(1)}function Wa(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ja()(Vr.apply(void 0,e))}function Ga(e){return new sr((function(t){var n;try{n=e()}catch(e){return void t.error(e)}return(n?Da(n):Pr()).subscribe(t)}))}function Ha(e,t){return new sr((function(n){var r=e.length;if(0!==r)for(var a=new Array(r),i=0,o=0,s=function(s){var u=Da(e[s]),c=!1;n.add(u.subscribe({next:function(e){c||(c=!0,o++),a[s]=e},error:function(e){return n.error(e)},complete:function(){++i!==r&&c||(o===r&&n.next(t?t.reduce((function(e,t,n){return e[t]=a[n],e}),{}):a),n.complete())}}))},u=0;u<r;u++)s(u);else n.complete()}))}function qa(e,t,n,r,a){var i;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(e)){var o=e;e.addEventListener(t,n,a),i=function(){return o.removeEventListener(t,n,a)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(e)){var s=e;e.on(t,n),i=function(){return s.off(t,n)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(e)){var u=e;e.addListener(t,n),i=function(){return u.removeListener(t,n)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var c=0,l=e.length;c<l;c++)qa(e[c],t,n,r,a)}r.add(i)}function Xa(e){var t=e.subscriber,n=e.condition;if(!t.closed){if(e.needIterate)try{e.state=e.iterate(e.state)}catch(e){return void t.error(e)}else e.needIterate=!0;if(n){var r=void 0;try{r=n(e.state)}catch(e){return void t.error(e)}if(!r)return void t.complete();if(t.closed)return}var a;try{a=e.resultSelector(e.state)}catch(e){return void t.error(e)}if(!t.closed&&(t.next(a),!t.closed))return this.schedule(e)}}function Ka(e){return!Xn(e)&&e-parseFloat(e)+1>=0}function Ya(e){var t=e.subscriber,n=e.counter,r=e.period;t.next(n),this.schedule({subscriber:t,counter:n+1,period:r},r)}function Qa(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Number.POSITIVE_INFINITY,r=null,a=e[e.length-1];return Dr(a)?(r=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(n=e.pop())):"number"==typeof a&&(n=e.pop()),null===r&&1===e.length&&e[0]instanceof sr?e[0]:Ua(n)(Lr(e,r))}var $a=new sr(da);function Ja(e){var t=e.keys,n=e.index,r=e.subscriber,a=e.subscription,i=e.obj;if(!r.closed)if(n<t.length){var o=t[n];r.next([o,i[o]]),a.add(this.schedule({keys:t,index:n+1,subscriber:r,subscription:a,obj:i}))}else r.complete()}function ei(e,t){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=e,n.thisArg=t,n}function ti(e,t){return function(n){return n.lift(new ni(e,t))}}var ni=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new ri(e,this.predicate,this.thisArg))},e}(),ri=function(e){function t(t,n,r){var a=e.call(this,t)||this;return a.predicate=n,a.thisArg=r,a.count=0,a}return Un(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(er);function ai(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){if(!Xn(e[0]))return e[0];e=e[0]}return Lr(e,void 0).lift(new ii)}var ii=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new oi(e))},e}(),oi=function(e){function t(t){var n=e.call(this,t)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return Un(t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var n=0;n<t&&!this.hasFirst;n++){var r=Na(this,e[n],void 0,n);this.subscriptions&&this.subscriptions.push(r),this.add(r)}this.observables=null}},t.prototype.notifyNext=function(e,t,n){if(!this.hasFirst){this.hasFirst=!0;for(var r=0;r<this.subscriptions.length;r++)if(r!==n){var a=this.subscriptions[r];a.unsubscribe(),this.remove(a)}this.subscriptions=null}this.destination.next(t)},t}(Sa);function si(e){var t=e.start,n=e.index,r=e.count,a=e.subscriber;n>=r?a.complete():(a.next(t),a.closed||(e.index=n+1,e.start=t+1,this.schedule(e)))}function ui(e,t,n){void 0===e&&(e=0);var r=-1;return Ka(t)?r=Number(t)<1?1:Number(t):Dr(t)&&(n=t),Dr(n)||(n=aa),new sr((function(t){var a=Ka(e)?e:+e-n.now();return n.schedule(ci,a,{index:0,period:r,subscriber:t})}))}function ci(e){var t=e.index,n=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}function li(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return"function"==typeof n&&e.pop(),Lr(e,void 0).lift(new di(n))}var di=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new fi(e,this.resultSelector))},e}(),fi=function(e){function t(t,n,r){var a=e.call(this,t)||this;return a.resultSelector=n,a.iterators=[],a.active=0,a.resultSelector="function"==typeof n?n:void 0,a}return Un(t,e),t.prototype._next=function(e){var t=this.iterators;Xn(e)?t.push(new hi(e)):"function"==typeof e[_a]?t.push(new pi(e[_a]())):t.push(new mi(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(var n=0;n<t;n++){var r=e[n];r.stillUnsubscribed?this.destination.add(r.subscribe()):this.active--}}else this.destination.complete()},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,n=this.destination,r=0;r<t;r++)if("function"==typeof(o=e[r]).hasValue&&!o.hasValue())return;var a=!1,i=[];for(r=0;r<t;r++){var o,s=(o=e[r]).next();if(o.hasCompleted()&&(a=!0),s.done)return void n.complete();i.push(s.value)}this.resultSelector?this._tryresultSelector(i):n.next(i),a&&n.complete()},t.prototype._tryresultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(er),pi=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return Boolean(e&&e.done)},e}(),hi=function(){function e(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return e.prototype[_a]=function(){return this},e.prototype.next=function(e){var t=this.index++,n=this.array;return t<this.length?{value:n[t],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),mi=function(e){function t(t,n,r){var a=e.call(this,t)||this;return a.parent=n,a.observable=r,a.stillUnsubscribed=!0,a.buffer=[],a.isComplete=!1,a}return Un(t,e),t.prototype[_a]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e){this.buffer.push(e),this.parent.checkIterators()},t.prototype.subscribe=function(){return Fa(this.observable,new Ba(this))},t}(Ma),vi=Object.freeze({__proto__:null,Observable:sr,ConnectableObservable:gr,GroupedObservable:Sr,observable:rr,Subject:fr,BehaviorSubject:_r,ReplaySubject:Hr,AsyncSubject:Xr,asap:na,asapScheduler:ta,async:aa,asyncScheduler:ra,queue:Ar,queueScheduler:Or,animationFrame:ua,animationFrameScheduler:sa,VirtualTimeScheduler:ca,VirtualAction:la,Scheduler:Er,Subscription:Qn,Subscriber:er,Notification:Ur,get NotificationKind(){return Br},pipe:ir,noop:da,identity:ar,isObservable:function(e){return!!e&&(e instanceof sr||"function"==typeof e.lift&&"function"==typeof e.subscribe)},ArgumentOutOfRangeError:fa,EmptyError:pa,ObjectUnsubscribedError:cr,UnsubscriptionError:Yn,TimeoutError:ha,bindCallback:function e(t,n,r){if(n){if(!Dr(n))return function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return e(t,r).apply(void 0,a).pipe(ma((function(e){return Xn(e)?n.apply(void 0,e):n(e)})))};r=n}return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var a,i=this,o={context:i,subject:a,callbackFunc:t,scheduler:r};return new sr((function(n){if(r){var s={args:e,subscriber:n,params:o};return r.schedule(ya,0,s)}if(!a){a=new Xr;try{t.apply(i,e.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];a.next(e.length<=1?e[0]:e),a.complete()}]))}catch(e){nr(a)?a.error(e):console.warn(e)}}return a.subscribe(n)}))}},bindNodeCallback:function e(t,n,r){if(n){if(!Dr(n))return function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return e(t,r).apply(void 0,a).pipe(ma((function(e){return Xn(e)?n.apply(void 0,e):n(e)})))};r=n}return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var a={subject:void 0,args:e,callbackFunc:t,scheduler:r,context:this};return new sr((function(n){var i=a.context,o=a.subject;if(r)return r.schedule(xa,0,{params:a,subscriber:n,context:i});if(!o){o=a.subject=new Xr;try{t.apply(i,e.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.shift();n?o.error(n):(o.next(e.length<=1?e[0]:e),o.complete())}]))}catch(e){nr(o)?o.error(e):console.warn(e)}}return o.subscribe(n)}))}},combineLatest:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=void 0,r=void 0;return Dr(e[e.length-1])&&(r=e.pop()),"function"==typeof e[e.length-1]&&(n=e.pop()),1===e.length&&Xn(e[0])&&(e=e[0]),Lr(e,r).lift(new Aa(n))},concat:Wa,defer:Ga,empty:Pr,forkJoin:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=e[0];if(Xn(n))return Ha(n,null);if(Kn(n)&&Object.getPrototypeOf(n)===Object.prototype){var r=Object.keys(n);return Ha(r.map((function(e){return n[e]})),r)}}if("function"==typeof e[e.length-1]){var a=e.pop();return Ha(e=1===e.length&&Xn(e[0])?e[0]:e,null).pipe(ma((function(e){return a.apply(void 0,e)})))}return Ha(e,null)},from:Da,fromEvent:function e(t,n,r,a){return jn(r)&&(a=r,r=void 0),a?e(t,n,r).pipe(ma((function(e){return Xn(e)?a.apply(void 0,e):a(e)}))):new sr((function(e){qa(t,n,(function(t){arguments.length>1?e.next(Array.prototype.slice.call(arguments)):e.next(t)}),e,r)}))},fromEventPattern:function e(t,n,r){return r?e(t,n).pipe(ma((function(e){return Xn(e)?r.apply(void 0,e):r(e)}))):new sr((function(e){var r,a=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.next(1===t.length?t[0]:t)};try{r=t(a)}catch(t){return void e.error(t)}if(jn(n))return function(){return n(a,r)}}))},generate:function(e,t,n,r,a){var i,o;if(1==arguments.length){var s=e;o=s.initialState,t=s.condition,n=s.iterate,i=s.resultSelector||ar,a=s.scheduler}else void 0===r||Dr(r)?(o=e,i=ar,a=r):(o=e,i=r);return new sr((function(e){var r=o;if(a)return a.schedule(Xa,0,{subscriber:e,iterate:n,condition:t,resultSelector:i,state:r});for(;;){if(t){var s=void 0;try{s=t(r)}catch(t){return void e.error(t)}if(!s){e.complete();break}}var u=void 0;try{u=i(r)}catch(t){return void e.error(t)}if(e.next(u),e.closed)break;try{r=n(r)}catch(t){return void e.error(t)}}}))},iif:function(e,t,n){return void 0===t&&(t=Rr),void 0===n&&(n=Rr),Ga((function(){return e()?t:n}))},interval:function(e,t){return void 0===e&&(e=0),void 0===t&&(t=aa),(!Ka(e)||e<0)&&(e=0),t&&"function"==typeof t.schedule||(t=aa),new sr((function(n){return n.add(t.schedule(Ya,e,{subscriber:n,counter:0,period:e})),n}))},merge:Qa,never:function(){return $a},of:Vr,onErrorResumeNext:function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(0===t.length)return Rr;var r=t[0],a=t.slice(1);return 1===t.length&&Xn(r)?e.apply(void 0,r):new sr((function(t){var n=function(){return t.add(e.apply(void 0,a).subscribe(t))};return Da(r).subscribe({next:function(e){t.next(e)},error:n,complete:n})}))},pairs:function(e,t){return new sr(t?function(n){var r=Object.keys(e),a=new Qn;return a.add(t.schedule(Ja,0,{keys:r,index:0,subscriber:n,subscription:a,obj:e})),a}:function(t){for(var n=Object.keys(e),r=0;r<n.length&&!t.closed;r++){var a=n[r];e.hasOwnProperty(a)&&t.next([a,e[a]])}t.complete()})},partition:function(e,t,n){return[ti(t,n)(new sr(Ea(e))),ti(ei(t,n))(new sr(Ea(e)))]},race:ai,range:function(e,t,n){return void 0===e&&(e=0),new sr((function(r){void 0===t&&(t=e,e=0);var a=0,i=e;if(n)return n.schedule(si,0,{index:a,count:t,start:e,subscriber:r});for(;;){if(a++>=t){r.complete();break}if(r.next(i++),r.closed)break}}))},throwError:zr,timer:ui,using:function(e,t){return new sr((function(n){var r,a;try{r=e()}catch(e){return void n.error(e)}try{a=t(r)}catch(e){return void n.error(e)}var i=(a?Da(a):Rr).subscribe(n);return function(){i.unsubscribe(),r&&r.unsubscribe()}}))},zip:li,scheduled:Pa,EMPTY:Rr,NEVER:$a,config:Gn}),gi=Vn(vi);function yi(e){return function(t){return t.lift(new bi(e))}}var bi=function(){function e(e){this.durationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new xi(e,this.durationSelector))},e}(),xi=function(e){function t(t,n){var r=e.call(this,t)||this;return r.durationSelector=n,r.hasValue=!1,r}return Un(t,e),t.prototype._next=function(e){if(this.value=e,this.hasValue=!0,!this.throttled){var t=void 0;try{t=(0,this.durationSelector)(e)}catch(e){return this.destination.error(e)}var n=Fa(t,new Ba(this));!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}},t.prototype.clearThrottle=function(){var e=this,t=e.value,n=e.hasValue,r=e.throttled;r&&(this.remove(r),this.throttled=void 0,r.unsubscribe()),n&&(this.value=void 0,this.hasValue=!1,this.destination.next(t))},t.prototype.notifyNext=function(){this.clearThrottle()},t.prototype.notifyComplete=function(){this.clearThrottle()},t}(Ma),ki=function(){function e(e){this.closingNotifier=e}return e.prototype.call=function(e,t){return t.subscribe(new wi(e,this.closingNotifier))},e}(),wi=function(e){function t(t,n){var r=e.call(this,t)||this;return r.buffer=[],r.add(Fa(n,new Ba(r))),r}return Un(t,e),t.prototype._next=function(e){this.buffer.push(e)},t.prototype.notifyNext=function(){var e=this.buffer;this.buffer=[],this.destination.next(e)},t}(Ma),Si=function(){function e(e,t){this.bufferSize=e,this.startBufferEvery=t,this.subscriberClass=t&&e!==t?_i:Ci}return e.prototype.call=function(e,t){return t.subscribe(new this.subscriberClass(e,this.bufferSize,this.startBufferEvery))},e}(),Ci=function(e){function t(t,n){var r=e.call(this,t)||this;return r.bufferSize=n,r.buffer=[],r}return Un(t,e),t.prototype._next=function(e){var t=this.buffer;t.push(e),t.length==this.bufferSize&&(this.destination.next(t),this.buffer=[])},t.prototype._complete=function(){var t=this.buffer;t.length>0&&this.destination.next(t),e.prototype._complete.call(this)},t}(er),_i=function(e){function t(t,n,r){var a=e.call(this,t)||this;return a.bufferSize=n,a.startBufferEvery=r,a.buffers=[],a.count=0,a}return Un(t,e),t.prototype._next=function(e){var t=this,n=t.bufferSize,r=t.startBufferEvery,a=t.buffers,i=t.count;this.count++,i%r==0&&a.push([]);for(var o=a.length;o--;){var s=a[o];s.push(e),s.length===n&&(a.splice(o,1),this.destination.next(s))}},t.prototype._complete=function(){for(var t=this.buffers,n=this.destination;t.length>0;){var r=t.shift();r.length>0&&n.next(r)}e.prototype._complete.call(this)},t}(er),Ii=function(){function e(e,t,n,r){this.bufferTimeSpan=e,this.bufferCreationInterval=t,this.maxBufferSize=n,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new Ei(e,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},e}(),Ti=function(){this.buffer=[]},Ei=function(e){function t(t,n,r,a,i){var o=e.call(this,t)||this;o.bufferTimeSpan=n,o.bufferCreationInterval=r,o.maxBufferSize=a,o.scheduler=i,o.contexts=[];var s=o.openContext();if(o.timespanOnly=null==r||r<0,o.timespanOnly){var u={subscriber:o,context:s,bufferTimeSpan:n};o.add(s.closeAction=i.schedule(Ni,n,u))}else{var c={subscriber:o,context:s},l={bufferTimeSpan:n,bufferCreationInterval:r,subscriber:o,scheduler:i};o.add(s.closeAction=i.schedule(Ai,n,c)),o.add(i.schedule(Oi,r,l))}return o}return Un(t,e),t.prototype._next=function(e){for(var t,n=this.contexts,r=n.length,a=0;a<r;a++){var i=n[a],o=i.buffer;o.push(e),o.length==this.maxBufferSize&&(t=i)}t&&this.onBufferFull(t)},t.prototype._error=function(t){this.contexts.length=0,e.prototype._error.call(this,t)},t.prototype._complete=function(){for(var t=this.contexts,n=this.destination;t.length>0;){var r=t.shift();n.next(r.buffer)}e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.contexts=null},t.prototype.onBufferFull=function(e){this.closeContext(e);var t=e.closeAction;if(t.unsubscribe(),this.remove(t),!this.closed&&this.timespanOnly){e=this.openContext();var n=this.bufferTimeSpan,r={subscriber:this,context:e,bufferTimeSpan:n};this.add(e.closeAction=this.scheduler.schedule(Ni,n,r))}},t.prototype.openContext=function(){var e=new Ti;return this.contexts.push(e),e},t.prototype.closeContext=function(e){this.destination.next(e.buffer);var t=this.contexts;(t?t.indexOf(e):-1)>=0&&t.splice(t.indexOf(e),1)},t}(er);function Ni(e){var t=e.subscriber,n=e.context;n&&t.closeContext(n),t.closed||(e.context=t.openContext(),e.context.closeAction=this.schedule(e,e.bufferTimeSpan))}function Oi(e){var t=e.bufferCreationInterval,n=e.bufferTimeSpan,r=e.subscriber,a=e.scheduler,i=r.openContext();r.closed||(r.add(i.closeAction=a.schedule(Ai,n,{subscriber:r,context:i})),this.schedule(e,t))}function Ai(e){var t=e.subscriber,n=e.context;t.closeContext(n)}var Ri=function(){function e(e,t){this.openings=e,this.closingSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new Pi(e,this.openings,this.closingSelector))},e}(),Pi=function(e){function t(t,n,r){var a=e.call(this,t)||this;return a.closingSelector=r,a.contexts=[],a.add(Na(a,n)),a}return Un(t,e),t.prototype._next=function(e){for(var t=this.contexts,n=t.length,r=0;r<n;r++)t[r].buffer.push(e)},t.prototype._error=function(t){for(var n=this.contexts;n.length>0;){var r=n.shift();r.subscription.unsubscribe(),r.buffer=null,r.subscription=null}this.contexts=null,e.prototype._error.call(this,t)},t.prototype._complete=function(){for(var t=this.contexts;t.length>0;){var n=t.shift();this.destination.next(n.buffer),n.subscription.unsubscribe(),n.buffer=null,n.subscription=null}this.contexts=null,e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t){e?this.closeBuffer(e):this.openBuffer(t)},t.prototype.notifyComplete=function(e){this.closeBuffer(e.context)},t.prototype.openBuffer=function(e){try{var t=this.closingSelector.call(this,e);t&&this.trySubscribe(t)}catch(e){this._error(e)}},t.prototype.closeBuffer=function(e){var t=this.contexts;if(t&&e){var n=e.buffer,r=e.subscription;this.destination.next(n),t.splice(t.indexOf(e),1),this.remove(r),r.unsubscribe()}},t.prototype.trySubscribe=function(e){var t=this.contexts,n=new Qn,r={buffer:[],subscription:n};t.push(r);var a=Na(this,e,r);!a||a.closed?this.closeBuffer(r):(a.context=r,this.add(a),n.add(a))},t}(Sa),Di=function(){function e(e){this.closingSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new Bi(e,this.closingSelector))},e}(),Bi=function(e){function t(t,n){var r=e.call(this,t)||this;return r.closingSelector=n,r.subscribing=!1,r.openBuffer(),r}return Un(t,e),t.prototype._next=function(e){this.buffer.push(e)},t.prototype._complete=function(){var t=this.buffer;t&&this.destination.next(t),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.buffer=void 0,this.subscribing=!1},t.prototype.notifyNext=function(){this.openBuffer()},t.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},t.prototype.openBuffer=function(){var e=this.closingSubscription;e&&(this.remove(e),e.unsubscribe());var t,n=this.buffer;this.buffer&&this.destination.next(n),this.buffer=[];try{t=(0,this.closingSelector)()}catch(e){return this.error(e)}e=new Qn,this.closingSubscription=e,this.add(e),this.subscribing=!0,e.add(Fa(t,new Ba(this))),this.subscribing=!1},t}(Ma),Mi=function(){function e(e){this.selector=e}return e.prototype.call=function(e,t){return t.subscribe(new Fi(e,this.selector,this.caught))},e}(),Fi=function(e){function t(t,n,r){var a=e.call(this,t)||this;return a.selector=n,a.caught=r,a}return Un(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=void 0;try{n=this.selector(t,this.caught)}catch(t){return void e.prototype.error.call(this,t)}this._unsubscribeAndRecycle();var r=new Ba(this);this.add(r);var a=Fa(n,r);a!==r&&this.add(a)}},t}(Ma);function Li(e,t){return La(e,t,1)}var Vi=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new zi(e,this.predicate,this.source))},e}(),zi=function(e){function t(t,n,r){var a=e.call(this,t)||this;return a.predicate=n,a.source=r,a.count=0,a.index=0,a}return Un(t,e),t.prototype._next=function(e){this.predicate?this._tryPredicate(e):this.count++},t.prototype._tryPredicate=function(e){var t;try{t=this.predicate(e,this.index++,this.source)}catch(e){return void this.destination.error(e)}t&&this.count++},t.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},t}(er),Zi=function(){function e(e){this.durationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new Ui(e,this.durationSelector))},e}(),Ui=function(e){function t(t,n){var r=e.call(this,t)||this;return r.durationSelector=n,r.hasValue=!1,r}return Un(t,e),t.prototype._next=function(e){try{var t=this.durationSelector.call(this,e);t&&this._tryNext(e,t)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){this.emitValue(),this.destination.complete()},t.prototype._tryNext=function(e,t){var n=this.durationSubscription;this.value=e,this.hasValue=!0,n&&(n.unsubscribe(),this.remove(n)),(n=Fa(t,new Ba(this)))&&!n.closed&&this.add(this.durationSubscription=n)},t.prototype.notifyNext=function(){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){if(this.hasValue){var t=this.value,n=this.durationSubscription;n&&(this.durationSubscription=void 0,n.unsubscribe(),this.remove(n)),this.value=void 0,this.hasValue=!1,e.prototype._next.call(this,t)}},t}(Ma),ji=function(){function e(e,t){this.dueTime=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new Wi(e,this.dueTime,this.scheduler))},e}(),Wi=function(e){function t(t,n,r){var a=e.call(this,t)||this;return a.dueTime=n,a.scheduler=r,a.debouncedSubscription=null,a.lastValue=null,a.hasValue=!1,a}return Un(t,e),t.prototype._next=function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Gi,this.dueTime,this))},t.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},t.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}},t.prototype.clearDebounce=function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)},t}(er);function Gi(e){e.debouncedNext()}function Hi(e){return void 0===e&&(e=null),function(t){return t.lift(new qi(e))}}var qi=function(){function e(e){this.defaultValue=e}return e.prototype.call=function(e,t){return t.subscribe(new Xi(e,this.defaultValue))},e}(),Xi=function(e){function t(t,n){var r=e.call(this,t)||this;return r.defaultValue=n,r.isEmpty=!0,r}return Un(t,e),t.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(er);function Ki(e){return e instanceof Date&&!isNaN(+e)}var Yi=function(){function e(e,t){this.delay=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new Qi(e,this.delay,this.scheduler))},e}(),Qi=function(e){function t(t,n,r){var a=e.call(this,t)||this;return a.delay=n,a.scheduler=r,a.queue=[],a.active=!1,a.errored=!1,a}return Un(t,e),t.dispatch=function(e){for(var t=e.source,n=t.queue,r=e.scheduler,a=e.destination;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(a);if(n.length>0){var i=Math.max(0,n[0].time-r.now());this.schedule(e,i)}else this.unsubscribe(),t.active=!1},t.prototype._schedule=function(e){this.active=!0,this.destination.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},t.prototype.scheduleNotification=function(e){if(!0!==this.errored){var t=this.scheduler,n=new $i(t.now()+this.delay,e);this.queue.push(n),!1===this.active&&this._schedule(t)}},t.prototype._next=function(e){this.scheduleNotification(Ur.createNext(e))},t.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.scheduleNotification(Ur.createComplete()),this.unsubscribe()},t}(er),$i=function(e,t){this.time=e,this.notification=t},Ji=function(){function e(e){this.delayDurationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new eo(e,this.delayDurationSelector))},e}(),eo=function(e){function t(t,n){var r=e.call(this,t)||this;return r.delayDurationSelector=n,r.completed=!1,r.delayNotifierSubscriptions=[],r.index=0,r}return Un(t,e),t.prototype.notifyNext=function(e,t,n,r,a){this.destination.next(e),this.removeSubscription(a),this.tryComplete()},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype.notifyComplete=function(e){var t=this.removeSubscription(e);t&&this.destination.next(t),this.tryComplete()},t.prototype._next=function(e){var t=this.index++;try{var n=this.delayDurationSelector(e,t);n&&this.tryDelay(n,e)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},t.prototype.removeSubscription=function(e){e.unsubscribe();var t=this.delayNotifierSubscriptions.indexOf(e);return-1!==t&&this.delayNotifierSubscriptions.splice(t,1),e.outerValue},t.prototype.tryDelay=function(e,t){var n=Na(this,e,t);n&&!n.closed&&(this.destination.add(n),this.delayNotifierSubscriptions.push(n))},t.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},t}(Sa),to=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subscriptionDelay=n,r}return Un(t,e),t.prototype._subscribe=function(e){this.subscriptionDelay.subscribe(new no(e,this.source))},t}(sr),no=function(e){function t(t,n){var r=e.call(this)||this;return r.parent=t,r.source=n,r.sourceSubscribed=!1,r}return Un(t,e),t.prototype._next=function(e){this.subscribeToSource()},t.prototype._error=function(e){this.unsubscribe(),this.parent.error(e)},t.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},t.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},t}(er),ro=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new ao(e))},e}(),ao=function(e){function t(t){return e.call(this,t)||this}return Un(t,e),t.prototype._next=function(e){e.observe(this.destination)},t}(er),io=function(){function e(e,t){this.keySelector=e,this.flushes=t}return e.prototype.call=function(e,t){return t.subscribe(new oo(e,this.keySelector,this.flushes))},e}(),oo=function(e){function t(t,n,r){var a=e.call(this,t)||this;return a.keySelector=n,a.values=new Set,r&&a.add(Fa(r,new Ba(a))),a}return Un(t,e),t.prototype.notifyNext=function(){this.values.clear()},t.prototype.notifyError=function(e){this._error(e)},t.prototype._next=function(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)},t.prototype._useKeySelector=function(e){var t,n=this.destination;try{t=this.keySelector(e)}catch(e){return void n.error(e)}this._finalizeNext(t,e)},t.prototype._finalizeNext=function(e,t){var n=this.values;n.has(e)||(n.add(e),this.destination.next(t))},t}(Ma);function so(e,t){return function(n){return n.lift(new uo(e,t))}}var uo=function(){function e(e,t){this.compare=e,this.keySelector=t}return e.prototype.call=function(e,t){return t.subscribe(new co(e,this.compare,this.keySelector))},e}(),co=function(e){function t(t,n,r){var a=e.call(this,t)||this;return a.keySelector=r,a.hasKey=!1,"function"==typeof n&&(a.compare=n),a}return Un(t,e),t.prototype.compare=function(e,t){return e===t},t.prototype._next=function(e){var t;try{var n=this.keySelector;t=n?n(e):e}catch(e){return this.destination.error(e)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,t)}catch(e){return this.destination.error(e)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))},t}(er);function lo(e){return void 0===e&&(e=ho),function(t){return t.lift(new fo(e))}}var fo=function(){function e(e){this.errorFactory=e}return e.prototype.call=function(e,t){return t.subscribe(new po(e,this.errorFactory))},e}(),po=function(e){function t(t,n){var r=e.call(this,t)||this;return r.errorFactory=n,r.hasValue=!1,r}return Un(t,e),t.prototype._next=function(e){this.hasValue=!0,this.destination.next(e)},t.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var e=void 0;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)},t}(er);function ho(){return new pa}function mo(e){return function(t){return 0===e?Pr():t.lift(new vo(e))}}var vo=function(){function e(e){if(this.total=e,this.total<0)throw new fa}return e.prototype.call=function(e,t){return t.subscribe(new go(e,this.total))},e}(),go=function(e){function t(t,n){var r=e.call(this,t)||this;return r.total=n,r.count=0,r}return Un(t,e),t.prototype._next=function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))},t}(er),yo=function(){function e(e,t,n){this.predicate=e,this.thisArg=t,this.source=n}return e.prototype.call=function(e,t){return t.subscribe(new bo(e,this.predicate,this.thisArg,this.source))},e}(),bo=function(e){function t(t,n,r,a){var i=e.call(this,t)||this;return i.predicate=n,i.thisArg=r,i.source=a,i.index=0,i.thisArg=r||i,i}return Un(t,e),t.prototype.notifyComplete=function(e){this.destination.next(e),this.destination.complete()},t.prototype._next=function(e){var t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(e){return void this.destination.error(e)}t||this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(er),xo=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new ko(e))},e}(),ko=function(e){function t(t){var n=e.call(this,t)||this;return n.hasCompleted=!1,n.hasSubscription=!1,n}return Un(t,e),t.prototype._next=function(e){this.hasSubscription||(this.hasSubscription=!0,this.add(Fa(e,new Ba(this))))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},t.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(Ma),wo=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new So(e,this.project))},e}(),So=function(e){function t(t,n){var r=e.call(this,t)||this;return r.project=n,r.hasSubscription=!1,r.hasCompleted=!1,r.index=0,r}return Un(t,e),t.prototype._next=function(e){this.hasSubscription||this.tryNext(e)},t.prototype.tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this.hasSubscription=!0,this._innerSub(t)},t.prototype._innerSub=function(e){var t=new Ba(this),n=this.destination;n.add(t);var r=Fa(e,t);r!==t&&n.add(r)},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(Ma),Co=function(){function e(e,t,n){this.project=e,this.concurrent=t,this.scheduler=n}return e.prototype.call=function(e,t){return t.subscribe(new _o(e,this.project,this.concurrent,this.scheduler))},e}(),_o=function(e){function t(t,n,r,a){var i=e.call(this,t)||this;return i.project=n,i.concurrent=r,i.scheduler=a,i.index=0,i.active=0,i.hasCompleted=!1,r<Number.POSITIVE_INFINITY&&(i.buffer=[]),i}return Un(t,e),t.dispatch=function(e){var t=e.subscriber,n=e.result,r=e.value,a=e.index;t.subscribeToProjection(n,r,a)},t.prototype._next=function(e){var n=this.destination;if(n.closed)this._complete();else{var r=this.index++;if(this.active<this.concurrent){n.next(e);try{var a=(0,this.project)(e,r);if(this.scheduler){var i={subscriber:this,result:a,value:e,index:r};this.destination.add(this.scheduler.schedule(t.dispatch,0,i))}else this.subscribeToProjection(a,e,r)}catch(e){n.error(e)}}else this.buffer.push(e)}},t.prototype.subscribeToProjection=function(e,t,n){this.active++,this.destination.add(Fa(e,new Ba(this)))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this._next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e&&e.length>0&&this._next(e.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},t}(Ma),Io=function(){function e(e){this.callback=e}return e.prototype.call=function(e,t){return t.subscribe(new To(e,this.callback))},e}(),To=function(e){function t(t,n){var r=e.call(this,t)||this;return r.add(new Qn(n)),r}return Un(t,e),t}(er),Eo=function(){function e(e,t,n,r){this.predicate=e,this.source=t,this.yieldIndex=n,this.thisArg=r}return e.prototype.call=function(e,t){return t.subscribe(new No(e,this.predicate,this.source,this.yieldIndex,this.thisArg))},e}(),No=function(e){function t(t,n,r,a,i){var o=e.call(this,t)||this;return o.predicate=n,o.source=r,o.yieldIndex=a,o.thisArg=i,o.index=0,o}return Un(t,e),t.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete(),this.unsubscribe()},t.prototype._next=function(e){var t=this.predicate,n=this.thisArg,r=this.index++;try{t.call(n||this,e,r,this.source)&&this.notifyComplete(this.yieldIndex?r:e)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},t}(er),Oo=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new Ao(e))},e}(),Ao=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Un(t,e),t.prototype._next=function(e){},t}(er),Ro=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new Po(e))},e}(),Po=function(e){function t(t){return e.call(this,t)||this}return Un(t,e),t.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype._next=function(e){this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(er);function Do(e){return function(t){return 0===e?Pr():t.lift(new Bo(e))}}var Bo=function(){function e(e){if(this.total=e,this.total<0)throw new fa}return e.prototype.call=function(e,t){return t.subscribe(new Mo(e,this.total))},e}(),Mo=function(e){function t(t,n){var r=e.call(this,t)||this;return r.total=n,r.ring=new Array,r.count=0,r}return Un(t,e),t.prototype._next=function(e){var t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e},t.prototype._complete=function(){var e=this.destination,t=this.count;if(t>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,a=0;a<n;a++){var i=t++%n;e.next(r[i])}e.complete()},t}(er),Fo=function(){function e(e){this.value=e}return e.prototype.call=function(e,t){return t.subscribe(new Lo(e,this.value))},e}(),Lo=function(e){function t(t,n){var r=e.call(this,t)||this;return r.value=n,r}return Un(t,e),t.prototype._next=function(e){this.destination.next(this.value)},t}(er),Vo=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new zo(e))},e}(),zo=function(e){function t(t){return e.call(this,t)||this}return Un(t,e),t.prototype._next=function(e){this.destination.next(Ur.createNext(e))},t.prototype._error=function(e){var t=this.destination;t.next(Ur.createError(e)),t.complete()},t.prototype._complete=function(){var e=this.destination;e.next(Ur.createComplete()),e.complete()},t}(er);function Zo(e,t){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Uo(e,t,n))}}var Uo=function(){function e(e,t,n){void 0===n&&(n=!1),this.accumulator=e,this.seed=t,this.hasSeed=n}return e.prototype.call=function(e,t){return t.subscribe(new jo(e,this.accumulator,this.seed,this.hasSeed))},e}(),jo=function(e){function t(t,n,r,a){var i=e.call(this,t)||this;return i.accumulator=n,i._seed=r,i.hasSeed=a,i.index=0,i}return Un(t,e),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.accumulator(this.seed,e,n)}catch(e){this.destination.error(e)}this.seed=t,this.destination.next(t)},t}(er);function Wo(e,t){return arguments.length>=2?function(n){return ir(Zo(e,t),Do(1),Hi(t))(n)}:function(t){return ir(Zo((function(t,n,r){return e(t,n,r+1)})),Do(1))(t)}}var Go=function(){function e(e,t,n){this.accumulator=e,this.seed=t,this.concurrent=n}return e.prototype.call=function(e,t){return t.subscribe(new Ho(e,this.accumulator,this.seed,this.concurrent))},e}(),Ho=function(e){function t(t,n,r,a){var i=e.call(this,t)||this;return i.accumulator=n,i.acc=r,i.concurrent=a,i.hasValue=!1,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return Un(t,e),t.prototype._next=function(e){if(this.active<this.concurrent){var t=this.index++,n=this.destination,r=void 0;try{r=(0,this.accumulator)(this.acc,e,t)}catch(e){return n.error(e)}this.active++,this._innerSub(r)}else this.buffer.push(e)},t.prototype._innerSub=function(e){var t=new Ba(this),n=this.destination;n.add(t);var r=Fa(e,t);r!==t&&n.add(r)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},t.prototype.notifyNext=function(e){var t=this.destination;this.acc=e,this.hasValue=!0,t.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},t}(Ma);function qo(e,t){return function(n){var r;if(r="function"==typeof e?e:function(){return e},"function"==typeof t)return n.lift(new Xo(r,t));var a=Object.create(n,yr);return a.source=n,a.subjectFactory=r,a}}var Xo=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var n=this.selector,r=this.subjectFactory(),a=n(r).subscribe(e);return a.add(t.subscribe(r)),a},e}(),Ko=function(){function e(e){this.nextSources=e}return e.prototype.call=function(e,t){return t.subscribe(new Yo(e,this.nextSources))},e}(),Yo=function(e){function t(t,n){var r=e.call(this,t)||this;return r.destination=t,r.nextSources=n,r}return Un(t,e),t.prototype.notifyError=function(){this.subscribeToNextSource()},t.prototype.notifyComplete=function(){this.subscribeToNextSource()},t.prototype._error=function(e){this.subscribeToNextSource(),this.unsubscribe()},t.prototype._complete=function(){this.subscribeToNextSource(),this.unsubscribe()},t.prototype.subscribeToNextSource=function(){var e=this.nextSources.shift();if(e){var t=new Ba(this),n=this.destination;n.add(t);var r=Fa(e,t);r!==t&&n.add(r)}else this.destination.complete()},t}(Ma),Qo=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new $o(e))},e}(),$o=function(e){function t(t){var n=e.call(this,t)||this;return n.hasPrev=!1,n}return Un(t,e),t.prototype._next=function(e){var t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)},t}(er);function Jo(e,t){return function(n){for(var r=n,a=0;a<t;a++){var i=null!=r?r[e[a]]:void 0;if(void 0===i)return;r=i}return r}}var es=function(){function e(e,t){this.count=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new ts(e,this.count,this.source))},e}(),ts=function(e){function t(t,n,r){var a=e.call(this,t)||this;return a.count=n,a.source=r,a}return Un(t,e),t.prototype.complete=function(){if(!this.isStopped){var t=this.source,n=this.count;if(0===n)return e.prototype.complete.call(this);n>-1&&(this.count=n-1),t.subscribe(this._unsubscribeAndRecycle())}},t}(er),ns=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new rs(e,this.notifier,t))},e}(),rs=function(e){function t(t,n,r){var a=e.call(this,t)||this;return a.notifier=n,a.source=r,a.sourceIsBeingSubscribedTo=!0,a}return Un(t,e),t.prototype.notifyNext=function(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},t.prototype.notifyComplete=function(){if(!1===this.sourceIsBeingSubscribedTo)return e.prototype.complete.call(this)},t.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return e.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next(void 0)}},t.prototype._unsubscribe=function(){var e=this.notifications,t=this.retriesSubscription;e&&(e.unsubscribe(),this.notifications=void 0),t&&(t.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},t.prototype._unsubscribeAndRecycle=function(){var t=this._unsubscribe;return this._unsubscribe=null,e.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=t,this},t.prototype.subscribeToRetries=function(){var t;this.notifications=new fr;try{t=(0,this.notifier)(this.notifications)}catch(t){return e.prototype.complete.call(this)}this.retries=t,this.retriesSubscription=Fa(t,new Ba(this))},t}(Ma),as=function(){function e(e,t){this.count=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new is(e,this.count,this.source))},e}(),is=function(e){function t(t,n,r){var a=e.call(this,t)||this;return a.count=n,a.source=r,a}return Un(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=this.source,r=this.count;if(0===r)return e.prototype.error.call(this,t);r>-1&&(this.count=r-1),n.subscribe(this._unsubscribeAndRecycle())}},t}(er),os=function(){function e(e,t){this.notifier=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new ss(e,this.notifier,this.source))},e}(),ss=function(e){function t(t,n,r){var a=e.call(this,t)||this;return a.notifier=n,a.source=r,a}return Un(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=this.errors,r=this.retries,a=this.retriesSubscription;if(r)this.errors=void 0,this.retriesSubscription=void 0;else{n=new fr;try{r=(0,this.notifier)(n)}catch(t){return e.prototype.error.call(this,t)}a=Fa(r,new Ba(this))}this._unsubscribeAndRecycle(),this.errors=n,this.retries=r,this.retriesSubscription=a,n.next(t)}},t.prototype._unsubscribe=function(){var e=this.errors,t=this.retriesSubscription;e&&(e.unsubscribe(),this.errors=void 0),t&&(t.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},t.prototype.notifyNext=function(){var e=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=e,this.source.subscribe(this)},t}(Ma),us=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){var n=new cs(e),r=t.subscribe(n);return r.add(Fa(this.notifier,new Ba(n))),r},e}(),cs=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hasValue=!1,t}return Un(t,e),t.prototype._next=function(e){this.value=e,this.hasValue=!0},t.prototype.notifyNext=function(){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},t}(Ma),ls=function(){function e(e,t){this.period=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new ds(e,this.period,this.scheduler))},e}(),ds=function(e){function t(t,n,r){var a=e.call(this,t)||this;return a.period=n,a.scheduler=r,a.hasValue=!1,a.add(r.schedule(fs,n,{subscriber:a,period:n})),a}return Un(t,e),t.prototype._next=function(e){this.lastValue=e,this.hasValue=!0},t.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},t}(er);function fs(e){var t=e.subscriber,n=e.period;t.notifyNext(),this.schedule(e,n)}var ps=function(){function e(e,t){this.compareTo=e,this.comparator=t}return e.prototype.call=function(e,t){return t.subscribe(new hs(e,this.compareTo,this.comparator))},e}(),hs=function(e){function t(t,n,r){var a=e.call(this,t)||this;return a.compareTo=n,a.comparator=r,a._a=[],a._b=[],a._oneComplete=!1,a.destination.add(n.subscribe(new ms(t,a))),a}return Un(t,e),t.prototype._next=function(e){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(e),this.checkValues())},t.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0,this.unsubscribe()},t.prototype.checkValues=function(){for(var e=this,t=e._a,n=e._b,r=e.comparator;t.length>0&&n.length>0;){var a=t.shift(),i=n.shift(),o=!1;try{o=r?r(a,i):a===i}catch(e){this.destination.error(e)}o||this.emit(!1)}},t.prototype.emit=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype.nextB=function(e){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(e),this.checkValues())},t.prototype.completeB=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},t}(er),ms=function(e){function t(t,n){var r=e.call(this,t)||this;return r.parent=n,r}return Un(t,e),t.prototype._next=function(e){this.parent.nextB(e)},t.prototype._error=function(e){this.parent.error(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},t}(er);function vs(){return new fr}var gs=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new ys(e,this.predicate,this.source))},e}(),ys=function(e){function t(t,n,r){var a=e.call(this,t)||this;return a.predicate=n,a.source=r,a.seenValue=!1,a.index=0,a}return Un(t,e),t.prototype.applySingleValue=function(e){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=e)},t.prototype._next=function(e){var t=this.index++;this.predicate?this.tryNext(e,t):this.applySingleValue(e)},t.prototype.tryNext=function(e,t){try{this.predicate(e,t,this.source)&&this.applySingleValue(e)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){var e=this.destination;this.index>0?(e.next(this.seenValue?this.singleValue:void 0),e.complete()):e.error(new pa)},t}(er),bs=function(){function e(e){this.total=e}return e.prototype.call=function(e,t){return t.subscribe(new xs(e,this.total))},e}(),xs=function(e){function t(t,n){var r=e.call(this,t)||this;return r.total=n,r.count=0,r}return Un(t,e),t.prototype._next=function(e){++this.count>this.total&&this.destination.next(e)},t}(er),ks=function(){function e(e){if(this._skipCount=e,this._skipCount<0)throw new fa}return e.prototype.call=function(e,t){return 0===this._skipCount?t.subscribe(new er(e)):t.subscribe(new ws(e,this._skipCount))},e}(),ws=function(e){function t(t,n){var r=e.call(this,t)||this;return r._skipCount=n,r._count=0,r._ring=new Array(n),r}return Un(t,e),t.prototype._next=function(e){var t=this._skipCount,n=this._count++;if(n<t)this._ring[n]=e;else{var r=n%t,a=this._ring,i=a[r];a[r]=e,this.destination.next(i)}},t}(er),Ss=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new Cs(e,this.notifier))},e}(),Cs=function(e){function t(t,n){var r=e.call(this,t)||this;r.hasValue=!1;var a=new Ba(r);r.add(a),r.innerSubscription=a;var i=Fa(n,a);return i!==a&&(r.add(i),r.innerSubscription=i),r}return Un(t,e),t.prototype._next=function(t){this.hasValue&&e.prototype._next.call(this,t)},t.prototype.notifyNext=function(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},t.prototype.notifyComplete=function(){},t}(Ma),_s=function(){function e(e){this.predicate=e}return e.prototype.call=function(e,t){return t.subscribe(new Is(e,this.predicate))},e}(),Is=function(e){function t(t,n){var r=e.call(this,t)||this;return r.predicate=n,r.skipping=!0,r.index=0,r}return Un(t,e),t.prototype._next=function(e){var t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)},t.prototype.tryCallPredicate=function(e){try{var t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(e){this.destination.error(e)}},t}(er),Ts=function(e){function t(t,n,r){void 0===n&&(n=0),void 0===r&&(r=na);var a=e.call(this)||this;return a.source=t,a.delayTime=n,a.scheduler=r,(!Ka(n)||n<0)&&(a.delayTime=0),r&&"function"==typeof r.schedule||(a.scheduler=na),a}return Un(t,e),t.create=function(e,n,r){return void 0===n&&(n=0),void 0===r&&(r=na),new t(e,n,r)},t.dispatch=function(e){var t=e.source,n=e.subscriber;return this.add(t.subscribe(n))},t.prototype._subscribe=function(e){var n=this.delayTime,r=this.source;return this.scheduler.schedule(t.dispatch,n,{source:r,subscriber:e})},t}(sr),Es=function(){function e(e,t){this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return new Ts(t,this.delay,this.scheduler).subscribe(e)},e}();function Ns(e,t){return"function"==typeof t?function(n){return n.pipe(Ns((function(n,r){return Da(e(n,r)).pipe(ma((function(e,a){return t(n,e,r,a)})))})))}:function(t){return t.lift(new Os(e))}}var Os=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new As(e,this.project))},e}(),As=function(e){function t(t,n){var r=e.call(this,t)||this;return r.project=n,r.index=0,r}return Un(t,e),t.prototype._next=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this._innerSub(t)},t.prototype._innerSub=function(e){var t=this.innerSubscription;t&&t.unsubscribe();var n=new Ba(this),r=this.destination;r.add(n),this.innerSubscription=Fa(e,n),this.innerSubscription!==n&&r.add(this.innerSubscription)},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this),this.unsubscribe()},t.prototype._unsubscribe=function(){this.innerSubscription=void 0},t.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e){this.destination.next(e)},t}(Ma),Rs=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){var n=new Ps(e),r=Fa(this.notifier,new Ba(n));return r&&!n.seenValue?(n.add(r),t.subscribe(n)):n},e}(),Ps=function(e){function t(t){var n=e.call(this,t)||this;return n.seenValue=!1,n}return Un(t,e),t.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},t.prototype.notifyComplete=function(){},t}(Ma),Ds=function(){function e(e,t){this.predicate=e,this.inclusive=t}return e.prototype.call=function(e,t){return t.subscribe(new Bs(e,this.predicate,this.inclusive))},e}(),Bs=function(e){function t(t,n,r){var a=e.call(this,t)||this;return a.predicate=n,a.inclusive=r,a.index=0,a}return Un(t,e),t.prototype._next=function(e){var t,n=this.destination;try{t=this.predicate(e,this.index++)}catch(e){return void n.error(e)}this.nextOrComplete(e,t)},t.prototype.nextOrComplete=function(e,t){var n=this.destination;Boolean(t)?n.next(e):(this.inclusive&&n.next(e),n.complete())},t}(er),Ms=function(){function e(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}return e.prototype.call=function(e,t){return t.subscribe(new Fs(e,this.nextOrObserver,this.error,this.complete))},e}(),Fs=function(e){function t(t,n,r,a){var i=e.call(this,t)||this;return i._tapNext=da,i._tapError=da,i._tapComplete=da,i._tapError=r||da,i._tapComplete=a||da,jn(n)?(i._context=i,i._tapNext=n):n&&(i._context=n,i._tapNext=n.next||da,i._tapError=n.error||da,i._tapComplete=n.complete||da),i}return Un(t,e),t.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.next(e)},t.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)},t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()},t}(er),Ls={leading:!0,trailing:!1},Vs=function(){function e(e,t,n){this.durationSelector=e,this.leading=t,this.trailing=n}return e.prototype.call=function(e,t){return t.subscribe(new zs(e,this.durationSelector,this.leading,this.trailing))},e}(),zs=function(e){function t(t,n,r,a){var i=e.call(this,t)||this;return i.destination=t,i.durationSelector=n,i._leading=r,i._trailing=a,i._hasValue=!1,i}return Un(t,e),t.prototype._next=function(e){this._hasValue=!0,this._sendValue=e,this._throttled||(this._leading?this.send():this.throttle(e))},t.prototype.send=function(){var e=this._hasValue,t=this._sendValue;e&&(this.destination.next(t),this.throttle(t)),this._hasValue=!1,this._sendValue=void 0},t.prototype.throttle=function(e){var t=this.tryDurationSelector(e);t&&this.add(this._throttled=Fa(t,new Ba(this)))},t.prototype.tryDurationSelector=function(e){try{return this.durationSelector(e)}catch(e){return this.destination.error(e),null}},t.prototype.throttlingDone=function(){var e=this._throttled,t=this._trailing;e&&e.unsubscribe(),this._throttled=void 0,t&&this.send()},t.prototype.notifyNext=function(){this.throttlingDone()},t.prototype.notifyComplete=function(){this.throttlingDone()},t}(Ma),Zs=function(){function e(e,t,n,r){this.duration=e,this.scheduler=t,this.leading=n,this.trailing=r}return e.prototype.call=function(e,t){return t.subscribe(new Us(e,this.duration,this.scheduler,this.leading,this.trailing))},e}(),Us=function(e){function t(t,n,r,a,i){var o=e.call(this,t)||this;return o.duration=n,o.scheduler=r,o.leading=a,o.trailing=i,o._hasTrailingValue=!1,o._trailingValue=null,o}return Un(t,e),t.prototype._next=function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(js,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))},t.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},t.prototype.clearThrottle=function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)},t}(er);function js(e){e.subscriber.clearThrottle()}var Ws=function(e,t){this.value=e,this.interval=t};function Gs(e,t,n){return void 0===n&&(n=aa),function(r){var a=Ki(e),i=a?+e-n.now():Math.abs(e);return r.lift(new Hs(i,a,t,n))}}var Hs=function(){function e(e,t,n,r){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=n,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new qs(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},e}(),qs=function(e){function t(t,n,r,a,i){var o=e.call(this,t)||this;return o.absoluteTimeout=n,o.waitFor=r,o.withObservable=a,o.scheduler=i,o.scheduleTimeout(),o}return Un(t,e),t.dispatchTimeout=function(e){var t=e.withObservable;e._unsubscribeAndRecycle(),e.add(Fa(t,new Ba(e)))},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),e.prototype._next.call(this,t)},t.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},t}(Ma),Xs=function(e,t){this.value=e,this.timestamp=t};function Ks(e,t,n){return 0===n?[t]:(e.push(t),e)}var Ys=function(){function e(e){this.windowBoundaries=e}return e.prototype.call=function(e,t){var n=new Qs(e),r=t.subscribe(n);return r.closed||n.add(Fa(this.windowBoundaries,new Ba(n))),r},e}(),Qs=function(e){function t(t){var n=e.call(this,t)||this;return n.window=new fr,t.next(n.window),n}return Un(t,e),t.prototype.notifyNext=function(){this.openWindow()},t.prototype.notifyError=function(e){this._error(e)},t.prototype.notifyComplete=function(){this._complete()},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e)},t.prototype._complete=function(){this.window.complete(),this.destination.complete()},t.prototype._unsubscribe=function(){this.window=null},t.prototype.openWindow=function(){var e=this.window;e&&e.complete();var t=this.destination,n=this.window=new fr;t.next(n)},t}(Ma),$s=function(){function e(e,t){this.windowSize=e,this.startWindowEvery=t}return e.prototype.call=function(e,t){return t.subscribe(new Js(e,this.windowSize,this.startWindowEvery))},e}(),Js=function(e){function t(t,n,r){var a=e.call(this,t)||this;return a.destination=t,a.windowSize=n,a.startWindowEvery=r,a.windows=[new fr],a.count=0,t.next(a.windows[0]),a}return Un(t,e),t.prototype._next=function(e){for(var t=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,n=this.destination,r=this.windowSize,a=this.windows,i=a.length,o=0;o<i&&!this.closed;o++)a[o].next(e);var s=this.count-r+1;if(s>=0&&s%t==0&&!this.closed&&a.shift().complete(),++this.count%t==0&&!this.closed){var u=new fr;a.push(u),n.next(u)}},t.prototype._error=function(e){var t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){var e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().complete();this.destination.complete()},t.prototype._unsubscribe=function(){this.count=0,this.windows=null},t}(er),eu=function(){function e(e,t,n,r){this.windowTimeSpan=e,this.windowCreationInterval=t,this.maxWindowSize=n,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new nu(e,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},e}(),tu=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._numberOfNextedValues=0,t}return Un(t,e),t.prototype.next=function(t){this._numberOfNextedValues++,e.prototype.next.call(this,t)},Object.defineProperty(t.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),t}(fr),nu=function(e){function t(t,n,r,a,i){var o=e.call(this,t)||this;o.destination=t,o.windowTimeSpan=n,o.windowCreationInterval=r,o.maxWindowSize=a,o.scheduler=i,o.windows=[];var s=o.openWindow();if(null!==r&&r>=0){var u={subscriber:o,window:s,context:null},c={windowTimeSpan:n,windowCreationInterval:r,subscriber:o,scheduler:i};o.add(i.schedule(iu,n,u)),o.add(i.schedule(au,r,c))}else{var l={subscriber:o,window:s,windowTimeSpan:n};o.add(i.schedule(ru,n,l))}return o}return Un(t,e),t.prototype._next=function(e){for(var t=this.windows,n=t.length,r=0;r<n;r++){var a=t[r];a.closed||(a.next(e),a.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(a))}},t.prototype._error=function(e){for(var t=this.windows;t.length>0;)t.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){for(var e=this.windows;e.length>0;){var t=e.shift();t.closed||t.complete()}this.destination.complete()},t.prototype.openWindow=function(){var e=new tu;return this.windows.push(e),this.destination.next(e),e},t.prototype.closeWindow=function(e){e.complete();var t=this.windows;t.splice(t.indexOf(e),1)},t}(er);function ru(e){var t=e.subscriber,n=e.windowTimeSpan,r=e.window;r&&t.closeWindow(r),e.window=t.openWindow(),this.schedule(e,n)}function au(e){var t=e.windowTimeSpan,n=e.subscriber,r=e.scheduler,a=e.windowCreationInterval,i=n.openWindow(),o=this,s={action:o,subscription:null},u={subscriber:n,window:i,context:s};s.subscription=r.schedule(iu,t,u),o.add(s.subscription),o.schedule(e,a)}function iu(e){var t=e.subscriber,n=e.window,r=e.context;r&&r.action&&r.subscription&&r.action.remove(r.subscription),t.closeWindow(n)}var ou=function(){function e(e,t){this.openings=e,this.closingSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new su(e,this.openings,this.closingSelector))},e}(),su=function(e){function t(t,n,r){var a=e.call(this,t)||this;return a.openings=n,a.closingSelector=r,a.contexts=[],a.add(a.openSubscription=Na(a,n,n)),a}return Un(t,e),t.prototype._next=function(e){var t=this.contexts;if(t)for(var n=t.length,r=0;r<n;r++)t[r].window.next(e)},t.prototype._error=function(t){var n=this.contexts;if(this.contexts=null,n)for(var r=n.length,a=-1;++a<r;){var i=n[a];i.window.error(t),i.subscription.unsubscribe()}e.prototype._error.call(this,t)},t.prototype._complete=function(){var t=this.contexts;if(this.contexts=null,t)for(var n=t.length,r=-1;++r<n;){var a=t[r];a.window.complete(),a.subscription.unsubscribe()}e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.contexts;if(this.contexts=null,e)for(var t=e.length,n=-1;++n<t;){var r=e[n];r.window.unsubscribe(),r.subscription.unsubscribe()}},t.prototype.notifyNext=function(e,t,n,r,a){if(e===this.openings){var i=void 0;try{i=(0,this.closingSelector)(t)}catch(e){return this.error(e)}var o=new fr,s=new Qn,u={window:o,subscription:s};this.contexts.push(u);var c=Na(this,i,u);c.closed?this.closeWindow(this.contexts.length-1):(c.context=u,s.add(c)),this.destination.next(o)}else this.closeWindow(this.contexts.indexOf(e))},t.prototype.notifyError=function(e){this.error(e)},t.prototype.notifyComplete=function(e){e!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(e.context))},t.prototype.closeWindow=function(e){if(-1!==e){var t=this.contexts,n=t[e],r=n.window,a=n.subscription;t.splice(e,1),r.complete(),a.unsubscribe()}},t}(Sa),uu=function(){function e(e){this.closingSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new cu(e,this.closingSelector))},e}(),cu=function(e){function t(t,n){var r=e.call(this,t)||this;return r.destination=t,r.closingSelector=n,r.openWindow(),r}return Un(t,e),t.prototype.notifyNext=function(e,t,n,r,a){this.openWindow(a)},t.prototype.notifyError=function(e){this._error(e)},t.prototype.notifyComplete=function(e){this.openWindow(e)},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e),this.unsubscribeClosingNotification()},t.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},t.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},t.prototype.openWindow=function(e){void 0===e&&(e=null),e&&(this.remove(e),e.unsubscribe());var t=this.window;t&&t.complete();var n,r=this.window=new fr;this.destination.next(r);try{n=(0,this.closingSelector)()}catch(e){return this.destination.error(e),void this.window.error(e)}this.add(this.closingNotification=Na(this,n))},t}(Sa),lu=function(){function e(e,t){this.observables=e,this.project=t}return e.prototype.call=function(e,t){return t.subscribe(new du(e,this.observables,this.project))},e}(),du=function(e){function t(t,n,r){var a=e.call(this,t)||this;a.observables=n,a.project=r,a.toRespond=[];var i=n.length;a.values=new Array(i);for(var o=0;o<i;o++)a.toRespond.push(o);for(o=0;o<i;o++){var s=n[o];a.add(Na(a,s,void 0,o))}return a}return Un(t,e),t.prototype.notifyNext=function(e,t,n){this.values[n]=t;var r=this.toRespond;if(r.length>0){var a=r.indexOf(n);-1!==a&&r.splice(a,1)}},t.prototype.notifyComplete=function(){},t.prototype._next=function(e){if(0===this.toRespond.length){var t=[e].concat(this.values);this.project?this._tryProject(t):this.destination.next(t)}},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(Sa),fu=Object.freeze({__proto__:null,audit:yi,auditTime:function(e,t){return void 0===t&&(t=aa),yi((function(){return ui(e,t)}))},buffer:function(e){return function(t){return t.lift(new ki(e))}},bufferCount:function(e,t){return void 0===t&&(t=null),function(n){return n.lift(new Si(e,t))}},bufferTime:function(e){var t=arguments.length,n=aa;Dr(arguments[arguments.length-1])&&(n=arguments[arguments.length-1],t--);var r=null;t>=2&&(r=arguments[1]);var a=Number.POSITIVE_INFINITY;return t>=3&&(a=arguments[2]),function(t){return t.lift(new Ii(e,r,a,n))}},bufferToggle:function(e,t){return function(n){return n.lift(new Ri(e,t))}},bufferWhen:function(e){return function(t){return t.lift(new Di(e))}},catchError:function(e){return function(t){var n=new Mi(e),r=t.lift(n);return n.caught=r}},combineAll:function(e){return function(t){return t.lift(new Aa(e))}},combineLatest:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=null;return"function"==typeof e[e.length-1]&&(n=e.pop()),1===e.length&&Xn(e[0])&&(e=e[0].slice()),function(t){return t.lift.call(Da([t].concat(e)),new Aa(n))}},concat:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return t.lift.call(Wa.apply(void 0,[t].concat(e)))}},concatAll:ja,concatMap:Li,concatMapTo:function(e,t){return Li((function(){return e}),t)},count:function(e){return function(t){return t.lift(new Vi(e,t))}},debounce:function(e){return function(t){return t.lift(new Zi(e))}},debounceTime:function(e,t){return void 0===t&&(t=aa),function(n){return n.lift(new ji(e,t))}},defaultIfEmpty:Hi,delay:function(e,t){void 0===t&&(t=aa);var n=Ki(e)?+e-t.now():Math.abs(e);return function(e){return e.lift(new Yi(n,t))}},delayWhen:function(e,t){return t?function(n){return new to(n,t).lift(new Ji(e))}:function(t){return t.lift(new Ji(e))}},dematerialize:function(){return function(e){return e.lift(new ro)}},distinct:function(e,t){return function(n){return n.lift(new io(e,t))}},distinctUntilChanged:so,distinctUntilKeyChanged:function(e,t){return so((function(n,r){return t?t(n[e],r[e]):n[e]===r[e]}))},elementAt:function(e,t){if(e<0)throw new fa;var n=arguments.length>=2;return function(r){return r.pipe(ti((function(t,n){return n===e})),mo(1),n?Hi(t):lo((function(){return new fa})))}},endWith:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return Wa(t,Vr.apply(void 0,e))}},every:function(e,t){return function(n){return n.lift(new yo(e,t,n))}},exhaust:function(){return function(e){return e.lift(new xo)}},exhaustMap:function e(t,n){return n?function(r){return r.pipe(e((function(e,r){return Da(t(e,r)).pipe(ma((function(t,a){return n(e,t,r,a)})))})))}:function(e){return e.lift(new wo(t))}},expand:function(e,t,n){return void 0===t&&(t=Number.POSITIVE_INFINITY),t=(t||0)<1?Number.POSITIVE_INFINITY:t,function(r){return r.lift(new Co(e,t,n))}},filter:ti,finalize:function(e){return function(t){return t.lift(new Io(e))}},find:function(e,t){if("function"!=typeof e)throw new TypeError("predicate is not a function");return function(n){return n.lift(new Eo(e,n,!1,t))}},findIndex:function(e,t){return function(n){return n.lift(new Eo(e,n,!0,t))}},first:function(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?ti((function(t,n){return e(t,n,r)})):ar,mo(1),n?Hi(t):lo((function(){return new pa})))}},groupBy:function(e,t,n,r){return function(a){return a.lift(new xr(e,t,n,r))}},ignoreElements:function(){return function(e){return e.lift(new Oo)}},isEmpty:function(){return function(e){return e.lift(new Ro)}},last:function(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?ti((function(t,n){return e(t,n,r)})):ar,Do(1),n?Hi(t):lo((function(){return new pa})))}},map:ma,mapTo:function(e){return function(t){return t.lift(new Fo(e))}},materialize:function(){return function(e){return e.lift(new Vo)}},max:function(e){return Wo("function"==typeof e?function(t,n){return e(t,n)>0?t:n}:function(e,t){return e>t?e:t})},merge:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return t.lift.call(Qa.apply(void 0,[t].concat(e)))}},mergeAll:Ua,mergeMap:La,flatMap:Za,mergeMapTo:function(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof t?La((function(){return e}),t,n):("number"==typeof t&&(n=t),La((function(){return e}),n))},mergeScan:function(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(r){return r.lift(new Go(e,t,n))}},min:function(e){return Wo("function"==typeof e?function(t,n){return e(t,n)<0?t:n}:function(e,t){return e<t?e:t})},multicast:qo,observeOn:function(e,t){return void 0===t&&(t=0),function(n){return n.lift(new jr(e,t))}},onErrorResumeNext:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===e.length&&Xn(e[0])&&(e=e[0]),function(t){return t.lift(new Ko(e))}},pairwise:function(){return function(e){return e.lift(new Qo)}},partition:function(e,t){return function(n){return[ti(e,t)(n),ti(ei(e,t))(n)]}},pluck:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.length;if(0===n)throw new Error("list of properties cannot be empty.");return function(t){return ma(Jo(e,n))(t)}},publish:function(e){return e?qo((function(){return new fr}),e):qo(new fr)},publishBehavior:function(e){return function(t){return qo(new _r(e))(t)}},publishLast:function(){return function(e){return qo(new Xr)(e)}},publishReplay:function(e,t,n,r){n&&"function"!=typeof n&&(r=n);var a="function"==typeof n?n:void 0,i=new Hr(e,t,r);return function(e){return qo((function(){return i}),a)(e)}},race:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return 1===e.length&&Xn(e[0])&&(e=e[0]),t.lift.call(ai.apply(void 0,[t].concat(e)))}},reduce:Wo,repeat:function(e){return void 0===e&&(e=-1),function(t){return 0===e?Pr():e<0?t.lift(new es(-1,t)):t.lift(new es(e-1,t))}},repeatWhen:function(e){return function(t){return t.lift(new ns(e))}},retry:function(e){return void 0===e&&(e=-1),function(t){return t.lift(new as(e,t))}},retryWhen:function(e){return function(t){return t.lift(new os(e,t))}},refCount:hr,sample:function(e){return function(t){return t.lift(new us(e))}},sampleTime:function(e,t){return void 0===t&&(t=aa),function(n){return n.lift(new ls(e,t))}},scan:Zo,sequenceEqual:function(e,t){return function(n){return n.lift(new ps(e,t))}},share:function(){return function(e){return hr()(qo(vs)(e))}},shareReplay:function(e,t,n){var r;return r=e&&"object"==typeof e?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:n},function(e){return e.lift(function(e){var t,n,r=e.bufferSize,a=void 0===r?Number.POSITIVE_INFINITY:r,i=e.windowTime,o=void 0===i?Number.POSITIVE_INFINITY:i,s=e.refCount,u=e.scheduler,c=0,l=!1,d=!1;return function(e){var r;c++,!t||l?(l=!1,t=new Hr(a,o,u),r=t.subscribe(this),n=e.subscribe({next:function(e){t.next(e)},error:function(e){l=!0,t.error(e)},complete:function(){d=!0,n=void 0,t.complete()}}),d&&(n=void 0)):r=t.subscribe(this),this.add((function(){c--,r.unsubscribe(),r=void 0,n&&!d&&s&&0===c&&(n.unsubscribe(),n=void 0,t=void 0)}))}}(r))}},single:function(e){return function(t){return t.lift(new gs(e,t))}},skip:function(e){return function(t){return t.lift(new bs(e))}},skipLast:function(e){return function(t){return t.lift(new ks(e))}},skipUntil:function(e){return function(t){return t.lift(new Ss(e))}},skipWhile:function(e){return function(t){return t.lift(new _s(e))}},startWith:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return Dr(n)?(e.pop(),function(t){return Wa(e,t,n)}):function(t){return Wa(e,t)}},subscribeOn:function(e,t){return void 0===t&&(t=0),function(n){return n.lift(new Es(e,t))}},switchAll:function(){return Ns(ar)},switchMap:Ns,switchMapTo:function(e,t){return t?Ns((function(){return e}),t):Ns((function(){return e}))},take:mo,takeLast:Do,takeUntil:function(e){return function(t){return t.lift(new Rs(e))}},takeWhile:function(e,t){return void 0===t&&(t=!1),function(n){return n.lift(new Ds(e,t))}},tap:function(e,t,n){return function(r){return r.lift(new Ms(e,t,n))}},throttle:function(e,t){return void 0===t&&(t=Ls),function(n){return n.lift(new Vs(e,!!t.leading,!!t.trailing))}},throttleTime:function(e,t,n){return void 0===t&&(t=aa),void 0===n&&(n=Ls),function(r){return r.lift(new Zs(e,t,n.leading,n.trailing))}},throwIfEmpty:lo,timeInterval:function(e){return void 0===e&&(e=aa),function(t){return Ga((function(){return t.pipe(Zo((function(t,n){var r=t.current;return{value:n,current:e.now(),last:r}}),{current:e.now(),value:void 0,last:void 0}),ma((function(e){var t=e.current,n=e.last,r=e.value;return new Ws(r,t-n)})))}))}},timeout:function(e,t){return void 0===t&&(t=aa),Gs(e,zr(new ha),t)},timeoutWith:Gs,timestamp:function(e){return void 0===e&&(e=aa),ma((function(t){return new Xs(t,e.now())}))},toArray:function(){return Wo(Ks,[])},window:function(e){return function(t){return t.lift(new Ys(e))}},windowCount:function(e,t){return void 0===t&&(t=0),function(n){return n.lift(new $s(e,t))}},windowTime:function(e){var t=aa,n=null,r=Number.POSITIVE_INFINITY;return Dr(arguments[3])&&(t=arguments[3]),Dr(arguments[2])?t=arguments[2]:Ka(arguments[2])&&(r=Number(arguments[2])),Dr(arguments[1])?t=arguments[1]:Ka(arguments[1])&&(n=Number(arguments[1])),function(a){return a.lift(new eu(e,n,r,t))}},windowToggle:function(e,t){return function(n){return n.lift(new ou(e,t))}},windowWhen:function(e){return function(t){return t.lift(new uu(e))}},withLatestFrom:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){var n;"function"==typeof e[e.length-1]&&(n=e.pop());var r=e;return t.lift(new lu(r,n))}},zip:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return t.lift.call(li.apply(void 0,[t].concat(e)))}},zipAll:function(e){return function(t){return t.lift(new di(e))}}}),pu=Vn(fu),hu={};Object.defineProperty(hu,"__esModule",{value:!0});var mu=pu;function vu(e){for(var t=[],n=0;n<e.length;n++)n%3==0?t.push(e[n]<<4|e[n+1]>>4):(t.push((15&e[n])<<8|e[n+1]),n++);return t}function gu(e){for(var t=[],n=0;n<e.length;n+=3)t.push(e[n]<<16|e[n+1]<<8|e[n+2]);return t}function yu(e,t){function n(n){return{x:t*e.getInt16(n),y:t*e.getInt16(n+2),z:t*e.getInt16(n+4)}}return{sequenceId:e.getUint16(0),samples:[n(2),n(8),n(14)]}}hu.parseControl=function(e){return e.pipe(mu.concatMap((function(e){return e.split("")})),mu.scan((function(e,t){return e.indexOf("}")>=0?t:e+t}),""),mu.filter((function(e){return e.indexOf("}")>=0})),mu.map((function(e){return JSON.parse(e)})))},hu.decodeUnsigned12BitData=vu,hu.decodeUnsigned24BitData=gu,hu.decodeEEGSamples=function(e){return vu(e).map((function(e){return.48828125*(e-2048)}))},hu.decodePPGSamples=function(e){return gu(e)},hu.parseTelemetry=function(e){return{sequenceId:e.getUint16(0),batteryLevel:e.getUint16(2)/512,fuelGaugeVoltage:2.2*e.getUint16(4),temperature:e.getUint16(8)}},hu.parseAccelerometer=function(e){return yu(e,610352e-10)},hu.parseGyroscope=function(e){return yu(e,.0074768)};var bu={},xu=Ln&&Ln.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,s)}u((r=r.apply(e,t||[])).next())}))},ku=Ln&&Ln.__generator||function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(bu,"__esModule",{value:!0});var wu=gi,Su=pu;bu.decodeResponse=function(e){return(new TextDecoder).decode(e.subarray(1,1+e[0]))},bu.encodeCommand=function(e){var t=(new TextEncoder).encode("X"+e+"\n");return t[0]=t.length-1,t},bu.observableCharacteristic=function(e){return xu(this,void 0,void 0,(function(){var t;return ku(this,(function(n){switch(n.label){case 0:return[4,e.startNotifications()];case 1:return n.sent(),t=wu.fromEvent(e.service.device,"gattserverdisconnected"),[2,wu.fromEvent(e,"characteristicvaluechanged").pipe(Su.takeUntil(t),Su.map((function(e){return e.target.value})))]}}))}))};var Cu={};Object.defineProperty(Cu,"__esModule",{value:!0});var _u=gi,Iu=pu,Tu=zn;Cu.zipSamples=function(e){var t=[],n=null;return e.pipe(Iu.mergeMap((function(e){if(e.timestamp!==n&&(n=e.timestamp,t.length)){var r=_u.from([t.slice()]);return t.splice(0,t.length,e),r}return t.push(e),_u.from([])})),Iu.concat(_u.from([t])),Iu.mergeMap((function(e){var t=e[0].samples.map((function(t,n){for(var r=[NaN,NaN,NaN,NaN,NaN],a=0,i=e;a<i.length;a++){var o=i[a];r[o.electrode]=o.samples[n]}return{data:r,index:e[0].index,timestamp:e[0].timestamp+1e3*n/Tu.EEG_FREQUENCY}}));return _u.from(t)})))};var Eu={};Object.defineProperty(Eu,"__esModule",{value:!0});var Nu=gi,Ou=pu,Au=zn;Eu.zipSamplesPpg=function(e){var t=[],n=null;return e.pipe(Ou.mergeMap((function(e){if(e.timestamp!==n&&(n=e.timestamp,t.length)){var r=Nu.from([t.slice()]);return t.splice(0,t.length,e),r}return t.push(e),Nu.from([])})),Ou.concat(Nu.from([t])),Ou.mergeMap((function(e){var t=e[0].samples.map((function(t,n){for(var r=[NaN,NaN,NaN],a=0,i=e;a<i.length;a++){var o=i[a];r[o.ppgChannel]=o.samples[n]}return{data:r,index:e[0].index,timestamp:e[0].timestamp+1e3*n/Au.PPG_FREQUENCY}}));return Nu.from(t)})))},function(e){var t=Ln&&Ln.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,s)}u((r=r.apply(e,t||[])).next())}))},n=Ln&&Ln.__generator||function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var r=gi,a=pu,i=hu,o=bu,s=Cu;e.zipSamples=s.zipSamples;var u=Eu;e.zipSamplesPpg=u.zipSamplesPpg,e.MUSE_SERVICE=65165;var c=["273e000f-4c4d-454d-96be-f03bac821358","273e0010-4c4d-454d-96be-f03bac821358","273e0011-4c4d-454d-96be-f03bac821358"];e.PPG_FREQUENCY=64,e.PPG_SAMPLES_PER_READING=6;var l=["273e0003-4c4d-454d-96be-f03bac821358","273e0004-4c4d-454d-96be-f03bac821358","273e0005-4c4d-454d-96be-f03bac821358","273e0006-4c4d-454d-96be-f03bac821358","273e0007-4c4d-454d-96be-f03bac821358"];e.EEG_FREQUENCY=256,e.EEG_SAMPLES_PER_READING=12,e.ppgChannelNames=["ambient","infrared","red"],e.channelNames=["TP9","AF7","AF8","TP10","AUX"];var d=function(){function s(){this.enableAux=!1,this.enablePpg=!1,this.deviceName="",this.connectionStatus=new r.BehaviorSubject(!1),this.gatt=null,this.lastIndex=null,this.lastTimestamp=null}return s.prototype.connect=function(s){return t(this,void 0,void 0,(function(){var t,u,d,f,p,h,m,v,g,y,b,x,k,w,S,C,_,I,T,E,N,O=this;return n(this,(function(A){switch(A.label){case 0:return s?(this.gatt=s,[3,4]):[3,1];case 1:return[4,navigator.bluetooth.requestDevice({filters:[{services:[e.MUSE_SERVICE]}]})];case 2:return t=A.sent(),u=this,[4,t.gatt.connect()];case 3:u.gatt=A.sent(),A.label=4;case 4:return this.deviceName=this.gatt.device.name||null,[4,this.gatt.getPrimaryService(e.MUSE_SERVICE)];case 5:return d=A.sent(),r.fromEvent(this.gatt.device,"gattserverdisconnected").pipe(a.first()).subscribe((function(){O.gatt=null,O.connectionStatus.next(!1)})),f=this,[4,d.getCharacteristic("273e0001-4c4d-454d-96be-f03bac821358")];case 6:return f.controlChar=A.sent(),p=this,[4,o.observableCharacteristic(this.controlChar)];case 7:return p.rawControlData=A.sent().pipe(a.map((function(e){return o.decodeResponse(new Uint8Array(e.buffer))})),a.share()),this.controlResponses=i.parseControl(this.rawControlData),[4,d.getCharacteristic("273e000b-4c4d-454d-96be-f03bac821358")];case 8:return h=A.sent(),m=this,[4,o.observableCharacteristic(h)];case 9:return m.telemetryData=A.sent().pipe(a.map(i.parseTelemetry)),[4,d.getCharacteristic("273e0009-4c4d-454d-96be-f03bac821358")];case 10:return v=A.sent(),g=this,[4,o.observableCharacteristic(v)];case 11:return g.gyroscopeData=A.sent().pipe(a.map(i.parseGyroscope)),[4,d.getCharacteristic("273e000a-4c4d-454d-96be-f03bac821358")];case 12:return y=A.sent(),b=this,[4,o.observableCharacteristic(y)];case 13:if(b.accelerometerData=A.sent().pipe(a.map(i.parseAccelerometer)),this.eventMarkers=new r.Subject,!this.enablePpg)return[3,18];this.ppgCharacteristics=[],x=[],k=c.length,w=function(t){var r,s,u,l;return n(this,(function(n){switch(n.label){case 0:return r=c[t],[4,d.getCharacteristic(r)];case 1:return s=n.sent(),l=(u=x).push,[4,o.observableCharacteristic(s)];case 2:return l.apply(u,[n.sent().pipe(a.map((function(n){var r=n.getUint16(0);return{index:r,ppgChannel:t,samples:i.decodePPGSamples(new Uint8Array(n.buffer).subarray(2)),timestamp:O.getTimestamp(r,e.PPG_SAMPLES_PER_READING,e.PPG_FREQUENCY)}})))]),S.ppgCharacteristics.push(s),[2]}}))},S=this,C=0,A.label=14;case 14:return C<k?[5,w(C)]:[3,17];case 15:A.sent(),A.label=16;case 16:return C++,[3,14];case 17:this.ppgReadings=r.merge.apply(void 0,x),A.label=18;case 18:this.eegCharacteristics=[],_=[],I=this.enableAux?l.length:4,T=function(t){var r,s,u,c;return n(this,(function(n){switch(n.label){case 0:return r=l[t],[4,d.getCharacteristic(r)];case 1:return s=n.sent(),c=(u=_).push,[4,o.observableCharacteristic(s)];case 2:return c.apply(u,[n.sent().pipe(a.map((function(n){var r=n.getUint16(0);return{electrode:t,index:r,samples:i.decodeEEGSamples(new Uint8Array(n.buffer).subarray(2)),timestamp:O.getTimestamp(r,e.EEG_SAMPLES_PER_READING,e.EEG_FREQUENCY)}})))]),E.eegCharacteristics.push(s),[2]}}))},E=this,N=0,A.label=19;case 19:return N<I?[5,T(N)]:[3,22];case 20:A.sent(),A.label=21;case 21:return N++,[3,19];case 22:return this.eegReadings=r.merge.apply(void 0,_),this.connectionStatus.next(!0),[2]}}))}))},s.prototype.sendCommand=function(e){return t(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return[4,this.controlChar.writeValue(o.encodeCommand(e))];case 1:return t.sent(),[2]}}))}))},s.prototype.start=function(){return t(this,void 0,void 0,(function(){var e;return n(this,(function(t){switch(t.label){case 0:return[4,this.pause()];case 1:return t.sent(),e="p21",this.enablePpg?e="p50":this.enableAux&&(e="p20"),[4,this.controlChar.writeValue(o.encodeCommand(e))];case 2:return t.sent(),[4,this.controlChar.writeValue(o.encodeCommand("s"))];case 3:return t.sent(),[4,this.resume()];case 4:return t.sent(),[2]}}))}))},s.prototype.pause=function(){return t(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return[4,this.sendCommand("h")];case 1:return e.sent(),[2]}}))}))},s.prototype.resume=function(){return t(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return[4,this.sendCommand("d")];case 1:return e.sent(),[2]}}))}))},s.prototype.deviceInfo=function(){return t(this,void 0,void 0,(function(){var e;return n(this,(function(t){switch(t.label){case 0:return e=this.controlResponses.pipe(a.filter((function(e){return!!e.fw})),a.take(1)).toPromise(),[4,this.sendCommand("v1")];case 1:return t.sent(),[2,e]}}))}))},s.prototype.injectMarker=function(e,r){return void 0===r&&(r=(new Date).getTime()),t(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return[4,this.eventMarkers.next({value:e,timestamp:r})];case 1:return t.sent(),[2]}}))}))},s.prototype.disconnect=function(){this.gatt&&(this.lastIndex=null,this.lastTimestamp=null,this.gatt.disconnect(),this.connectionStatus.next(!1))},s.prototype.getTimestamp=function(e,t,n){var r=1/n*1e3*t;for(null!==this.lastIndex&&null!==this.lastTimestamp||(this.lastIndex=e,this.lastTimestamp=(new Date).getTime()-r);this.lastIndex-e>4096;)e+=65536;return e===this.lastIndex?this.lastTimestamp:e>this.lastIndex?(this.lastTimestamp+=r*(e-this.lastIndex),this.lastIndex=e,this.lastTimestamp):this.lastTimestamp-r*(this.lastIndex-e)},s}();e.MuseClient=d}(zn);var Ru=["TP9","AF7","AF8","TP10"],Pu={label:"muse",device:zn.MuseClient,onconnect:function(e){return function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(0,g.Z)().mark((function t(){var n;return(0,g.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.device,t.next=3,n.start();case 3:n.eegReadings.subscribe((function(t){var n={};n[Ru[t.electrode]]=t.samples,e.ondata(n,t.timestamp)}));case 4:case"end":return t.stop()}}),t)})))},protocols:["bluetooth"]},Du=n(4245),Bu=n(184),Mu=(n(5658).v4,new X);function Fu(e){var t=e.color,n=e.text,r=e.textcolor,a=e.href;return(0,Bu.jsx)("button",{style:{width:"40%",backgroundColor:t},className:"square",id:"callbutton",onClick:function(){window.location.href="".concat(a)},children:(0,Bu.jsxs)("span",{className:"text3",style:{color:r},children:[" ",n," "]})})}Mu.load(Fn),Mu.load(Pu);var Lu=function(){var e=Du.parse(window.location.search).room;return(0,s.useEffect)((function(){var e=0,t="choose EEG device";!function n(){e<t.length&&(document.getElementById("placeholder").innerHTML+=t.charAt(e),e++,setTimeout(n,23))}()}),[]),(0,Bu.jsxs)("div",{id:"joincontrols",children:[(0,Bu.jsxs)("select",{id:"select-eeg-novalue",defaultValue:"nice",className:"option-eeg",onChange:function(e){!function(e){console.log(e.target.value),Mu.getUserDevice({label:e.target.value}).then((function(e){console.log("success")}))}(e)},children:[(0,Bu.jsx)("option",{value:"nice",id:"placeholder",disabled:!0,children:" "}),(0,Bu.jsx)("option",{value:"muse",children:" Muse 2"}),(0,Bu.jsx)("option",{value:"ganglion",children:" Ganglion "}),(0,Bu.jsx)("option",{value:"synthetic",children:" Synthetic Device"})]}),(0,Bu.jsx)(Fu,{color:"#FF007A",text:"let's call",textcolor:"#D1D0C5",href:window.location.origin+"/callpage?room=".concat(e)}),(0,Bu.jsx)(Fu,{color:"#FFFFFF",text:"create account",textcolor:"#9A9A9D",href:window.location.origin+"/?room=".concat(e)}),(0,Bu.jsx)("a",{style:{width:"100%",color:"#FF007A",marginTop:"2vw",textDecoration:"unset"},className:"text3",children:" Sign In "})]})};function Vu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zu=n.p+"static/media/ezgif.com-gif-maker (3).5da3f3295667cec1b0a2.gif",Zu=function(){return(0,s.useEffect)((function(){document.getElementById("lower-container").style.animation="none !important",navigator.mediaDevices.getUserMedia({video:!0}).then((function(e){!function(e,t){var n=document.getElementById(t);n.srcObject=e,n.addEventListener("loadedmetadata",(function(){document.getElementById("lower-container").style.animation="none",console.log("metadata loaded!"),n.play()}))}(e,"video-client-join")}))})),(0,Bu.jsx)(s.Fragment,{children:(0,Bu.jsxs)("div",{id:"video-container",children:[(0,Bu.jsx)("video",{id:"video-client-join",style:Vu({height:"",width:"800px",maxWidth:"800px",borderRadius:"20px",backgroundColor:"black"},"backgroundColor","black"),children:" "}),(0,Bu.jsx)("img",{id:"loading",style:{display:"none"},src:zu,alt:"transition gif"})]})})},Uu=n.p+"static/media/logo.1f32f06bfa722a3c1322.png",ju=function(){return(0,Bu.jsxs)("div",{id:"login-page",className:"header",style:{display:"flex",justifyContent:"center",height:"5%",alignItems:"center"},children:[(0,Bu.jsxs)("div",{className:"text2",style:{display:"flex",flexFlow:"wrap"},children:[(0,Bu.jsx)("span",{style:{width:"100%",textAlign:"right",fontSize:"min(20px, 2vw)"},children:" Not Logged In"}),(0,Bu.jsx)("span",{style:{width:"100%",textAlign:"right",marginTop:"0.2vw"},children:" Create New Account "})]}),(0,Bu.jsx)("div",{style:{marginLeft:"1vw"},className:"circle"})]})},Wu=function(){return(0,Bu.jsxs)("div",{className:"upper-container",style:{display:"flex",justifyContent:"space-between"},children:[(0,Bu.jsx)("img",{id:"logo",className:"header",src:Uu,onClick:function(){window.location.href="/"}}),(0,Bu.jsx)(ju,{})]})},Gu=n(5658).v4,Hu=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),null==Du.parse(window.location.search).room?window.location.href="/?room=".concat(Gu()):e=t.call(this),(0,p.Z)(e)}return(0,l.Z)(n,[{key:"render",value:function(){return(0,Bu.jsxs)(s.Fragment,{children:[(0,Bu.jsx)(Wu,{}),(0,Bu.jsxs)("div",{id:"lower-container",children:[(0,Bu.jsx)(Zu,{}),(0,Bu.jsx)(Lu,{})]})]})}}]),n}(s.Component);s.Component;var qu=n.p+"static/media/microphone.2416fd8fabd16d7c8d4fb17c7e7f5797.svg";var Xu=n.p+"static/media/brokenheart.4a09c68213e3239de2c5f8701c418e4e.svg";var Ku=n.p+"static/media/chatbubble.30981864062f37371ac833359140473e.svg",Yu=n(2506),Qu=!0,$u=!0;function Ju(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function ec(e,t,n){if(e.RTCPeerConnection){var r=e.RTCPeerConnection.prototype,a=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return a.apply(this,arguments);var i=function(e){var t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,i),a.apply(this,[e,i])};var i=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return i.apply(this,arguments);if(!this._eventMap[t].has(n))return i.apply(this,arguments);var r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,i.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}}function tc(e){return"boolean"!==typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(Qu=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function nc(e){return"boolean"!==typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):($u=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function rc(){if("object"===typeof window){if(Qu)return;"undefined"!==typeof console&&"function"===typeof console.log&&console.log.apply(console,arguments)}}function ac(e,t){$u&&console.warn(e+" is deprecated, please use "+t+" instead.")}function ic(e){var t={browser:null,version:null};if("undefined"===typeof e||!e.navigator)return t.browser="Not a browser.",t;var n=e.navigator;if(n.mozGetUserMedia)t.browser="firefox",t.version=Ju(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=Ju(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.mediaDevices&&n.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=Ju(n.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=Ju(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}function oc(e){return"[object Object]"===Object.prototype.toString.call(e)}function sc(e){return oc(e)?Object.keys(e).reduce((function(t,n){var r=oc(e[n]),a=r?sc(e[n]):e[n],i=r&&!Object.keys(a).length;return void 0===a||i?t:Object.assign(t,Vu({},n,a))}),{}):e}function uc(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((function(r){r.endsWith("Id")?uc(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach((function(t){uc(e,e.get(t),n)}))})))}function cc(e,t,n){var r=n?"outbound-rtp":"inbound-rtp",a=new Map;if(null===t)return a;var i=[];return e.forEach((function(e){"track"===e.type&&e.trackIdentifier===t.id&&i.push(e)})),i.forEach((function(t){e.forEach((function(n){n.type===r&&n.trackId===t.id&&uc(e,n,a)}))})),a}var lc=rc;function dc(e,t){var n=e&&e.navigator;if(n.mediaDevices){var r=function(e){if("object"!==typeof e||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"===typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"===typeof r.exact&&(r.min=r.max=r.exact);var a=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var i={};"number"===typeof r.ideal?(i[a("min",n)]=r.ideal,t.optional.push(i),(i={})[a("max",n)]=r.ideal,t.optional.push(i)):(i[a("",n)]=r.ideal,t.optional.push(i))}void 0!==r.exact&&"number"!==typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[a("",n)]=r.exact):["min","max"].forEach((function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[a(e,n)]=r[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},a=function(e,a){if(t.version>=61)return a(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===typeof e.audio){var i=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};i((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),i(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"===typeof e.video){var o=e.video.facingMode;o=o&&("object"===typeof o?o:{ideal:o});var s,u=t.version<66;if(o&&("user"===o.exact||"environment"===o.exact||"user"===o.ideal||"environment"===o.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||u))if(delete e.video.facingMode,"environment"===o.exact||"environment"===o.ideal?s=["back","rear"]:"user"!==o.exact&&"user"!==o.ideal||(s=["front"]),s)return n.mediaDevices.enumerateDevices().then((function(t){t=t.filter((function(e){return"videoinput"===e.kind}));var n=t.find((function(e){return s.some((function(t){return e.label.toLowerCase().includes(t)}))}));return!n&&t.length&&s.includes("back")&&(n=t[t.length-1]),n&&(e.video.deviceId=o.exact?{exact:n.deviceId}:{ideal:n.deviceId}),e.video=r(e.video),lc("chrome: "+JSON.stringify(e)),a(e)}));e.video=r(e.video)}return lc("chrome: "+JSON.stringify(e)),a(e)},i=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,r){a(e,(function(e){n.webkitGetUserMedia(e,t,(function(e){r&&r(i(e))}))}))}.bind(n),n.mediaDevices.getUserMedia){var o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(e){return a(e,(function(e){return o(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return Promise.reject(i(e))}))}))}}}}function fc(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"===typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((function(t){var r=n.video&&n.video.width,a=n.video&&n.video.height,i=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:i||3}},r&&(n.video.mandatory.maxWidth=r),a&&(n.video.mandatory.maxHeight=a),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}function pc(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function hc(e){if("object"===typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(r){var a;a=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.track.id})):{track:r.track};var i=new Event("track");i.track=r.track,i.receiver=a,i.transceiver={receiver:a},i.streams=[t.stream],n.dispatchEvent(i)})),t.stream.getTracks().forEach((function(r){var a;a=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.id})):{track:r};var i=new Event("track");i.track=r,i.receiver=a,i.transceiver={receiver:a},i.streams=[t.stream],n.dispatchEvent(i)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else ec(e,"track",(function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e}))}function mc(e){if("object"===typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){var a=n.apply(this,arguments);return a||(a=t(this,e),this._senders.push(a)),a};var r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var a=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._senders=this._senders||[],a.apply(this,[e]),e.getTracks().forEach((function(e){n._senders.push(t(n,e))}))};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach((function(e){var n=t._senders.find((function(t){return t.track===e}));n&&t._senders.splice(t._senders.indexOf(n),1)}))}}else if("object"===typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var o=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=o.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function vc(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,n=Array.prototype.slice.call(arguments),r=n[0],a=n[1],i=n[2];if(arguments.length>0&&"function"===typeof r)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!==typeof r))return t.apply(this,[]);var o=function(e){var t={};return e.result().forEach((function(e){var n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t[n.id]=n})),t},s=function(e){return new Map(Object.keys(e).map((function(t){return[t,e[t]]})))};if(arguments.length>=2){var u=function(e){a(s(o(e)))};return t.apply(this,[u,r])}return new Promise((function(n,r){t.apply(e,[function(e){n(s(o(e)))},r])})).then(a,i)}}}function gc(e){if("object"===typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return cc(t,e.track,!0)}))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var r=e.RTCPeerConnection.prototype.getReceivers;r&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=r.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t}),ec(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return cc(t,e.track,!1)}))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var a=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t,n,r,i=arguments[0];return this.getSenders().forEach((function(e){e.track===i&&(t?r=!0:t=e)})),this.getReceivers().forEach((function(e){return e.track===i&&(n?r=!0:n=e),e.track===i})),r||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return a.apply(this,arguments)}}}}function yc(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){var n=t.getSenders().find((function(t){return t.track===e}));if(n)throw new DOMException("Track already exists.","InvalidAccessError")}));var r=this.getSenders();n.apply(this,arguments);var a=this.getSenders().filter((function(e){return-1===r.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(a)};var r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};var a=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((function(n){var r=t._shimmedLocalStreams[n].indexOf(e);-1!==r&&t._shimmedLocalStreams[n].splice(r,1),1===t._shimmedLocalStreams[n].length&&delete t._shimmedLocalStreams[n]})),a.apply(this,arguments)}}function bc(e,t){if(e.RTCPeerConnection){if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return yc(e);var n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=n.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var n=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((function(e){var t=n.getSenders().find((function(t){return t.track===e}));if(t)throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){var a=new e.MediaStream(t.getTracks());this._streams[t.id]=a,this._reverseStreams[a.id]=t,t=a}r.apply(this,[t])};var a=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},a.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){var r=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var a=[].slice.call(arguments,1);if(1!==a.length||!a[0].getTracks().find((function(e){return e===t})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");var i=this.getSenders().find((function(e){return e.track===t}));if(i)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var o=this._streams[n.id];if(o)o.addTrack(t),Promise.resolve().then((function(){r.dispatchEvent(new Event("negotiationneeded"))}));else{var s=new e.MediaStream([t]);this._streams[n.id]=s,this._reverseStreams[s.id]=n,this.addStream(s)}return this.getSenders().find((function(e){return e.track===t}))},["createOffer","createAnswer"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=Vu({},t,(function(){var e=this,t=arguments,r=arguments.length&&"function"===typeof arguments[0];return r?n.apply(this,[function(n){var r=s(e,n);t[0].apply(null,[r])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):n.apply(this,arguments).then((function(t){return s(e,t)}))}));e.RTCPeerConnection.prototype[t]=r[t]}));var i=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=u(this,arguments[0]),i.apply(this,arguments)):i.apply(this,arguments)};var o=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=o.get.apply(this);return""===e.type?e:s(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t,n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{},Object.keys(this._streams).forEach((function(r){n._streams[r].getTracks().find((function(t){return e.track===t}))&&(t=n._streams[r])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function s(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],a=e._streams[r.id];n=n.replace(new RegExp(a.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}function u(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],a=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),a.id)})),new RTCSessionDescription({type:t.type,sdp:n})}}function xc(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=Vu({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=r[t]}))}function kc(e,t){ec(e,"negotiationneeded",(function(e){var n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}var wc=n(1146),Sc=n.n(wc);function Cc(e){var t=e&&e.navigator,n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return n(e).catch((function(e){return Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}}(e))}))}}function _c(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function Ic(e,t){if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var n=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){n.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);var r=Sc()(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&ac("RTCIceServer.url","RTCIceServer.urls");var r="string"===typeof t;return r&&(t=[t]),t=t.filter((function(e){if(0===e.indexOf("stun:"))return!1;var t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!n?(n=!0,!0):t&&!n})),delete e.url,e.urls=r?t[0]:t,!!t.length}}))}(e.iceServers,t.version),rc("ICE servers after filtering:",e.iceServers)),new r(e)},e.RTCPeerConnection.prototype=r.prototype}function Tc(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}function Ec(e,t){var n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){ac("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var a=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},i=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"===typeof e&&"object"===typeof e.audio&&(e=JSON.parse(JSON.stringify(e)),a(e.audio,"autoGainControl","mozAutoGainControl"),a(e.audio,"noiseSuppression","mozNoiseSuppression")),i(e)},r&&r.prototype.getSettings){var o=r.prototype.getSettings;r.prototype.getSettings=function(){var e=o.apply(this,arguments);return a(e,"mozAutoGainControl","autoGainControl"),a(e,"mozNoiseSuppression","noiseSuppression"),e}}if(r&&r.prototype.applyConstraints){var s=r.prototype.applyConstraints;r.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===typeof e&&(e=JSON.parse(JSON.stringify(e)),a(e,"autoGainControl","mozAutoGainControl"),a(e,"noiseSuppression","mozNoiseSuppression")),s.apply(this,[e])}}}}function Nc(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){var r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Promise.reject(r)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}function Oc(e){"object"===typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function Ac(e,t){if("object"===typeof e&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=Vu({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=r[t]}));var n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=Array.prototype.slice.call(arguments),a=e[0],i=e[1],o=e[2];return r.apply(this,[a||null]).then((function(e){if(t.version<53&&!i)try{e.forEach((function(e){e.type=n[e.type]||e.type}))}catch(Ln){if("TypeError"!==Ln.name)throw Ln;e.forEach((function(t,r){e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(i,o)}}}function Rc(e){if("object"===typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}}function Pc(e){if("object"===typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n}),ec(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function Dc(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;ac("removeStream","removeTrack"),this.getSenders().forEach((function(n){n.track&&e.getTracks().includes(n.track)&&t.removeTrack(n)}))})}function Bc(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function Mc(e){if("object"===typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach((function(e){if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));var r=t.apply(this,arguments);if(n){var a=r.sender,i=a.getParameters();(!("encodings"in i)||1===i.encodings.length&&0===Object.keys(i.encodings[0]).length)&&(i.encodings=e.sendEncodings,a.sendEncodings=e.sendEncodings,this.setParametersPromises.push(a.setParameters(i).then((function(){delete a.sendEncodings})).catch((function(){delete a.sendEncodings}))))}return r})}}function Fc(e){if("object"===typeof e&&e.RTCRtpSender){var t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){var e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}}function Lc(e){if("object"===typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(n,e)})).finally((function(){n.setParametersPromises=[]})):t.apply(this,arguments)}}}function Vc(e){if("object"===typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(n,e)})).finally((function(){n.setParametersPromises=[]})):t.apply(this,arguments)}}}function zc(e){if("object"===typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((function(r){return t.call(n,r,e)})),e.getVideoTracks().forEach((function(r){return t.call(n,r,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=this,r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return a&&a.forEach((function(e){n._localStreams?n._localStreams.includes(e)||n._localStreams.push(e):n._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var n=this._localStreams.indexOf(e);if(-1!==n){this._localStreams.splice(n,1);var r=e.getTracks();this.getSenders().forEach((function(e){r.includes(e.track)&&t.removeTrack(e)}))}})}}function Zc(e){if("object"===typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var n=new Event("addstream");n.stream=e,t.dispatchEvent(n)}}))})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}}))}),t.apply(e,arguments)}}}function Uc(e){if("object"===typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,a=t.setLocalDescription,i=t.setRemoteDescription,o=t.addIceCandidate;t.createOffer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],a=n.apply(this,[r]);return t?(a.then(e,t),Promise.resolve()):a},t.createAnswer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],a=r.apply(this,[n]);return t?(a.then(e,t),Promise.resolve()):a};var s=function(e,t,n){var r=a.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=s,s=function(e,t,n){var r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=s,s=function(e,t,n){var r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=s}}function jc(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=function(e){return r(Wc(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function Wc(e){return e&&void 0!==e.video?Object.assign({},e,{video:sc(e.video)}):e}function Gc(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){for(var r=[],a=0;a<e.iceServers.length;a++){var i=e.iceServers[a];!i.hasOwnProperty("urls")&&i.hasOwnProperty("url")?(ac("RTCIceServer.url","RTCIceServer.urls"),(i=JSON.parse(JSON.stringify(i))).urls=i.url,delete i.url,r.push(i)):r.push(e.iceServers[a])}e.iceServers=r}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}}function Hc(e){"object"===typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function qc(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){"undefined"!==typeof e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var n=this.getTransceivers().find((function(e){return"audio"===e.receiver.track.kind}));!1===e.offerToReceiveAudio&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveAudio||n||this.addTransceiver("audio"),"undefined"!==typeof e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var r=this.getTransceivers().find((function(e){return"video"===e.receiver.track.kind}));!1===e.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveVideo||r||this.addTransceiver("video")}return t.apply(this,arguments)}}function Xc(e){"object"!==typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var Kc=n(2365),Yc=n.n(Kc);function Qc(e){if(!(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var n=new t(e),r=Yc().parseCandidate(e.candidate),a=Object.assign(n,r);return a.toJSON=function(){return{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,usernameFragment:a.usernameFragment}},a}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,ec(e,"icecandidate",(function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))}}function $c(e,t){if(e.RTCPeerConnection){"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return"undefined"===typeof this._sctp?null:this._sctp}});var n=function(e){if(!e||!e.sdp)return!1;var t=Yc().splitSections(e.sdp);return t.shift(),t.some((function(e){var t=Yc().parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},r=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!==n?-1:n},a=function(e){var n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},i=function(e,n){var r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);var a=Yc().matchPrefix(e.sdp,"a=max-message-size:");return a.length>0?r=parseInt(a[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r},o=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){var e=this.getConfiguration(),s=e.sdpSemantics;"plan-b"===s&&Object.defineProperty(this,"sctp",{get:function(){return"undefined"===typeof this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){var u,c=r(arguments[0]),l=a(c),d=i(arguments[0],c);u=0===l&&0===d?Number.POSITIVE_INFINITY:0===l||0===d?Math.max(l,d):Math.min(l,d);var f={};Object.defineProperty(f,"maxMessageSize",{get:function(){return u}}),this._sctp=f}return o.apply(this,arguments)}}}function Jc(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return n(e,this),e},ec(e,"datachannel",(function(e){return n(e.channel,e.target),e}))}function n(e,t){var n=e.send;e.send=function(){var r=arguments[0],a=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&a>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}}function el(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((function(e){var n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}}function tl(e,t){if(e.RTCPeerConnection&&!("chrome"===t.browser&&t.version>=71)&&!("safari"===t.browser&&t.version>=605)){var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){var r=t.sdp.split("\n").filter((function(e){return"a=extmap-allow-mixed"!==e.trim()})).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:r}):t.sdp=r}return n.apply(this,arguments)}}}function nl(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}}var rl=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=n.window,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},u=rc,c=ic(o),l={browserDetails:c,commonShim:i,extractVersion:Ju,disableLog:tc,disableWarnings:nc};switch(c.browser){case"chrome":if(!e||!xc||!s.shimChrome)return u("Chrome shim is not included in this adapter release."),l;if(null===c.version)return u("Chrome shim can not determine version, not shimming."),l;u("adapter.js shimming chrome."),l.browserShim=e,nl(o,c),dc(o,c),pc(o),xc(o,c),hc(o),bc(o,c),mc(o),vc(o),gc(o),kc(o,c),Qc(o),el(o),$c(o,c),Jc(o),tl(o,c);break;case"firefox":if(!r||!Ac||!s.shimFirefox)return u("Firefox shim is not included in this adapter release."),l;u("adapter.js shimming firefox."),l.browserShim=r,nl(o,c),Ec(o,c),Ac(o,c),Oc(o),Dc(o),Rc(o),Pc(o),Bc(o),Mc(o),Fc(o),Lc(o),Vc(o),Qc(o),el(o),$c(o,c),Jc(o);break;case"edge":if(!t||!Ic||!s.shimEdge)return u("MS edge shim is not included in this adapter release."),l;u("adapter.js shimming edge."),l.browserShim=t,Cc(o),_c(o),Ic(o,c),Tc(o),$c(o,c),Jc(o);break;case"safari":if(!a||!s.shimSafari)return u("Safari shim is not included in this adapter release."),l;u("adapter.js shimming safari."),l.browserShim=a,nl(o,c),Gc(o),qc(o),Uc(o),zc(o),Zc(o),Hc(o),jc(o),Xc(o),Qc(o),$c(o,c),Jc(o),tl(o,c);break;default:u("Unsupported browser!")}return l}({window:"undefined"===typeof window?void 0:window}),al=rl;function il(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var ol=al.default||al,sl=new(function(){function e(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}return e.prototype.isWebRTCSupported=function(){return"undefined"!==typeof RTCPeerConnection},e.prototype.isBrowserSupported=function(){var e=this.getBrowser(),t=this.getVersion();return!!this.supportedBrowsers.includes(e)&&("chrome"===e?t>=this.minChromeVersion:"firefox"===e?t>=this.minFirefoxVersion:"safari"===e&&(!this.isIOS&&t>=this.minSafariVersion))},e.prototype.getBrowser=function(){return ol.browserDetails.browser},e.prototype.getVersion=function(){return ol.browserDetails.version||0},e.prototype.isUnifiedPlanSupported=function(){var e,t=this.getBrowser(),n=ol.browserDetails.version||0;if("chrome"===t&&n<this.minChromeVersion)return!1;if("firefox"===t&&n>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var r=!1;try{(e=new RTCPeerConnection).addTransceiver("audio"),r=!0}catch(Ln){}finally{e&&e.close()}return r},e.prototype.toString=function(){return"Supports:\n    browser:".concat(this.getBrowser(),"\n    version:").concat(this.getVersion(),"\n    isIOS:").concat(this.isIOS,"\n    isWebRTCSupported:").concat(this.isWebRTCSupported(),"\n    isBrowserSupported:").concat(this.isBrowserSupported(),"\n    isUnifiedPlanSupported:").concat(this.isUnifiedPlanSupported())},e}()),ul={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"},cl=function(){function e(){this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.chunkedMTU=16300,this.defaultConfig=ul,this.browser=sl.getBrowser(),this.browserVersion=sl.getVersion(),this.supports=function(){var e,t={browser:sl.isBrowserSupported(),webRTC:sl.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!t.webRTC)return t;try{e=new RTCPeerConnection(ul),t.audioVideo=!0;var n=void 0;try{n=e.createDataChannel("_PEERJSTEST",{ordered:!0}),t.data=!0,t.reliable=!!n.ordered;try{n.binaryType="blob",t.binaryBlob=!sl.isIOS}catch(Ln){}}catch(Ln){}finally{n&&n.close()}}catch(Ln){}finally{e&&e.close()}return t}(),this.pack=Yu.pack,this.unpack=Yu.unpack,this._dataCount=1}return e.prototype.noop=function(){},e.prototype.validateId=function(e){return!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e)},e.prototype.chunk=function(e){for(var t=[],n=e.size,r=Math.ceil(n/ll.chunkedMTU),a=0,i=0;i<n;){var o=Math.min(n,i+ll.chunkedMTU),s=e.slice(i,o),u={__peerData:this._dataCount,n:a,data:s,total:r};t.push(u),i=o,a++}return this._dataCount++,t},e.prototype.blobToArrayBuffer=function(e,t){var n=new FileReader;return n.onload=function(e){e.target&&t(e.target.result)},n.readAsArrayBuffer(e),n},e.prototype.binaryStringToArrayBuffer=function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=255&e.charCodeAt(n);return t.buffer},e.prototype.randomToken=function(){return Math.random().toString(36).slice(2)},e.prototype.isSecure=function(){return"https:"===location.protocol},e}(),ll=new cl,dl={};il(dl,"Peer",(function(){return pd}),(function(e){return pd=e}));var fl,pl=Object.prototype.hasOwnProperty,hl="~";function ml(){}function vl(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function gl(e,t,n,r,a){if("function"!==typeof n)throw new TypeError("The listener must be a function");var i=new vl(n,r||e,a),o=hl?hl+t:t;return e._events[o]?e._events[o].fn?e._events[o]=[e._events[o],i]:e._events[o].push(i):(e._events[o]=i,e._eventsCount++),e}function yl(e,t){0===--e._eventsCount?e._events=new ml:delete e._events[t]}function bl(){this._events=new ml,this._eventsCount=0}Object.create&&(ml.prototype=Object.create(null),(new ml).__proto__||(hl=!1)),bl.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)pl.call(e,t)&&n.push(hl?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},bl.prototype.listeners=function(e){var t=hl?hl+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,a=n.length,i=new Array(a);r<a;r++)i[r]=n[r].fn;return i},bl.prototype.listenerCount=function(e){var t=hl?hl+e:e,n=this._events[t];return n?n.fn?1:n.length:0},bl.prototype.emit=function(e,t,n,r,a,i){var o=hl?hl+e:e;if(!this._events[o])return!1;var s,u,c=this._events[o],l=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,r),!0;case 5:return c.fn.call(c.context,t,n,r,a),!0;case 6:return c.fn.call(c.context,t,n,r,a,i),!0}for(u=1,s=new Array(l-1);u<l;u++)s[u-1]=arguments[u];c.fn.apply(c.context,s)}else{var d,f=c.length;for(u=0;u<f;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),l){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,n);break;case 4:c[u].fn.call(c[u].context,t,n,r);break;default:if(!s)for(d=1,s=new Array(l-1);d<l;d++)s[d-1]=arguments[d];c[u].fn.apply(c[u].context,s)}}return!0},bl.prototype.on=function(e,t,n){return gl(this,e,t,n,!1)},bl.prototype.once=function(e,t,n){return gl(this,e,t,n,!0)},bl.prototype.removeListener=function(e,t,n,r){var a=hl?hl+e:e;if(!this._events[a])return this;if(!t)return yl(this,a),this;var i=this._events[a];if(i.fn)i.fn!==t||r&&!i.once||n&&i.context!==n||yl(this,a);else{for(var o=0,s=[],u=i.length;o<u;o++)(i[o].fn!==t||r&&!i[o].once||n&&i[o].context!==n)&&s.push(i[o]);s.length?this._events[a]=1===s.length?s[0]:s:yl(this,a)}return this},bl.prototype.removeAllListeners=function(e){var t;return e?(t=hl?hl+e:e,this._events[t]&&yl(this,t)):(this._events=new ml,this._eventsCount=0),this},bl.prototype.off=bl.prototype.removeListener,bl.prototype.addListener=bl.prototype.on,bl.prefixed=hl,bl.EventEmitter=bl,fl=bl;var xl={};il(xl,"LogLevel",(function(){return kl}),(function(e){return kl=e})),il(xl,"default",(function(){return Al}),(function(e){return Al=e}));var kl,wl=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o},Sl=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},Cl="PeerJS: ";!function(e){e[e.Disabled=0]="Disabled",e[e.Errors=1]="Errors",e[e.Warnings=2]="Warnings",e[e.All=3]="All"}(kl||(kl={}));var _l,Il,Tl,El,Nl,Ol=function(){function e(){this._logLevel=kl.Disabled}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logLevel>=kl.All&&this._print.apply(this,Sl([kl.All],wl(e),!1))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logLevel>=kl.Warnings&&this._print.apply(this,Sl([kl.Warnings],wl(e),!1))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logLevel>=kl.Errors&&this._print.apply(this,Sl([kl.Errors],wl(e),!1))},e.prototype.setLogFunction=function(e){this._print=e},e.prototype._print=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Sl([Cl],wl(t),!1);for(var a in r)r[a]instanceof Error&&(r[a]="("+r[a].name+") "+r[a].message);e>=kl.All?console.log.apply(console,Sl([],wl(r),!1)):e>=kl.Warnings?console.warn.apply(console,Sl(["WARNING"],wl(r),!1)):e>=kl.Errors&&console.error.apply(console,Sl(["ERROR"],wl(r),!1))},e}(),Al=new Ol,Rl={};il(Rl,"Socket",(function(){return Ll}),(function(e){return Ll=e})),function(e){e.Data="data",e.Media="media"}(_l||(_l={})),function(e){e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc"}(Il||(Il={})),function(e){e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json"}(Tl||(Tl={})),function(e){e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close"}(El||(El={})),function(e){e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE"}(Nl||(Nl={}));var Pl;Pl=JSON.parse('{"name":"peerjs","version":"1.4.6","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz St\xfcckler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","So\u0308ren Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"type":"module","sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.cjs","browser-unminified":"dist/peerjs.cjs","types":"dist/types.d.ts","engines":{"node":">= 10"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"includeNodeModules":true,"context":"browser","optimize":true,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"},"browser-unminified":{"includeNodeModules":true,"context":"browser","optimize":false,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build && cp dist/peerjs.cjs dist/peerjs.js && cp dist/peerjs.min.cjs dist/peerjs.min.js","prepublishOnly":"npm run build","test":"mocha -r ts-node/register -r jsdom-global/register test/**/*.ts","format":"prettier --write .","semantic-release":"semantic-release"},"devDependencies":{"@parcel/config-default":"^2.5.0","@parcel/packager-ts":"^2.5.0","@parcel/transformer-typescript-tsc":"^2.5.0","@parcel/transformer-typescript-types":"^2.5.0","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@types/chai":"^4.3.0","@types/mocha":"^9.1.0","@types/node":"^17.0.18","chai":"^4.3.6","git-authors-cli":"^1.0.40","jsdom":"^19.0.0","jsdom-global":"^3.0.2","mocha":"^9.2.0","mock-socket":"8.0.5","parcel":"^2.5.0","parcel-transformer-tsc-sourcemaps":"^1.0.2","prettier":"^2.6.2","semantic-release":"^19.0.2","standard":"^16.0.4","ts-node":"^10.5.0","typescript":"^4.5.5"},"dependencies":{"@swc/helpers":"^0.3.13","eventemitter3":"^4.0.7","peerjs-js-binarypack":"1.0.1","webrtc-adapter":"^7.7.1"}}');var Dl=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bl=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o},Ml=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},Fl=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ll=function(e){function t(t,n,r,a,i,o){void 0===o&&(o=5e3);var s=e.call(this)||this;s.pingInterval=o,s._disconnected=!0,s._messagesQueue=[];var u=t?"wss://":"ws://";return s._baseUrl=u+n+":"+r+a+"peerjs?key="+i,s}return Dl(t,e),t.prototype.start=function(e,t){var n=this;this._id=e;var r="".concat(this._baseUrl,"&id=").concat(e,"&token=").concat(t);!this._socket&&this._disconnected&&(this._socket=new WebSocket(r+"&version="+Pl.version),this._disconnected=!1,this._socket.onmessage=function(e){var t;try{t=JSON.parse(e.data),xl.default.log("Server message received:",t)}catch(Ln){return void xl.default.log("Invalid server message",e.data)}n.emit(El.Message,t)},this._socket.onclose=function(e){n._disconnected||(xl.default.log("Socket closed.",e),n._cleanup(),n._disconnected=!0,n.emit(El.Disconnected))},this._socket.onopen=function(){n._disconnected||(n._sendQueuedMessages(),xl.default.log("Socket open"),n._scheduleHeartbeat())})},t.prototype._scheduleHeartbeat=function(){var e=this;this._wsPingTimer=setTimeout((function(){e._sendHeartbeat()}),this.pingInterval)},t.prototype._sendHeartbeat=function(){if(this._wsOpen()){var e=JSON.stringify({type:Nl.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}else xl.default.log("Cannot send heartbeat, because socket closed")},t.prototype._wsOpen=function(){return!!this._socket&&1===this._socket.readyState},t.prototype._sendQueuedMessages=function(){var e,t,n=Ml([],Bl(this._messagesQueue),!1);this._messagesQueue=[];try{for(var r=Fl(n),a=r.next();!a.done;a=r.next()){var i=a.value;this.send(i)}}catch(o){e={error:o}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},t.prototype.send=function(e){if(!this._disconnected)if(this._id)if(e.type){if(this._wsOpen()){var t=JSON.stringify(e);this._socket.send(t)}}else this.emit(El.Error,"Invalid message");else this._messagesQueue.push(e)},t.prototype.close=function(){this._disconnected||(this._cleanup(),this._disconnected=!0)},t.prototype._cleanup=function(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)},t}(fl.EventEmitter),Vl={};il(Vl,"MediaConnection",(function(){return Ql}),(function(e){return Ql=e}));var zl={};il(zl,"Negotiator",(function(){return Wl}),(function(e){return Wl=e}));var Zl=function(){return Zl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Zl.apply(this,arguments)},Ul=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{u(r.next(e))}catch(Ln){i(Ln)}}function s(e){try{u(r.throw(e))}catch(Ln){i(Ln)}}function u(e){e.done?a(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,s)}u((r=r.apply(e,t||[])).next())}))},jl=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(Ln){i=[6,Ln],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Wl=function(){function e(e){this.connection=e}return e.prototype.startConnection=function(e){var t=this._startPeerConnection();if(this.connection.peerConnection=t,this.connection.type===_l.Media&&e._stream&&this._addTracksToConnection(e._stream,t),e.originator){if(this.connection.type===_l.Data){var n=this.connection,r={ordered:!!e.reliable},a=t.createDataChannel(n.label,r);n.initialize(a)}this._makeOffer()}else this.handleSDP("OFFER",e.sdp)},e.prototype._startPeerConnection=function(){xl.default.log("Creating RTCPeerConnection.");var e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e},e.prototype._setupListeners=function(e){var t=this,n=this.connection.peer,r=this.connection.connectionId,a=this.connection.type,i=this.connection.provider;xl.default.log("Listening for ICE candidates."),e.onicecandidate=function(e){e.candidate&&e.candidate.candidate&&(xl.default.log("Received ICE candidates for ".concat(n,":"),e.candidate),i.socket.send({type:Nl.Candidate,payload:{candidate:e.candidate,type:a,connectionId:r},dst:n}))},e.oniceconnectionstatechange=function(){switch(e.iceConnectionState){case"failed":xl.default.log("iceConnectionState is failed, closing connections to "+n),t.connection.emit("error",new Error("Negotiation of connection to "+n+" failed.")),t.connection.close();break;case"closed":xl.default.log("iceConnectionState is closed, closing connections to "+n),t.connection.emit("error",new Error("Connection to "+n+" closed.")),t.connection.close();break;case"disconnected":xl.default.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":e.onicecandidate=ll.noop}t.connection.emit("iceStateChanged",e.iceConnectionState)},xl.default.log("Listening for data channel"),e.ondatachannel=function(e){xl.default.log("Received data channel");var t=e.channel;i.getConnection(n,r).initialize(t)},xl.default.log("Listening for remote stream"),e.ontrack=function(e){xl.default.log("Received remote stream");var a=e.streams[0],o=i.getConnection(n,r);if(o.type===_l.Media){var s=o;t._addStreamToMediaConnection(a,s)}}},e.prototype.cleanup=function(){xl.default.log("Cleaning up PeerConnection to "+this.connection.peer);var e=this.connection.peerConnection;if(e){this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=function(){};var t="closed"!==e.signalingState,n=!1;if(this.connection.type===_l.Data){var r=this.connection.dataChannel;r&&(n=!!r.readyState&&"closed"!==r.readyState)}(t||n)&&e.close()}},e.prototype._makeOffer=function(){return Ul(this,void 0,Promise,(function(){var e,t,n,r,a,i,o;return jl(this,(function(s){switch(s.label){case 0:e=this.connection.peerConnection,t=this.connection.provider,s.label=1;case 1:return s.trys.push([1,7,,8]),[4,e.createOffer(this.connection.options.constraints)];case 2:n=s.sent(),xl.default.log("Created offer."),this.connection.options.sdpTransform&&"function"===typeof this.connection.options.sdpTransform&&(n.sdp=this.connection.options.sdpTransform(n.sdp)||n.sdp),s.label=3;case 3:return s.trys.push([3,5,,6]),[4,e.setLocalDescription(n)];case 4:return s.sent(),xl.default.log("Set localDescription:",n,"for:".concat(this.connection.peer)),r={sdp:n,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata,browser:ll.browser},this.connection.type===_l.Data&&(a=this.connection,r=Zl(Zl({},r),{label:a.label,reliable:a.reliable,serialization:a.serialization})),t.socket.send({type:Nl.Offer,payload:r,dst:this.connection.peer}),[3,6];case 5:return"OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"!=(i=s.sent())&&(t.emitError(Il.WebRTC,i),xl.default.log("Failed to setLocalDescription, ",i)),[3,6];case 6:return[3,8];case 7:return o=s.sent(),t.emitError(Il.WebRTC,o),xl.default.log("Failed to createOffer, ",o),[3,8];case 8:return[2]}}))}))},e.prototype._makeAnswer=function(){return Ul(this,void 0,Promise,(function(){var e,t,n,r,a;return jl(this,(function(i){switch(i.label){case 0:e=this.connection.peerConnection,t=this.connection.provider,i.label=1;case 1:return i.trys.push([1,7,,8]),[4,e.createAnswer()];case 2:n=i.sent(),xl.default.log("Created answer."),this.connection.options.sdpTransform&&"function"===typeof this.connection.options.sdpTransform&&(n.sdp=this.connection.options.sdpTransform(n.sdp)||n.sdp),i.label=3;case 3:return i.trys.push([3,5,,6]),[4,e.setLocalDescription(n)];case 4:return i.sent(),xl.default.log("Set localDescription:",n,"for:".concat(this.connection.peer)),t.socket.send({type:Nl.Answer,payload:{sdp:n,type:this.connection.type,connectionId:this.connection.connectionId,browser:ll.browser},dst:this.connection.peer}),[3,6];case 5:return r=i.sent(),t.emitError(Il.WebRTC,r),xl.default.log("Failed to setLocalDescription, ",r),[3,6];case 6:return[3,8];case 7:return a=i.sent(),t.emitError(Il.WebRTC,a),xl.default.log("Failed to create answer, ",a),[3,8];case 8:return[2]}}))}))},e.prototype.handleSDP=function(e,t){return Ul(this,void 0,Promise,(function(){var n,r,a,i;return jl(this,(function(o){switch(o.label){case 0:t=new RTCSessionDescription(t),n=this.connection.peerConnection,r=this.connection.provider,xl.default.log("Setting remote description",t),a=this,o.label=1;case 1:return o.trys.push([1,5,,6]),[4,n.setRemoteDescription(t)];case 2:return o.sent(),xl.default.log("Set remoteDescription:".concat(e," for:").concat(this.connection.peer)),"OFFER"!==e?[3,4]:[4,a._makeAnswer()];case 3:o.sent(),o.label=4;case 4:return[3,6];case 5:return i=o.sent(),r.emitError(Il.WebRTC,i),xl.default.log("Failed to setRemoteDescription, ",i),[3,6];case 6:return[2]}}))}))},e.prototype.handleCandidate=function(e){return Ul(this,void 0,Promise,(function(){var t,n,r,a,i,o;return jl(this,(function(s){switch(s.label){case 0:xl.default.log("handleCandidate:",e),t=e.candidate,n=e.sdpMLineIndex,r=e.sdpMid,a=this.connection.peerConnection,i=this.connection.provider,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,a.addIceCandidate(new RTCIceCandidate({sdpMid:r,sdpMLineIndex:n,candidate:t}))];case 2:return s.sent(),xl.default.log("Added ICE candidate for:".concat(this.connection.peer)),[3,4];case 3:return o=s.sent(),i.emitError(Il.WebRTC,o),xl.default.log("Failed to handleCandidate, ",o),[3,4];case 4:return[2]}}))}))},e.prototype._addTracksToConnection=function(e,t){if(xl.default.log("add tracks from stream ".concat(e.id," to peer connection")),!t.addTrack)return xl.default.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach((function(n){t.addTrack(n,e)}))},e.prototype._addStreamToMediaConnection=function(e,t){xl.default.log("add stream ".concat(e.id," to media connection ").concat(t.connectionId)),t.addStream(e)},e}(),Gl={};il(Gl,"BaseConnection",(function(){return ql}),(function(e){return ql=e}));var Hl=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ql=function(e){function t(t,n,r){var a=e.call(this)||this;return a.peer=t,a.provider=n,a.options=r,a._open=!1,a.metadata=r.metadata,a}return Hl(t,e),Object.defineProperty(t.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),t}(fl.EventEmitter),Xl=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Kl=function(){return Kl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Kl.apply(this,arguments)},Yl=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ql=function(e){function t(n,r,a){var i=e.call(this,n,r,a)||this;return i._localStream=i.options._stream,i.connectionId=i.options.connectionId||t.ID_PREFIX+ll.randomToken(),i._negotiator=new zl.Negotiator(i),i._localStream&&i._negotiator.startConnection({_stream:i._localStream,originator:!0}),i}return Xl(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return _l.Media},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localStream",{get:function(){return this._localStream},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"remoteStream",{get:function(){return this._remoteStream},enumerable:!1,configurable:!0}),t.prototype.addStream=function(t){xl.default.log("Receiving stream",t),this._remoteStream=t,e.prototype.emit.call(this,"stream",t)},t.prototype.handleMessage=function(e){var t=e.type,n=e.payload;switch(e.type){case Nl.Answer:this._negotiator.handleSDP(t,n.sdp),this._open=!0;break;case Nl.Candidate:this._negotiator.handleCandidate(n.candidate);break;default:xl.default.warn("Unrecognized message type:".concat(t," from peer:").concat(this.peer))}},t.prototype.answer=function(e,t){var n,r;if(void 0===t&&(t={}),this._localStream)xl.default.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");else{this._localStream=e,t&&t.sdpTransform&&(this.options.sdpTransform=t.sdpTransform),this._negotiator.startConnection(Kl(Kl({},this.options._payload),{_stream:e}));var a=this.provider._getMessages(this.connectionId);try{for(var i=Yl(a),o=i.next();!o.done;o=i.next()){var s=o.value;this.handleMessage(s)}}catch(u){n={error:u}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}this._open=!0}},t.prototype.close=function(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,e.prototype.emit.call(this,"close"))},t.ID_PREFIX="mc_",t}(Gl.BaseConnection),$l={};il($l,"DataConnection",(function(){return ad}),(function(e){return ad=e}));var Jl={};il(Jl,"EncodingQueue",(function(){return td}),(function(e){return td=e}));var ed=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),td=function(e){function t(){var t=e.call(this)||this;return t.fileReader=new FileReader,t._queue=[],t._processing=!1,t.fileReader.onload=function(e){t._processing=!1,e.target&&t.emit("done",e.target.result),t.doNextTask()},t.fileReader.onerror=function(e){xl.default.error("EncodingQueue error:",e),t._processing=!1,t.destroy(),t.emit("error",e)},t}return ed(t,e),Object.defineProperty(t.prototype,"queue",{get:function(){return this._queue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"processing",{get:function(){return this._processing},enumerable:!1,configurable:!0}),t.prototype.enque=function(e){this.queue.push(e),this.processing||this.doNextTask()},t.prototype.destroy=function(){this.fileReader.abort(),this._queue=[]},t.prototype.doNextTask=function(){0!==this.size&&(this.processing||(this._processing=!0,this.fileReader.readAsArrayBuffer(this.queue.shift())))},t}(fl.EventEmitter),nd=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),rd=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ad=function(e){function t(n,r,a){var i=e.call(this,n,r,a)||this;return i.stringify=JSON.stringify,i.parse=JSON.parse,i._buffer=[],i._bufferSize=0,i._buffering=!1,i._chunkedData={},i._encodingQueue=new Jl.EncodingQueue,i.connectionId=i.options.connectionId||t.ID_PREFIX+ll.randomToken(),i.label=i.options.label||i.connectionId,i.serialization=i.options.serialization||Tl.Binary,i.reliable=!!i.options.reliable,i._encodingQueue.on("done",(function(e){i._bufferedSend(e)})),i._encodingQueue.on("error",(function(){xl.default.error("DC#".concat(i.connectionId,": Error occured in encoding from blob to arraybuffer, close DC")),i.close()})),i._negotiator=new zl.Negotiator(i),i._negotiator.startConnection(i.options._payload||{originator:!0}),i}return nd(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return _l.Data},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataChannel",{get:function(){return this._dc},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bufferSize",{get:function(){return this._bufferSize},enumerable:!1,configurable:!0}),t.prototype.initialize=function(e){this._dc=e,this._configureDataChannel()},t.prototype._configureDataChannel=function(){var e=this;ll.supports.binaryBlob&&!ll.supports.reliable||(this.dataChannel.binaryType="arraybuffer"),this.dataChannel.onopen=function(){xl.default.log("DC#".concat(e.connectionId," dc connection success")),e._open=!0,e.emit("open")},this.dataChannel.onmessage=function(t){xl.default.log("DC#".concat(e.connectionId," dc onmessage:"),t.data),e._handleDataMessage(t)},this.dataChannel.onclose=function(){xl.default.log("DC#".concat(e.connectionId," dc closed for:"),e.peer),e.close()}},t.prototype._handleDataMessage=function(t){var n=this,r=t.data,a=r.constructor,i=r;if(this.serialization===Tl.Binary||this.serialization===Tl.BinaryUTF8){if(a===Blob)return void ll.blobToArrayBuffer(r,(function(e){var t=ll.unpack(e);n.emit("data",t)}));if(a===ArrayBuffer)i=ll.unpack(r);else if(a===String){var o=ll.binaryStringToArrayBuffer(r);i=ll.unpack(o)}}else this.serialization===Tl.JSON&&(i=this.parse(r));i.__peerData?this._handleChunk(i):e.prototype.emit.call(this,"data",i)},t.prototype._handleChunk=function(e){var t=e.__peerData,n=this._chunkedData[t]||{data:[],count:0,total:e.total};if(n.data[e.n]=e.data,n.count++,this._chunkedData[t]=n,n.total===n.count){delete this._chunkedData[t];var r=new Blob(n.data);this._handleDataMessage({data:r})}},t.prototype.close=function(){this._buffer=[],this._bufferSize=0,this._chunkedData={},this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this._dc=null),this._encodingQueue&&(this._encodingQueue.destroy(),this._encodingQueue.removeAllListeners(),this._encodingQueue=null),this.open&&(this._open=!1,e.prototype.emit.call(this,"close"))},t.prototype.send=function(t,n){if(this.open)if(this.serialization===Tl.JSON)this._bufferedSend(this.stringify(t));else if(this.serialization===Tl.Binary||this.serialization===Tl.BinaryUTF8){var r=ll.pack(t);if(!n&&r.size>ll.chunkedMTU)return void this._sendChunks(r);ll.supports.binaryBlob?this._bufferedSend(r):this._encodingQueue.enque(r)}else this._bufferedSend(t);else e.prototype.emit.call(this,"error",new Error("Connection is not open. You should listen for the `open` event before sending messages."))},t.prototype._bufferedSend=function(e){!this._buffering&&this._trySend(e)||(this._buffer.push(e),this._bufferSize=this._buffer.length)},t.prototype._trySend=function(e){var n=this;if(!this.open)return!1;if(this.dataChannel.bufferedAmount>t.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout((function(){n._buffering=!1,n._tryBuffer()}),50),!1;try{this.dataChannel.send(e)}catch(Ln){return xl.default.error("DC#:".concat(this.connectionId," Error when sending:"),Ln),this._buffering=!0,this.close(),!1}return!0},t.prototype._tryBuffer=function(){if(this.open&&0!==this._buffer.length){var e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}},t.prototype._sendChunks=function(e){var t,n,r=ll.chunk(e);xl.default.log("DC#".concat(this.connectionId," Try to send ").concat(r.length," chunks..."));try{for(var a=rd(r),i=a.next();!i.done;i=a.next()){var o=i.value;this.send(o,!0)}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}},t.prototype.handleMessage=function(e){var t=e.payload;switch(e.type){case Nl.Answer:this._negotiator.handleSDP(e.type,t.sdp);break;case Nl.Candidate:this._negotiator.handleCandidate(t.candidate);break;default:xl.default.warn("Unrecognized message type:",e.type,"from peer:",this.peer)}},t.ID_PREFIX="dc_",t.MAX_BUFFERED_AMOUNT=8388608,t}(Gl.BaseConnection),id={};il(id,"API",(function(){return ud}),(function(e){return ud=e}));var od=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{u(r.next(e))}catch(Ln){i(Ln)}}function s(e){try{u(r.throw(e))}catch(Ln){i(Ln)}}function u(e){e.done?a(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,s)}u((r=r.apply(e,t||[])).next())}))},sd=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(Ln){i=[6,Ln],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},ud=function(){function e(e){this._options=e}return e.prototype._buildRequest=function(e){var t=this._options.secure?"https":"http",n=this._options,r=n.host,a=n.port,i=n.path,o=n.key,s=new URL("".concat(t,"://").concat(r,":").concat(a).concat(i).concat(o,"/").concat(e));return s.searchParams.set("ts","".concat(Date.now()).concat(Math.random())),s.searchParams.set("version",Pl.version),fetch(s.href,{referrerPolicy:this._options.referrerPolicy})},e.prototype.retrieveId=function(){return od(this,void 0,Promise,(function(){var e,t,n;return sd(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this._buildRequest("id")];case 1:if(200!==(e=r.sent()).status)throw new Error("Error. Status:".concat(e.status));return[2,e.text()];case 2:throw t=r.sent(),xl.default.error("Error retrieving ID",t),n="","/"===this._options.path&&this._options.host!==ll.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n);case 3:return[2]}}))}))},e.prototype.listAllPeers=function(){return od(this,void 0,Promise,(function(){var e,t,n;return sd(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this._buildRequest("peers")];case 1:if(200!==(e=r.sent()).status){if(401===e.status)throw t="",t=this._options.host===ll.CLOUD_HOST?"It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":"You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+t);throw new Error("Error. Status:".concat(e.status))}return[2,e.json()];case 2:throw n=r.sent(),xl.default.error("Error retrieving list peers",n),new Error("Could not get list peers from the server."+n);case 3:return[2]}}))}))},e}(),cd=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ld=function(){return ld=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},ld.apply(this,arguments)},dd=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},fd=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o},pd=function(e){function t(n,r){var a,i=e.call(this)||this;return i._id=null,i._lastServerId=null,i._destroyed=!1,i._disconnected=!1,i._open=!1,i._connections=new Map,i._lostMessages=new Map,n&&n.constructor==Object?r=n:n&&(a=n.toString()),r=ld({debug:0,host:ll.CLOUD_HOST,port:ll.CLOUD_PORT,path:"/",key:t.DEFAULT_KEY,token:ll.randomToken(),config:ll.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin"},r),i._options=r,"/"===i._options.host&&(i._options.host=window.location.hostname),i._options.path&&("/"!==i._options.path[0]&&(i._options.path="/"+i._options.path),"/"!==i._options.path[i._options.path.length-1]&&(i._options.path+="/")),void 0===i._options.secure&&i._options.host!==ll.CLOUD_HOST?i._options.secure=ll.isSecure():i._options.host==ll.CLOUD_HOST&&(i._options.secure=!0),i._options.logFunction&&xl.default.setLogFunction(i._options.logFunction),xl.default.logLevel=i._options.debug||0,i._api=new id.API(r),i._socket=i._createServerConnection(),ll.supports.audioVideo||ll.supports.data?a&&!ll.validateId(a)?(i._delayedAbort(Il.InvalidID,'ID "'.concat(a,'" is invalid')),i):(a?i._initialize(a):i._api.retrieveId().then((function(e){return i._initialize(e)})).catch((function(e){return i._abort(Il.ServerError,e)})),i):(i._delayedAbort(Il.BrowserIncompatible,"The current browser does not support WebRTC"),i)}return cd(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"socket",{get:function(){return this._socket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"connections",{get:function(){var e,t,n=Object.create(null);try{for(var r=dd(this._connections),a=r.next();!a.done;a=r.next()){var i=fd(a.value,2),o=i[0],s=i[1];n[o]=s}}catch(u){e={error:u}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disconnected",{get:function(){return this._disconnected},enumerable:!1,configurable:!0}),t.prototype._createServerConnection=function(){var e=this,t=new Rl.Socket(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return t.on(El.Message,(function(t){e._handleMessage(t)})),t.on(El.Error,(function(t){e._abort(Il.SocketError,t)})),t.on(El.Disconnected,(function(){e.disconnected||(e.emitError(Il.Network,"Lost connection to server."),e.disconnect())})),t.on(El.Close,(function(){e.disconnected||e._abort(Il.SocketClosed,"Underlying socket is already closed.")})),t},t.prototype._initialize=function(e){this._id=e,this.socket.start(e,this._options.token)},t.prototype._handleMessage=function(e){var t,n,r=e.type,a=e.payload,i=e.src;switch(r){case Nl.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Nl.Error:this._abort(Il.ServerError,a.msg);break;case Nl.IdTaken:this._abort(Il.UnavailableID,'ID "'.concat(this.id,'" is taken'));break;case Nl.InvalidKey:this._abort(Il.InvalidKey,'API KEY "'.concat(this._options.key,'" is invalid'));break;case Nl.Leave:xl.default.log("Received leave message from ".concat(i)),this._cleanupPeer(i),this._connections.delete(i);break;case Nl.Expire:this.emitError(Il.PeerUnavailable,"Could not connect to peer ".concat(i));break;case Nl.Offer:var o=a.connectionId;if((p=this.getConnection(i,o))&&(p.close(),xl.default.warn("Offer received for existing Connection ID:".concat(o))),a.type===_l.Media){var s=new Vl.MediaConnection(i,this,{connectionId:o,_payload:a,metadata:a.metadata});p=s,this._addConnection(i,p),this.emit("call",s)}else{if(a.type!==_l.Data)return void xl.default.warn("Received malformed connection type:".concat(a.type));var u=new $l.DataConnection(i,this,{connectionId:o,_payload:a,metadata:a.metadata,label:a.label,serialization:a.serialization,reliable:a.reliable});p=u,this._addConnection(i,p),this.emit("connection",u)}var c=this._getMessages(o);try{for(var l=dd(c),d=l.next();!d.done;d=l.next()){var f=d.value;p.handleMessage(f)}}catch(h){t={error:h}}finally{try{d&&!d.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}break;default:if(!a)return void xl.default.warn("You received a malformed message from ".concat(i," of type ").concat(r));var p;o=a.connectionId;(p=this.getConnection(i,o))&&p.peerConnection?p.handleMessage(e):o?this._storeMessage(o,e):xl.default.warn("You received an unrecognized message:",e)}},t.prototype._storeMessage=function(e,t){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(t)},t.prototype._getMessages=function(e){var t=this._lostMessages.get(e);return t?(this._lostMessages.delete(e),t):[]},t.prototype.connect=function(e,t){if(void 0===t&&(t={}),this.disconnected)return xl.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),void this.emitError(Il.Disconnected,"Cannot connect to new Peer after disconnecting from server.");var n=new $l.DataConnection(e,this,t);return this._addConnection(e,n),n},t.prototype.call=function(e,t,n){if(void 0===n&&(n={}),this.disconnected)return xl.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),void this.emitError(Il.Disconnected,"Cannot connect to new Peer after disconnecting from server.");if(t){var r=new Vl.MediaConnection(e,this,ld(ld({},n),{_stream:t}));return this._addConnection(e,r),r}xl.default.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.")},t.prototype._addConnection=function(e,t){xl.default.log("add connection ".concat(t.type,":").concat(t.connectionId," to peerId:").concat(e)),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(t)},t.prototype._removeConnection=function(e){var t=this._connections.get(e.peer);if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}this._lostMessages.delete(e.connectionId)},t.prototype.getConnection=function(e,t){var n,r,a=this._connections.get(e);if(!a)return null;try{for(var i=dd(a),o=i.next();!o.done;o=i.next()){var s=o.value;if(s.connectionId===t)return s}}catch(u){n={error:u}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return null},t.prototype._delayedAbort=function(e,t){var n=this;setTimeout((function(){n._abort(e,t)}),0)},t.prototype._abort=function(e,t){xl.default.error("Aborting!"),this.emitError(e,t),this._lastServerId?this.disconnect():this.destroy()},t.prototype.emitError=function(e,t){var n;xl.default.error("Error:",t),(n="string"===typeof t?new Error(t):t).type=e,this.emit("error",n)},t.prototype.destroy=function(){this.destroyed||(xl.default.log("Destroy peer with ID:".concat(this.id)),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))},t.prototype._cleanup=function(){var e,t;try{for(var n=dd(this._connections.keys()),r=n.next();!r.done;r=n.next()){var a=r.value;this._cleanupPeer(a),this._connections.delete(a)}}catch(i){e={error:i}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.socket.removeAllListeners()},t.prototype._cleanupPeer=function(e){var t,n,r=this._connections.get(e);if(r)try{for(var a=dd(r),i=a.next();!i.done;i=a.next()){i.value.close()}}catch(o){t={error:o}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}},t.prototype.disconnect=function(){if(!this.disconnected){var e=this.id;xl.default.log("Disconnect peer with ID:".concat(e)),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}},t.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)xl.default.log("Attempting reconnection to server with ID ".concat(this._lastServerId)),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(this.disconnected||this.open)throw new Error("Peer ".concat(this.id," cannot reconnect because it is not disconnected from the server!"));xl.default.error("In a hurry? We're still trying to make the initial connection!")}},t.prototype.listAllPeers=function(e){var t=this;void 0===e&&(e=function(e){}),this._api.listAllPeers().then((function(t){return e(t)})).catch((function(e){return t._abort(Il.ServerError,e)}))},t.DEFAULT_KEY="peerjs",t}(fl.EventEmitter),hd=n(1752),md=Object.create(null);md.open="0",md.close="1",md.ping="2",md.pong="3",md.message="4",md.upgrade="5",md.noop="6";var vd=Object.create(null);Object.keys(md).forEach((function(e){vd[md[e]]=e}));for(var gd={type:"error",data:"parser error"},yd="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),bd="function"===typeof ArrayBuffer,xd=function(e,t){var n=new FileReader;return n.onload=function(){var e=n.result.split(",")[1];t("b"+e)},n.readAsDataURL(e)},kd=function(e,t,n){var r,a=e.type,i=e.data;return yd&&i instanceof Blob?t?n(i):xd(i,n):bd&&(i instanceof ArrayBuffer||(r=i,"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer))?t?n(i):xd(new Blob([i]),n):n(md[a]+(i||""))},wd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Sd="undefined"===typeof Uint8Array?[]:new Uint8Array(256),Cd=0;Cd<wd.length;Cd++)Sd[wd.charCodeAt(Cd)]=Cd;var _d="function"===typeof ArrayBuffer,Id=function(e,t){if(_d){var n=function(e){var t,n,r,a,i,o=.75*e.length,s=e.length,u=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var c=new ArrayBuffer(o),l=new Uint8Array(c);for(t=0;t<s;t+=4)n=Sd[e.charCodeAt(t)],r=Sd[e.charCodeAt(t+1)],a=Sd[e.charCodeAt(t+2)],i=Sd[e.charCodeAt(t+3)],l[u++]=n<<2|r>>4,l[u++]=(15&r)<<4|a>>2,l[u++]=(3&a)<<6|63&i;return c}(e);return Td(n,t)}return{base64:!0,data:e}},Td=function(e,t){return"blob"===t&&e instanceof ArrayBuffer?new Blob([e]):e},Ed=function(e,t){if("string"!==typeof e)return{type:"message",data:Td(e,t)};var n=e.charAt(0);return"b"===n?{type:"message",data:Id(e.substring(1),t)}:vd[n]?e.length>1?{type:vd[n],data:e.substring(1)}:{type:vd[n]}:gd},Nd=String.fromCharCode(30);function Od(e){if(e)return function(e){for(var t in Od.prototype)e[t]=Od.prototype[t];return e}(e)}Od.prototype.on=Od.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},Od.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},Od.prototype.off=Od.prototype.removeListener=Od.prototype.removeAllListeners=Od.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var a=0;a<r.length;a++)if((n=r[a])===t||n.fn===t){r.splice(a,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},Od.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var a=(n=n.slice(0)).length;r<a;++r)n[r].apply(this,t)}return this},Od.prototype.emitReserved=Od.prototype.emit,Od.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},Od.prototype.hasListeners=function(e){return!!this.listeners(e).length};var Ad="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")();function Rd(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(t,n){return e.hasOwnProperty(n)&&(t[n]=e[n]),t}),{})}var Pd=setTimeout,Dd=clearTimeout;function Bd(e,t){t.useNativeTimers?(e.setTimeoutFn=Pd.bind(Ad),e.clearTimeoutFn=Dd.bind(Ad)):(e.setTimeoutFn=setTimeout.bind(Ad),e.clearTimeoutFn=clearTimeout.bind(Ad))}var Md,Fd=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,a){var i;return(0,c.Z)(this,n),(i=t.call(this,e)).description=r,i.context=a,i.type="TransportError",i}return(0,l.Z)(n)}(S(Error)),Ld=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this)).writable=!1,Bd((0,y.Z)(r),e),r.opts=e,r.query=e.query,r.readyState="",r.socket=e.socket,r}return(0,l.Z)(n,[{key:"onError",value:function(e,t,r){return(0,hd.Z)((0,b.Z)(n.prototype),"emitReserved",this).call(this,"error",new Fd(e,t,r)),this}},{key:"open",value:function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}},{key:"close",value:function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}},{key:"send",value:function(e){"open"===this.readyState&&this.write(e)}},{key:"onOpen",value:function(){this.readyState="open",this.writable=!0,(0,hd.Z)((0,b.Z)(n.prototype),"emitReserved",this).call(this,"open")}},{key:"onData",value:function(e){var t=Ed(e,this.socket.binaryType);this.onPacket(t)}},{key:"onPacket",value:function(e){(0,hd.Z)((0,b.Z)(n.prototype),"emitReserved",this).call(this,"packet",e)}},{key:"onClose",value:function(e){this.readyState="closed",(0,hd.Z)((0,b.Z)(n.prototype),"emitReserved",this).call(this,"close",e)}}]),n}(Od),Vd="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),zd={},Zd=0,Ud=0;function jd(e){var t="";do{t=Vd[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function Wd(){var e=jd(+new Date);return e!==Md?(Zd=0,Md=e):e+"."+jd(Zd++)}for(;Ud<64;Ud++)zd[Vd[Ud]]=Ud;function Gd(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function Hd(e){for(var t={},n=e.split("&"),r=0,a=n.length;r<a;r++){var i=n[r].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}var qd=!1;try{qd="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(Nx){}var Xd=qd;function Kd(e){var t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||Xd))return new XMLHttpRequest}catch(Ln){}if(!t)try{return new(Ad[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(Ln){}}function Yd(){}var Qd=null!=new Kd({xdomain:!1}).responseType,$d=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;if((0,c.Z)(this,n),(r=t.call(this,e)).polling=!1,"undefined"!==typeof location){var a="https:"===location.protocol,i=location.port;i||(i=a?"443":"80"),r.xd="undefined"!==typeof location&&e.hostname!==location.hostname||i!==e.port,r.xs=e.secure!==a}var o=e&&e.forceBase64;return r.supportsBinary=Qd&&!o,r}return(0,l.Z)(n,[{key:"name",get:function(){return"polling"}},{key:"doOpen",value:function(){this.poll()}},{key:"pause",value:function(e){var t=this;this.readyState="pausing";var n=function(){t.readyState="paused",e()};if(this.polling||!this.writable){var r=0;this.polling&&(r++,this.once("pollComplete",(function(){--r||n()}))),this.writable||(r++,this.once("drain",(function(){--r||n()})))}else n()}},{key:"poll",value:function(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}},{key:"onData",value:function(e){var t=this;(function(e,t){for(var n=e.split(Nd),r=[],a=0;a<n.length;a++){var i=Ed(n[a],t);if(r.push(i),"error"===i.type)break}return r})(e,this.socket.binaryType).forEach((function(e){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose({description:"transport closed by the server"}),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}},{key:"doClose",value:function(){var e=this,t=function(){e.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}},{key:"write",value:function(e){var t=this;this.writable=!1,function(e,t){var n=e.length,r=new Array(n),a=0;e.forEach((function(e,i){kd(e,!1,(function(e){r[i]=e,++a===n&&t(r.join(Nd))}))}))}(e,(function(e){t.doWrite(e,(function(){t.writable=!0,t.emitReserved("drain")}))}))}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"https":"http",n="";!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=Wd()),this.supportsBinary||e.sid||(e.b64=1),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port);var r=Gd(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}},{key:"request",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new Jd(this.uri(),e)}},{key:"doWrite",value:function(e,t){var n=this,r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(function(e,t){n.onError("xhr post error",e,t)}))}},{key:"doPoll",value:function(){var e=this,t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(function(t,n){e.onError("xhr poll error",t,n)})),this.pollXhr=t}}]),n}(Ld),Jd=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var a;return(0,c.Z)(this,n),a=t.call(this),Bd((0,y.Z)(a),r),a.opts=r,a.method=r.method||"GET",a.uri=e,a.async=!1!==r.async,a.data=void 0!==r.data?r.data:null,a.create(),a}return(0,l.Z)(n,[{key:"create",value:function(){var e=this,t=Rd(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;var r=this.xhr=new Kd(t);try{r.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders)for(var a in r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(a)&&r.setRequestHeader(a,this.opts.extraHeaders[a])}catch(Ln){}if("POST"===this.method)try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(Ln){}try{r.setRequestHeader("Accept","*/*")}catch(Ln){}"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=function(){4===r.readyState&&(200===r.status||1223===r.status?e.onLoad():e.setTimeoutFn((function(){e.onError("number"===typeof r.status?r.status:0)}),0))},r.send(this.data)}catch(Ln){return void this.setTimeoutFn((function(){e.onError(Ln)}),0)}"undefined"!==typeof document&&(this.index=n.requestsCount++,n.requests[this.index]=this)}},{key:"onError",value:function(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}},{key:"cleanup",value:function(e){if("undefined"!==typeof this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=Yd,e)try{this.xhr.abort()}catch(Ln){}"undefined"!==typeof document&&delete n.requests[this.index],this.xhr=null}}},{key:"onLoad",value:function(){var e=this.xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}},{key:"abort",value:function(){this.cleanup()}}]),n}(Od);if(Jd.requestsCount=0,Jd.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",ef);else if("function"===typeof addEventListener){addEventListener("onpagehide"in Ad?"pagehide":"unload",ef,!1)}function ef(){for(var e in Jd.requests)Jd.requests.hasOwnProperty(e)&&Jd.requests[e].abort()}var tf="function"===typeof Promise&&"function"===typeof Promise.resolve?function(e){return Promise.resolve().then(e)}:function(e,t){return t(e,0)},nf=Ad.WebSocket||Ad.MozWebSocket,rf="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),af=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this,e)).supportsBinary=!e.forceBase64,r}return(0,l.Z)(n,[{key:"name",get:function(){return"websocket"}},{key:"doOpen",value:function(){if(this.check()){var e=this.uri(),t=this.opts.protocols,n=rf?{}:Rd(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=rf?new nf(e,t,n):t?new nf(e,t):new nf(e)}catch(Nx){return this.emitReserved("error",Nx)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}}},{key:"addEventListeners",value:function(){var e=this;this.ws.onopen=function(){e.opts.autoUnref&&e.ws._socket.unref(),e.onOpen()},this.ws.onclose=function(t){return e.onClose({description:"websocket connection closed",context:t})},this.ws.onmessage=function(t){return e.onData(t.data)},this.ws.onerror=function(t){return e.onError("websocket error",t)}}},{key:"write",value:function(e){var t=this;this.writable=!1;for(var n=function(n){var r=e[n],a=n===e.length-1;kd(r,t.supportsBinary,(function(e){try{t.ws.send(e)}catch(Ln){}a&&tf((function(){t.writable=!0,t.emitReserved("drain")}),t.setTimeoutFn)}))},r=0;r<e.length;r++)n(r)}},{key:"doClose",value:function(){"undefined"!==typeof this.ws&&(this.ws.close(),this.ws=null)}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"wss":"ws",n="";this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=Wd()),this.supportsBinary||(e.b64=1);var r=Gd(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}},{key:"check",value:function(){return!!nf}}]),n}(Ld),of={websocket:af,polling:$d},sf=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,uf=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function cf(e){var t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));for(var a=sf.exec(e||""),i={},o=14;o--;)i[uf[o]]=a[o]||"";return-1!=n&&-1!=r&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=function(e,t){var n=/\/{2,9}/g,r=t.replace(n,"/").split("/");"/"!=t.substr(0,1)&&0!==t.length||r.splice(0,1);"/"==t.substr(t.length-1,1)&&r.splice(r.length-1,1);return r}(0,i.path),i.queryKey=function(e,t){var n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(n[t]=r)})),n}(0,i.query),i}var lf=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,c.Z)(this,n),r=t.call(this),e&&"object"===typeof e&&(a=e,e=null),e?(e=cf(e),a.hostname=e.host,a.secure="https"===e.protocol||"wss"===e.protocol,a.port=e.port,e.query&&(a.query=e.query)):a.host&&(a.hostname=cf(a.host).host),Bd((0,y.Z)(r),a),r.secure=null!=a.secure?a.secure:"undefined"!==typeof location&&"https:"===location.protocol,a.hostname&&!a.port&&(a.port=r.secure?"443":"80"),r.hostname=a.hostname||("undefined"!==typeof location?location.hostname:"localhost"),r.port=a.port||("undefined"!==typeof location&&location.port?location.port:r.secure?"443":"80"),r.transports=a.transports||["polling","websocket"],r.readyState="",r.writeBuffer=[],r.prevBufferLen=0,r.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},a),r.opts.path=r.opts.path.replace(/\/$/,"")+"/","string"===typeof r.opts.query&&(r.opts.query=Hd(r.opts.query)),r.id=null,r.upgrades=null,r.pingInterval=null,r.pingTimeout=null,r.pingTimeoutTimer=null,"function"===typeof addEventListener&&(r.opts.closeOnBeforeunload&&addEventListener("beforeunload",(function(){r.transport&&(r.transport.removeAllListeners(),r.transport.close())}),!1),"localhost"!==r.hostname&&(r.offlineEventListener=function(){r.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",r.offlineEventListener,!1))),r.open(),r}return(0,l.Z)(n,[{key:"createTransport",value:function(e){var t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);var n=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new of[e](n)}},{key:"open",value:function(){var e,t=this;if(this.opts.rememberUpgrade&&n.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((function(){t.emitReserved("error","No transports available")}),0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(Ln){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}},{key:"setTransport",value:function(e){var t=this;this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(function(e){return t.onClose("transport close",e)}))}},{key:"probe",value:function(e){var t=this,r=this.createTransport(e),a=!1;n.priorWebsocketSuccess=!1;var i=function(){a||(r.send([{type:"ping",data:"probe"}]),r.once("packet",(function(e){if(!a)if("pong"===e.type&&"probe"===e.data){if(t.upgrading=!0,t.emitReserved("upgrading",r),!r)return;n.priorWebsocketSuccess="websocket"===r.name,t.transport.pause((function(){a||"closed"!==t.readyState&&(d(),t.setTransport(r),r.send([{type:"upgrade"}]),t.emitReserved("upgrade",r),r=null,t.upgrading=!1,t.flush())}))}else{var i=new Error("probe error");i.transport=r.name,t.emitReserved("upgradeError",i)}})))};function o(){a||(a=!0,d(),r.close(),r=null)}var s=function(e){var n=new Error("probe error: "+e);n.transport=r.name,o(),t.emitReserved("upgradeError",n)};function u(){s("transport closed")}function c(){s("socket closed")}function l(e){r&&e.name!==r.name&&o()}var d=function(){r.removeListener("open",i),r.removeListener("error",s),r.removeListener("close",u),t.off("close",c),t.off("upgrading",l)};r.once("open",i),r.once("error",s),r.once("close",u),this.once("close",c),this.once("upgrading",l),r.open()}},{key:"onOpen",value:function(){if(this.readyState="open",n.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause)for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},{key:"onPacket",value:function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}},{key:"onHandshake",value:function(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}},{key:"resetPingTimeout",value:function(){var e=this;this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((function(){e.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}},{key:"onDrain",value:function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}},{key:"flush",value:function(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){var e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}},{key:"getWritablePackets",value:function(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;for(var e,t=1,n=0;n<this.writeBuffer.length;n++){var r=this.writeBuffer[n].data;if(r&&(t+="string"===typeof(e=r)?function(e){for(var t=0,n=0,r=0,a=e.length;r<a;r++)(t=e.charCodeAt(r))<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(e):Math.ceil(1.33*(e.byteLength||e.size))),n>0&&t>this.maxPayload)return this.writeBuffer.slice(0,n);t+=2}return this.writeBuffer}},{key:"write",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"send",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"sendPacket",value:function(e,t,n,r){if("function"===typeof t&&(r=t,t=void 0),"function"===typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var a={type:e,data:t,options:n};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),r&&this.once("flush",r),this.flush()}}},{key:"close",value:function(){var e=this,t=function(){e.onClose("forced close"),e.transport.close()},n=function n(){e.off("upgrade",n),e.off("upgradeError",n),t()},r=function(){e.once("upgrade",n),e.once("upgradeError",n)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(function(){e.upgrading?r():t()})):this.upgrading?r():t()),this}},{key:"onError",value:function(e){n.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}},{key:"onClose",value:function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"===typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}},{key:"filterUpgrades",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}]),n}(Od);lf.protocol=4;lf.protocol;var df="function"===typeof ArrayBuffer,ff=Object.prototype.toString,pf="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===ff.call(Blob),hf="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===ff.call(File);function mf(e){return df&&(e instanceof ArrayBuffer||function(e){return"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}(e))||pf&&e instanceof Blob||hf&&e instanceof File}function vf(e,t){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(var n=0,r=e.length;n<r;n++)if(vf(e[n]))return!0;return!1}if(mf(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return vf(e.toJSON(),!0);for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&vf(e[a]))return!0;return!1}function gf(e){var t=[],n=e.data,r=e;return r.data=yf(n,t),r.attachments=t.length,{packet:r,buffers:t}}function yf(e,t){if(!e)return e;if(mf(e)){var n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){for(var r=new Array(e.length),a=0;a<e.length;a++)r[a]=yf(e[a],t);return r}if("object"===typeof e&&!(e instanceof Date)){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(i[o]=yf(e[o],t));return i}return e}function bf(e,t){return e.data=xf(e.data,t),e.attachments=void 0,e}function xf(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"===typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(var n=0;n<e.length;n++)e[n]=xf(e[n],t);else if("object"===typeof e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=xf(e[r],t));return e}var kf,wf=5;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(kf||(kf={}));var Sf=function(){function e(t){(0,c.Z)(this,e),this.replacer=t}return(0,l.Z)(e,[{key:"encode",value:function(e){return e.type!==kf.EVENT&&e.type!==kf.ACK||!vf(e)?[this.encodeAsString(e)]:(e.type=e.type===kf.EVENT?kf.BINARY_EVENT:kf.BINARY_ACK,this.encodeAsBinary(e))}},{key:"encodeAsString",value:function(e){var t=""+e.type;return e.type!==kf.BINARY_EVENT&&e.type!==kf.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}},{key:"encodeAsBinary",value:function(e){var t=gf(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}]),e}(),Cf=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this)).reviver=e,r}return(0,l.Z)(n,[{key:"add",value:function(e){var t;if("string"===typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");(t=this.decodeString(e)).type===kf.BINARY_EVENT||t.type===kf.BINARY_ACK?(this.reconstructor=new _f(t),0===t.attachments&&(0,hd.Z)((0,b.Z)(n.prototype),"emitReserved",this).call(this,"decoded",t)):(0,hd.Z)((0,b.Z)(n.prototype),"emitReserved",this).call(this,"decoded",t)}else{if(!mf(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,(0,hd.Z)((0,b.Z)(n.prototype),"emitReserved",this).call(this,"decoded",t))}}},{key:"decodeString",value:function(e){var t=0,r={type:Number(e.charAt(0))};if(void 0===kf[r.type])throw new Error("unknown packet type "+r.type);if(r.type===kf.BINARY_EVENT||r.type===kf.BINARY_ACK){for(var a=t+1;"-"!==e.charAt(++t)&&t!=e.length;);var i=e.substring(a,t);if(i!=Number(i)||"-"!==e.charAt(t))throw new Error("Illegal attachments");r.attachments=Number(i)}if("/"===e.charAt(t+1)){for(var o=t+1;++t;){if(","===e.charAt(t))break;if(t===e.length)break}r.nsp=e.substring(o,t)}else r.nsp="/";var s=e.charAt(t+1);if(""!==s&&Number(s)==s){for(var u=t+1;++t;){var c=e.charAt(t);if(null==c||Number(c)!=c){--t;break}if(t===e.length)break}r.id=Number(e.substring(u,t+1))}if(e.charAt(++t)){var l=this.tryParse(e.substr(t));if(!n.isPayloadValid(r.type,l))throw new Error("invalid payload");r.data=l}return r}},{key:"tryParse",value:function(e){try{return JSON.parse(e,this.reviver)}catch(Ln){return!1}}},{key:"destroy",value:function(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}],[{key:"isPayloadValid",value:function(e,t){switch(e){case kf.CONNECT:return"object"===typeof t;case kf.DISCONNECT:return void 0===t;case kf.CONNECT_ERROR:return"string"===typeof t||"object"===typeof t;case kf.EVENT:case kf.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case kf.ACK:case kf.BINARY_ACK:return Array.isArray(t)}}}]),n}(Od),_f=function(){function e(t){(0,c.Z)(this,e),this.packet=t,this.buffers=[],this.reconPack=t}return(0,l.Z)(e,[{key:"takeBinaryData",value:function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=bf(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}},{key:"finishedReconstruction",value:function(){this.reconPack=null,this.buffers=[]}}]),e}();function If(e,t,n){return e.on(t,n),function(){e.off(t,n)}}var Tf=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),Ef=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,a){var i;return(0,c.Z)(this,n),(i=t.call(this)).connected=!1,i.receiveBuffer=[],i.sendBuffer=[],i.ids=0,i.acks={},i.flags={},i.io=e,i.nsp=r,a&&a.auth&&(i.auth=a.auth),i.io._autoConnect&&i.open(),i}return(0,l.Z)(n,[{key:"disconnected",get:function(){return!this.connected}},{key:"subEvents",value:function(){if(!this.subs){var e=this.io;this.subs=[If(e,"open",this.onopen.bind(this)),If(e,"packet",this.onpacket.bind(this)),If(e,"error",this.onerror.bind(this)),If(e,"close",this.onclose.bind(this))]}}},{key:"active",get:function(){return!!this.subs}},{key:"connect",value:function(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}},{key:"emit",value:function(e){if(Tf.hasOwnProperty(e))throw new Error('"'+e+'" is a reserved event name');for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.unshift(e);var a={type:kf.EVENT,data:n,options:{}};if(a.options.compress=!1!==this.flags.compress,"function"===typeof n[n.length-1]){var i=this.ids++,o=n.pop();this._registerAckCallback(i,o),a.id=i}var s=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable,u=this.flags.volatile&&(!s||!this.connected);return u||(this.connected?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}},{key:"_registerAckCallback",value:function(e,t){var n=this,r=this.flags.timeout;if(void 0!==r){var a=this.io.setTimeoutFn((function(){delete n.acks[e];for(var r=0;r<n.sendBuffer.length;r++)n.sendBuffer[r].id===e&&n.sendBuffer.splice(r,1);t.call(n,new Error("operation has timed out"))}),r);this.acks[e]=function(){n.io.clearTimeoutFn(a);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];t.apply(n,[null].concat(r))}}else this.acks[e]=t}},{key:"packet",value:function(e){e.nsp=this.nsp,this.io._packet(e)}},{key:"onopen",value:function(){var e=this;"function"==typeof this.auth?this.auth((function(t){e.packet({type:kf.CONNECT,data:t})})):this.packet({type:kf.CONNECT,data:this.auth})}},{key:"onerror",value:function(e){this.connected||this.emitReserved("connect_error",e)}},{key:"onclose",value:function(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}},{key:"onpacket",value:function(e){if(e.nsp===this.nsp)switch(e.type){case kf.CONNECT:if(e.data&&e.data.sid){var t=e.data.sid;this.onconnect(t)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case kf.EVENT:case kf.BINARY_EVENT:this.onevent(e);break;case kf.ACK:case kf.BINARY_ACK:this.onack(e);break;case kf.DISCONNECT:this.ondisconnect();break;case kf.CONNECT_ERROR:this.destroy();var n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n)}}},{key:"onevent",value:function(e){var t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}},{key:"emitEvent",value:function(e){if(this._anyListeners&&this._anyListeners.length){var t,r=this._anyListeners.slice(),a=(0,h.Z)(r);try{for(a.s();!(t=a.n()).done;){t.value.apply(this,e)}}catch(Nx){a.e(Nx)}finally{a.f()}}(0,hd.Z)((0,b.Z)(n.prototype),"emit",this).apply(this,e)}},{key:"ack",value:function(e){var t=this,n=!1;return function(){if(!n){n=!0;for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];t.packet({type:kf.ACK,id:e,data:a})}}}},{key:"onack",value:function(e){var t=this.acks[e.id];"function"===typeof t&&(t.apply(this,e.data),delete this.acks[e.id])}},{key:"onconnect",value:function(e){this.id=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}},{key:"emitBuffered",value:function(){var e=this;this.receiveBuffer.forEach((function(t){return e.emitEvent(t)})),this.receiveBuffer=[],this.sendBuffer.forEach((function(t){e.notifyOutgoingListeners(t),e.packet(t)})),this.sendBuffer=[]}},{key:"ondisconnect",value:function(){this.destroy(),this.onclose("io server disconnect")}},{key:"destroy",value:function(){this.subs&&(this.subs.forEach((function(e){return e()})),this.subs=void 0),this.io._destroy(this)}},{key:"disconnect",value:function(){return this.connected&&this.packet({type:kf.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(e){return this.flags.compress=e,this}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}},{key:"timeout",value:function(e){return this.flags.timeout=e,this}},{key:"onAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}},{key:"prependAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}},{key:"offAny",value:function(e){if(!this._anyListeners)return this;if(e){for(var t=this._anyListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}},{key:"onAnyOutgoing",value:function(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}},{key:"prependAnyOutgoing",value:function(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}},{key:"offAnyOutgoing",value:function(e){if(!this._anyOutgoingListeners)return this;if(e){for(var t=this._anyOutgoingListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}},{key:"listenersAnyOutgoing",value:function(){return this._anyOutgoingListeners||[]}},{key:"notifyOutgoingListeners",value:function(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){var t,n=this._anyOutgoingListeners.slice(),r=(0,h.Z)(n);try{for(r.s();!(t=r.n()).done;){t.value.apply(this,e.data)}}catch(Nx){r.e(Nx)}finally{r.f()}}}}]),n}(Od);function Nf(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Nf.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},Nf.prototype.reset=function(){this.attempts=0},Nf.prototype.setMin=function(e){this.ms=e},Nf.prototype.setMax=function(e){this.max=e},Nf.prototype.setJitter=function(e){this.jitter=e};var Of=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var a,i;(0,c.Z)(this,n),(a=t.call(this)).nsps={},a.subs=[],e&&"object"===typeof e&&(r=e,e=void 0),(r=r||{}).path=r.path||"/socket.io",a.opts=r,Bd((0,y.Z)(a),r),a.reconnection(!1!==r.reconnection),a.reconnectionAttempts(r.reconnectionAttempts||1/0),a.reconnectionDelay(r.reconnectionDelay||1e3),a.reconnectionDelayMax(r.reconnectionDelayMax||5e3),a.randomizationFactor(null!==(i=r.randomizationFactor)&&void 0!==i?i:.5),a.backoff=new Nf({min:a.reconnectionDelay(),max:a.reconnectionDelayMax(),jitter:a.randomizationFactor()}),a.timeout(null==r.timeout?2e4:r.timeout),a._readyState="closed",a.uri=e;var s=r.parser||o;return a.encoder=new s.Encoder,a.decoder=new s.Decoder,a._autoConnect=!1!==r.autoConnect,a._autoConnect&&a.open(),a}return(0,l.Z)(n,[{key:"reconnection",value:function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}},{key:"reconnectionAttempts",value:function(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}},{key:"reconnectionDelay",value:function(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}},{key:"randomizationFactor",value:function(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}},{key:"reconnectionDelayMax",value:function(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}},{key:"timeout",value:function(e){return arguments.length?(this._timeout=e,this):this._timeout}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}},{key:"open",value:function(e){var t=this;if(~this._readyState.indexOf("open"))return this;this.engine=new lf(this.uri,this.opts);var n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;var a=If(n,"open",(function(){r.onopen(),e&&e()})),i=If(n,"error",(function(n){r.cleanup(),r._readyState="closed",t.emitReserved("error",n),e?e(n):r.maybeReconnectOnOpen()}));if(!1!==this._timeout){var o=this._timeout;0===o&&a();var s=this.setTimeoutFn((function(){a(),n.close(),n.emit("error",new Error("timeout"))}),o);this.opts.autoUnref&&s.unref(),this.subs.push((function(){clearTimeout(s)}))}return this.subs.push(a),this.subs.push(i),this}},{key:"connect",value:function(e){return this.open(e)}},{key:"onopen",value:function(){this.cleanup(),this._readyState="open",this.emitReserved("open");var e=this.engine;this.subs.push(If(e,"ping",this.onping.bind(this)),If(e,"data",this.ondata.bind(this)),If(e,"error",this.onerror.bind(this)),If(e,"close",this.onclose.bind(this)),If(this.decoder,"decoded",this.ondecoded.bind(this)))}},{key:"onping",value:function(){this.emitReserved("ping")}},{key:"ondata",value:function(e){this.decoder.add(e)}},{key:"ondecoded",value:function(e){this.emitReserved("packet",e)}},{key:"onerror",value:function(e){this.emitReserved("error",e)}},{key:"socket",value:function(e,t){var n=this.nsps[e];return n||(n=new Ef(this,e,t),this.nsps[e]=n),n}},{key:"_destroy",value:function(e){for(var t=0,n=Object.keys(this.nsps);t<n.length;t++){var r=n[t];if(this.nsps[r].active)return}this._close()}},{key:"_packet",value:function(e){for(var t=this.encoder.encode(e),n=0;n<t.length;n++)this.engine.write(t[n],e.options)}},{key:"cleanup",value:function(){this.subs.forEach((function(e){return e()})),this.subs.length=0,this.decoder.destroy()}},{key:"_close",value:function(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var e=this;if(this._reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var n=this.backoff.duration();this._reconnecting=!0;var r=this.setTimeoutFn((function(){t.skipReconnect||(e.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((function(n){n?(t._reconnecting=!1,t.reconnect(),e.emitReserved("reconnect_error",n)):t.onreconnect()})))}),n);this.opts.autoUnref&&r.unref(),this.subs.push((function(){clearTimeout(r)}))}}},{key:"onreconnect",value:function(){var e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}]),n}(Od),Af={};function Rf(e,t){"object"===typeof e&&(t=e,e=void 0);var n,r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=e;n=n||"undefined"!==typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof n?n.protocol+"//"+e:"https://"+e),r=cf(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var a=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+a+":"+r.port+t,r.href=r.protocol+"://"+a+(n&&n.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),a=r.source,i=r.id,o=r.path,s=Af[i]&&o in Af[i].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||s?n=new Of(a,t):(Af[i]||(Af[i]=new Of(a,t)),n=Af[i]),r.query&&!t.query&&(t.query=r.queryKey),n.socket(r.path,t)}function Pf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Df(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pf(Object(n),!0).forEach((function(t){Vu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Object.assign(Rf,{Manager:Of,Socket:Ef,io:Rf,connect:Rf});var Bf="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function Mf(e,t,n){var r=n||function(e){return Array.prototype.slice.call(e)},a=!1,i=[];return function(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];i=r(o),a||(a=!0,Bf.call(window,(function(){a=!1,e.apply(t,i)})))}}var Ff=function(e){return"start"===e?"left":"end"===e?"right":"center"},Lf=function(e,t,n){return"start"===e?t:"end"===e?n:(t+n)/2};function Vf(){}var zf=function(){var e=0;return function(){return e++}}();function Zf(e){return null===e||"undefined"===typeof e}function Uf(e){if(Array.isArray&&Array.isArray(e))return!0;var t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function jf(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}var Wf=function(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)};function Gf(e,t){return Wf(e)?e:t}function Hf(e,t){return"undefined"===typeof e?t:e}var qf=function(e,t){return"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e};function Xf(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function Kf(e,t,n,r){var a,i,o;if(Uf(e))if(i=e.length,r)for(a=i-1;a>=0;a--)t.call(n,e[a],a);else for(a=0;a<i;a++)t.call(n,e[a],a);else if(jf(e))for(i=(o=Object.keys(e)).length,a=0;a<i;a++)t.call(n,e[o[a]],o[a])}function Yf(e,t){var n,r,a,i;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(a=e[n],i=t[n],a.datasetIndex!==i.datasetIndex||a.index!==i.index)return!1;return!0}function Qf(e){if(Uf(e))return e.map(Qf);if(jf(e)){for(var t=Object.create(null),n=Object.keys(e),r=n.length,a=0;a<r;++a)t[n[a]]=Qf(e[n[a]]);return t}return e}function $f(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function Jf(e,t,n,r){if($f(e)){var a=t[e],i=n[e];jf(a)&&jf(i)?ep(a,i,r):t[e]=Qf(i)}}function ep(e,t,n){var r=Uf(t)?t:[t],a=r.length;if(!jf(e))return e;for(var i=(n=n||{}).merger||Jf,o=0;o<a;++o)if(jf(t=r[o]))for(var s=Object.keys(t),u=0,c=s.length;u<c;++u)i(s[u],e,t,n);return e}function tp(e,t){return ep(e,t,{merger:np})}function np(e,t,n){if($f(e)){var r=t[e],a=n[e];jf(r)&&jf(a)?tp(r,a):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Qf(a))}}function rp(e,t){var n=e.indexOf(".",t);return-1===n?e.length:n}function ap(e,t){if(""===t)return e;for(var n=0,r=rp(t,n);e&&r>n;)e=e[t.slice(n,r)],r=rp(t,n=r+1);return e}function ip(e){return e.charAt(0).toUpperCase()+e.slice(1)}var op=function(e){return"undefined"!==typeof e},sp=function(e){return"function"===typeof e},up=function(e,t){if(e.size!==t.size)return!1;var n,r=(0,h.Z)(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(!t.has(a))return!1}}catch(Nx){r.e(Nx)}finally{r.f()}return!0};var cp=Math.PI,lp=2*cp,dp=lp+cp,fp=Number.POSITIVE_INFINITY,pp=cp/180,hp=cp/2,mp=cp/4,vp=2*cp/3,gp=Math.log10,yp=Math.sign;function bp(e){var t=Math.round(e);e=kp(e,t,e/1e3)?t:e;var n=Math.pow(10,Math.floor(gp(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function xp(e){return!isNaN(parseFloat(e))&&isFinite(e)}function kp(e,t,n){return Math.abs(e-t)<n}function wp(e,t,n){var r,a,i;for(r=0,a=e.length;r<a;r++)i=e[r][n],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function Sp(e){return e*(cp/180)}function Cp(e){return e*(180/cp)}function _p(e){if(Wf(e)){for(var t=1,n=0;Math.round(e*t)/t!==e;)t*=10,n++;return n}}function Ip(e,t){var n=t.x-e.x,r=t.y-e.y,a=Math.sqrt(n*n+r*r),i=Math.atan2(r,n);return i<-.5*cp&&(i+=lp),{angle:i,distance:a}}function Tp(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Ep(e,t){return(e-t+dp)%lp-cp}function Np(e){return(e%lp+lp)%lp}function Op(e,t,n,r){var a=Np(e),i=Np(t),o=Np(n),s=Np(i-a),u=Np(o-a),c=Np(a-i),l=Np(a-o);return a===i||a===o||r&&i===o||s>u&&c<l}function Ap(e,t,n){return Math.max(t,Math.min(n,e))}function Rp(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}var Pp=function(e){return 0===e||1===e},Dp=function(e,t,n){return-Math.pow(2,10*(e-=1))*Math.sin((e-t)*lp/n)},Bp=function(e,t,n){return Math.pow(2,-10*e)*Math.sin((e-t)*lp/n)+1},Mp={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return(e-=1)*e*e+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-((e-=1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return(e-=1)*e*e*e*e+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return 1-Math.cos(e*hp)},easeOutSine:function(e){return Math.sin(e*hp)},easeInOutSine:function(e){return-.5*(Math.cos(cp*e)-1)},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return Pp(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1)))},easeInCirc:function(e){return e>=1?e:-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-(e-=1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){return Pp(e)?e:Dp(e,.075,.3)},easeOutElastic:function(e){return Pp(e)?e:Bp(e,.075,.3)},easeInOutElastic:function(e){var t=.1125;return Pp(e)?e:e<.5?.5*Dp(2*e,t,.45):.5+.5*Bp(2*e-1,t,.45)},easeInBack:function(e){var t=1.70158;return e*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:function(e){return 1-Mp.easeOutBounce(1-e)},easeOutBounce:function(e){var t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:function(e){return e<.5?.5*Mp.easeInBounce(2*e):.5*Mp.easeOutBounce(2*e-1)+.5}};function Fp(e){return e+.5|0}var Lp=function(e,t,n){return Math.max(Math.min(e,n),t)};function Vp(e){return Lp(Fp(2.55*e),0,255)}function zp(e){return Lp(Fp(255*e),0,255)}function Zp(e){return Lp(Fp(e/2.55)/100,0,1)}function Up(e){return Lp(Fp(100*e),0,100)}var jp={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Wp=(0,v.Z)("0123456789ABCDEF"),Gp=function(e){return Wp[15&e]},Hp=function(e){return Wp[(240&e)>>4]+Wp[15&e]},qp=function(e){return(240&e)>>4===(15&e)};function Xp(e){var t=function(e){return qp(e.r)&&qp(e.g)&&qp(e.b)&&qp(e.a)}(e)?Gp:Hp;return e?"#"+t(e.r)+t(e.g)+t(e.b)+function(e,t){return e<255?t(e):""}(e.a,t):void 0}var Kp=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Yp(e,t,n){var r=t*Math.min(n,1-n),a=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-r*Math.max(Math.min(a-3,9-a,1),-1)};return[a(0),a(8),a(4)]}function Qp(e,t,n){var r=function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(r+e/60)%6;return n-n*t*Math.max(Math.min(a,4-a,1),0)};return[r(5),r(3),r(1)]}function $p(e,t,n){var r,a=Yp(e,1,.5);for(t+n>1&&(t*=r=1/(t+n),n*=r),r=0;r<3;r++)a[r]*=1-t-n,a[r]+=t;return a}function Jp(e){var t,n,r,a=e.r/255,i=e.g/255,o=e.b/255,s=Math.max(a,i,o),u=Math.min(a,i,o),c=(s+u)/2;return s!==u&&(r=s-u,n=c>.5?r/(2-s-u):r/(s+u),t=function(e,t,n,r,a){return e===a?(t-n)/r+(t<n?6:0):t===a?(n-e)/r+2:(e-t)/r+4}(a,i,o,r,s),t=60*t+.5),[0|t,n||0,c]}function eh(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(zp)}function th(e,t,n){return eh(Yp,e,t,n)}function nh(e){return(e%360+360)%360}function rh(e){var t,n=Kp.exec(e),r=255;if(n){n[5]!==t&&(r=n[6]?Vp(+n[5]):zp(+n[5]));var a=nh(+n[2]),i=+n[3]/100,o=+n[4]/100;return t="hwb"===n[1]?function(e,t,n){return eh($p,e,t,n)}(a,i,o):"hsv"===n[1]?function(e,t,n){return eh(Qp,e,t,n)}(a,i,o):th(a,i,o),{r:t[0],g:t[1],b:t[2],a:r}}}var ah,ih={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},oh={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function sh(e){ah||(ah=function(){var e,t,n,r,a,i={},o=Object.keys(oh),s=Object.keys(ih);for(e=0;e<o.length;e++){for(r=a=o[e],t=0;t<s.length;t++)n=s[t],a=a.replace(n,ih[n]);n=parseInt(oh[r],16),i[a]=[n>>16&255,n>>8&255,255&n]}return i}(),ah.transparent=[0,0,0,0]);var t=ah[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}var uh=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;var ch=function(e){return e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055},lh=function(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)};function dh(e,t,n){if(e){var r=Jp(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,0===t?360:1)),r=th(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function fh(e,t){return e?Object.assign(t||{},e):e}function ph(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=zp(e[3]))):(t=fh(e,{r:0,g:0,b:0,a:1})).a=zp(t.a),t}function hh(e){return"r"===e.charAt(0)?function(e){var t,n,r,a=uh.exec(e),i=255;if(a){if(a[7]!==t){var o=+a[7];i=a[8]?Vp(o):Lp(255*o,0,255)}return t=+a[1],n=+a[3],r=+a[5],{r:t=255&(a[2]?Vp(t):Lp(t,0,255)),g:n=255&(a[4]?Vp(n):Lp(n,0,255)),b:r=255&(a[6]?Vp(r):Lp(r,0,255)),a:i}}}(e):rh(e)}var mh=function(){function e(t){if((0,c.Z)(this,e),t instanceof e)return t;var n,r=typeof t;"object"===r?n=ph(t):"string"===r&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*jp[e[1]],g:255&17*jp[e[2]],b:255&17*jp[e[3]],a:5===n?17*jp[e[4]]:255}:7!==n&&9!==n||(t={r:jp[e[1]]<<4|jp[e[2]],g:jp[e[3]]<<4|jp[e[4]],b:jp[e[5]]<<4|jp[e[6]],a:9===n?jp[e[7]]<<4|jp[e[8]]:255})),t}(t)||sh(t)||hh(t)),this._rgb=n,this._valid=!!n}return(0,l.Z)(e,[{key:"valid",get:function(){return this._valid}},{key:"rgb",get:function(){var e=fh(this._rgb);return e&&(e.a=Zp(e.a)),e},set:function(e){this._rgb=ph(e)}},{key:"rgbString",value:function(){return this._valid?function(e){return e&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(Zp(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")"))}(this._rgb):void 0}},{key:"hexString",value:function(){return this._valid?Xp(this._rgb):void 0}},{key:"hslString",value:function(){return this._valid?function(e){if(e){var t=Jp(e),n=t[0],r=Up(t[1]),a=Up(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(r,"%, ").concat(a,"%, ").concat(Zp(e.a),")"):"hsl(".concat(n,", ").concat(r,"%, ").concat(a,"%)")}}(this._rgb):void 0}},{key:"mix",value:function(e,t){if(e){var n,r=this.rgb,a=e.rgb,i=t===n?.5:t,o=2*i-1,s=r.a-a.a,u=((o*s===-1?o:(o+s)/(1+o*s))+1)/2;n=1-u,r.r=255&u*r.r+n*a.r+.5,r.g=255&u*r.g+n*a.g+.5,r.b=255&u*r.b+n*a.b+.5,r.a=i*r.a+(1-i)*a.a,this.rgb=r}return this}},{key:"interpolate",value:function(e,t){return e&&(this._rgb=function(e,t,n){var r=lh(Zp(e.r)),a=lh(Zp(e.g)),i=lh(Zp(e.b));return{r:zp(ch(r+n*(lh(Zp(t.r))-r))),g:zp(ch(a+n*(lh(Zp(t.g))-a))),b:zp(ch(i+n*(lh(Zp(t.b))-i))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}},{key:"clone",value:function(){return new e(this.rgb)}},{key:"alpha",value:function(e){return this._rgb.a=zp(e),this}},{key:"clearer",value:function(e){return this._rgb.a*=1-e,this}},{key:"greyscale",value:function(){var e=this._rgb,t=Fp(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}},{key:"opaquer",value:function(e){return this._rgb.a*=1+e,this}},{key:"negate",value:function(){var e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}},{key:"lighten",value:function(e){return dh(this._rgb,2,e),this}},{key:"darken",value:function(e){return dh(this._rgb,2,-e),this}},{key:"saturate",value:function(e){return dh(this._rgb,1,e),this}},{key:"desaturate",value:function(e){return dh(this._rgb,1,-e),this}},{key:"rotate",value:function(e){return function(e,t){var n=Jp(e);n[0]=nh(n[0]+t),n=th(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}]),e}();function vh(e){return new mh(e)}function gh(e){if(e&&"object"===typeof e){var t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function yh(e){return gh(e)?e:vh(e)}function bh(e){return gh(e)?e:vh(e).saturate(.5).darken(.1).hexString()}var xh=Object.create(null),kh=Object.create(null);function wh(e,t){if(!t)return e;for(var n=t.split("."),r=0,a=n.length;r<a;++r){var i=n[r];e=e[i]||(e[i]=Object.create(null))}return e}function Sh(e,t,n){return"string"===typeof t?ep(wh(e,t),n):ep(wh(e,""),t)}var Ch=function(){function e(t){(0,c.Z)(this,e),this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=function(e){return e.chart.platform.getDevicePixelRatio()},this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=function(e,t){return bh(t.backgroundColor)},this.hoverBorderColor=function(e,t){return bh(t.borderColor)},this.hoverColor=function(e,t){return bh(t.color)},this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t)}return(0,l.Z)(e,[{key:"set",value:function(e,t){return Sh(this,e,t)}},{key:"get",value:function(e){return wh(this,e)}},{key:"describe",value:function(e,t){return Sh(kh,e,t)}},{key:"override",value:function(e,t){return Sh(xh,e,t)}},{key:"route",value:function(e,t,n,r){var a,i=wh(this,e),o=wh(this,n),s="_"+t;Object.defineProperties(i,(Vu(a={},s,{value:i[t],writable:!0}),Vu(a,t,{enumerable:!0,get:function(){var e=this[s],t=o[r];return jf(e)?Object.assign({},t,e):Hf(e,t)},set:function(e){this[s]=e}}),a))}}]),e}(),_h=new Ch({_scriptable:function(e){return!e.startsWith("on")},_indexable:function(e){return"events"!==e},hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function Ih(e,t,n,r,a){var i=t[a];return i||(i=t[a]=e.measureText(a).width,n.push(a)),i>r&&(r=i),r}function Th(e,t,n,r){var a=(r=r||{}).data=r.data||{},i=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(a=r.data={},i=r.garbageCollect=[],r.font=t),e.save(),e.font=t;var o,s,u,c,l,d=0,f=n.length;for(o=0;o<f;o++)if(void 0!==(c=n[o])&&null!==c&&!0!==Uf(c))d=Ih(e,a,i,d,c);else if(Uf(c))for(s=0,u=c.length;s<u;s++)void 0===(l=c[s])||null===l||Uf(l)||(d=Ih(e,a,i,d,l));e.restore();var p=i.length/2;if(p>n.length){for(o=0;o<p;o++)delete a[i[o]];i.splice(0,p)}return d}function Eh(e,t,n){var r=e.currentDevicePixelRatio,a=0!==n?Math.max(n/2,.5):0;return Math.round((t-a)*r)/r+a}function Nh(e,t){(t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function Oh(e,t,n,r){Ah(e,t,n,r,null)}function Ah(e,t,n,r,a){var i,o,s,u,c,l,d=t.pointStyle,f=t.rotation,p=t.radius,h=(f||0)*pp;if(d&&"object"===typeof d&&("[object HTMLImageElement]"===(i=d.toString())||"[object HTMLCanvasElement]"===i))return e.save(),e.translate(n,r),e.rotate(h),e.drawImage(d,-d.width/2,-d.height/2,d.width,d.height),void e.restore();if(!(isNaN(p)||p<=0)){switch(e.beginPath(),d){default:a?e.ellipse(n,r,a/2,p,0,0,lp):e.arc(n,r,p,0,lp),e.closePath();break;case"triangle":e.moveTo(n+Math.sin(h)*p,r-Math.cos(h)*p),h+=vp,e.lineTo(n+Math.sin(h)*p,r-Math.cos(h)*p),h+=vp,e.lineTo(n+Math.sin(h)*p,r-Math.cos(h)*p),e.closePath();break;case"rectRounded":u=p-(c=.516*p),o=Math.cos(h+mp)*u,s=Math.sin(h+mp)*u,e.arc(n-o,r-s,c,h-cp,h-hp),e.arc(n+s,r-o,c,h-hp,h),e.arc(n+o,r+s,c,h,h+hp),e.arc(n-s,r+o,c,h+hp,h+cp),e.closePath();break;case"rect":if(!f){u=Math.SQRT1_2*p,l=a?a/2:u,e.rect(n-l,r-u,2*l,2*u);break}h+=mp;case"rectRot":o=Math.cos(h)*p,s=Math.sin(h)*p,e.moveTo(n-o,r-s),e.lineTo(n+s,r-o),e.lineTo(n+o,r+s),e.lineTo(n-s,r+o),e.closePath();break;case"crossRot":h+=mp;case"cross":o=Math.cos(h)*p,s=Math.sin(h)*p,e.moveTo(n-o,r-s),e.lineTo(n+o,r+s),e.moveTo(n+s,r-o),e.lineTo(n-s,r+o);break;case"star":o=Math.cos(h)*p,s=Math.sin(h)*p,e.moveTo(n-o,r-s),e.lineTo(n+o,r+s),e.moveTo(n+s,r-o),e.lineTo(n-s,r+o),h+=mp,o=Math.cos(h)*p,s=Math.sin(h)*p,e.moveTo(n-o,r-s),e.lineTo(n+o,r+s),e.moveTo(n+s,r-o),e.lineTo(n-s,r+o);break;case"line":o=a?a/2:Math.cos(h)*p,s=Math.sin(h)*p,e.moveTo(n-o,r-s),e.lineTo(n+o,r+s);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(h)*p,r+Math.sin(h)*p)}e.fill(),t.borderWidth>0&&e.stroke()}}function Rh(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function Ph(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Dh(e){e.restore()}function Bh(e,t,n,r,a){if(!t)return e.lineTo(n.x,n.y);if("middle"===a){var i=(t.x+n.x)/2;e.lineTo(i,t.y),e.lineTo(i,n.y)}else"after"===a!==!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function Mh(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function Fh(e,t,n,r,a){var i,o,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},u=Uf(t)?t:[t],c=s.strokeWidth>0&&""!==s.strokeColor;for(e.save(),e.font=a.string,Lh(e,s),i=0;i<u.length;++i)o=u[i],c&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),Zf(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(o,n,r,s.maxWidth)),e.fillText(o,n,r,s.maxWidth),Vh(e,n,r,o,s),r+=a.lineHeight;e.restore()}function Lh(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Zf(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function Vh(e,t,n,r,a){if(a.strikethrough||a.underline){var i=e.measureText(r),o=t-i.actualBoundingBoxLeft,s=t+i.actualBoundingBoxRight,u=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,l=a.strikethrough?(u+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=a.decorationWidth||2,e.moveTo(o,l),e.lineTo(s,l),e.stroke()}}function zh(e,t){var n=t.x,r=t.y,a=t.w,i=t.h,o=t.radius;e.arc(n+o.topLeft,r+o.topLeft,o.topLeft,-hp,cp,!0),e.lineTo(n,r+i-o.bottomLeft),e.arc(n+o.bottomLeft,r+i-o.bottomLeft,o.bottomLeft,cp,hp,!0),e.lineTo(n+a-o.bottomRight,r+i),e.arc(n+a-o.bottomRight,r+i-o.bottomRight,o.bottomRight,hp,0,!0),e.lineTo(n+a,r+o.topRight),e.arc(n+a-o.topRight,r+o.topRight,o.topRight,0,-hp,!0),e.lineTo(n+o.topLeft,r)}var Zh=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),Uh=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function jh(e,t){var n=(""+e).match(Zh);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}var Wh=function(e){return+e||0};function Gh(e,t){var n,r={},a=jf(t),i=a?Object.keys(t):t,o=jf(e)?a?function(n){return Hf(e[n],e[t[n]])}:function(t){return e[t]}:function(){return e},s=(0,h.Z)(i);try{for(s.s();!(n=s.n()).done;){var u=n.value;r[u]=Wh(o(u))}}catch(Nx){s.e(Nx)}finally{s.f()}return r}function Hh(e){return Gh(e,{top:"y",right:"x",bottom:"y",left:"x"})}function qh(e){return Gh(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Xh(e){var t=Hh(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Kh(e,t){e=e||{},t=t||_h.font;var n=Hf(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));var r=Hf(e.style,t.style);r&&!(""+r).match(Uh)&&(console.warn('Invalid font style specified: "'+r+'"'),r="");var a={family:Hf(e.family,t.family),lineHeight:jh(Hf(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:Hf(e.weight,t.weight),string:""};return a.string=function(e){return!e||Zf(e.size)||Zf(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(a),a}function Yh(e,t,n,r){var a,i,o,s=!0;for(a=0,i=e.length;a<i;++a)if(void 0!==(o=e[a])&&(void 0!==t&&"function"===typeof o&&(o=o(t),s=!1),void 0!==n&&Uf(o)&&(o=o[n%o.length],s=!1),void 0!==o))return r&&!s&&(r.cacheable=!1),o}function Qh(e,t){return Object.assign(Object.create(e),t)}function $h(e,t,n){n=n||function(n){return e[n]<t};for(var r,a=e.length-1,i=0;a-i>1;)n(r=i+a>>1)?i=r:a=r;return{lo:i,hi:a}}var Jh=function(e,t,n){return $h(e,n,(function(r){return e[r][t]<n}))},em=function(e,t,n){return $h(e,n,(function(r){return e[r][t]>=n}))};var tm=["push","pop","shift","splice","unshift"];function nm(e,t){var n=e._chartjs;if(n){var r=n.listeners,a=r.indexOf(t);-1!==a&&r.splice(a,1),r.length>0||(tm.forEach((function(t){delete e[t]})),delete e._chartjs)}}function rm(e){var t,n,r=new Set;for(t=0,n=e.length;t<n;++t)r.add(e[t]);return r.size===n?e:Array.from(r)}function am(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,a=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return e[0]};op(a)||(a=vm("_fallback",e));var o=(Vu(t={},Symbol.toStringTag,"Object"),Vu(t,"_cacheable",!0),Vu(t,"_scopes",e),Vu(t,"_rootScopes",r),Vu(t,"_fallback",a),Vu(t,"_getTarget",i),Vu(t,"override",(function(t){return am([t].concat((0,v.Z)(e)),n,r,a)})),t);return new Proxy(o,{deleteProperty:function(t,n){return delete t[n],delete t._keys,delete e[0][n],!0},get:function(t,r){return cm(t,r,(function(){return mm(r,n,e,t)}))},getOwnPropertyDescriptor:function(e,t){return Reflect.getOwnPropertyDescriptor(e._scopes[0],t)},getPrototypeOf:function(){return Reflect.getPrototypeOf(e[0])},has:function(e,t){return gm(e).includes(t)},ownKeys:function(e){return gm(e)},set:function(e,t,n){var r=e._storage||(e._storage=i());return e[t]=r[t]=n,delete e._keys,!0}})}function im(e,t,n,r){var a={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:om(e,r),setContext:function(t){return im(e,t,n,r)},override:function(a){return im(e.override(a),t,n,r)}};return new Proxy(a,{deleteProperty:function(t,n){return delete t[n],delete e[n],!0},get:function(e,t,n){return cm(e,t,(function(){return function(e,t,n){var r=e._proxy,a=e._context,i=e._subProxy,o=e._descriptors,s=r[t];sp(s)&&o.isScriptable(t)&&(s=function(e,t,n,r){var a=n._proxy,i=n._context,o=n._subProxy,s=n._stack;if(s.has(e))throw new Error("Recursion detected: "+Array.from(s).join("->")+"->"+e);s.add(e),t=t(i,o||r),s.delete(e),um(e,t)&&(t=pm(a._scopes,a,e,t));return t}(t,s,e,n));Uf(s)&&s.length&&(s=function(e,t,n,r){var a=n._proxy,i=n._context,o=n._subProxy,s=n._descriptors;if(op(i.index)&&r(e))t=t[i.index%t.length];else if(jf(t[0])){var u=t,c=a._scopes.filter((function(e){return e!==u}));t=[];var l,d=(0,h.Z)(u);try{for(d.s();!(l=d.n()).done;){var f=pm(c,a,e,l.value);t.push(im(f,i,o&&o[e],s))}}catch(Nx){d.e(Nx)}finally{d.f()}}return t}(t,s,e,o.isIndexable));um(t,s)&&(s=im(s,a,i&&i[t],o));return s}(e,t,n)}))},getOwnPropertyDescriptor:function(t,n){return t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n)},getPrototypeOf:function(){return Reflect.getPrototypeOf(e)},has:function(t,n){return Reflect.has(e,n)},ownKeys:function(){return Reflect.ownKeys(e)},set:function(t,n,r){return e[n]=r,delete t[n],!0}})}function om(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0},n=e._scriptable,r=void 0===n?t.scriptable:n,a=e._indexable,i=void 0===a?t.indexable:a,o=e._allKeys,s=void 0===o?t.allKeys:o;return{allKeys:s,scriptable:r,indexable:i,isScriptable:sp(r)?r:function(){return r},isIndexable:sp(i)?i:function(){return i}}}var sm=function(e,t){return e?e+ip(t):t},um=function(e,t){return jf(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object)};function cm(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t))return e[t];var r=n();return e[t]=r,r}function lm(e,t,n){return sp(e)?e(t,n):e}var dm=function(e,t){return!0===e?t:"string"===typeof e?ap(t,e):void 0};function fm(e,t,n,r,a){var i,o=(0,h.Z)(t);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=dm(n,s);if(u){e.add(u);var c=lm(u._fallback,n,a);if(op(c)&&c!==n&&c!==r)return c}else if(!1===u&&op(r)&&n!==r)return null}}catch(Nx){o.e(Nx)}finally{o.f()}return!1}function pm(e,t,n,r){var a=t._rootScopes,i=lm(t._fallback,n,r),o=[].concat((0,v.Z)(e),(0,v.Z)(a)),s=new Set;s.add(r);var u=hm(s,o,n,i||n,r);return null!==u&&((!op(i)||i===n||null!==(u=hm(s,o,i,u,r)))&&am(Array.from(s),[""],a,i,(function(){return function(e,t,n){var r=e._getTarget();t in r||(r[t]={});var a=r[t];if(Uf(a)&&jf(n))return n;return a}(t,n,r)})))}function hm(e,t,n,r,a){for(;n;)n=fm(e,t,n,r,a);return n}function mm(e,t,n,r){var a,i,o=(0,h.Z)(t);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(a=vm(sm(s,e),n),op(a))return um(e,a)?pm(n,r,e,a):a}}catch(Nx){o.e(Nx)}finally{o.f()}}function vm(e,t){var n,r=(0,h.Z)(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a){var i=a[e];if(op(i))return i}}}catch(Nx){r.e(Nx)}finally{r.f()}}function gm(e){var t=e._keys;return t||(t=e._keys=function(e){var t,n=new Set,r=(0,h.Z)(e);try{for(r.s();!(t=r.n()).done;){var a,i=t.value,o=(0,h.Z)(Object.keys(i).filter((function(e){return!e.startsWith("_")})));try{for(o.s();!(a=o.n()).done;){var s=a.value;n.add(s)}}catch(Nx){o.e(Nx)}finally{o.f()}}}catch(Nx){r.e(Nx)}finally{r.f()}return Array.from(n)}(e._scopes)),t}function ym(e,t,n,r){var a,i,o,s,u=e.iScale,c=this._parsing.key,l=void 0===c?"r":c,d=new Array(r);for(a=0,i=r;a<i;++a)s=t[o=a+n],d[a]={r:u.parse(ap(s,l),o)};return d}var bm=Number.EPSILON||1e-14,xm=function(e,t){return t<e.length&&!e[t].skip&&e[t]},km=function(e){return"x"===e?"y":"x"};function wm(e,t,n,r){var a=e.skip?t:e,i=t,o=n.skip?t:n,s=Tp(i,a),u=Tp(o,i),c=s/(s+u),l=u/(s+u),d=r*(c=isNaN(c)?0:c),f=r*(l=isNaN(l)?0:l);return{previous:{x:i.x-d*(o.x-a.x),y:i.y-d*(o.y-a.y)},next:{x:i.x+f*(o.x-a.x),y:i.y+f*(o.y-a.y)}}}function Sm(e,t,n){for(var r,a,i,o,s,u=e.length,c=xm(e,0),l=0;l<u-1;++l)s=c,c=xm(e,l+1),s&&c&&(kp(t[l],0,bm)?n[l]=n[l+1]=0:(r=n[l]/t[l],a=n[l+1]/t[l],(o=Math.pow(r,2)+Math.pow(a,2))<=9||(i=3/Math.sqrt(o),n[l]=r*i*t[l],n[l+1]=a*i*t[l])))}function Cm(e,t){for(var n,r,a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x",o=km(i),s=e.length,u=xm(e,0),c=0;c<s;++c)if(r=a,a=u,u=xm(e,c+1),a){var l=a[i],d=a[o];r&&(n=(l-r[i])/3,a["cp1".concat(i)]=l-n,a["cp1".concat(o)]=d-n*t[c]),u&&(n=(u[i]-l)/3,a["cp2".concat(i)]=l+n,a["cp2".concat(o)]=d+n*t[c])}}function _m(e,t,n){return Math.max(Math.min(e,n),t)}function Im(e,t,n,r,a){var i,o,s,u;if(t.spanGaps&&(e=e.filter((function(e){return!e.skip}))),"monotone"===t.cubicInterpolationMode)!function(e){var t,n,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",i=km(a),o=e.length,s=Array(o).fill(0),u=Array(o),c=xm(e,0);for(t=0;t<o;++t)if(n=r,r=c,c=xm(e,t+1),r){if(c){var l=c[a]-r[a];s[t]=0!==l?(c[i]-r[i])/l:0}u[t]=n?c?yp(s[t-1])!==yp(s[t])?0:(s[t-1]+s[t])/2:s[t-1]:s[t]}Sm(e,s,u),Cm(e,u,a)}(e,a);else{var c=r?e[e.length-1]:e[0];for(i=0,o=e.length;i<o;++i)u=wm(c,s=e[i],e[Math.min(i+1,o-(r?0:1))%o],t.tension),s.cp1x=u.previous.x,s.cp1y=u.previous.y,s.cp2x=u.next.x,s.cp2y=u.next.y,c=s}t.capBezierPoints&&function(e,t){var n,r,a,i,o,s=Rh(e[0],t);for(n=0,r=e.length;n<r;++n)o=i,i=s,s=n<r-1&&Rh(e[n+1],t),i&&(a=e[n],o&&(a.cp1x=_m(a.cp1x,t.left,t.right),a.cp1y=_m(a.cp1y,t.top,t.bottom)),s&&(a.cp2x=_m(a.cp2x,t.left,t.right),a.cp2y=_m(a.cp2y,t.top,t.bottom)))}(e,n)}function Tm(){return"undefined"!==typeof window&&"undefined"!==typeof document}function Em(e){var t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function Nm(e,t,n){var r;return"string"===typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[n])):r=e,r}var Om=function(e){return window.getComputedStyle(e,null)};var Am=["top","right","bottom","left"];function Rm(e,t,n){var r={};n=n?"-"+n:"";for(var a=0;a<4;a++){var i=Am[a];r[i]=parseFloat(e[t+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function Pm(e,t){if("native"in e)return e;var n=t.canvas,r=t.currentDevicePixelRatio,a=Om(n),i="border-box"===a.boxSizing,o=Rm(a,"padding"),s=Rm(a,"border","width"),u=function(e,t){var n,r,a=e.touches,i=a&&a.length?a[0]:e,o=i.offsetX,s=i.offsetY,u=!1;if(function(e,t,n){return(e>0||t>0)&&(!n||!n.shadowRoot)}(o,s,e.target))n=o,r=s;else{var c=t.getBoundingClientRect();n=i.clientX-c.left,r=i.clientY-c.top,u=!0}return{x:n,y:r,box:u}}(e,n),c=u.x,l=u.y,d=u.box,f=o.left+(d&&s.left),p=o.top+(d&&s.top),h=t.width,m=t.height;return i&&(h-=o.width+s.width,m-=o.height+s.height),{x:Math.round((c-f)/h*n.width/r),y:Math.round((l-p)/m*n.height/r)}}var Dm=function(e){return Math.round(10*e)/10};function Bm(e,t,n,r){var a=Om(e),i=Rm(a,"margin"),o=Nm(a.maxWidth,e,"clientWidth")||fp,s=Nm(a.maxHeight,e,"clientHeight")||fp,u=function(e,t,n){var r,a;if(void 0===t||void 0===n){var i=Em(e);if(i){var o=i.getBoundingClientRect(),s=Om(i),u=Rm(s,"border","width"),c=Rm(s,"padding");t=o.width-c.width-u.width,n=o.height-c.height-u.height,r=Nm(s.maxWidth,i,"clientWidth"),a=Nm(s.maxHeight,i,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:r||fp,maxHeight:a||fp}}(e,t,n),c=u.width,l=u.height;if("content-box"===a.boxSizing){var d=Rm(a,"border","width"),f=Rm(a,"padding");c-=f.width+d.width,l-=f.height+d.height}return c=Math.max(0,c-i.width),l=Math.max(0,r?Math.floor(c/r):l-i.height),c=Dm(Math.min(c,o,u.maxWidth)),l=Dm(Math.min(l,s,u.maxHeight)),c&&!l&&(l=Dm(c/2)),{width:c,height:l}}function Mm(e,t,n){var r=t||1,a=Math.floor(e.height*r),i=Math.floor(e.width*r);e.height=a/r,e.width=i/r;var o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height="".concat(e.height,"px"),o.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==r||o.height!==a||o.width!==i)&&(e.currentDevicePixelRatio=r,o.height=a,o.width=i,e.ctx.setTransform(r,0,0,r,0,0),!0)}var Fm=function(){var e=!1;try{var t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(Ln){}return e}();function Lm(e,t){var n=function(e,t){return Om(e).getPropertyValue(t)}(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Vm(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function zm(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:"middle"===r?n<.5?e.y:t.y:"after"===r?n<1?e.y:t.y:n>0?t.y:e.y}}function Zm(e,t,n,r){var a={x:e.cp2x,y:e.cp2y},i={x:t.cp1x,y:t.cp1y},o=Vm(e,a,n),s=Vm(a,i,n),u=Vm(i,t,n),c=Vm(o,s,n),l=Vm(s,u,n);return Vm(c,l,n)}var Um=new Map;function jm(e,t,n){return function(e,t){t=t||{};var n=e+JSON.stringify(t),r=Um.get(n);return r||(r=new Intl.NumberFormat(e,t),Um.set(n,r)),r}(t,n).format(e)}function Wm(e,t,n){return e?function(e,t){return{x:function(n){return e+e+t-n},setWidth:function(e){t=e},textAlign:function(e){return"center"===e?e:"right"===e?"left":"right"},xPlus:function(e,t){return e-t},leftForLtr:function(e,t){return e-t}}}(t,n):{x:function(e){return e},setWidth:function(e){},textAlign:function(e){return e},xPlus:function(e,t){return e+t},leftForLtr:function(e,t){return e}}}function Gm(e,t){var n,r;"ltr"!==t&&"rtl"!==t||(r=[(n=e.canvas.style).getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function Hm(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function qm(e){return"angle"===e?{between:Op,compare:Ep,normalize:Np}:{between:Rp,compare:function(e,t){return e-t},normalize:function(e){return e}}}function Xm(e){var t=e.start,n=e.end,r=e.count;return{start:t%r,end:n%r,loop:e.loop&&(n-t+1)%r===0,style:e.style}}function Km(e,t,n){if(!n)return[e];for(var r,a,i,o=n.property,s=n.start,u=n.end,c=t.length,l=qm(o),d=l.compare,f=l.between,p=l.normalize,h=function(e,t,n){var r,a,i=n.property,o=n.start,s=n.end,u=qm(i),c=u.between,l=u.normalize,d=t.length,f=e.start,p=e.end,h=e.loop;if(h){for(f+=d,p+=d,r=0,a=d;r<a&&c(l(t[f%d][i]),o,s);++r)f--,p--;f%=d,p%=d}return p<f&&(p+=d),{start:f,end:p,loop:h,style:e.style}}(e,t,n),m=h.start,v=h.end,g=h.loop,y=h.style,b=[],x=!1,k=null,w=function(){return x||f(s,i,r)&&0!==d(s,i)},S=function(){return!x||0===d(u,r)||f(u,i,r)},C=m,_=m;C<=v;++C)(a=t[C%c]).skip||(r=p(a[o]))!==i&&(x=f(r,s,u),null===k&&w()&&(k=0===d(r,s)?C:_),null!==k&&S()&&(b.push(Xm({start:k,end:C,loop:g,count:c,style:y})),k=null),_=C,i=r);return null!==k&&b.push(Xm({start:k,end:v,loop:g,count:c,style:y})),b}function Ym(e,t){for(var n=[],r=e.segments,a=0;a<r.length;a++){var i=Km(r[a],e.points,t);i.length&&n.push.apply(n,(0,v.Z)(i))}return n}function Qm(e,t,n,r){return r&&r.setContext&&n?function(e,t,n,r){var a=e._chart.getContext(),i=$m(e.options),o=e._datasetIndex,s=e.options.spanGaps,u=n.length,c=[],l=i,d=t[0].start,f=d;function p(e,t,r,a){var i=s?-1:1;if(e!==t){for(e+=u;n[e%u].skip;)e-=i;for(;n[t%u].skip;)t+=i;e%u!==t%u&&(c.push({start:e%u,end:t%u,loop:r,style:a}),l=a,d=t%u)}}var m,v=(0,h.Z)(t);try{for(v.s();!(m=v.n()).done;){var g=m.value;d=s?d:g.start;var y=n[d%u],b=void 0;for(f=d+1;f<=g.end;f++){var x=n[f%u];Jm(b=$m(r.setContext(Qh(a,{type:"segment",p0:y,p1:x,p0DataIndex:(f-1)%u,p1DataIndex:f%u,datasetIndex:o}))),l)&&p(d,f-1,g.loop,l),y=x,l=b}d<f-1&&p(d,f-1,g.loop,l)}}catch(Nx){v.e(Nx)}finally{v.f()}return c}(e,t,n,r):t}function $m(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function Jm(e,t){return t&&JSON.stringify(e)!==JSON.stringify(t)}var ev=function(){function e(){(0,c.Z)(this,e),this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}return(0,l.Z)(e,[{key:"_notify",value:function(e,t,n,r){var a=t.listeners[r],i=t.duration;a.forEach((function(r){return r({chart:e,initial:t.initial,numSteps:i,currentStep:Math.min(n-t.start,i)})}))}},{key:"_refresh",value:function(){var e=this;this._request||(this._running=!0,this._request=Bf.call(window,(function(){e._update(),e._request=null,e._running&&e._refresh()})))}},{key:"_update",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),n=0;this._charts.forEach((function(r,a){if(r.running&&r.items.length){for(var i,o=r.items,s=o.length-1,u=!1;s>=0;--s)(i=o[s])._active?(i._total>r.duration&&(r.duration=i._total),i.tick(t),u=!0):(o[s]=o[o.length-1],o.pop());u&&(a.draw(),e._notify(a,r,t,"progress")),o.length||(r.running=!1,e._notify(a,r,t,"complete"),r.initial=!1),n+=o.length}})),this._lastDate=t,0===n&&(this._running=!1)}},{key:"_getAnims",value:function(e){var t=this._charts,n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}},{key:"listen",value:function(e,t,n){this._getAnims(e).listeners[t].push(n)}},{key:"add",value:function(e,t){var n;t&&t.length&&(n=this._getAnims(e).items).push.apply(n,(0,v.Z)(t))}},{key:"has",value:function(e){return this._getAnims(e).items.length>0}},{key:"start",value:function(e){var t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((function(e,t){return Math.max(e,t._duration)}),0),this._refresh())}},{key:"running",value:function(e){if(!this._running)return!1;var t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}},{key:"stop",value:function(e){var t=this._charts.get(e);if(t&&t.items.length){for(var n=t.items,r=n.length-1;r>=0;--r)n[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}}},{key:"remove",value:function(e){return this._charts.delete(e)}}]),e}(),tv=new ev,nv="transparent",rv={boolean:function(e,t,n){return n>.5?t:e},color:function(e,t,n){var r=yh(e||nv),a=r.valid&&yh(t||nv);return a&&a.valid?a.mix(r,n).hexString():t},number:function(e,t,n){return e+(t-e)*n}},av=function(){function e(t,n,r,a){(0,c.Z)(this,e);var i=n[r];a=Yh([t.to,a,i,t.from]);var o=Yh([t.from,i,a]);this._active=!0,this._fn=t.fn||rv[t.type||typeof o],this._easing=Mp[t.easing]||Mp.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=r,this._from=o,this._to=a,this._promises=void 0}return(0,l.Z)(e,[{key:"active",value:function(){return this._active}},{key:"update",value:function(e,t,n){if(this._active){this._notify(!1);var r=this._target[this._prop],a=n-this._start,i=this._duration-a;this._start=n,this._duration=Math.floor(Math.max(i,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=Yh([e.to,t,r,e.from]),this._from=Yh([e.from,r,t])}}},{key:"cancel",value:function(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}},{key:"tick",value:function(e){var t,n=e-this._start,r=this._duration,a=this._prop,i=this._from,o=this._loop,s=this._to;if(this._active=i!==s&&(o||n<r),!this._active)return this._target[a]=s,void this._notify(!0);n<0?this._target[a]=i:(t=n/r%2,t=o&&t>1?2-t:t,t=this._easing(Math.min(1,Math.max(0,t))),this._target[a]=this._fn(i,s,t))}},{key:"wait",value:function(){var e=this._promises||(this._promises=[]);return new Promise((function(t,n){e.push({res:t,rej:n})}))}},{key:"_notify",value:function(e){for(var t=e?"res":"rej",n=this._promises||[],r=0;r<n.length;r++)n[r][t]()}}]),e}();_h.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});var iv=Object.keys(_h.animation);_h.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:function(e){return"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}}),_h.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),_h.describe("animations",{_fallback:"animation"}),_h.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:function(e){return 0|e}}}}});var ov=function(){function e(t,n){(0,c.Z)(this,e),this._chart=t,this._properties=new Map,this.configure(n)}return(0,l.Z)(e,[{key:"configure",value:function(e){if(jf(e)){var t=this._properties;Object.getOwnPropertyNames(e).forEach((function(n){var r=e[n];if(jf(r)){var a,i={},o=(0,h.Z)(iv);try{for(o.s();!(a=o.n()).done;){var s=a.value;i[s]=r[s]}}catch(Nx){o.e(Nx)}finally{o.f()}(Uf(r.properties)&&r.properties||[n]).forEach((function(e){e!==n&&t.has(e)||t.set(e,i)}))}}))}}},{key:"_animateOptions",value:function(e,t){var n=t.options,r=function(e,t){if(!t)return;var n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!r)return[];var a=this._createAnimations(r,n);return n.$shared&&function(e,t){for(var n=[],r=Object.keys(t),a=0;a<r.length;a++){var i=e[r[a]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}(e.options.$animations,n).then((function(){e.options=n}),(function(){})),a}},{key:"_createAnimations",value:function(e,t){var n,r=this._properties,a=[],i=e.$animations||(e.$animations={}),o=Object.keys(t),s=Date.now();for(n=o.length-1;n>=0;--n){var u=o[n];if("$"!==u.charAt(0))if("options"!==u){var c=t[u],l=i[u],d=r.get(u);if(l){if(d&&l.active()){l.update(d,c,s);continue}l.cancel()}d&&d.duration?(i[u]=l=new av(d,e,u,c),a.push(l)):e[u]=c}else a.push.apply(a,(0,v.Z)(this._animateOptions(e,t)))}return a}},{key:"update",value:function(e,t){if(0!==this._properties.size){var n=this._createAnimations(e,t);return n.length?(tv.add(this._chart,n),!0):void 0}Object.assign(e,t)}}]),e}();function sv(e,t){var n=e&&e.options||{},r=n.reverse,a=void 0===n.min?t:0,i=void 0===n.max?t:0;return{start:r?i:a,end:r?a:i}}function uv(e,t){var n,r,a=[],i=e._getSortedDatasetMetas(t);for(n=0,r=i.length;n<r;++n)a.push(i[n].index);return a}function cv(e,t,n){var r,a,i,o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=e.keys,c="single"===s.mode;if(null!==t){for(r=0,a=u.length;r<a;++r){if((i=+u[r])===n){if(s.all)continue;break}o=e.values[i],Wf(o)&&(c||0===t||yp(t)===yp(o))&&(t+=o)}return t}}function lv(e,t){var n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function dv(e,t,n){var r=e[t]||(e[t]={});return r[n]||(r[n]={})}function fv(e,t,n,r){var a,i=(0,h.Z)(t.getMatchingVisibleMetas(r).reverse());try{for(i.s();!(a=i.n()).done;){var o=a.value,s=e[o.index];if(n&&s>0||!n&&s<0)return o.index}}catch(Nx){i.e(Nx)}finally{i.f()}return null}function pv(e,t){for(var n,r=e.chart,a=e._cachedMeta,i=r._stacks||(r._stacks={}),o=a.iScale,s=a.vScale,u=a.index,c=o.axis,l=s.axis,d=function(e,t,n){return"".concat(e.id,".").concat(t.id,".").concat(n.stack||n.type)}(o,s,a),f=t.length,p=0;p<f;++p){var h=t[p],m=h[c],v=h[l];(n=(h._stacks||(h._stacks={}))[l]=dv(i,d,m))[u]=v,n._top=fv(n,s,!0,a.type),n._bottom=fv(n,s,!1,a.type)}}function hv(e,t){var n=e.scales;return Object.keys(n).filter((function(e){return n[e].axis===t})).shift()}function mv(e,t){var n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;var a,i=(0,h.Z)(t);try{for(i.s();!(a=i.n()).done;){var o=a.value._stacks;if(!o||void 0===o[r]||void 0===o[r][n])return;delete o[r][n]}}catch(Nx){i.e(Nx)}finally{i.f()}}}var vv=function(e){return"reset"===e||"none"===e},gv=function(e,t){return t?e:Object.assign({},e)},yv=function(){function e(t,n){(0,c.Z)(this,e),this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}return(0,l.Z)(e,[{key:"initialize",value:function(){var e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=lv(e.vScale,e),this.addElements()}},{key:"updateIndex",value:function(e){this.index!==e&&mv(this._cachedMeta),this.index=e}},{key:"linkScales",value:function(){var e=this.chart,t=this._cachedMeta,n=this.getDataset(),r=function(e,t,n,r){return"x"===e?t:"r"===e?r:n},a=t.xAxisID=Hf(n.xAxisID,hv(e,"x")),i=t.yAxisID=Hf(n.yAxisID,hv(e,"y")),o=t.rAxisID=Hf(n.rAxisID,hv(e,"r")),s=t.indexAxis,u=t.iAxisID=r(s,a,i,o),c=t.vAxisID=r(s,i,a,o);t.xScale=this.getScaleForId(a),t.yScale=this.getScaleForId(i),t.rScale=this.getScaleForId(o),t.iScale=this.getScaleForId(u),t.vScale=this.getScaleForId(c)}},{key:"getDataset",value:function(){return this.chart.data.datasets[this.index]}},{key:"getMeta",value:function(){return this.chart.getDatasetMeta(this.index)}},{key:"getScaleForId",value:function(e){return this.chart.scales[e]}},{key:"_getOtherScale",value:function(e){var t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}},{key:"reset",value:function(){this._update("reset")}},{key:"_destroy",value:function(){var e=this._cachedMeta;this._data&&nm(this._data,this),e._stacked&&mv(e)}},{key:"_dataCheck",value:function(){var e,t,n=this.getDataset(),r=n.data||(n.data=[]),a=this._data;if(jf(r))this._data=function(e){var t,n,r,a=Object.keys(e),i=new Array(a.length);for(t=0,n=a.length;t<n;++t)r=a[t],i[t]={x:r,y:e[r]};return i}(r);else if(a!==r){if(a){nm(a,this);var i=this._cachedMeta;mv(i),i._parsed=[]}r&&Object.isExtensible(r)&&(t=this,(e=r)._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),tm.forEach((function(t){var n="_onData"+ip(t),r=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:function(){for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];var o=r.apply(this,a);return e._chartjs.listeners.forEach((function(e){"function"===typeof e[n]&&e[n].apply(e,a)})),o}})})))),this._syncList=[],this._data=r}}},{key:"addElements",value:function(){var e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}},{key:"buildOrUpdateElements",value:function(e){var t=this._cachedMeta,n=this.getDataset(),r=!1;this._dataCheck();var a=t._stacked;t._stacked=lv(t.vScale,t),t.stack!==n.stack&&(r=!0,mv(t),t.stack=n.stack),this._resyncElements(e),(r||a!==t._stacked)&&pv(this,t._parsed)}},{key:"configure",value:function(){var e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}},{key:"parse",value:function(e,t){var n,r,a,i=this._cachedMeta,o=this._data,s=i.iScale,u=i._stacked,c=s.axis,l=0===e&&t===o.length||i._sorted,d=e>0&&i._parsed[e-1];if(!1===this._parsing)i._parsed=o,i._sorted=!0,a=o;else{a=Uf(o[e])?this.parseArrayData(i,o,e,t):jf(o[e])?this.parseObjectData(i,o,e,t):this.parsePrimitiveData(i,o,e,t);for(n=0;n<t;++n)i._parsed[n+e]=r=a[n],l&&((null===r[c]||d&&r[c]<d[c])&&(l=!1),d=r);i._sorted=l}u&&pv(this,a)}},{key:"parsePrimitiveData",value:function(e,t,n,r){var a,i,o,s=e.iScale,u=e.vScale,c=s.axis,l=u.axis,d=s.getLabels(),f=s===u,p=new Array(r);for(a=0,i=r;a<i;++a){var h;o=a+n,p[a]=(Vu(h={},c,f||s.parse(d[o],o)),Vu(h,l,u.parse(t[o],o)),h)}return p}},{key:"parseArrayData",value:function(e,t,n,r){var a,i,o,s,u=e.xScale,c=e.yScale,l=new Array(r);for(a=0,i=r;a<i;++a)s=t[o=a+n],l[a]={x:u.parse(s[0],o),y:c.parse(s[1],o)};return l}},{key:"parseObjectData",value:function(e,t,n,r){var a,i,o,s,u=e.xScale,c=e.yScale,l=this._parsing,d=l.xAxisKey,f=void 0===d?"x":d,p=l.yAxisKey,h=void 0===p?"y":p,m=new Array(r);for(a=0,i=r;a<i;++a)s=t[o=a+n],m[a]={x:u.parse(ap(s,f),o),y:c.parse(ap(s,h),o)};return m}},{key:"getParsed",value:function(e){return this._cachedMeta._parsed[e]}},{key:"getDataElement",value:function(e){return this._cachedMeta.data[e]}},{key:"applyStack",value:function(e,t,n){var r=this.chart,a=this._cachedMeta,i=t[e.axis];return cv({keys:uv(r,!0),values:t._stacks[e.axis]},i,a.index,{mode:n})}},{key:"updateRangeFromParsed",value:function(e,t,n,r){var a=n[t.axis],i=null===a?NaN:a,o=r&&n._stacks[t.axis];r&&o&&(r.values=o,i=cv(r,a,this._cachedMeta.index)),e.min=Math.min(e.min,i),e.max=Math.max(e.max,i)}},{key:"getMinMax",value:function(e,t){var n,r,a=this._cachedMeta,i=a._parsed,o=a._sorted&&e===a.iScale,s=i.length,u=this._getOtherScale(e),c=function(e,t,n){return e&&!t.hidden&&t._stacked&&{keys:uv(n,!0),values:null}}(t,a,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},d=function(e){var t=e.getUserBounds(),n=t.min,r=t.max,a=t.minDefined,i=t.maxDefined;return{min:a?n:Number.NEGATIVE_INFINITY,max:i?r:Number.POSITIVE_INFINITY}}(u),f=d.min,p=d.max;function h(){var t=(r=i[n])[u.axis];return!Wf(r[e.axis])||f>t||p<t}for(n=0;n<s&&(h()||(this.updateRangeFromParsed(l,e,r,c),!o));++n);if(o)for(n=s-1;n>=0;--n)if(!h()){this.updateRangeFromParsed(l,e,r,c);break}return l}},{key:"getAllParsedValues",value:function(e){var t,n,r,a=this._cachedMeta._parsed,i=[];for(t=0,n=a.length;t<n;++t)r=a[t][e.axis],Wf(r)&&i.push(r);return i}},{key:"getMaxOverflow",value:function(){return!1}},{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=t.iScale,r=t.vScale,a=this.getParsed(e);return{label:n?""+n.getLabelForValue(a[n.axis]):"",value:r?""+r.getLabelForValue(a[r.axis]):""}}},{key:"_update",value:function(e){var t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){var t,n,r,a;return jf(e)?(t=e.top,n=e.right,r=e.bottom,a=e.left):t=n=r=a=e,{top:t,right:n,bottom:r,left:a,disabled:!1===e}}(Hf(this.options.clip,function(e,t,n){if(!1===n)return!1;var r=sv(e,n),a=sv(t,n);return{top:a.end,right:r.end,bottom:a.start,left:r.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}},{key:"update",value:function(e){}},{key:"draw",value:function(){var e,t=this._ctx,n=this.chart,r=this._cachedMeta,a=r.data||[],i=n.chartArea,o=[],s=this._drawStart||0,u=this._drawCount||a.length-s,c=this.options.drawActiveElementsOnTop;for(r.dataset&&r.dataset.draw(t,i,s,u),e=s;e<s+u;++e){var l=a[e];l.hidden||(l.active&&c?o.push(l):l.draw(t,i))}for(e=0;e<o.length;++e)o[e].draw(t,i)}},{key:"getStyle",value:function(e,t){var n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}},{key:"getContext",value:function(e,t,n){var r,a=this.getDataset();if(e>=0&&e<this._cachedMeta.data.length){var i=this._cachedMeta.data[e];r=i.$context||(i.$context=function(e,t,n){return Qh(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,i)),r.parsed=this.getParsed(e),r.raw=a.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=function(e,t){return Qh(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=a,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=n,r}},{key:"resolveDatasetElementOptions",value:function(e){return this._resolveElementOptions(this.datasetElementType.id,e)}},{key:"resolveDataElementOptions",value:function(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}},{key:"_resolveElementOptions",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",r=arguments.length>2?arguments[2]:void 0,a="active"===n,i=this._cachedDataOpts,o=e+"-"+n,s=i[o],u=this.enableOptionSharing&&op(r);if(s)return gv(s,u);var c=this.chart.config,l=c.datasetElementScopeKeys(this._type,e),d=a?["".concat(e,"Hover"),"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),l),p=Object.keys(_h.elements[e]),h=function(){return t.getContext(r,a)},m=c.resolveNamedOptions(f,p,h,d);return m.$shared&&(m.$shared=u,i[o]=Object.freeze(gv(m,u))),m}},{key:"_resolveAnimations",value:function(e,t,n){var r,a=this.chart,i=this._cachedDataOpts,o="animation-".concat(t),s=i[o];if(s)return s;if(!1!==a.options.animation){var u=this.chart.config,c=u.datasetAnimationScopeKeys(this._type,t),l=u.getOptionScopes(this.getDataset(),c);r=u.createResolver(l,this.getContext(e,n,t))}var d=new ov(a,r&&r.animations);return r&&r._cacheable&&(i[o]=Object.freeze(d)),d}},{key:"getSharedOptions",value:function(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}},{key:"includeOptions",value:function(e,t){return!t||vv(e)||this.chart._animationsDisabled}},{key:"_getSharedOptions",value:function(e,t){var n=this.resolveDataElementOptions(e,t),r=this._sharedOptions,a=this.getSharedOptions(n),i=this.includeOptions(t,a)||a!==r;return this.updateSharedOptions(a,t,n),{sharedOptions:a,includeOptions:i}}},{key:"updateElement",value:function(e,t,n,r){vv(r)?Object.assign(e,n):this._resolveAnimations(t,r).update(e,n)}},{key:"updateSharedOptions",value:function(e,t,n){e&&!vv(t)&&this._resolveAnimations(void 0,t).update(e,n)}},{key:"_setStyle",value:function(e,t,n,r){e.active=r;var a=this.getStyle(t,r);this._resolveAnimations(t,n,r).update(e,{options:!r&&this.getSharedOptions(a)||a})}},{key:"removeHoverStyle",value:function(e,t,n){this._setStyle(e,n,"active",!1)}},{key:"setHoverStyle",value:function(e,t,n){this._setStyle(e,n,"active",!0)}},{key:"_removeDatasetHoverStyle",value:function(){var e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}},{key:"_setDatasetHoverStyle",value:function(){var e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}},{key:"_resyncElements",value:function(e){var t,n=this._data,r=this._cachedMeta.data,a=(0,h.Z)(this._syncList);try{for(a.s();!(t=a.n()).done;){var i=(0,m.Z)(t.value,3),o=i[0],s=i[1],u=i[2];this[o](s,u)}}catch(Nx){a.e(Nx)}finally{a.f()}this._syncList=[];var c=r.length,l=n.length,d=Math.min(l,c);d&&this.parse(0,d),l>c?this._insertElements(c,l-c,e):l<c&&this._removeElements(l,c-l)}},{key:"_insertElements",value:function(e,t){var n,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=this._cachedMeta,i=a.data,o=e+t,s=function(e){for(e.length+=t,n=e.length-1;n>=o;n--)e[n]=e[n-t]};for(s(i),n=e;n<o;++n)i[n]=new this.dataElementType;this._parsing&&s(a._parsed),this.parse(e,t),r&&this.updateElements(i,e,t,"reset")}},{key:"updateElements",value:function(e,t,n,r){}},{key:"_removeElements",value:function(e,t){var n=this._cachedMeta;if(this._parsing){var r=n._parsed.splice(e,t);n._stacked&&mv(n,r)}n.data.splice(e,t)}},{key:"_sync",value:function(e){if(this._parsing)this._syncList.push(e);else{var t=(0,m.Z)(e,3),n=t[0],r=t[1],a=t[2];this[n](r,a)}this.chart._dataChanges.push([this.index].concat((0,v.Z)(e)))}},{key:"_onDataPush",value:function(){var e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}},{key:"_onDataPop",value:function(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}},{key:"_onDataShift",value:function(){this._sync(["_removeElements",0,1])}},{key:"_onDataSplice",value:function(e,t){t&&this._sync(["_removeElements",e,t]);var n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}},{key:"_onDataUnshift",value:function(){this._sync(["_insertElements",0,arguments.length])}}]),e}();function bv(e){var t,n,r,a,i=e.iScale,o=function(e,t){if(!e._cache.$bar){for(var n=e.getMatchingVisibleMetas(t),r=[],a=0,i=n.length;a<i;a++)r=r.concat(n[a].controller.getAllParsedValues(e));e._cache.$bar=rm(r.sort((function(e,t){return e-t})))}return e._cache.$bar}(i,e.type),s=i._length,u=function(){32767!==r&&-32768!==r&&(op(a)&&(s=Math.min(s,Math.abs(r-a)||s)),a=r)};for(t=0,n=o.length;t<n;++t)r=i.getPixelForValue(o[t]),u();for(a=void 0,t=0,n=i.ticks.length;t<n;++t)r=i.getPixelForTick(t),u();return s}function xv(e,t,n,r){return Uf(e)?function(e,t,n,r){var a=n.parse(e[0],r),i=n.parse(e[1],r),o=Math.min(a,i),s=Math.max(a,i),u=o,c=s;Math.abs(o)>Math.abs(s)&&(u=s,c=o),t[n.axis]=c,t._custom={barStart:u,barEnd:c,start:a,end:i,min:o,max:s}}(e,t,n,r):t[n.axis]=n.parse(e,r),t}function kv(e,t,n,r){var a,i,o,s,u=e.iScale,c=e.vScale,l=u.getLabels(),d=u===c,f=[];for(a=n,i=n+r;a<i;++a)s=t[a],(o={})[u.axis]=d||u.parse(l[a],a),f.push(xv(s,o,c,a));return f}function wv(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function Sv(e,t,n,r){var a=t.borderSkipped,i={};if(a){var o=function(e){var t,n,r,a,i;return e.horizontal?(t=e.base>e.x,n="left",r="right"):(t=e.base<e.y,n="bottom",r="top"),t?(a="end",i="start"):(a="start",i="end"),{start:n,end:r,reverse:t,top:a,bottom:i}}(e),s=o.start,u=o.end,c=o.reverse,l=o.top,d=o.bottom;"middle"===a&&n&&(e.enableBorderRadius=!0,(n._top||0)===r?a=l:(n._bottom||0)===r?a=d:(i[Cv(d,s,u,c)]=!0,a=l)),i[Cv(a,s,u,c)]=!0,e.borderSkipped=i}else e.borderSkipped=i}function Cv(e,t,n,r){var a,i,o;return r?(o=n,e=_v(e=(a=e)===(i=t)?o:a===o?i:a,n,t)):e=_v(e,t,n),e}function _v(e,t,n){return"start"===e?t:"end"===e?n:e}function Iv(e,t,n){var r=t.inflateAmount;e.inflateAmount="auto"===r?1===n?.33:0:r}yv.defaults={},yv.prototype.datasetElementType=null,yv.prototype.dataElementType=null;var Tv=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n,[{key:"parsePrimitiveData",value:function(e,t,n,r){return kv(e,t,n,r)}},{key:"parseArrayData",value:function(e,t,n,r){return kv(e,t,n,r)}},{key:"parseObjectData",value:function(e,t,n,r){var a,i,o,s,u=e.iScale,c=e.vScale,l=this._parsing,d=l.xAxisKey,f=void 0===d?"x":d,p=l.yAxisKey,h=void 0===p?"y":p,m="x"===u.axis?f:h,v="x"===c.axis?f:h,g=[];for(a=n,i=n+r;a<i;++a)s=t[a],(o={})[u.axis]=u.parse(ap(s,m),a),g.push(xv(ap(s,v),o,c,a));return g}},{key:"updateRangeFromParsed",value:function(e,t,r,a){(0,hd.Z)((0,b.Z)(n.prototype),"updateRangeFromParsed",this).call(this,e,t,r,a);var i=r._custom;i&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}},{key:"getMaxOverflow",value:function(){return 0}},{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=t.iScale,r=t.vScale,a=this.getParsed(e),i=a._custom,o=wv(i)?"["+i.start+", "+i.end+"]":""+r.getLabelForValue(a[r.axis]);return{label:""+n.getLabelForValue(a[n.axis]),value:o}}},{key:"initialize",value:function(){this.enableOptionSharing=!0,(0,hd.Z)((0,b.Z)(n.prototype),"initialize",this).call(this),this._cachedMeta.stack=this.getDataset().stack}},{key:"update",value:function(e){var t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}},{key:"updateElements",value:function(e,t,n,r){for(var a="reset"===r,i=this.index,o=this._cachedMeta.vScale,s=o.getBasePixel(),u=o.isHorizontal(),c=this._getRuler(),l=this._getSharedOptions(t,r),d=l.sharedOptions,f=l.includeOptions,p=t;p<t+n;p++){var h=this.getParsed(p),m=a||Zf(h[o.axis])?{base:s,head:s}:this._calculateBarValuePixels(p),v=this._calculateBarIndexPixels(p,c),g=(h._stacks||{})[o.axis],y={horizontal:u,base:m.base,enableBorderRadius:!g||wv(h._custom)||i===g._top||i===g._bottom,x:u?m.head:v.center,y:u?v.center:m.head,height:u?v.size:Math.abs(m.size),width:u?Math.abs(m.size):v.size};f&&(y.options=d||this.resolveDataElementOptions(p,e[p].active?"active":r));var b=y.options||e[p].options;Sv(y,b,g,i),Iv(y,b,c.ratio),this.updateElement(e[p],p,y,r)}}},{key:"_getStacks",value:function(e,t){var n,r=this._cachedMeta.iScale,a=r.getMatchingVisibleMetas(this._type).filter((function(e){return e.controller.options.grouped})),i=r.options.stacked,o=[],s=function(e){var n=e.controller.getParsed(t),r=n&&n[e.vScale.axis];if(Zf(r)||isNaN(r))return!0},u=(0,h.Z)(a);try{for(u.s();!(n=u.n()).done;){var c=n.value;if((void 0===t||!s(c))&&((!1===i||-1===o.indexOf(c.stack)||void 0===i&&void 0===c.stack)&&o.push(c.stack),c.index===e))break}}catch(Nx){u.e(Nx)}finally{u.f()}return o.length||o.push(void 0),o}},{key:"_getStackCount",value:function(e){return this._getStacks(void 0,e).length}},{key:"_getStackIndex",value:function(e,t,n){var r=this._getStacks(e,n),a=void 0!==t?r.indexOf(t):-1;return-1===a?r.length-1:a}},{key:"_getRuler",value:function(){var e,t,n=this.options,r=this._cachedMeta,a=r.iScale,i=[];for(e=0,t=r.data.length;e<t;++e)i.push(a.getPixelForValue(this.getParsed(e)[a.axis],e));var o=n.barThickness;return{min:o||bv(r),pixels:i,start:a._startPixel,end:a._endPixel,stackCount:this._getStackCount(),scale:a,grouped:n.grouped,ratio:o?1:n.categoryPercentage*n.barPercentage}}},{key:"_calculateBarValuePixels",value:function(e){var t,n,r=this._cachedMeta,a=r.vScale,i=r._stacked,o=this.options,s=o.base,u=o.minBarLength,c=s||0,l=this.getParsed(e),d=l._custom,f=wv(d),p=l[a.axis],h=0,m=i?this.applyStack(a,l,i):p;m!==p&&(h=m-p,m=p),f&&(p=d.barStart,m=d.barEnd-d.barStart,0!==p&&yp(p)!==yp(d.barEnd)&&(h=0),h+=p);var v=Zf(s)||f?h:s,g=a.getPixelForValue(v);if(n=(t=this.chart.getDataVisibility(e)?a.getPixelForValue(h+m):g)-g,Math.abs(n)<u){n=function(e,t,n){return 0!==e?yp(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(n,a,c)*u,p===c&&(g-=n/2);var y=a.getPixelForDecimal(0),b=a.getPixelForDecimal(1),x=Math.min(y,b),k=Math.max(y,b);t=(g=Math.max(Math.min(g,k),x))+n}if(g===a.getPixelForValue(c)){var w=yp(n)*a.getLineWidthForValue(c)/2;g+=w,n-=w}return{size:n,base:g,head:t,center:t+n/2}}},{key:"_calculateBarIndexPixels",value:function(e,t){var n,r,a=t.scale,i=this.options,o=i.skipNull,s=Hf(i.maxBarThickness,1/0);if(t.grouped){var u=o?this._getStackCount(e):t.stackCount,c="flex"===i.barThickness?function(e,t,n,r){var a=t.pixels,i=a[e],o=e>0?a[e-1]:null,s=e<a.length-1?a[e+1]:null,u=n.categoryPercentage;null===o&&(o=i-(null===s?t.end-t.start:s-i)),null===s&&(s=i+i-o);var c=i-(i-Math.min(o,s))/2*u;return{chunk:Math.abs(s-o)/2*u/r,ratio:n.barPercentage,start:c}}(e,t,i,u):function(e,t,n,r){var a,i,o=n.barThickness;return Zf(o)?(a=t.min*n.categoryPercentage,i=n.barPercentage):(a=o*r,i=1),{chunk:a/r,ratio:i,start:t.pixels[e]-a/2}}(e,t,i,u),l=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0);n=c.start+c.chunk*l+c.chunk/2,r=Math.min(s,c.chunk*c.ratio)}else n=a.getPixelForValue(this.getParsed(e)[a.axis],e),r=Math.min(s,t.min*t.ratio);return{base:n-r/2,head:n+r/2,center:n,size:r}}},{key:"draw",value:function(){for(var e=this._cachedMeta,t=e.vScale,n=e.data,r=n.length,a=0;a<r;++a)null!==this.getParsed(a)[t.axis]&&n[a].draw(this._ctx)}}]),n}(yv);Tv.id="bar",Tv.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},Tv.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};var Ev=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n,[{key:"initialize",value:function(){this.enableOptionSharing=!0,(0,hd.Z)((0,b.Z)(n.prototype),"initialize",this).call(this)}},{key:"parsePrimitiveData",value:function(e,t,r,a){for(var i=(0,hd.Z)((0,b.Z)(n.prototype),"parsePrimitiveData",this).call(this,e,t,r,a),o=0;o<i.length;o++)i[o]._custom=this.resolveDataElementOptions(o+r).radius;return i}},{key:"parseArrayData",value:function(e,t,r,a){for(var i=(0,hd.Z)((0,b.Z)(n.prototype),"parseArrayData",this).call(this,e,t,r,a),o=0;o<i.length;o++){var s=t[r+o];i[o]._custom=Hf(s[2],this.resolveDataElementOptions(o+r).radius)}return i}},{key:"parseObjectData",value:function(e,t,r,a){for(var i=(0,hd.Z)((0,b.Z)(n.prototype),"parseObjectData",this).call(this,e,t,r,a),o=0;o<i.length;o++){var s=t[r+o];i[o]._custom=Hf(s&&s.r&&+s.r,this.resolveDataElementOptions(o+r).radius)}return i}},{key:"getMaxOverflow",value:function(){for(var e=this._cachedMeta.data,t=0,n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}},{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=t.xScale,r=t.yScale,a=this.getParsed(e),i=n.getLabelForValue(a.x),o=r.getLabelForValue(a.y),s=a._custom;return{label:t.label,value:"("+i+", "+o+(s?", "+s:"")+")"}}},{key:"update",value:function(e){var t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}},{key:"updateElements",value:function(e,t,n,r){for(var a="reset"===r,i=this._cachedMeta,o=i.iScale,s=i.vScale,u=this._getSharedOptions(t,r),c=u.sharedOptions,l=u.includeOptions,d=o.axis,f=s.axis,p=t;p<t+n;p++){var h=e[p],m=!a&&this.getParsed(p),v={},g=v[d]=a?o.getPixelForDecimal(.5):o.getPixelForValue(m[d]),y=v[f]=a?s.getBasePixel():s.getPixelForValue(m[f]);v.skip=isNaN(g)||isNaN(y),l&&(v.options=c||this.resolveDataElementOptions(p,h.active?"active":r),a&&(v.options.radius=0)),this.updateElement(h,p,v,r)}}},{key:"resolveDataElementOptions",value:function(e,t){var r=this.getParsed(e),a=(0,hd.Z)((0,b.Z)(n.prototype),"resolveDataElementOptions",this).call(this,e,t);a.$shared&&(a=Object.assign({},a,{$shared:!1}));var i=a.radius;return"active"!==t&&(a.radius=0),a.radius+=Hf(r&&r._custom,i),a}}]),n}(yv);Ev.id="bubble",Ev.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},Ev.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:function(){return""}}}}};var Nv=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var a;return(0,c.Z)(this,n),(a=t.call(this,e,r)).enableOptionSharing=!0,a.innerRadius=void 0,a.outerRadius=void 0,a.offsetX=void 0,a.offsetY=void 0,a}return(0,l.Z)(n,[{key:"linkScales",value:function(){}},{key:"parse",value:function(e,t){var n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{var a,i,o=function(e){return+n[e]};if(jf(n[e])){var s=this._parsing.key,u=void 0===s?"value":s;o=function(e){return+ap(n[e],u)}}for(a=e,i=e+t;a<i;++a)r._parsed[a]=o(a)}}},{key:"_getRotation",value:function(){return Sp(this.options.rotation-90)}},{key:"_getCircumference",value:function(){return Sp(this.options.circumference)}},{key:"_getRotationExtents",value:function(){for(var e=lp,t=-lp,n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)){var r=this.chart.getDatasetMeta(n).controller,a=r._getRotation(),i=r._getCircumference();e=Math.min(e,a),t=Math.max(t,a+i)}return{rotation:e,circumference:t-e}}},{key:"update",value:function(e){var t=this.chart.chartArea,n=this._cachedMeta,r=n.data,a=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,i=Math.max((Math.min(t.width,t.height)-a)/2,0),o=Math.min(function(e,t){return"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100:e/t}(this.options.cutout,i),1),s=this._getRingWeight(this.index),u=this._getRotationExtents(),c=u.circumference,l=function(e,t,n){var r=1,a=1,i=0,o=0;if(t<lp){var s=e,u=s+t,c=Math.cos(s),l=Math.sin(s),d=Math.cos(u),f=Math.sin(u),p=function(e,t,r){return Op(e,s,u,!0)?1:Math.max(t,t*n,r,r*n)},h=function(e,t,r){return Op(e,s,u,!0)?-1:Math.min(t,t*n,r,r*n)},m=p(0,c,d),v=p(hp,l,f),g=h(cp,c,d),y=h(cp+hp,l,f);r=(m-g)/2,a=(v-y)/2,i=-(m+g)/2,o=-(v+y)/2}return{ratioX:r,ratioY:a,offsetX:i,offsetY:o}}(u.rotation,c,o),d=l.ratioX,f=l.ratioY,p=l.offsetX,h=l.offsetY,m=(t.width-a)/d,v=(t.height-a)/f,g=Math.max(Math.min(m,v)/2,0),y=qf(this.options.radius,g),b=(y-Math.max(y*o,0))/this._getVisibleDatasetWeightTotal();this.offsetX=p*y,this.offsetY=h*y,n.total=this.calculateTotal(),this.outerRadius=y-b*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-b*s,0),this.updateElements(r,0,r.length,e)}},{key:"_circumference",value:function(e,t){var n=this.options,r=this._cachedMeta,a=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===r._parsed[e]||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*a/lp)}},{key:"updateElements",value:function(e,t,n,r){var a,i="reset"===r,o=this.chart,s=o.chartArea,u=o.options.animation,c=(s.left+s.right)/2,l=(s.top+s.bottom)/2,d=i&&u.animateScale,f=d?0:this.innerRadius,p=d?0:this.outerRadius,h=this._getSharedOptions(t,r),m=h.sharedOptions,v=h.includeOptions,g=this._getRotation();for(a=0;a<t;++a)g+=this._circumference(a,i);for(a=t;a<t+n;++a){var y=this._circumference(a,i),b=e[a],x={x:c+this.offsetX,y:l+this.offsetY,startAngle:g,endAngle:g+y,circumference:y,outerRadius:p,innerRadius:f};v&&(x.options=m||this.resolveDataElementOptions(a,b.active?"active":r)),g+=y,this.updateElement(b,a,x,r)}}},{key:"calculateTotal",value:function(){var e,t=this._cachedMeta,n=t.data,r=0;for(e=0;e<n.length;e++){var a=t._parsed[e];null===a||isNaN(a)||!this.chart.getDataVisibility(e)||n[e].hidden||(r+=Math.abs(a))}return r}},{key:"calculateCircumference",value:function(e){var t=this._cachedMeta.total;return t>0&&!isNaN(e)?lp*(Math.abs(e)/t):0}},{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=this.chart,r=n.data.labels||[],a=jm(t._parsed[e],n.options.locale);return{label:r[e]||"",value:a}}},{key:"getMaxBorderWidth",value:function(e){var t,n,r,a,i,o=0,s=this.chart;if(!e)for(t=0,n=s.data.datasets.length;t<n;++t)if(s.isDatasetVisible(t)){e=(r=s.getDatasetMeta(t)).data,a=r.controller;break}if(!e)return 0;for(t=0,n=e.length;t<n;++t)"inner"!==(i=a.resolveDataElementOptions(t)).borderAlign&&(o=Math.max(o,i.borderWidth||0,i.hoverBorderWidth||0));return o}},{key:"getMaxOffset",value:function(e){for(var t=0,n=0,r=e.length;n<r;++n){var a=this.resolveDataElementOptions(n);t=Math.max(t,a.offset||0,a.hoverOffset||0)}return t}},{key:"_getRingWeightOffset",value:function(e){for(var t=0,n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}},{key:"_getRingWeight",value:function(e){return Math.max(Hf(this.chart.data.datasets[e].weight,1),0)}},{key:"_getVisibleDatasetWeightTotal",value:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}]),n}(yv);Nv.id="doughnut",Nv.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},Nv.descriptors={_scriptable:function(e){return"spacing"!==e},_indexable:function(e){return"spacing"!==e}},Nv.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels:function(e){var t=e.data;if(t.labels.length&&t.datasets.length){var n=e.legend.options.labels.pointStyle;return t.labels.map((function(t,r){var a=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,lineWidth:a.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}}))}return[]}},onClick:function(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}},tooltip:{callbacks:{title:function(){return""},label:function(e){var t=e.label,n=": "+e.formattedValue;return Uf(t)?(t=t.slice())[0]+=n:t+=n,t}}}}};var Ov=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n,[{key:"initialize",value:function(){this.enableOptionSharing=!0,this.supportsDecimation=!0,(0,hd.Z)((0,b.Z)(n.prototype),"initialize",this).call(this)}},{key:"update",value:function(e){var t=this._cachedMeta,n=t.dataset,r=t.data,a=void 0===r?[]:r,i=t._dataset,o=this.chart._animationsDisabled,s=function(e,t,n){var r=t.length,a=0,i=r;if(e._sorted){var o=e.iScale,s=e._parsed,u=o.axis,c=o.getUserBounds(),l=c.min,d=c.max,f=c.minDefined,p=c.maxDefined;f&&(a=Ap(Math.min(Jh(s,o.axis,l).lo,n?r:Jh(t,u,o.getPixelForValue(l)).lo),0,r-1)),i=p?Ap(Math.max(Jh(s,o.axis,d).hi+1,n?0:Jh(t,u,o.getPixelForValue(d)).hi+1),a,r)-a:r-a}return{start:a,count:i}}(t,a,o),u=s.start,c=s.count;this._drawStart=u,this._drawCount=c,function(e){var t=e.xScale,n=e.yScale,r=e._scaleRanges,a={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=a,!0;var i=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,a),i}(t)&&(u=0,c=a.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=a;var l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:l},e),this.updateElements(a,u,c,e)}},{key:"updateElements",value:function(e,t,n,r){for(var a="reset"===r,i=this._cachedMeta,o=i.iScale,s=i.vScale,u=i._stacked,c=i._dataset,l=this._getSharedOptions(t,r),d=l.sharedOptions,f=l.includeOptions,p=o.axis,h=s.axis,m=this.options,v=m.spanGaps,g=m.segment,y=xp(v)?v:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||a||"none"===r,x=t>0&&this.getParsed(t-1),k=t;k<t+n;++k){var w=e[k],S=this.getParsed(k),C=b?w:{},_=Zf(S[h]),I=C[p]=o.getPixelForValue(S[p],k),T=C[h]=a||_?s.getBasePixel():s.getPixelForValue(u?this.applyStack(s,S,u):S[h],k);C.skip=isNaN(I)||isNaN(T)||_,C.stop=k>0&&Math.abs(S[p]-x[p])>y,g&&(C.parsed=S,C.raw=c.data[k]),f&&(C.options=d||this.resolveDataElementOptions(k,w.active?"active":r)),b||this.updateElement(w,k,C,r),x=S}}},{key:"getMaxOverflow",value:function(){var e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return n;var a=r[0].size(this.resolveDataElementOptions(0)),i=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,a,i)/2}},{key:"draw",value:function(){var e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),(0,hd.Z)((0,b.Z)(n.prototype),"draw",this).call(this)}}]),n}(yv);Ov.id="line",Ov.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},Ov.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};var Av=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var a;return(0,c.Z)(this,n),(a=t.call(this,e,r)).innerRadius=void 0,a.outerRadius=void 0,a}return(0,l.Z)(n,[{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=this.chart,r=n.data.labels||[],a=jm(t._parsed[e].r,n.options.locale);return{label:r[e]||"",value:a}}},{key:"parseObjectData",value:function(e,t,n,r){return ym.bind(this)(e,t,n,r)}},{key:"update",value:function(e){var t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}},{key:"getMinMax",value:function(){var e=this,t=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((function(t,r){var a=e.getParsed(r).r;!isNaN(a)&&e.chart.getDataVisibility(r)&&(a<n.min&&(n.min=a),a>n.max&&(n.max=a))})),n}},{key:"_updateRadius",value:function(){var e=this.chart,t=e.chartArea,n=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),a=Math.max(r/2,0),i=(a-Math.max(n.cutoutPercentage?a/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=a-i*this.index,this.innerRadius=this.outerRadius-i}},{key:"updateElements",value:function(e,t,n,r){var a,i="reset"===r,o=this.chart,s=o.options.animation,u=this._cachedMeta.rScale,c=u.xCenter,l=u.yCenter,d=u.getIndexAngle(0)-.5*cp,f=d,p=360/this.countVisibleElements();for(a=0;a<t;++a)f+=this._computeAngle(a,r,p);for(a=t;a<t+n;a++){var h=e[a],m=f,v=f+this._computeAngle(a,r,p),g=o.getDataVisibility(a)?u.getDistanceFromCenterForValue(this.getParsed(a).r):0;f=v,i&&(s.animateScale&&(g=0),s.animateRotate&&(m=v=d));var y={x:c,y:l,innerRadius:0,outerRadius:g,startAngle:m,endAngle:v,options:this.resolveDataElementOptions(a,h.active?"active":r)};this.updateElement(h,a,y,r)}}},{key:"countVisibleElements",value:function(){var e=this,t=this._cachedMeta,n=0;return t.data.forEach((function(t,r){!isNaN(e.getParsed(r).r)&&e.chart.getDataVisibility(r)&&n++})),n}},{key:"_computeAngle",value:function(e,t,n){return this.chart.getDataVisibility(e)?Sp(this.resolveDataElementOptions(e,t).angle||n):0}}]),n}(yv);Av.id="polarArea",Av.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},Av.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels:function(e){var t=e.data;if(t.labels.length&&t.datasets.length){var n=e.legend.options.labels.pointStyle;return t.labels.map((function(t,r){var a=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,lineWidth:a.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}}))}return[]}},onClick:function(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}},tooltip:{callbacks:{title:function(){return""},label:function(e){return e.chart.data.labels[e.dataIndex]+": "+e.formattedValue}}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};var Rv=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n)}(Nv);Rv.id="pie",Rv.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};var Pv=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n,[{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}},{key:"parseObjectData",value:function(e,t,n,r){return ym.bind(this)(e,t,n,r)}},{key:"update",value:function(e){var t=this._cachedMeta,n=t.dataset,r=t.data||[],a=t.iScale.getLabels();if(n.points=r,"resize"!==e){var i=this.resolveDatasetElementOptions(e);this.options.showLine||(i.borderWidth=0);var o={_loop:!0,_fullLoop:a.length===r.length,options:i};this.updateElement(n,void 0,o,e)}this.updateElements(r,0,r.length,e)}},{key:"updateElements",value:function(e,t,n,r){for(var a=this._cachedMeta.rScale,i="reset"===r,o=t;o<t+n;o++){var s=e[o],u=this.resolveDataElementOptions(o,s.active?"active":r),c=a.getPointPositionForValue(o,this.getParsed(o).r),l=i?a.xCenter:c.x,d=i?a.yCenter:c.y,f={x:l,y:d,angle:c.angle,skip:isNaN(l)||isNaN(d),options:u};this.updateElement(s,o,f,r)}}}]),n}(yv);Pv.id="radar",Pv.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},Pv.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};var Dv=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n)}(Ov);Dv.id="scatter",Dv.defaults={showLine:!1,fill:!1},Dv.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:function(){return""},label:function(e){return"("+e.label+", "+e.formattedValue+")"}}}},scales:{x:{type:"linear"},y:{type:"linear"}}};function Bv(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var Mv=function(){function e(t){(0,c.Z)(this,e),this.options=t||{}}return(0,l.Z)(e,[{key:"formats",value:function(){return Bv()}},{key:"parse",value:function(e,t){return Bv()}},{key:"format",value:function(e,t){return Bv()}},{key:"add",value:function(e,t,n){return Bv()}},{key:"diff",value:function(e,t,n){return Bv()}},{key:"startOf",value:function(e,t,n){return Bv()}},{key:"endOf",value:function(e,t){return Bv()}}]),e}();Mv.override=function(e){Object.assign(Mv.prototype,e)};var Fv={_date:Mv};function Lv(e,t,n,r){var a=e.controller,i=e.data,o=e._sorted,s=a._cachedMeta.iScale;if(s&&t===s.axis&&"r"!==t&&o&&i.length){var u=s._reversePixels?em:Jh;if(!r)return u(i,t,n);if(a._sharedOptions){var c=i[0],l="function"===typeof c.getRange&&c.getRange(t);if(l){var d=u(i,t,n-l),f=u(i,t,n+l);return{lo:d.lo,hi:f.hi}}}}return{lo:0,hi:i.length-1}}function Vv(e,t,n,r,a){for(var i=e.getSortedVisibleDatasetMetas(),o=n[t],s=0,u=i.length;s<u;++s)for(var c=i[s],l=c.index,d=c.data,f=Lv(i[s],t,o,a),p=f.lo,h=f.hi,m=p;m<=h;++m){var v=d[m];v.skip||r(v,l,m)}}function zv(e,t,n,r,a){var i=[];if(!a&&!e.isPointInArea(t))return i;return Vv(e,n,t,(function(n,o,s){(a||Rh(n,e.chartArea,0))&&n.inRange(t.x,t.y,r)&&i.push({element:n,datasetIndex:o,index:s})}),!0),i}function Zv(e,t,n,r,a,i){var o=[],s=function(e){var t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,r){var a=t?Math.abs(e.x-r.x):0,i=n?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(i,2))}}(n),u=Number.POSITIVE_INFINITY;return Vv(e,n,t,(function(n,c,l){var d=n.inRange(t.x,t.y,a);if(!r||d){var f=n.getCenterPoint(a);if(!!i||e.isPointInArea(f)||d){var p=s(t,f);p<u?(o=[{element:n,datasetIndex:c,index:l}],u=p):p===u&&o.push({element:n,datasetIndex:c,index:l})}}})),o}function Uv(e,t,n,r,a,i){return i||e.isPointInArea(t)?"r"!==n||r?Zv(e,t,n,r,a,i):function(e,t,n,r){var a=[];return Vv(e,n,t,(function(e,n,i){var o=e.getProps(["startAngle","endAngle"],r),s=o.startAngle,u=o.endAngle;Op(Ip(e,{x:t.x,y:t.y}).angle,s,u)&&a.push({element:e,datasetIndex:n,index:i})})),a}(e,t,n,a):[]}function jv(e,t,n,r,a){var i=[],o="x"===n?"inXRange":"inYRange",s=!1;return Vv(e,n,t,(function(e,r,u){e[o](t[n],a)&&(i.push({element:e,datasetIndex:r,index:u}),s=s||e.inRange(t.x,t.y,a))})),r&&!s?[]:i}var Wv={evaluateInteractionItems:Vv,modes:{index:function(e,t,n,r){var a=Pm(t,e),i=n.axis||"x",o=n.includeInvisible||!1,s=n.intersect?zv(e,a,i,r,o):Uv(e,a,i,!1,r,o),u=[];return s.length?(e.getSortedVisibleDatasetMetas().forEach((function(e){var t=s[0].index,n=e.data[t];n&&!n.skip&&u.push({element:n,datasetIndex:e.index,index:t})})),u):[]},dataset:function(e,t,n,r){var a=Pm(t,e),i=n.axis||"xy",o=n.includeInvisible||!1,s=n.intersect?zv(e,a,i,r,o):Uv(e,a,i,!1,r,o);if(s.length>0){var u=s[0].datasetIndex,c=e.getDatasetMeta(u).data;s=[];for(var l=0;l<c.length;++l)s.push({element:c[l],datasetIndex:u,index:l})}return s},point:function(e,t,n,r){return zv(e,Pm(t,e),n.axis||"xy",r,n.includeInvisible||!1)},nearest:function(e,t,n,r){var a=Pm(t,e),i=n.axis||"xy",o=n.includeInvisible||!1;return Uv(e,a,i,n.intersect,r,o)},x:function(e,t,n,r){return jv(e,Pm(t,e),"x",n.intersect,r)},y:function(e,t,n,r){return jv(e,Pm(t,e),"y",n.intersect,r)}}},Gv=["left","top","right","bottom"];function Hv(e,t){return e.filter((function(e){return e.pos===t}))}function qv(e,t){return e.filter((function(e){return-1===Gv.indexOf(e.pos)&&e.box.axis===t}))}function Xv(e,t){return e.sort((function(e,n){var r=t?n:e,a=t?e:n;return r.weight===a.weight?r.index-a.index:r.weight-a.weight}))}function Kv(e,t){var n,r,a,i=function(e){var t,n={},r=(0,h.Z)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value,i=a.stack,o=a.pos,s=a.stackWeight;if(i&&Gv.includes(o)){var u=n[i]||(n[i]={count:0,placed:0,weight:0,size:0});u.count++,u.weight+=s}}}catch(Nx){r.e(Nx)}finally{r.f()}return n}(e),o=t.vBoxMaxWidth,s=t.hBoxMaxHeight;for(n=0,r=e.length;n<r;++n){var u=(a=e[n]).box.fullSize,c=i[a.stack],l=c&&a.stackWeight/c.weight;a.horizontal?(a.width=l?l*o:u&&t.availableWidth,a.height=s):(a.width=o,a.height=l?l*s:u&&t.availableHeight)}return i}function Yv(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function Qv(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function $v(e,t,n,r){var a=n.pos,i=n.box,o=e.maxPadding;if(!jf(a)){n.size&&(e[a]-=n.size);var s=r[n.stack]||{size:0,count:1};s.size=Math.max(s.size,n.horizontal?i.height:i.width),n.size=s.size/s.count,e[a]+=n.size}i.getPadding&&Qv(o,i.getPadding());var u=Math.max(0,t.outerWidth-Yv(o,e,"left","right")),c=Math.max(0,t.outerHeight-Yv(o,e,"top","bottom")),l=u!==e.w,d=c!==e.h;return e.w=u,e.h=c,n.horizontal?{same:l,other:d}:{same:d,other:l}}function Jv(e,t){var n=t.maxPadding;function r(e){var r={left:0,top:0,right:0,bottom:0};return e.forEach((function(e){r[e]=Math.max(t[e],n[e])})),r}return r(e?["left","right"]:["top","bottom"])}function eg(e,t,n,r){var a,i,o,s,u,c,l=[];for(a=0,i=e.length,u=0;a<i;++a){(s=(o=e[a]).box).update(o.width||t.w,o.height||t.h,Jv(o.horizontal,t));var d=$v(t,n,o,r),f=d.same,p=d.other;u|=f&&l.length,c=c||p,s.fullSize||l.push(o)}return u&&eg(l,t,n,r)||c}function tg(e,t,n,r,a){e.top=n,e.left=t,e.right=t+r,e.bottom=n+a,e.width=r,e.height=a}function ng(e,t,n,r){var a,i=n.padding,o=t.x,s=t.y,u=(0,h.Z)(e);try{for(u.s();!(a=u.n()).done;){var c=a.value,l=c.box,d=r[c.stack]||{count:1,placed:0,weight:1},f=c.stackWeight/d.weight||1;if(c.horizontal){var p=t.w*f,m=d.size||l.height;op(d.start)&&(s=d.start),l.fullSize?tg(l,i.left,s,n.outerWidth-i.right-i.left,m):tg(l,t.left+d.placed,s,p,m),d.start=s,d.placed+=p,s=l.bottom}else{var v=t.h*f,g=d.size||l.width;op(d.start)&&(o=d.start),l.fullSize?tg(l,o,i.top,g,n.outerHeight-i.bottom-i.top):tg(l,o,t.top+d.placed,g,v),d.start=o,d.placed+=v,o=l.right}}}catch(Nx){u.e(Nx)}finally{u.f()}t.x=o,t.y=s}_h.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var rg=function(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw:function(e){t.draw(e)}}]},e.boxes.push(t)},ag=function(e,t){var n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},ig=function(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},og=function(e,t,n,r){if(e){var a=Xh(e.options.layout.padding),i=Math.max(t-a.width,0),o=Math.max(n-a.height,0),s=function(e){var t=function(e){var t,n,r,a,i,o,s=[];for(t=0,n=(e||[]).length;t<n;++t){var u=r=e[t];a=u.position;var c=u.options;i=c.stack;var l=c.stackWeight;o=void 0===l?1:l,s.push({index:t,box:r,pos:a,horizontal:r.isHorizontal(),weight:r.weight,stack:i&&a+i,stackWeight:o})}return s}(e),n=Xv(t.filter((function(e){return e.box.fullSize})),!0),r=Xv(Hv(t,"left"),!0),a=Xv(Hv(t,"right")),i=Xv(Hv(t,"top"),!0),o=Xv(Hv(t,"bottom")),s=qv(t,"x"),u=qv(t,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:a.concat(u).concat(o).concat(s),chartArea:Hv(t,"chartArea"),vertical:r.concat(a).concat(u),horizontal:i.concat(o).concat(s)}}(e.boxes),u=s.vertical,c=s.horizontal;Kf(e.boxes,(function(e){"function"===typeof e.beforeLayout&&e.beforeLayout()}));var l=u.reduce((function(e,t){return t.box.options&&!1===t.box.options.display?e:e+1}),0)||1,d=Object.freeze({outerWidth:t,outerHeight:n,padding:a,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/l,hBoxMaxHeight:o/2}),f=Object.assign({},a);Qv(f,Xh(r));var p=Object.assign({maxPadding:f,w:i,h:o,x:a.left,y:a.top},a),h=Kv(u.concat(c),d);eg(s.fullSize,p,d,h),eg(u,p,d,h),eg(c,p,d,h)&&eg(u,p,d,h),function(e){var t=e.maxPadding;function n(n){var r=Math.max(t[n]-e[n],0);return e[n]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(p),ng(s.leftAndTop,p,d,h),p.x+=p.w,p.y+=p.h,ng(s.rightAndBottom,p,d,h),e.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Kf(s.chartArea,(function(t){var n=t.box;Object.assign(n,e.chartArea),n.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})}))}},sg=function(){function e(){(0,c.Z)(this,e)}return(0,l.Z)(e,[{key:"acquireContext",value:function(e,t){}},{key:"releaseContext",value:function(e){return!1}},{key:"addEventListener",value:function(e,t,n){}},{key:"removeEventListener",value:function(e,t,n){}},{key:"getDevicePixelRatio",value:function(){return 1}},{key:"getMaximumSize",value:function(e,t,n,r){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}},{key:"isAttached",value:function(e){return!0}},{key:"updateConfig",value:function(e){}}]),e}(),ug=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n,[{key:"acquireContext",value:function(e){return e&&e.getContext&&e.getContext("2d")||null}},{key:"updateConfig",value:function(e){e.options.animation=!1}}]),n}(sg),cg={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},lg=function(e){return null===e||""===e};var dg=!!Fm&&{passive:!0};function fg(e,t,n){e.canvas.removeEventListener(t,n,dg)}function pg(e,t){var n,r=(0,h.Z)(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a===t||a.contains(t))return!0}}catch(Nx){r.e(Nx)}finally{r.f()}}function hg(e,t,n){var r=e.canvas,a=new MutationObserver((function(e){var t,a=!1,i=(0,h.Z)(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;a=(a=a||pg(o.addedNodes,r))&&!pg(o.removedNodes,r)}}catch(Nx){i.e(Nx)}finally{i.f()}a&&n()}));return a.observe(document,{childList:!0,subtree:!0}),a}function mg(e,t,n){var r=e.canvas,a=new MutationObserver((function(e){var t,a=!1,i=(0,h.Z)(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;a=(a=a||pg(o.removedNodes,r))&&!pg(o.addedNodes,r)}}catch(Nx){i.e(Nx)}finally{i.f()}a&&n()}));return a.observe(document,{childList:!0,subtree:!0}),a}var vg=new Map,gg=0;function yg(){var e=window.devicePixelRatio;e!==gg&&(gg=e,vg.forEach((function(t,n){n.currentDevicePixelRatio!==e&&t()})))}function bg(e,t,n){var r=e.canvas,a=r&&Em(r);if(a){var i=Mf((function(e,t){var r=a.clientWidth;n(e,t),r<a.clientWidth&&n()}),window),o=new ResizeObserver((function(e){var t=e[0],n=t.contentRect.width,r=t.contentRect.height;0===n&&0===r||i(n,r)}));return o.observe(a),function(e,t){vg.size||window.addEventListener("resize",yg),vg.set(e,t)}(e,i),o}}function xg(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){vg.delete(e),vg.size||window.removeEventListener("resize",yg)}(e)}function kg(e,t,n){var r=e.canvas,a=Mf((function(t){null!==e.ctx&&n(function(e,t){var n=cg[e.type]||e.type,r=Pm(e,t),a=r.x,i=r.y;return{type:n,chart:t,native:e,x:void 0!==a?a:null,y:void 0!==i?i:null}}(t,e))}),e,(function(e){var t=e[0];return[t,t.offsetX,t.offsetY]}));return function(e,t,n){e.addEventListener(t,n,dg)}(r,t,a),a}var wg=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n,[{key:"acquireContext",value:function(e,t){var n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){var n=e.style,r=e.getAttribute("height"),a=e.getAttribute("width");if(e.$chartjs={initial:{height:r,width:a,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",lg(a)){var i=Lm(e,"width");void 0!==i&&(e.width=i)}if(lg(r))if(""===e.style.height)e.height=e.width/(t||2);else{var o=Lm(e,"height");void 0!==o&&(e.height=o)}}(e,t),n):null}},{key:"releaseContext",value:function(e){var t=e.canvas;if(!t.$chartjs)return!1;var n=t.$chartjs.initial;["height","width"].forEach((function(e){var r=n[e];Zf(r)?t.removeAttribute(e):t.setAttribute(e,r)}));var r=n.style||{};return Object.keys(r).forEach((function(e){t.style[e]=r[e]})),t.width=t.width,delete t.$chartjs,!0}},{key:"addEventListener",value:function(e,t,n){this.removeEventListener(e,t);var r=e.$proxies||(e.$proxies={}),a={attach:hg,detach:mg,resize:bg}[t]||kg;r[t]=a(e,t,n)}},{key:"removeEventListener",value:function(e,t){var n=e.$proxies||(e.$proxies={}),r=n[t];r&&(({attach:xg,detach:xg,resize:xg}[t]||fg)(e,t,r),n[t]=void 0)}},{key:"getDevicePixelRatio",value:function(){return window.devicePixelRatio}},{key:"getMaximumSize",value:function(e,t,n,r){return Bm(e,t,n,r)}},{key:"isAttached",value:function(e){var t=Em(e);return!(!t||!t.isConnected)}}]),n}(sg);var Sg=function(){function e(){(0,c.Z)(this,e),this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}return(0,l.Z)(e,[{key:"tooltipPosition",value:function(e){var t=this.getProps(["x","y"],e);return{x:t.x,y:t.y}}},{key:"hasValue",value:function(){return xp(this.x)&&xp(this.y)}},{key:"getProps",value:function(e,t){var n=this,r=this.$animations;if(!t||!r)return this;var a={};return e.forEach((function(e){a[e]=r[e]&&r[e].active()?r[e]._to:n[e]})),a}}]),e}();Sg.defaults={},Sg.defaultRoutes=void 0;var Cg={values:function(e){return Uf(e)?e:""+e},numeric:function(e,t,n){if(0===e)return"0";var r,a=this.chart.options.locale,i=e;if(n.length>1){var o=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(o<1e-4||o>1e15)&&(r="scientific"),i=function(e,t){var n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}var s=gp(Math.abs(i)),u=Math.max(Math.min(-1*Math.floor(s),20),0),c={notation:r,minimumFractionDigits:u,maximumFractionDigits:u};return Object.assign(c,this.options.ticks.format),jm(e,a,c)},logarithmic:function(e,t,n){if(0===e)return"0";var r=e/Math.pow(10,Math.floor(gp(e)));return 1===r||2===r||5===r?Cg.numeric.call(this,e,t,n):""}};var _g={formatters:Cg};function Ig(e,t){var n=e.options.ticks,r=n.maxTicksLimit||function(e){var t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),a=e._maxLength/n;return Math.floor(Math.min(r,a))}(e),a=n.major.enabled?function(e){var t,n,r=[];for(t=0,n=e.length;t<n;t++)e[t].major&&r.push(t);return r}(t):[],i=a.length,o=a[0],s=a[i-1],u=[];if(i>r)return function(e,t,n,r){var a,i=0,o=n[0];for(r=Math.ceil(r),a=0;a<e.length;a++)a===o&&(t.push(e[a]),o=n[++i*r])}(t,u,a,i/r),u;var c=function(e,t,n){var r=function(e){var t,n,r=e.length;if(r<2)return!1;for(n=e[0],t=1;t<r;++t)if(e[t]-e[t-1]!==n)return!1;return n}(e),a=t.length/n;if(!r)return Math.max(a,1);for(var i=function(e){var t,n=[],r=Math.sqrt(e);for(t=1;t<r;t++)e%t===0&&(n.push(t),n.push(e/t));return r===(0|r)&&n.push(r),n.sort((function(e,t){return e-t})).pop(),n}(r),o=0,s=i.length-1;o<s;o++){var u=i[o];if(u>a)return u}return Math.max(a,1)}(a,t,r);if(i>0){var l,d,f=i>1?Math.round((s-o)/(i-1)):null;for(Tg(t,u,c,Zf(f)?0:o-f,o),l=0,d=i-1;l<d;l++)Tg(t,u,c,a[l],a[l+1]);return Tg(t,u,c,s,Zf(f)?t.length:s+f),u}return Tg(t,u,c),u}function Tg(e,t,n,r,a){var i,o,s,u=Hf(r,0),c=Math.min(Hf(a,e.length),e.length),l=0;for(n=Math.ceil(n),a&&(n=(i=a-r)/Math.floor(i/n)),s=u;s<0;)l++,s=Math.round(u+l*n);for(o=Math.max(u,0);o<c;o++)o===s&&(t.push(e[o]),l++,s=Math.round(u+l*n))}_h.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:function(e,t){return t.lineWidth},tickColor:function(e,t){return t.color},offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:_g.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),_h.route("scale.ticks","color","","color"),_h.route("scale.grid","color","","borderColor"),_h.route("scale.grid","borderColor","","borderColor"),_h.route("scale.title","color","","color"),_h.describe("scale",{_fallback:!1,_scriptable:function(e){return!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e},_indexable:function(e){return"borderDash"!==e&&"tickBorderDash"!==e}}),_h.describe("scales",{_fallback:"scale"}),_h.describe("scale.ticks",{_scriptable:function(e){return"backdropPadding"!==e&&"callback"!==e},_indexable:function(e){return"backdropPadding"!==e}});var Eg=function(e,t,n){return"top"===t||"left"===t?e[t]+n:e[t]-n};function Ng(e,t){for(var n=[],r=e.length/t,a=e.length,i=0;i<a;i+=r)n.push(e[Math.floor(i)]);return n}function Og(e,t,n){var r,a=e.ticks.length,i=Math.min(t,a-1),o=e._startPixel,s=e._endPixel,u=1e-6,c=e.getPixelForTick(i);if(!(n&&(r=1===a?Math.max(c-o,s-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(i-1))/2,(c+=i<t?r:-r)<o-u||c>s+u)))return c}function Ag(e){return e.drawTicks?e.tickLength:0}function Rg(e,t){if(!e.display)return 0;var n=Kh(e.font,t),r=Xh(e.padding);return(Uf(e.text)?e.text.length:1)*n.lineHeight+r.height}function Pg(e,t,n){var r=Ff(e);return(n&&"right"!==t||!n&&"right"===t)&&(r=function(e){return"left"===e?"right":"right"===e?"left":e}(r)),r}var Dg=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this)).id=e.id,r.type=e.type,r.options=void 0,r.ctx=e.ctx,r.chart=e.chart,r.top=void 0,r.bottom=void 0,r.left=void 0,r.right=void 0,r.width=void 0,r.height=void 0,r._margins={left:0,right:0,top:0,bottom:0},r.maxWidth=void 0,r.maxHeight=void 0,r.paddingTop=void 0,r.paddingBottom=void 0,r.paddingLeft=void 0,r.paddingRight=void 0,r.axis=void 0,r.labelRotation=void 0,r.min=void 0,r.max=void 0,r._range=void 0,r.ticks=[],r._gridLineItems=null,r._labelItems=null,r._labelSizes=null,r._length=0,r._maxLength=0,r._longestTextCache={},r._startPixel=void 0,r._endPixel=void 0,r._reversePixels=!1,r._userMax=void 0,r._userMin=void 0,r._suggestedMax=void 0,r._suggestedMin=void 0,r._ticksLength=0,r._borderValue=0,r._cache={},r._dataLimitsCached=!1,r.$context=void 0,r}return(0,l.Z)(n,[{key:"init",value:function(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}},{key:"parse",value:function(e,t){return e}},{key:"getUserBounds",value:function(){var e=this._userMin,t=this._userMax,n=this._suggestedMin,r=this._suggestedMax;return e=Gf(e,Number.POSITIVE_INFINITY),t=Gf(t,Number.NEGATIVE_INFINITY),n=Gf(n,Number.POSITIVE_INFINITY),r=Gf(r,Number.NEGATIVE_INFINITY),{min:Gf(e,n),max:Gf(t,r),minDefined:Wf(e),maxDefined:Wf(t)}}},{key:"getMinMax",value:function(e){var t,n=this.getUserBounds(),r=n.min,a=n.max,i=n.minDefined,o=n.maxDefined;if(i&&o)return{min:r,max:a};for(var s=this.getMatchingVisibleMetas(),u=0,c=s.length;u<c;++u)t=s[u].controller.getMinMax(this,e),i||(r=Math.min(r,t.min)),o||(a=Math.max(a,t.max));return{min:Gf(r=o&&r>a?a:r,Gf(a=i&&r>a?r:a,r)),max:Gf(a,Gf(r,a))}}},{key:"getPadding",value:function(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}},{key:"getTicks",value:function(){return this.ticks}},{key:"getLabels",value:function(){var e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}},{key:"beforeLayout",value:function(){this._cache={},this._dataLimitsCached=!1}},{key:"beforeUpdate",value:function(){Xf(this.options.beforeUpdate,[this])}},{key:"update",value:function(e,t,n){var r=this.options,a=r.beginAtZero,i=r.grace,o=r.ticks,s=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){var r=e.min,a=e.max,i=qf(t,(a-r)/2),o=function(e,t){return n&&0===e?0:e+t};return{min:o(r,-Math.abs(i)),max:o(a,i)}}(this,i,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();var u=s<this.ticks.length;this._convertTicksToLabels(u?Ng(this.ticks,s):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=Ig(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),u&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}},{key:"configure",value:function(){var e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}},{key:"afterUpdate",value:function(){Xf(this.options.afterUpdate,[this])}},{key:"beforeSetDimensions",value:function(){Xf(this.options.beforeSetDimensions,[this])}},{key:"setDimensions",value:function(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}},{key:"afterSetDimensions",value:function(){Xf(this.options.afterSetDimensions,[this])}},{key:"_callHooks",value:function(e){this.chart.notifyPlugins(e,this.getContext()),Xf(this.options[e],[this])}},{key:"beforeDataLimits",value:function(){this._callHooks("beforeDataLimits")}},{key:"determineDataLimits",value:function(){}},{key:"afterDataLimits",value:function(){this._callHooks("afterDataLimits")}},{key:"beforeBuildTicks",value:function(){this._callHooks("beforeBuildTicks")}},{key:"buildTicks",value:function(){return[]}},{key:"afterBuildTicks",value:function(){this._callHooks("afterBuildTicks")}},{key:"beforeTickToLabelConversion",value:function(){Xf(this.options.beforeTickToLabelConversion,[this])}},{key:"generateTickLabels",value:function(e){var t,n,r,a=this.options.ticks;for(t=0,n=e.length;t<n;t++)(r=e[t]).label=Xf(a.callback,[r.value,t,e],this)}},{key:"afterTickToLabelConversion",value:function(){Xf(this.options.afterTickToLabelConversion,[this])}},{key:"beforeCalculateLabelRotation",value:function(){Xf(this.options.beforeCalculateLabelRotation,[this])}},{key:"calculateLabelRotation",value:function(){var e,t,n,r=this.options,a=r.ticks,i=this.ticks.length,o=a.minRotation||0,s=a.maxRotation,u=o;if(!this._isVisible()||!a.display||o>=s||i<=1||!this.isHorizontal())this.labelRotation=o;else{var c=this._getLabelSizes(),l=c.widest.width,d=c.highest.height,f=Ap(this.chart.width-l,0,this.maxWidth);l+6>(e=r.offset?this.maxWidth/i:f/(i-1))&&(e=f/(i-(r.offset?.5:1)),t=this.maxHeight-Ag(r.grid)-a.padding-Rg(r.title,this.chart.options.font),n=Math.sqrt(l*l+d*d),u=Cp(Math.min(Math.asin(Ap((c.highest.height+6)/e,-1,1)),Math.asin(Ap(t/n,-1,1))-Math.asin(Ap(d/n,-1,1)))),u=Math.max(o,Math.min(s,u))),this.labelRotation=u}}},{key:"afterCalculateLabelRotation",value:function(){Xf(this.options.afterCalculateLabelRotation,[this])}},{key:"afterAutoSkip",value:function(){}},{key:"beforeFit",value:function(){Xf(this.options.beforeFit,[this])}},{key:"fit",value:function(){var e={width:0,height:0},t=this.chart,n=this.options,r=n.ticks,a=n.title,i=n.grid,o=this._isVisible(),s=this.isHorizontal();if(o){var u=Rg(a,t.options.font);if(s?(e.width=this.maxWidth,e.height=Ag(i)+u):(e.height=this.maxHeight,e.width=Ag(i)+u),r.display&&this.ticks.length){var c=this._getLabelSizes(),l=c.first,d=c.last,f=c.widest,p=c.highest,h=2*r.padding,m=Sp(this.labelRotation),v=Math.cos(m),g=Math.sin(m);if(s){var y=r.mirror?0:g*f.width+v*p.height;e.height=Math.min(this.maxHeight,e.height+y+h)}else{var b=r.mirror?0:v*f.width+g*p.height;e.width=Math.min(this.maxWidth,e.width+b+h)}this._calculatePadding(l,d,g,v)}}this._handleMargins(),s?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}},{key:"_calculatePadding",value:function(e,t,n,r){var a=this.options,i=a.ticks,o=i.align,s=i.padding,u=a.position,c=0!==this.labelRotation,l="top"!==u&&"x"===this.axis;if(this.isHorizontal()){var d=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1),p=0,h=0;c?l?(p=r*e.width,h=n*t.height):(p=n*e.height,h=r*t.width):"start"===o?h=t.width:"end"===o?p=e.width:"inner"!==o&&(p=e.width/2,h=t.width/2),this.paddingLeft=Math.max((p-d+s)*this.width/(this.width-d),0),this.paddingRight=Math.max((h-f+s)*this.width/(this.width-f),0)}else{var m=t.height/2,v=e.height/2;"start"===o?(m=0,v=e.height):"end"===o&&(m=t.height,v=0),this.paddingTop=m+s,this.paddingBottom=v+s}}},{key:"_handleMargins",value:function(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}},{key:"afterFit",value:function(){Xf(this.options.afterFit,[this])}},{key:"isHorizontal",value:function(){var e=this.options,t=e.axis,n=e.position;return"top"===n||"bottom"===n||"x"===t}},{key:"isFullSize",value:function(){return this.options.fullSize}},{key:"_convertTicksToLabels",value:function(e){var t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)Zf(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}},{key:"_getLabelSizes",value:function(){var e=this._labelSizes;if(!e){var t=this.options.ticks.sampleSize,n=this.ticks;t<n.length&&(n=Ng(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length)}return e}},{key:"_computeLabelSizes",value:function(e,t){var n,r,a,i,o,s,u,c,l,d,f,p=this.ctx,h=this._longestTextCache,m=[],v=[],g=0,y=0;for(n=0;n<t;++n){if(i=e[n].label,o=this._resolveTickFontOptions(n),p.font=s=o.string,u=h[s]=h[s]||{data:{},gc:[]},c=o.lineHeight,l=d=0,Zf(i)||Uf(i)){if(Uf(i))for(r=0,a=i.length;r<a;++r)Zf(f=i[r])||Uf(f)||(l=Ih(p,u.data,u.gc,l,f),d+=c)}else l=Ih(p,u.data,u.gc,l,i),d=c;m.push(l),v.push(d),g=Math.max(l,g),y=Math.max(d,y)}!function(e,t){Kf(e,(function(e){var n,r=e.gc,a=r.length/2;if(a>t){for(n=0;n<a;++n)delete e.data[r[n]];r.splice(0,a)}}))}(h,t);var b=m.indexOf(g),x=v.indexOf(y),k=function(e){return{width:m[e]||0,height:v[e]||0}};return{first:k(0),last:k(t-1),widest:k(b),highest:k(x),widths:m,heights:v}}},{key:"getLabelForValue",value:function(e){return e}},{key:"getPixelForValue",value:function(e,t){return NaN}},{key:"getValueForPixel",value:function(e){}},{key:"getPixelForTick",value:function(e){var t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}},{key:"getPixelForDecimal",value:function(e){this._reversePixels&&(e=1-e);var t=this._startPixel+e*this._length;return function(e){return Ap(e,-32768,32767)}(this._alignToPixels?Eh(this.chart,t,0):t)}},{key:"getDecimalForPixel",value:function(e){var t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}},{key:"getBasePixel",value:function(){return this.getPixelForValue(this.getBaseValue())}},{key:"getBaseValue",value:function(){var e=this.min,t=this.max;return e<0&&t<0?t:e>0&&t>0?e:0}},{key:"getContext",value:function(e){var t=this.ticks||[];if(e>=0&&e<t.length){var n=t[e];return n.$context||(n.$context=function(e,t,n){return Qh(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=Qh(this.chart.getContext(),{scale:this,type:"scale"}))}},{key:"_tickSize",value:function(){var e=this.options.ticks,t=Sp(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),a=this._getLabelSizes(),i=e.autoSkipPadding||0,o=a?a.widest.width+i:0,s=a?a.highest.height+i:0;return this.isHorizontal()?s*n>o*r?o/n:s/r:s*r<o*n?s/n:o/r}},{key:"_isVisible",value:function(){var e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}},{key:"_computeGridLineItems",value:function(e){var t,n,r,a,i,o,s,u,c,l,d,f,p=this.axis,h=this.chart,m=this.options,v=m.grid,g=m.position,y=v.offset,b=this.isHorizontal(),x=this.ticks.length+(y?1:0),k=Ag(v),w=[],S=v.setContext(this.getContext()),C=S.drawBorder?S.borderWidth:0,_=C/2,I=function(e){return Eh(h,e,C)};if("top"===g)t=I(this.bottom),o=this.bottom-k,u=t-_,l=I(e.top)+_,f=e.bottom;else if("bottom"===g)t=I(this.top),l=e.top,f=I(e.bottom)-_,o=t+_,u=this.top+k;else if("left"===g)t=I(this.right),i=this.right-k,s=t-_,c=I(e.left)+_,d=e.right;else if("right"===g)t=I(this.left),c=e.left,d=I(e.right)-_,i=t+_,s=this.left+k;else if("x"===p){if("center"===g)t=I((e.top+e.bottom)/2+.5);else if(jf(g)){var T=Object.keys(g)[0],E=g[T];t=I(this.chart.scales[T].getPixelForValue(E))}l=e.top,f=e.bottom,u=(o=t+_)+k}else if("y"===p){if("center"===g)t=I((e.left+e.right)/2);else if(jf(g)){var N=Object.keys(g)[0],O=g[N];t=I(this.chart.scales[N].getPixelForValue(O))}s=(i=t-_)-k,c=e.left,d=e.right}var A=Hf(m.ticks.maxTicksLimit,x),R=Math.max(1,Math.ceil(x/A));for(n=0;n<x;n+=R){var P=v.setContext(this.getContext(n)),D=P.lineWidth,B=P.color,M=v.borderDash||[],F=P.borderDashOffset,L=P.tickWidth,V=P.tickColor,z=P.tickBorderDash||[],Z=P.tickBorderDashOffset;void 0!==(r=Og(this,n,y))&&(a=Eh(h,r,D),b?i=s=c=d=a:o=u=l=f=a,w.push({tx1:i,ty1:o,tx2:s,ty2:u,x1:c,y1:l,x2:d,y2:f,width:D,color:B,borderDash:M,borderDashOffset:F,tickWidth:L,tickColor:V,tickBorderDash:z,tickBorderDashOffset:Z}))}return this._ticksLength=x,this._borderValue=t,w}},{key:"_computeLabelItems",value:function(e){var t,n,r,a,i,o,s,u,c,l,d,f=this.axis,p=this.options,h=p.position,m=p.ticks,v=this.isHorizontal(),g=this.ticks,y=m.align,b=m.crossAlign,x=m.padding,k=m.mirror,w=Ag(p.grid),S=w+x,C=k?-x:S,_=-Sp(this.labelRotation),I=[],T="middle";if("top"===h)i=this.bottom-C,o=this._getXAxisLabelAlignment();else if("bottom"===h)i=this.top+C,o=this._getXAxisLabelAlignment();else if("left"===h){var E=this._getYAxisLabelAlignment(w);o=E.textAlign,a=E.x}else if("right"===h){var N=this._getYAxisLabelAlignment(w);o=N.textAlign,a=N.x}else if("x"===f){if("center"===h)i=(e.top+e.bottom)/2+S;else if(jf(h)){var O=Object.keys(h)[0],A=h[O];i=this.chart.scales[O].getPixelForValue(A)+S}o=this._getXAxisLabelAlignment()}else if("y"===f){if("center"===h)a=(e.left+e.right)/2-S;else if(jf(h)){var R=Object.keys(h)[0],P=h[R];a=this.chart.scales[R].getPixelForValue(P)}o=this._getYAxisLabelAlignment(w).textAlign}"y"===f&&("start"===y?T="top":"end"===y&&(T="bottom"));var D=this._getLabelSizes();for(t=0,n=g.length;t<n;++t){r=g[t].label;var B=m.setContext(this.getContext(t));s=this.getPixelForTick(t)+m.labelOffset,c=(u=this._resolveTickFontOptions(t)).lineHeight;var M=(l=Uf(r)?r.length:1)/2,F=B.color,L=B.textStrokeColor,V=B.textStrokeWidth,z=o;v?(a=s,"inner"===o&&(z=t===n-1?this.options.reverse?"left":"right":0===t?this.options.reverse?"right":"left":"center"),d="top"===h?"near"===b||0!==_?-l*c+c/2:"center"===b?-D.highest.height/2-M*c+c:-D.highest.height+c/2:"near"===b||0!==_?c/2:"center"===b?D.highest.height/2-M*c:D.highest.height-l*c,k&&(d*=-1)):(i=s,d=(1-l)*c/2);var Z=void 0;if(B.showLabelBackdrop){var U=Xh(B.backdropPadding),j=D.heights[t],W=D.widths[t],G=i+d-U.top,H=a-U.left;switch(T){case"middle":G-=j/2;break;case"bottom":G-=j}switch(o){case"center":H-=W/2;break;case"right":H-=W}Z={left:H,top:G,width:W+U.width,height:j+U.height,color:B.backdropColor}}I.push({rotation:_,label:r,font:u,color:F,strokeColor:L,strokeWidth:V,textOffset:d,textAlign:z,textBaseline:T,translation:[a,i],backdrop:Z})}return I}},{key:"_getXAxisLabelAlignment",value:function(){var e=this.options,t=e.position,n=e.ticks;if(-Sp(this.labelRotation))return"top"===t?"left":"right";var r="center";return"start"===n.align?r="left":"end"===n.align?r="right":"inner"===n.align&&(r="inner"),r}},{key:"_getYAxisLabelAlignment",value:function(e){var t,n,r=this.options,a=r.position,i=r.ticks,o=i.crossAlign,s=i.mirror,u=i.padding,c=e+u,l=this._getLabelSizes().widest.width;return"left"===a?s?(n=this.right+u,"near"===o?t="left":"center"===o?(t="center",n+=l/2):(t="right",n+=l)):(n=this.right-c,"near"===o?t="right":"center"===o?(t="center",n-=l/2):(t="left",n=this.left)):"right"===a?s?(n=this.left+u,"near"===o?t="right":"center"===o?(t="center",n-=l/2):(t="left",n-=l)):(n=this.left+c,"near"===o?t="left":"center"===o?(t="center",n+=l/2):(t="right",n=this.right)):t="right",{textAlign:t,x:n}}},{key:"_computeLabelArea",value:function(){if(!this.options.ticks.mirror){var e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}}},{key:"drawBackground",value:function(){var e=this.ctx,t=this.options.backgroundColor,n=this.left,r=this.top,a=this.width,i=this.height;t&&(e.save(),e.fillStyle=t,e.fillRect(n,r,a,i),e.restore())}},{key:"getLineWidthForValue",value:function(e){var t=this.options.grid;if(!this._isVisible()||!t.display)return 0;var n=this.ticks.findIndex((function(t){return t.value===e}));return n>=0?t.setContext(this.getContext(n)).lineWidth:0}},{key:"drawGrid",value:function(e){var t,n,r=this.options.grid,a=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),o=function(e,t,n){n.width&&n.color&&(a.save(),a.lineWidth=n.width,a.strokeStyle=n.color,a.setLineDash(n.borderDash||[]),a.lineDashOffset=n.borderDashOffset,a.beginPath(),a.moveTo(e.x,e.y),a.lineTo(t.x,t.y),a.stroke(),a.restore())};if(r.display)for(t=0,n=i.length;t<n;++t){var s=i[t];r.drawOnChartArea&&o({x:s.x1,y:s.y1},{x:s.x2,y:s.y2},s),r.drawTicks&&o({x:s.tx1,y:s.ty1},{x:s.tx2,y:s.ty2},{color:s.tickColor,width:s.tickWidth,borderDash:s.tickBorderDash,borderDashOffset:s.tickBorderDashOffset})}}},{key:"drawBorder",value:function(){var e=this.chart,t=this.ctx,n=this.options.grid,r=n.setContext(this.getContext()),a=n.drawBorder?r.borderWidth:0;if(a){var i,o,s,u,c=n.setContext(this.getContext(0)).lineWidth,l=this._borderValue;this.isHorizontal()?(i=Eh(e,this.left,a)-a/2,o=Eh(e,this.right,c)+c/2,s=u=l):(s=Eh(e,this.top,a)-a/2,u=Eh(e,this.bottom,c)+c/2,i=o=l),t.save(),t.lineWidth=r.borderWidth,t.strokeStyle=r.borderColor,t.beginPath(),t.moveTo(i,s),t.lineTo(o,u),t.stroke(),t.restore()}}},{key:"drawLabels",value:function(e){if(this.options.ticks.display){var t=this.ctx,n=this._computeLabelArea();n&&Ph(t,n);var r,a,i=this._labelItems||(this._labelItems=this._computeLabelItems(e));for(r=0,a=i.length;r<a;++r){var o=i[r],s=o.font,u=o.label;o.backdrop&&(t.fillStyle=o.backdrop.color,t.fillRect(o.backdrop.left,o.backdrop.top,o.backdrop.width,o.backdrop.height)),Fh(t,u,0,o.textOffset,s,o)}n&&Dh(t)}}},{key:"drawTitle",value:function(){var e=this.ctx,t=this.options,n=t.position,r=t.title,a=t.reverse;if(r.display){var i=Kh(r.font),o=Xh(r.padding),s=r.align,u=i.lineHeight/2;"bottom"===n||"center"===n||jf(n)?(u+=o.bottom,Uf(r.text)&&(u+=i.lineHeight*(r.text.length-1))):u+=o.top;var c=function(e,t,n,r){var a,i,o,s=e.top,u=e.left,c=e.bottom,l=e.right,d=e.chart,f=d.chartArea,p=d.scales,h=0,m=c-s,v=l-u;if(e.isHorizontal()){if(i=Lf(r,u,l),jf(n)){var g=Object.keys(n)[0],y=n[g];o=p[g].getPixelForValue(y)+m-t}else o="center"===n?(f.bottom+f.top)/2+m-t:Eg(e,n,t);a=l-u}else{if(jf(n)){var b=Object.keys(n)[0],x=n[b];i=p[b].getPixelForValue(x)-v+t}else i="center"===n?(f.left+f.right)/2-v+t:Eg(e,n,t);o=Lf(r,c,s),h="left"===n?-hp:hp}return{titleX:i,titleY:o,maxWidth:a,rotation:h}}(this,u,n,s),l=c.titleX,d=c.titleY,f=c.maxWidth,p=c.rotation;Fh(e,r.text,0,0,i,{color:r.color,maxWidth:f,rotation:p,textAlign:Pg(s,n,a),textBaseline:"middle",translation:[l,d]})}}},{key:"draw",value:function(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}},{key:"_layers",value:function(){var e=this,t=this.options,r=t.ticks&&t.ticks.z||0,a=Hf(t.grid&&t.grid.z,-1);return this._isVisible()&&this.draw===n.prototype.draw?[{z:a,draw:function(t){e.drawBackground(),e.drawGrid(t),e.drawTitle()}},{z:a+1,draw:function(){e.drawBorder()}},{z:r,draw:function(t){e.drawLabels(t)}}]:[{z:r,draw:function(t){e.draw(t)}}]}},{key:"getMatchingVisibleMetas",value:function(e){var t,n,r=this.chart.getSortedVisibleDatasetMetas(),a=this.axis+"AxisID",i=[];for(t=0,n=r.length;t<n;++t){var o=r[t];o[a]!==this.id||e&&o.type!==e||i.push(o)}return i}},{key:"_resolveTickFontOptions",value:function(e){return Kh(this.options.ticks.setContext(this.getContext(e)).font)}},{key:"_maxDigits",value:function(){var e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}]),n}(Sg),Bg=function(){function e(t,n,r){(0,c.Z)(this,e),this.type=t,this.scope=n,this.override=r,this.items=Object.create(null)}return(0,l.Z)(e,[{key:"isForType",value:function(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}},{key:"register",value:function(e){var t,n=Object.getPrototypeOf(e);(function(e){return"id"in e&&"defaults"in e})(n)&&(t=this.register(n));var r=this.items,a=e.id,i=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+e);return a in r||(r[a]=e,function(e,t,n){var r=ep(Object.create(null),[n?_h.get(n):{},_h.get(t),e.defaults]);_h.set(t,r),e.defaultRoutes&&function(e,t){Object.keys(t).forEach((function(n){var r=n.split("."),a=r.pop(),i=[e].concat(r).join("."),o=t[n].split("."),s=o.pop(),u=o.join(".");_h.route(i,a,u,s)}))}(t,e.defaultRoutes);e.descriptors&&_h.describe(t,e.descriptors)}(e,i,t),this.override&&_h.override(e.id,e.overrides)),i}},{key:"get",value:function(e){return this.items[e]}},{key:"unregister",value:function(e){var t=this.items,n=e.id,r=this.scope;n in t&&delete t[n],r&&n in _h[r]&&(delete _h[r][n],this.override&&delete xh[n])}}]),e}();var Mg=function(){function e(){(0,c.Z)(this,e),this.controllers=new Bg(yv,"datasets",!0),this.elements=new Bg(Sg,"elements"),this.plugins=new Bg(Object,"plugins"),this.scales=new Bg(Dg,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}return(0,l.Z)(e,[{key:"add",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}},{key:"remove",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}},{key:"addControllers",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}},{key:"addElements",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}},{key:"addPlugins",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}},{key:"addScales",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}},{key:"getController",value:function(e){return this._get(e,this.controllers,"controller")}},{key:"getElement",value:function(e){return this._get(e,this.elements,"element")}},{key:"getPlugin",value:function(e){return this._get(e,this.plugins,"plugin")}},{key:"getScale",value:function(e){return this._get(e,this.scales,"scale")}},{key:"removeControllers",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}},{key:"removeElements",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}},{key:"removePlugins",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}},{key:"removeScales",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}},{key:"_each",value:function(e,t,n){var r=this;(0,v.Z)(t).forEach((function(t){var a=n||r._getRegistryForType(t);n||a.isForType(t)||a===r.plugins&&t.id?r._exec(e,a,t):Kf(t,(function(t){var a=n||r._getRegistryForType(t);r._exec(e,a,t)}))}))}},{key:"_exec",value:function(e,t,n){var r=ip(e);Xf(n["before"+r],[],n),t[e](n),Xf(n["after"+r],[],n)}},{key:"_getRegistryForType",value:function(e){for(var t=0;t<this._typedRegistries.length;t++){var n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}},{key:"_get",value:function(e,t,n){var r=t.get(e);if(void 0===r)throw new Error('"'+e+'" is not a registered '+n+".");return r}}]),e}(),Fg=new Mg,Lg=function(){function e(){(0,c.Z)(this,e),this._init=[]}return(0,l.Z)(e,[{key:"notify",value:function(e,t,n,r){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));var a=r?this._descriptors(e).filter(r):this._descriptors(e),i=this._notify(a,e,t,n);return"afterDestroy"===t&&(this._notify(a,e,"stop"),this._notify(this._init,e,"uninstall")),i}},{key:"_notify",value:function(e,t,n,r){r=r||{};var a,i=(0,h.Z)(e);try{for(i.s();!(a=i.n()).done;){var o=a.value,s=o.plugin;if(!1===Xf(s[n],[t,r,o.options],s)&&r.cancelable)return!1}}catch(Nx){i.e(Nx)}finally{i.f()}return!0}},{key:"invalidate",value:function(){Zf(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}},{key:"_descriptors",value:function(e){if(this._cache)return this._cache;var t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}},{key:"_createDescriptors",value:function(e,t){var n=e&&e.config,r=Hf(n.options&&n.options.plugins,{}),a=function(e){for(var t={},n=[],r=Object.keys(Fg.plugins.items),a=0;a<r.length;a++)n.push(Fg.getPlugin(r[a]));for(var i=e.plugins||[],o=0;o<i.length;o++){var s=i[o];-1===n.indexOf(s)&&(n.push(s),t[s.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==r||t?function(e,t,n,r){var a,i=t.plugins,o=t.localIds,s=[],u=e.getContext(),c=(0,h.Z)(i);try{for(c.s();!(a=c.n()).done;){var l=a.value,d=l.id,f=Vg(n[d],r);null!==f&&s.push({plugin:l,options:zg(e.config,{plugin:l,local:o[d]},f,u)})}}catch(Nx){c.e(Nx)}finally{c.f()}return s}(e,a,r,t):[]}},{key:"_notifyStateChanges",value:function(e){var t=this._oldCache||[],n=this._cache,r=function(e,t){return e.filter((function(e){return!t.some((function(t){return e.plugin.id===t.plugin.id}))}))};this._notify(r(t,n),e,"stop"),this._notify(r(n,t),e,"start")}}]),e}();function Vg(e,t){return t||!1!==e?!0===e?{}:e:null}function zg(e,t,n,r){var a=t.plugin,i=t.local,o=e.pluginScopeKeys(a),s=e.getOptionScopes(n,o);return i&&a.defaults&&s.push(a.defaults),e.createResolver(s,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Zg(e,t){var n=_h.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function Ug(e,t){return"x"===e||"y"===e?e:t.axis||("top"===(n=t.position)||"bottom"===n?"x":"left"===n||"right"===n?"y":void 0)||e.charAt(0).toLowerCase();var n}function jg(e){var t=e.options||(e.options={});t.plugins=Hf(t.plugins,{}),t.scales=function(e,t){var n=xh[e.type]||{scales:{}},r=t.scales||{},a=Zg(e.type,t),i=Object.create(null),o=Object.create(null);return Object.keys(r).forEach((function(e){var t=r[e];if(!jf(t))return console.error("Invalid scale configuration for scale: ".concat(e));if(t._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(e));var s=Ug(e,t),u=function(e,t){return e===t?"_index_":"_value_"}(s,a),c=n.scales||{};i[s]=i[s]||e,o[e]=tp(Object.create(null),[{axis:s},t,c[s],c[u]])})),e.data.datasets.forEach((function(n){var a=n.type||e.type,s=n.indexAxis||Zg(a,t),u=(xh[a]||{}).scales||{};Object.keys(u).forEach((function(e){var t=function(e,t){var n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,s),a=n[t+"AxisID"]||i[t]||t;o[a]=o[a]||Object.create(null),tp(o[a],[{axis:t},r[a],u[e]])}))})),Object.keys(o).forEach((function(e){var t=o[e];tp(t,[_h.scales[t.type],_h.scale])})),o}(e,t)}function Wg(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}var Gg=new Map,Hg=new Set;function qg(e,t){var n=Gg.get(e);return n||(n=t(),Gg.set(e,n),Hg.add(n)),n}var Xg=function(e,t,n){var r=ap(t,n);void 0!==r&&e.add(r)},Kg=function(){function e(t){(0,c.Z)(this,e),this._config=function(e){return(e=e||{}).data=Wg(e.data),jg(e),e}(t),this._scopeCache=new Map,this._resolverCache=new Map}return(0,l.Z)(e,[{key:"platform",get:function(){return this._config.platform}},{key:"type",get:function(){return this._config.type},set:function(e){this._config.type=e}},{key:"data",get:function(){return this._config.data},set:function(e){this._config.data=Wg(e)}},{key:"options",get:function(){return this._config.options},set:function(e){this._config.options=e}},{key:"plugins",get:function(){return this._config.plugins}},{key:"update",value:function(){var e=this._config;this.clearCache(),jg(e)}},{key:"clearCache",value:function(){this._scopeCache.clear(),this._resolverCache.clear()}},{key:"datasetScopeKeys",value:function(e){return qg(e,(function(){return[["datasets.".concat(e),""]]}))}},{key:"datasetAnimationScopeKeys",value:function(e,t){return qg("".concat(e,".transition.").concat(t),(function(){return[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]]}))}},{key:"datasetElementScopeKeys",value:function(e,t){return qg("".concat(e,"-").concat(t),(function(){return[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]]}))}},{key:"pluginScopeKeys",value:function(e){var t=e.id,n=this.type;return qg("".concat(n,"-plugin-").concat(t),(function(){return[["plugins.".concat(t)].concat((0,v.Z)(e.additionalOptionScopes||[]))]}))}},{key:"_cachedScopes",value:function(e,t){var n=this._scopeCache,r=n.get(e);return r&&!t||(r=new Map,n.set(e,r)),r}},{key:"getOptionScopes",value:function(e,t,n){var r=this.options,a=this.type,i=this._cachedScopes(e,n),o=i.get(t);if(o)return o;var s=new Set;t.forEach((function(t){e&&(s.add(e),t.forEach((function(t){return Xg(s,e,t)}))),t.forEach((function(e){return Xg(s,r,e)})),t.forEach((function(e){return Xg(s,xh[a]||{},e)})),t.forEach((function(e){return Xg(s,_h,e)})),t.forEach((function(e){return Xg(s,kh,e)}))}));var u=Array.from(s);return 0===u.length&&u.push(Object.create(null)),Hg.has(t)&&i.set(t,u),u}},{key:"chartOptionScopes",value:function(){var e=this.options,t=this.type;return[e,xh[t]||{},_h.datasets[t]||{},{type:t},_h,kh]}},{key:"resolveNamedOptions",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""],a={$shared:!0},i=Yg(this._resolverCache,e,r),o=i.resolver,s=i.subPrefixes,u=o;if($g(o,t)){a.$shared=!1,n=sp(n)?n():n;var c=this.createResolver(e,n,s);u=im(o,n,c)}var l,d=(0,h.Z)(t);try{for(d.s();!(l=d.n()).done;){var f=l.value;a[f]=u[f]}}catch(Nx){d.e(Nx)}finally{d.f()}return a}},{key:"createResolver",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],r=arguments.length>3?arguments[3]:void 0,a=Yg(this._resolverCache,e,n),i=a.resolver;return jf(t)?im(i,t,void 0,r):i}}]),e}();function Yg(e,t,n){var r=e.get(t);r||(r=new Map,e.set(t,r));var a=n.join(),i=r.get(a);i||(i={resolver:am(t,n),subPrefixes:n.filter((function(e){return!e.toLowerCase().includes("hover")}))},r.set(a,i));return i}var Qg=function(e){return jf(e)&&Object.getOwnPropertyNames(e).reduce((function(t,n){return t||sp(e[n])}),!1)};function $g(e,t){var n,r=om(e),a=r.isScriptable,i=r.isIndexable,o=(0,h.Z)(t);try{for(o.s();!(n=o.n()).done;){var s=n.value,u=a(s),c=i(s),l=(c||u)&&e[s];if(u&&(sp(l)||Qg(l))||c&&Uf(l))return!0}}catch(Nx){o.e(Nx)}finally{o.f()}return!1}var Jg=["top","bottom","left","right","chartArea"];function ey(e,t){return"top"===e||"bottom"===e||-1===Jg.indexOf(e)&&"x"===t}function ty(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function ny(e){var t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Xf(n&&n.onComplete,[e],t)}function ry(e){var t=e.chart,n=t.options.animation;Xf(n&&n.onProgress,[e],t)}function ay(e){return Tm()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}var iy={},oy=function(e){var t=ay(e);return Object.values(iy).filter((function(e){return e.canvas===t})).pop()};function sy(e,t,n){for(var r=0,a=Object.keys(e);r<a.length;r++){var i=a[r],o=+i;if(o>=t){var s=e[i];delete e[i],(n>0||o>t)&&(e[o+n]=s)}}}var uy=function(){function e(t,n){var r=this;(0,c.Z)(this,e);var a=this.config=new Kg(n),i=ay(t),o=oy(i);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");var s=a.createResolver(a.chartOptionScopes(),this.getContext());this.platform=new(a.platform||function(e){return!Tm()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?ug:wg}(i)),this.platform.updateConfig(a);var u=this.platform.acquireContext(i,s.aspectRatio),l=u&&u.canvas,d=l&&l.height,f=l&&l.width;this.id=zf(),this.ctx=u,this.canvas=l,this.width=f,this.height=d,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Lg,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){var n;return function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return t?(clearTimeout(n),n=setTimeout(e,t,a)):e.apply(this,a),t}}((function(e){return r.update(e)}),s.resizeDelay||0),this._dataChanges=[],iy[this.id]=this,u&&l?(tv.listen(this,"complete",ny),tv.listen(this,"progress",ry),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}return(0,l.Z)(e,[{key:"aspectRatio",get:function(){var e=this.options,t=e.aspectRatio,n=e.maintainAspectRatio,r=this.width,a=this.height,i=this._aspectRatio;return Zf(t)?n&&i?i:a?r/a:null:t}},{key:"data",get:function(){return this.config.data},set:function(e){this.config.data=e}},{key:"options",get:function(){return this._options},set:function(e){this.config.options=e}},{key:"_initialize",value:function(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Mm(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}},{key:"clear",value:function(){return Nh(this.canvas,this.ctx),this}},{key:"stop",value:function(){return tv.stop(this),this}},{key:"resize",value:function(e,t){tv.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}},{key:"_resize",value:function(e,t){var n=this.options,r=this.canvas,a=n.maintainAspectRatio&&this.aspectRatio,i=this.platform.getMaximumSize(r,e,t,a),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),s=this.width?"resize":"attach";this.width=i.width,this.height=i.height,this._aspectRatio=this.aspectRatio,Mm(this,o,!0)&&(this.notifyPlugins("resize",{size:i}),Xf(n.onResize,[this,i],this),this.attached&&this._doResize(s)&&this.render())}},{key:"ensureScalesHaveIDs",value:function(){Kf(this.options.scales||{},(function(e,t){e.id=t}))}},{key:"buildOrUpdateScales",value:function(){var e=this,t=this.options,n=t.scales,r=this.scales,a=Object.keys(r).reduce((function(e,t){return e[t]=!1,e}),{}),i=[];n&&(i=i.concat(Object.keys(n).map((function(e){var t=n[e],r=Ug(e,t),a="r"===r,i="x"===r;return{options:t,dposition:a?"chartArea":i?"bottom":"left",dtype:a?"radialLinear":i?"category":"linear"}})))),Kf(i,(function(n){var i=n.options,o=i.id,s=Ug(o,i),u=Hf(i.type,n.dtype);void 0!==i.position&&ey(i.position,s)===ey(n.dposition)||(i.position=n.dposition),a[o]=!0;var c=null;o in r&&r[o].type===u?c=r[o]:(c=new(Fg.getScale(u))({id:o,type:u,ctx:e.ctx,chart:e}),r[c.id]=c);c.init(i,t)})),Kf(a,(function(e,t){e||delete r[t]})),Kf(r,(function(t){ig(e,t,t.options),rg(e,t)}))}},{key:"_updateMetasets",value:function(){var e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((function(e,t){return e.index-t.index})),n>t){for(var r=t;r<n;++r)this._destroyDatasetMeta(r);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(ty("order","index"))}},{key:"_removeUnreferencedMetasets",value:function(){var e=this,t=this._metasets,n=this.data.datasets;t.length>n.length&&delete this._stacks,t.forEach((function(t,r){0===n.filter((function(e){return e===t._dataset})).length&&e._destroyDatasetMeta(r)}))}},{key:"buildOrUpdateControllers",value:function(){var e,t,n=[],r=this.data.datasets;for(this._removeUnreferencedMetasets(),e=0,t=r.length;e<t;e++){var a=r[e],i=this.getDatasetMeta(e),o=a.type||this.config.type;if(i.type&&i.type!==o&&(this._destroyDatasetMeta(e),i=this.getDatasetMeta(e)),i.type=o,i.indexAxis=a.indexAxis||Zg(o,this.options),i.order=a.order||0,i.index=e,i.label=""+a.label,i.visible=this.isDatasetVisible(e),i.controller)i.controller.updateIndex(e),i.controller.linkScales();else{var s=Fg.getController(o),u=_h.datasets[o],c=u.datasetElementType,l=u.dataElementType;Object.assign(s.prototype,{dataElementType:Fg.getElement(l),datasetElementType:c&&Fg.getElement(c)}),i.controller=new s(this,e),n.push(i.controller)}}return this._updateMetasets(),n}},{key:"_resetElements",value:function(){var e=this;Kf(this.data.datasets,(function(t,n){e.getDatasetMeta(n).controller.reset()}),this)}},{key:"reset",value:function(){this._resetElements(),this.notifyPlugins("reset")}},{key:"update",value:function(e){var t=this.config;t.update();var n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1!==this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})){var a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");for(var i=0,o=0,s=this.data.datasets.length;o<s;o++){var u=this.getDatasetMeta(o).controller,c=!r&&-1===a.indexOf(u);u.buildOrUpdateElements(c),i=Math.max(+u.getMaxOverflow(),i)}i=this._minPadding=n.layout.autoPadding?i:0,this._updateLayout(i),r||Kf(a,(function(e){e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(ty("z","_idx"));var l=this._active,d=this._lastEvent;d?this._eventHandler(d,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}}},{key:"_updateScales",value:function(){var e=this;Kf(this.scales,(function(t){ag(e,t)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}},{key:"_checkEventBindings",value:function(){var e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);up(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}},{key:"_updateHiddenIndices",value:function(){var e,t=this._hiddenIndices,n=this._getUniformDataChanges()||[],r=(0,h.Z)(n);try{for(r.s();!(e=r.n()).done;){var a=e.value,i=a.method,o=a.start,s=a.count;sy(t,o,"_removeElements"===i?-s:s)}}catch(Nx){r.e(Nx)}finally{r.f()}}},{key:"_getUniformDataChanges",value:function(){var e=this._dataChanges;if(e&&e.length){this._dataChanges=[];for(var t=this.data.datasets.length,n=function(t){return new Set(e.filter((function(e){return e[0]===t})).map((function(e,t){return t+","+e.splice(1).join(",")})))},r=n(0),a=1;a<t;a++)if(!up(r,n(a)))return;return Array.from(r).map((function(e){return e.split(",")})).map((function(e){return{method:e[1],start:+e[2],count:+e[3]}}))}}},{key:"_updateLayout",value:function(e){var t=this;if(!1!==this.notifyPlugins("beforeLayout",{cancelable:!0})){og(this,this.width,this.height,e);var n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Kf(this.boxes,(function(e){var n;r&&"chartArea"===e.position||(e.configure&&e.configure(),(n=t._layers).push.apply(n,(0,v.Z)(e._layers())))}),this),this._layers.forEach((function(e,t){e._idx=t})),this.notifyPlugins("afterLayout")}}},{key:"_updateDatasets",value:function(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(var t=0,n=this.data.datasets.length;t<n;++t)this.getDatasetMeta(t).controller.configure();for(var r=0,a=this.data.datasets.length;r<a;++r)this._updateDataset(r,sp(e)?e({datasetIndex:r}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}},{key:"_updateDataset",value:function(e,t){var n=this.getDatasetMeta(e),r={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}},{key:"render",value:function(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(tv.has(this)?this.attached&&!tv.running(this)&&tv.start(this):(this.draw(),ny({chart:this})))}},{key:"draw",value:function(){var e;if(this._resizeBeforeDraw){var t=this._resizeBeforeDraw,n=t.width,r=t.height;this._resize(n,r),this._resizeBeforeDraw=null}if(this.clear(),!(this.width<=0||this.height<=0)&&!1!==this.notifyPlugins("beforeDraw",{cancelable:!0})){var a=this._layers;for(e=0;e<a.length&&a[e].z<=0;++e)a[e].draw(this.chartArea);for(this._drawDatasets();e<a.length;++e)a[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}}},{key:"_getSortedDatasetMetas",value:function(e){var t,n,r=this._sortedMetasets,a=[];for(t=0,n=r.length;t<n;++t){var i=r[t];e&&!i.visible||a.push(i)}return a}},{key:"getSortedVisibleDatasetMetas",value:function(){return this._getSortedDatasetMetas(!0)}},{key:"_drawDatasets",value:function(){if(!1!==this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})){for(var e=this.getSortedVisibleDatasetMetas(),t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}}},{key:"_drawDataset",value:function(e){var t=this.ctx,n=e._clip,r=!n.disabled,a=this.chartArea,i={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",i)&&(r&&Ph(t,{left:!1===n.left?0:a.left-n.left,right:!1===n.right?this.width:a.right+n.right,top:!1===n.top?0:a.top-n.top,bottom:!1===n.bottom?this.height:a.bottom+n.bottom}),e.controller.draw(),r&&Dh(t),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}},{key:"isPointInArea",value:function(e){return Rh(e,this.chartArea,this._minPadding)}},{key:"getElementsAtEventForMode",value:function(e,t,n,r){var a=Wv.modes[t];return"function"===typeof a?a(this,e,n,r):[]}},{key:"getDatasetMeta",value:function(e){var t=this.data.datasets[e],n=this._metasets,r=n.filter((function(e){return e&&e._dataset===t})).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(r)),r}},{key:"getContext",value:function(){return this.$context||(this.$context=Qh(null,{chart:this,type:"chart"}))}},{key:"getVisibleDatasetCount",value:function(){return this.getSortedVisibleDatasetMetas().length}},{key:"isDatasetVisible",value:function(e){var t=this.data.datasets[e];if(!t)return!1;var n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}},{key:"setDatasetVisibility",value:function(e,t){this.getDatasetMeta(e).hidden=!t}},{key:"toggleDataVisibility",value:function(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}},{key:"getDataVisibility",value:function(e){return!this._hiddenIndices[e]}},{key:"_updateVisibility",value:function(e,t,n){var r=n?"show":"hide",a=this.getDatasetMeta(e),i=a.controller._resolveAnimations(void 0,r);op(t)?(a.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),i.update(a,{visible:n}),this.update((function(t){return t.datasetIndex===e?r:void 0})))}},{key:"hide",value:function(e,t){this._updateVisibility(e,t,!1)}},{key:"show",value:function(e,t){this._updateVisibility(e,t,!0)}},{key:"_destroyDatasetMeta",value:function(e){var t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}},{key:"_stop",value:function(){var e,t;for(this.stop(),tv.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}},{key:"destroy",value:function(){this.notifyPlugins("beforeDestroy");var e=this.canvas,t=this.ctx;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Nh(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete iy[this.id],this.notifyPlugins("afterDestroy")}},{key:"toBase64Image",value:function(){var e;return(e=this.canvas).toDataURL.apply(e,arguments)}},{key:"bindEvents",value:function(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}},{key:"bindUserEvents",value:function(){var e=this,t=this._listeners,n=this.platform,r=function(t,n,r){t.offsetX=n,t.offsetY=r,e._eventHandler(t)};Kf(this.options.events,(function(a){return function(r,a){n.addEventListener(e,r,a),t[r]=a}(a,r)}))}},{key:"bindResponsiveEvents",value:function(){var e=this;this._responsiveListeners||(this._responsiveListeners={});var t,n=this._responsiveListeners,r=this.platform,a=function(t,a){r.addEventListener(e,t,a),n[t]=a},i=function(t,a){n[t]&&(r.removeEventListener(e,t,a),delete n[t])},o=function(t,n){e.canvas&&e.resize(t,n)},s=function n(){i("attach",n),e.attached=!0,e.resize(),a("resize",o),a("detach",t)};t=function(){e.attached=!1,i("resize",o),e._stop(),e._resize(0,0),a("attach",s)},r.isAttached(this.canvas)?s():t()}},{key:"unbindEvents",value:function(){var e=this;Kf(this._listeners,(function(t,n){e.platform.removeEventListener(e,n,t)})),this._listeners={},Kf(this._responsiveListeners,(function(t,n){e.platform.removeEventListener(e,n,t)})),this._responsiveListeners=void 0}},{key:"updateHoverStyle",value:function(e,t,n){var r,a,i,o=n?"set":"remove";for("dataset"===t&&this.getDatasetMeta(e[0].datasetIndex).controller["_"+o+"DatasetHoverStyle"](),a=0,i=e.length;a<i;++a){var s=(r=e[a])&&this.getDatasetMeta(r.datasetIndex).controller;s&&s[o+"HoverStyle"](r.element,r.datasetIndex,r.index)}}},{key:"getActiveElements",value:function(){return this._active||[]}},{key:"setActiveElements",value:function(e){var t=this,n=this._active||[],r=e.map((function(e){var n=e.datasetIndex,r=e.index,a=t.getDatasetMeta(n);if(!a)throw new Error("No dataset found at index "+n);return{datasetIndex:n,element:a.data[r],index:r}}));!Yf(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}},{key:"notifyPlugins",value:function(e,t,n){return this._plugins.notify(this,e,t,n)}},{key:"_updateHoverStyles",value:function(e,t,n){var r=this.options.hover,a=function(e,t){return e.filter((function(e){return!t.some((function(t){return e.datasetIndex===t.datasetIndex&&e.index===t.index}))}))},i=a(t,e),o=n?e:a(e,t);i.length&&this.updateHoverStyle(i,r.mode,!1),o.length&&r.mode&&this.updateHoverStyle(o,r.mode,!0)}},{key:"_eventHandler",value:function(e,t){var n=this,r={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},a=function(t){return(t.options.events||n.options.events).includes(e.native.type)};if(!1!==this.notifyPlugins("beforeEvent",r,a)){var i=this._handleEvent(e,t,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,a),(i||r.changed)&&this.render(),this}}},{key:"_handleEvent",value:function(e,t,n){var r=this._active,a=void 0===r?[]:r,i=this.options,o=t,s=this._getActiveElements(e,a,n,o),u=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),c=function(e,t,n,r){return n&&"mouseout"!==e.type?r?t:e:null}(e,this._lastEvent,n,u);n&&(this._lastEvent=null,Xf(i.onHover,[e,s,this],this),u&&Xf(i.onClick,[e,s,this],this));var l=!Yf(s,a);return(l||t)&&(this._active=s,this._updateHoverStyles(s,a,t)),this._lastEvent=c,l}},{key:"_getActiveElements",value:function(e,t,n,r){if("mouseout"===e.type)return[];if(!n)return t;var a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,r)}}]),e}(),cy=function(){return Kf(uy.instances,(function(e){return e._plugins.invalidate()}))},ly=!0;function dy(e,t,n){var r=t.startAngle,a=t.pixelMargin,i=t.x,o=t.y,s=t.outerRadius,u=t.innerRadius,c=a/s;e.beginPath(),e.arc(i,o,s,r-c,n+c),u>a?(c=a/u,e.arc(i,o,u,n+c,r-c,!0)):e.arc(i,o,a,n+hp,r-hp),e.closePath(),e.clip()}function fy(e,t,n,r){var a=function(e){return Gh(e,["outerStart","outerEnd","innerStart","innerEnd"])}(e.options.borderRadius),i=(n-t)/2,o=Math.min(i,r*t/2),s=function(e){var t=(n-Math.min(i,e))*r/2;return Ap(e,0,Math.min(i,t))};return{outerStart:s(a.outerStart),outerEnd:s(a.outerEnd),innerStart:Ap(a.innerStart,0,o),innerEnd:Ap(a.innerEnd,0,o)}}function py(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function hy(e,t,n,r,a){var i=t.x,o=t.y,s=t.startAngle,u=t.pixelMargin,c=t.innerRadius,l=Math.max(t.outerRadius+r+n-u,0),d=c>0?c+r+n+u:0,f=0,p=a-s;if(r){var h=((c>0?c-r:0)+(l>0?l-r:0))/2;f=(p-(0!==h?p*h/(h+r):p))/2}var m=(p-Math.max(.001,p*l-n/cp)/l)/2,v=s+m+f,g=a-m-f,y=fy(t,d,l,g-v),b=y.outerStart,x=y.outerEnd,k=y.innerStart,w=y.innerEnd,S=l-b,C=l-x,_=v+b/S,I=g-x/C,T=d+k,E=d+w,N=v+k/T,O=g-w/E;if(e.beginPath(),e.arc(i,o,l,_,I),x>0){var A=py(C,I,i,o);e.arc(A.x,A.y,x,I,g+hp)}var R=py(E,g,i,o);if(e.lineTo(R.x,R.y),w>0){var P=py(E,O,i,o);e.arc(P.x,P.y,w,g+hp,O+Math.PI)}if(e.arc(i,o,d,g-w/d,v+k/d,!0),k>0){var D=py(T,N,i,o);e.arc(D.x,D.y,k,N+Math.PI,v-hp)}var B=py(S,v,i,o);if(e.lineTo(B.x,B.y),b>0){var M=py(S,_,i,o);e.arc(M.x,M.y,b,v-hp,_)}e.closePath()}function my(e,t,n,r,a){var i=t.options,o=i.borderWidth,s=i.borderJoinStyle,u="inner"===i.borderAlign;o&&(u?(e.lineWidth=2*o,e.lineJoin=s||"round"):(e.lineWidth=o,e.lineJoin=s||"bevel"),t.fullCircles&&function(e,t,n){var r,a=t.x,i=t.y,o=t.startAngle,s=t.pixelMargin,u=t.fullCircles,c=Math.max(t.outerRadius-s,0),l=t.innerRadius+s;for(n&&dy(e,t,o+lp),e.beginPath(),e.arc(a,i,l,o+lp,o,!0),r=0;r<u;++r)e.stroke();for(e.beginPath(),e.arc(a,i,c,o,o+lp),r=0;r<u;++r)e.stroke()}(e,t,u),u&&dy(e,t,a),hy(e,t,n,r,a),e.stroke())}Object.defineProperties(uy,{defaults:{enumerable:ly,value:_h},instances:{enumerable:ly,value:iy},overrides:{enumerable:ly,value:xh},registry:{enumerable:ly,value:Fg},version:{enumerable:ly,value:"3.8.2"},getChart:{enumerable:ly,value:oy},register:{enumerable:ly,value:function(){Fg.add.apply(Fg,arguments),cy()}},unregister:{enumerable:ly,value:function(){Fg.remove.apply(Fg,arguments),cy()}}});var vy=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this)).options=void 0,r.circumference=void 0,r.startAngle=void 0,r.endAngle=void 0,r.innerRadius=void 0,r.outerRadius=void 0,r.pixelMargin=0,r.fullCircles=0,e&&Object.assign((0,y.Z)(r),e),r}return(0,l.Z)(n,[{key:"inRange",value:function(e,t,n){var r=Ip(this.getProps(["x","y"],n),{x:e,y:t}),a=r.angle,i=r.distance,o=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),s=o.startAngle,u=o.endAngle,c=o.innerRadius,l=o.outerRadius,d=o.circumference,f=this.options.spacing/2,p=Hf(d,u-s)>=lp||Op(a,s,u),h=Rp(i,c+f,l+f);return p&&h}},{key:"getCenterPoint",value:function(e){var t=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],e),n=t.x,r=t.y,a=t.startAngle,i=t.endAngle,o=t.innerRadius,s=t.outerRadius,u=this.options,c=u.offset,l=(a+i)/2,d=(o+s+u.spacing+c)/2;return{x:n+Math.cos(l)*d,y:r+Math.sin(l)*d}}},{key:"tooltipPosition",value:function(e){return this.getCenterPoint(e)}},{key:"draw",value:function(e){var t=this.options,n=this.circumference,r=(t.offset||0)/2,a=(t.spacing||0)/2;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>lp?Math.floor(n/lp):0,!(0===n||this.innerRadius<0||this.outerRadius<0)){e.save();var i=0;if(r){i=r/2;var o=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(o)*i,Math.sin(o)*i),this.circumference>=cp&&(i=r)}e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor;var s=function(e,t,n,r){var a=t.fullCircles,i=t.startAngle,o=t.circumference,s=t.endAngle;if(a){hy(e,t,n,r,i+lp);for(var u=0;u<a;++u)e.fill();isNaN(o)||(s=i+o%lp,o%lp===0&&(s+=lp))}return hy(e,t,n,r,s),e.fill(),s}(e,this,i,a);my(e,this,i,a,s),e.restore()}}}]),n}(Sg);function gy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=Hf(n.borderCapStyle,t.borderCapStyle),e.setLineDash(Hf(n.borderDash,t.borderDash)),e.lineDashOffset=Hf(n.borderDashOffset,t.borderDashOffset),e.lineJoin=Hf(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=Hf(n.borderWidth,t.borderWidth),e.strokeStyle=Hf(n.borderColor,t.borderColor)}function yy(e,t,n){e.lineTo(n.x,n.y)}function by(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.length,a=n.start,i=void 0===a?0:a,o=n.end,s=void 0===o?r-1:o,u=t.start,c=t.end,l=Math.max(i,u),d=Math.min(s,c),f=i<u&&s<u||i>c&&s>c;return{count:r,start:l,loop:t.loop,ilen:d<l&&!f?r+d-l:d-l}}function xy(e,t,n,r){var a,i,o,s=t.points,u=t.options,c=by(s,n,r),l=c.count,d=c.start,f=c.loop,p=c.ilen,h=function(e){return e.stepped?Bh:e.tension||"monotone"===e.cubicInterpolationMode?Mh:yy}(u),m=r||{},v=m.move,g=void 0===v||v,y=m.reverse;for(a=0;a<=p;++a)(i=s[(d+(y?p-a:a))%l]).skip||(g?(e.moveTo(i.x,i.y),g=!1):h(e,o,i,y,u.stepped),o=i);return f&&h(e,o,i=s[(d+(y?p:0))%l],y,u.stepped),!!f}function ky(e,t,n,r){var a,i,o,s,u,c,l=t.points,d=by(l,n,r),f=d.count,p=d.start,h=d.ilen,m=r||{},v=m.move,g=void 0===v||v,y=m.reverse,b=0,x=0,k=function(e){return(p+(y?h-e:e))%f},w=function(){s!==u&&(e.lineTo(b,u),e.lineTo(b,s),e.lineTo(b,c))};for(g&&(i=l[k(0)],e.moveTo(i.x,i.y)),a=0;a<=h;++a)if(!(i=l[k(a)]).skip){var S=i.x,C=i.y,_=0|S;_===o?(C<s?s=C:C>u&&(u=C),b=(x*b+S)/++x):(w(),e.lineTo(S,C),o=_,x=0,s=u=C),c=C}w()}function wy(e){var t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?ky:xy}vy.id="arc",vy.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0},vy.defaultRoutes={backgroundColor:"backgroundColor"};var Sy="function"===typeof Path2D;function Cy(e,t,n,r){Sy&&!t.options.segment?function(e,t,n,r){var a=t._path;a||(a=t._path=new Path2D,t.path(a,n,r)&&a.closePath()),gy(e,t.options),e.stroke(a)}(e,t,n,r):function(e,t,n,r){var a,i=t.segments,o=t.options,s=wy(t),u=(0,h.Z)(i);try{for(u.s();!(a=u.n()).done;){var c=a.value;gy(e,o,c.style),e.beginPath(),s(e,t,c,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}}catch(Nx){u.e(Nx)}finally{u.f()}}(e,t,n,r)}var _y=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this)).animated=!0,r.options=void 0,r._chart=void 0,r._loop=void 0,r._fullLoop=void 0,r._path=void 0,r._points=void 0,r._segments=void 0,r._decimated=!1,r._pointsUpdated=!1,r._datasetIndex=void 0,e&&Object.assign((0,y.Z)(r),e),r}return(0,l.Z)(n,[{key:"updateControlPoints",value:function(e,t){var n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){var r=n.spanGaps?this._loop:this._fullLoop;Im(this._points,n,e,r,t),this._pointsUpdated=!0}}},{key:"points",get:function(){return this._points},set:function(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}},{key:"segments",get:function(){return this._segments||(this._segments=function(e,t){var n=e.points,r=e.options.spanGaps,a=n.length;if(!a)return[];var i=!!e._loop,o=function(e,t,n,r){var a=0,i=t-1;if(n&&!r)for(;a<t&&!e[a].skip;)a++;for(;a<t&&e[a].skip;)a++;for(a%=t,n&&(i+=a);i>a&&e[i%t].skip;)i--;return{start:a,end:i%=t}}(n,a,i,r),s=o.start,u=o.end;return Qm(e,!0===r?[{start:s,end:u,loop:i}]:function(e,t,n,r){var a,i=e.length,o=[],s=t,u=e[t];for(a=t+1;a<=n;++a){var c=e[a%i];c.skip||c.stop?u.skip||(r=!1,o.push({start:t%i,end:(a-1)%i,loop:r}),t=s=c.stop?a:null):(s=a,u.skip&&(t=a)),u=c}return null!==s&&o.push({start:t%i,end:s%i,loop:r}),o}(n,s,u<s?u+a:u,!!e._fullLoop&&0===s&&u===a-1),n,t)}(this,this.options.segment))}},{key:"first",value:function(){var e=this.segments,t=this.points;return e.length&&t[e[0].start]}},{key:"last",value:function(){var e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}},{key:"interpolate",value:function(e,t){var n=this.options,r=e[t],a=this.points,i=Ym(this,{property:t,start:r,end:r});if(i.length){var o,s,u=[],c=function(e){return e.stepped?zm:e.tension||"monotone"===e.cubicInterpolationMode?Zm:Vm}(n);for(o=0,s=i.length;o<s;++o){var l=i[o],d=l.start,f=l.end,p=a[d],h=a[f];if(p!==h){var m=c(p,h,Math.abs((r-p[t])/(h[t]-p[t])),n.stepped);m[t]=e[t],u.push(m)}else u.push(p)}return 1===u.length?u[0]:u}}},{key:"pathSegment",value:function(e,t,n){return wy(this)(e,this,t,n)}},{key:"path",value:function(e,t,n){var r=this.segments,a=wy(this),i=this._loop;t=t||0,n=n||this.points.length-t;var o,s=(0,h.Z)(r);try{for(s.s();!(o=s.n()).done;){i&=a(e,this,o.value,{start:t,end:t+n-1})}}catch(Nx){s.e(Nx)}finally{s.f()}return!!i}},{key:"draw",value:function(e,t,n,r){var a=this.options||{};(this.points||[]).length&&a.borderWidth&&(e.save(),Cy(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}]),n}(Sg);function Iy(e,t,n,r){var a=e.options,i=e.getProps([n],r)[n];return Math.abs(t-i)<a.radius+a.hitRadius}_y.id="line",_y.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},_y.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},_y.descriptors={_scriptable:!0,_indexable:function(e){return"borderDash"!==e&&"fill"!==e}};var Ty=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this)).options=void 0,r.parsed=void 0,r.skip=void 0,r.stop=void 0,e&&Object.assign((0,y.Z)(r),e),r}return(0,l.Z)(n,[{key:"inRange",value:function(e,t,n){var r=this.options,a=this.getProps(["x","y"],n),i=a.x,o=a.y;return Math.pow(e-i,2)+Math.pow(t-o,2)<Math.pow(r.hitRadius+r.radius,2)}},{key:"inXRange",value:function(e,t){return Iy(this,e,"x",t)}},{key:"inYRange",value:function(e,t){return Iy(this,e,"y",t)}},{key:"getCenterPoint",value:function(e){var t=this.getProps(["x","y"],e);return{x:t.x,y:t.y}}},{key:"size",value:function(e){var t=(e=e||this.options||{}).radius||0;return 2*((t=Math.max(t,t&&e.hoverRadius||0))+(t&&e.borderWidth||0))}},{key:"draw",value:function(e,t){var n=this.options;this.skip||n.radius<.1||!Rh(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,Oh(e,n,this.x,this.y))}},{key:"getRange",value:function(){var e=this.options||{};return e.radius+e.hitRadius}}]),n}(Sg);function Ey(e,t){var n,r,a,i,o,s=e.getProps(["x","y","base","width","height"],t),u=s.x,c=s.y,l=s.base,d=s.width,f=s.height;return e.horizontal?(o=f/2,n=Math.min(u,l),r=Math.max(u,l),a=c-o,i=c+o):(n=u-(o=d/2),r=u+o,a=Math.min(c,l),i=Math.max(c,l)),{left:n,top:a,right:r,bottom:i}}function Ny(e,t,n,r){return e?0:Ap(t,n,r)}function Oy(e){var t=Ey(e),n=t.right-t.left,r=t.bottom-t.top,a=function(e,t,n){var r=e.options.borderWidth,a=e.borderSkipped,i=Hh(r);return{t:Ny(a.top,i.top,0,n),r:Ny(a.right,i.right,0,t),b:Ny(a.bottom,i.bottom,0,n),l:Ny(a.left,i.left,0,t)}}(e,n/2,r/2),i=function(e,t,n){var r=e.getProps(["enableBorderRadius"]).enableBorderRadius,a=e.options.borderRadius,i=qh(a),o=Math.min(t,n),s=e.borderSkipped,u=r||jf(a);return{topLeft:Ny(!u||s.top||s.left,i.topLeft,0,o),topRight:Ny(!u||s.top||s.right,i.topRight,0,o),bottomLeft:Ny(!u||s.bottom||s.left,i.bottomLeft,0,o),bottomRight:Ny(!u||s.bottom||s.right,i.bottomRight,0,o)}}(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r,radius:i},inner:{x:t.left+a.l,y:t.top+a.t,w:n-a.l-a.r,h:r-a.t-a.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(a.t,a.l)),topRight:Math.max(0,i.topRight-Math.max(a.t,a.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(a.b,a.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(a.b,a.r))}}}}function Ay(e,t,n,r){var a=null===t,i=null===n,o=e&&!(a&&i)&&Ey(e,r);return o&&(a||Rp(t,o.left,o.right))&&(i||Rp(n,o.top,o.bottom))}function Ry(e,t){e.rect(t.x,t.y,t.w,t.h)}function Py(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.x!==n.x?-t:0,a=e.y!==n.y?-t:0,i=(e.x+e.w!==n.x+n.w?t:0)-r,o=(e.y+e.h!==n.y+n.h?t:0)-a;return{x:e.x+r,y:e.y+a,w:e.w+i,h:e.h+o,radius:e.radius}}Ty.id="point",Ty.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},Ty.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var Dy=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this)).options=void 0,r.horizontal=void 0,r.base=void 0,r.width=void 0,r.height=void 0,r.inflateAmount=void 0,e&&Object.assign((0,y.Z)(r),e),r}return(0,l.Z)(n,[{key:"draw",value:function(e){var t,n=this.inflateAmount,r=this.options,a=r.borderColor,i=r.backgroundColor,o=Oy(this),s=o.inner,u=o.outer,c=(t=u.radius).topLeft||t.topRight||t.bottomLeft||t.bottomRight?zh:Ry;e.save(),u.w===s.w&&u.h===s.h||(e.beginPath(),c(e,Py(u,n,s)),e.clip(),c(e,Py(s,-n,u)),e.fillStyle=a,e.fill("evenodd")),e.beginPath(),c(e,Py(s,n)),e.fillStyle=i,e.fill(),e.restore()}},{key:"inRange",value:function(e,t,n){return Ay(this,e,t,n)}},{key:"inXRange",value:function(e,t){return Ay(this,e,null,t)}},{key:"inYRange",value:function(e,t){return Ay(this,null,e,t)}},{key:"getCenterPoint",value:function(e){var t=this.getProps(["x","y","base","horizontal"],e),n=t.x,r=t.y,a=t.base,i=t.horizontal;return{x:i?(n+a)/2:n,y:i?r:(r+a)/2}}},{key:"getRange",value:function(e){return"x"===e?this.width/2:this.height/2}}]),n}(Sg);Dy.id="bar",Dy.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},Dy.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};function By(e){if(e._decimated){var t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{value:t})}}function My(e){e.data.datasets.forEach((function(e){By(e)}))}var Fy={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:function(e,t,n){if(n.enabled){var r=e.width;e.data.datasets.forEach((function(t,a){var i=t._data,o=t.indexAxis,s=e.getDatasetMeta(a),u=i||t.data;if("y"!==Yh([o,e.options.indexAxis])&&s.controller.supportsDecimation){var c=e.scales[s.xAxisID];if(("linear"===c.type||"time"===c.type)&&!e.options.parsing){var l=function(e,t){var n=t.length,r=0,a=e.iScale,i=a.getUserBounds(),o=i.min,s=i.max,u=i.minDefined,c=i.maxDefined;return u&&(r=Ap(Jh(t,a.axis,o).lo,0,n-1)),{start:r,count:c?Ap(Jh(t,a.axis,s).hi+1,r,n)-r:n-r}}(s,u),d=l.start,f=l.count;if(f<=(n.threshold||4*r))By(t);else{var p;switch(Zf(i)&&(t._data=u,delete t.data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(e){this._data=e}})),n.algorithm){case"lttb":p=function(e,t,n,r,a){var i=a.samples||r;if(i>=n)return e.slice(t,t+n);var o,s,u,c,l,d=[],f=(n-2)/(i-2),p=0,h=t+n-1,m=t;for(d[p++]=e[m],o=0;o<i-2;o++){var v=0,g=0,y=void 0,b=Math.floor((o+1)*f)+1+t,x=Math.min(Math.floor((o+2)*f)+1,n)+t,k=x-b;for(y=b;y<x;y++)v+=e[y].x,g+=e[y].y;v/=k,g/=k;var w=Math.floor(o*f)+1+t,S=Math.min(Math.floor((o+1)*f)+1,n)+t,C=e[m],_=C.x,I=C.y;for(u=c=-1,y=w;y<S;y++)(c=.5*Math.abs((_-v)*(e[y].y-I)-(_-e[y].x)*(g-I)))>u&&(u=c,s=e[y],l=y);d[p++]=s,m=l}return d[p++]=e[h],d}(u,d,f,r,n);break;case"min-max":p=function(e,t,n,r){var a,i,o,s,u,c,l,d,f,p,h=0,m=0,v=[],g=t+n-1,y=e[t].x,b=e[g].x-y;for(a=t;a<t+n;++a){o=((i=e[a]).x-y)/b*r,s=i.y;var x=0|o;if(x===u)s<f?(f=s,c=a):s>p&&(p=s,l=a),h=(m*h+i.x)/++m;else{var k=a-1;if(!Zf(c)&&!Zf(l)){var w=Math.min(c,l),S=Math.max(c,l);w!==d&&w!==k&&v.push(Df(Df({},e[w]),{},{x:h})),S!==d&&S!==k&&v.push(Df(Df({},e[S]),{},{x:h}))}a>0&&k!==d&&v.push(e[k]),v.push(i),u=x,m=0,f=p=s,c=l=d=a}}return v}(u,d,f,r);break;default:throw new Error("Unsupported decimation algorithm '".concat(n.algorithm,"'"))}t._decimated=p}}}}))}else My(e)},destroy:function(e){My(e)}};function Ly(e,t,n,r){if(!r){var a=t[e],i=n[e];return"angle"===e&&(a=Np(a),i=Np(i)),{property:e,start:a,end:i}}}function Vy(e,t,n){for(;t>e;t--){var r=n[t];if(!isNaN(r.x)&&!isNaN(r.y))break}return t}function zy(e,t,n,r){return e&&t?r(e[n],t[n]):e?e[n]:t?t[n]:0}function Zy(e,t){var n=[],r=!1;return Uf(e)?(r=!0,n=e):n=function(e,t){var n=e||{},r=n.x,a=void 0===r?null:r,i=n.y,o=void 0===i?null:i,s=t.points,u=[];return t.segments.forEach((function(e){var t=e.start,n=e.end;n=Vy(t,n,s);var r=s[t],i=s[n];null!==o?(u.push({x:r.x,y:o}),u.push({x:i.x,y:o})):null!==a&&(u.push({x:a,y:r.y}),u.push({x:a,y:i.y}))})),u}(e,t),n.length?new _y({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function Uy(e){return e&&!1!==e.fill}function jy(e,t,n){var r,a=e[t].fill,i=[t];if(!n)return a;for(;!1!==a&&-1===i.indexOf(a);){if(!Wf(a))return a;if(!(r=e[a]))return!1;if(r.visible)return a;i.push(a),a=r.fill}return!1}function Wy(e,t,n){var r=function(e){var t=e.options,n=t.fill,r=Hf(n&&n.target,n);void 0===r&&(r=!!t.backgroundColor);if(!1===r||null===r)return!1;if(!0===r)return"origin";return r}(e);if(jf(r))return!isNaN(r.value)&&r;var a=parseFloat(r);return Wf(a)&&Math.floor(a)===a?function(e,t,n,r){"-"!==e&&"+"!==e||(n=t+n);if(n===t||n<0||n>=r)return!1;return n}(r[0],t,a,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function Gy(e,t,n){for(var r=[],a=0;a<n.length;a++){var i=Hy(n[a],t,"x"),o=i.first,s=i.last,u=i.point;if(!(!u||o&&s))if(o)r.unshift(u);else if(e.push(u),!s)break}e.push.apply(e,r)}function Hy(e,t,n){var r=e.interpolate(t,n);if(!r)return{};for(var a=r[n],i=e.segments,o=e.points,s=!1,u=!1,c=0;c<i.length;c++){var l=i[c],d=o[l.start][n],f=o[l.end][n];if(Rp(a,d,f)){s=a===d,u=a===f;break}}return{first:s,last:u,point:r}}var qy=function(){function e(t){(0,c.Z)(this,e),this.x=t.x,this.y=t.y,this.radius=t.radius}return(0,l.Z)(e,[{key:"pathSegment",value:function(e,t,n){var r=this.x,a=this.y,i=this.radius;return t=t||{start:0,end:lp},e.arc(r,a,i,t.end,t.start,!0),!n.bounds}},{key:"interpolate",value:function(e){var t=this.x,n=this.y,r=this.radius,a=e.angle;return{x:t+Math.cos(a)*r,y:n+Math.sin(a)*r,angle:a}}}]),e}();function Xy(e){var t=e.chart,n=e.fill,r=e.line;if(Wf(n))return function(e,t){var n=e.getDatasetMeta(t);return n&&e.isDatasetVisible(t)?n.dataset:null}(t,n);if("stack"===n)return function(e){var t=e.scale,n=e.index,r=e.line,a=[],i=r.segments,o=r.points,s=function(e,t){for(var n=[],r=e.getMatchingVisibleMetas("line"),a=0;a<r.length;a++){var i=r[a];if(i.index===t)break;i.hidden||n.unshift(i.dataset)}return n}(t,n);s.push(Zy({x:null,y:t.bottom},r));for(var u=0;u<i.length;u++)for(var c=i[u],l=c.start;l<=c.end;l++)Gy(a,o[l],s);return new _y({points:a,options:{}})}(e);if("shape"===n)return!0;var a=function(e){if((e.scale||{}).getPointPositionForValue)return function(e){var t=e.scale,n=e.fill,r=t.options,a=t.getLabels().length,i=r.reverse?t.max:t.min,o=function(e,t,n){return"start"===e?n:"end"===e?t.options.reverse?t.min:t.max:jf(e)?e.value:t.getBaseValue()}(n,t,i),s=[];if(r.grid.circular){var u=t.getPointPositionForValue(0,i);return new qy({x:u.x,y:u.y,radius:t.getDistanceFromCenterForValue(o)})}for(var c=0;c<a;++c)s.push(t.getPointPositionForValue(c,o));return s}(e);return function(e){var t=e.scale,n=void 0===t?{}:t,r=function(e,t){var n=null;return"start"===e?n=t.bottom:"end"===e?n=t.top:jf(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}(e.fill,n);if(Wf(r)){var a=n.isHorizontal();return{x:a?r:null,y:a?null:r}}return null}(e)}(e);return a instanceof qy?a:Zy(a,r)}function Ky(e,t,n){var r=Xy(t),a=t.line,i=t.scale,o=t.axis,s=a.options,u=s.fill,c=s.backgroundColor,l=u||{},d=l.above,f=void 0===d?c:d,p=l.below,h=void 0===p?c:p;r&&a.points.length&&(Ph(e,n),function(e,t){var n=t.line,r=t.target,a=t.above,i=t.below,o=t.area,s=t.scale,u=n._loop?"angle":t.axis;e.save(),"x"===u&&i!==a&&(Yy(e,r,o.top),Qy(e,{line:n,target:r,color:a,scale:s,property:u}),e.restore(),e.save(),Yy(e,r,o.bottom));Qy(e,{line:n,target:r,color:i,scale:s,property:u}),e.restore()}(e,{line:a,target:r,above:f,below:h,area:n,scale:i,axis:o}),Dh(e))}function Yy(e,t,n){var r=t.segments,a=t.points,i=!0,o=!1;e.beginPath();var s,u=(0,h.Z)(r);try{for(u.s();!(s=u.n()).done;){var c=s.value,l=c.start,d=c.end,f=a[l],p=a[Vy(l,d,a)];i?(e.moveTo(f.x,f.y),i=!1):(e.lineTo(f.x,n),e.lineTo(f.x,f.y)),(o=!!t.pathSegment(e,c,{move:o}))?e.closePath():e.lineTo(p.x,n)}}catch(Nx){u.e(Nx)}finally{u.f()}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function Qy(e,t){var n,r=t.line,a=t.target,i=t.property,o=t.color,s=t.scale,u=function(e,t,n){var r,a=e.segments,i=e.points,o=t.points,s=[],u=(0,h.Z)(a);try{for(u.s();!(r=u.n()).done;){var c=r.value,l=c.start,d=c.end;d=Vy(l,d,i);var f=Ly(n,i[l],i[d],c.loop);if(t.segments){var p,m=Ym(t,f),v=(0,h.Z)(m);try{for(v.s();!(p=v.n()).done;){var g,y=p.value,b=Ly(n,o[y.start],o[y.end],y.loop),x=Km(c,i,b),k=(0,h.Z)(x);try{for(k.s();!(g=k.n()).done;){var w=g.value;s.push({source:w,target:y,start:Vu({},n,zy(f,b,"start",Math.max)),end:Vu({},n,zy(f,b,"end",Math.min))})}}catch(Nx){k.e(Nx)}finally{k.f()}}}catch(Nx){v.e(Nx)}finally{v.f()}}else s.push({source:c,target:f,start:i[l],end:i[d]})}}catch(Nx){u.e(Nx)}finally{u.f()}return s}(r,a,i),c=(0,h.Z)(u);try{for(c.s();!(n=c.n()).done;){var l=n.value,d=l.source,f=l.target,p=l.start,m=l.end,v=d.style,g=(v=void 0===v?{}:v).backgroundColor,y=void 0===g?o:g,b=!0!==a;e.save(),e.fillStyle=y,$y(e,s,b&&Ly(i,p,m)),e.beginPath();var x=!!r.pathSegment(e,d),k=void 0;if(b){x?e.closePath():Jy(e,a,m,i);var w=!!a.pathSegment(e,f,{move:x,reverse:!0});(k=x&&w)||Jy(e,a,p,i)}e.closePath(),e.fill(k?"evenodd":"nonzero"),e.restore()}}catch(Nx){c.e(Nx)}finally{c.f()}}function $y(e,t,n){var r=t.chart.chartArea,a=r.top,i=r.bottom,o=n||{},s=o.property,u=o.start,c=o.end;"x"===s&&(e.beginPath(),e.rect(u,a,c-u,i-a),e.clip())}function Jy(e,t,n,r){var a=t.interpolate(n,r);a&&e.lineTo(a.x,a.y)}var eb={id:"filler",afterDatasetsUpdate:function(e,t,n){var r,a,i,o,s=(e.data.datasets||[]).length,u=[];for(a=0;a<s;++a)o=null,(i=(r=e.getDatasetMeta(a)).dataset)&&i.options&&i instanceof _y&&(o={visible:e.isDatasetVisible(a),index:a,fill:Wy(i,a,s),chart:e,axis:r.controller.options.indexAxis,scale:r.vScale,line:i}),r.$filler=o,u.push(o);for(a=0;a<s;++a)(o=u[a])&&!1!==o.fill&&(o.fill=jy(u,a,n.propagate))},beforeDraw:function(e,t,n){for(var r="beforeDraw"===n.drawTime,a=e.getSortedVisibleDatasetMetas(),i=e.chartArea,o=a.length-1;o>=0;--o){var s=a[o].$filler;s&&(s.line.updateControlPoints(i,s.axis),r&&s.fill&&Ky(e.ctx,s,i))}},beforeDatasetsDraw:function(e,t,n){if("beforeDatasetsDraw"===n.drawTime)for(var r=e.getSortedVisibleDatasetMetas(),a=r.length-1;a>=0;--a){var i=r[a].$filler;Uy(i)&&Ky(e.ctx,i,e.chartArea)}},beforeDatasetDraw:function(e,t,n){var r=t.meta.$filler;Uy(r)&&"beforeDatasetDraw"===n.drawTime&&Ky(e.ctx,r,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},tb=function(e,t){var n=e.boxHeight,r=void 0===n?t:n,a=e.boxWidth,i=void 0===a?t:a;return e.usePointStyle&&(r=Math.min(r,t),i=e.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:r,itemHeight:Math.max(t,r)}},nb=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this))._added=!1,r.legendHitBoxes=[],r._hoveredItem=null,r.doughnutMode=!1,r.chart=e.chart,r.options=e.options,r.ctx=e.ctx,r.legendItems=void 0,r.columnSizes=void 0,r.lineWidths=void 0,r.maxHeight=void 0,r.maxWidth=void 0,r.top=void 0,r.bottom=void 0,r.left=void 0,r.right=void 0,r.height=void 0,r.width=void 0,r._margins=void 0,r.position=void 0,r.weight=void 0,r.fullSize=void 0,r}return(0,l.Z)(n,[{key:"update",value:function(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}},{key:"setDimensions",value:function(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}},{key:"buildLabels",value:function(){var e=this,t=this.options.labels||{},n=Xf(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter((function(n){return t.filter(n,e.chart.data)}))),t.sort&&(n=n.sort((function(n,r){return t.sort(n,r,e.chart.data)}))),this.options.reverse&&n.reverse(),this.legendItems=n}},{key:"fit",value:function(){var e=this.options,t=this.ctx;if(e.display){var n,r,a=e.labels,i=Kh(a.font),o=i.size,s=this._computeTitleHeight(),u=tb(a,o),c=u.boxWidth,l=u.itemHeight;t.font=i.string,this.isHorizontal()?(n=this.maxWidth,r=this._fitRows(s,o,c,l)+10):(r=this.maxHeight,n=this._fitCols(s,o,c,l)+10),this.width=Math.min(n,e.maxWidth||this.maxWidth),this.height=Math.min(r,e.maxHeight||this.maxHeight)}else this.width=this.height=0}},{key:"_fitRows",value:function(e,t,n,r){var a=this.ctx,i=this.maxWidth,o=this.options.labels.padding,s=this.legendHitBoxes=[],u=this.lineWidths=[0],c=r+o,l=e;a.textAlign="left",a.textBaseline="middle";var d=-1,f=-c;return this.legendItems.forEach((function(e,p){var h=n+t/2+a.measureText(e.text).width;(0===p||u[u.length-1]+h+2*o>i)&&(l+=c,u[u.length-(p>0?0:1)]=0,f+=c,d++),s[p]={left:0,top:f,row:d,width:h,height:r},u[u.length-1]+=h+o})),l}},{key:"_fitCols",value:function(e,t,n,r){var a=this.ctx,i=this.maxHeight,o=this.options.labels.padding,s=this.legendHitBoxes=[],u=this.columnSizes=[],c=i-e,l=o,d=0,f=0,p=0,h=0;return this.legendItems.forEach((function(e,i){var m=n+t/2+a.measureText(e.text).width;i>0&&f+r+2*o>c&&(l+=d+o,u.push({width:d,height:f}),p+=d+o,h++,d=f=0),s[i]={left:p,top:f,col:h,width:m,height:r},d=Math.max(d,m),f+=r+o})),l+=d,u.push({width:d,height:f}),l}},{key:"adjustHitBoxes",value:function(){if(this.options.display){var e=this._computeTitleHeight(),t=this.legendHitBoxes,n=this.options,r=n.align,a=n.labels.padding,i=Wm(n.rtl,this.left,this.width);if(this.isHorizontal()){var o,s=0,u=Lf(r,this.left+a,this.right-this.lineWidths[s]),c=(0,h.Z)(t);try{for(c.s();!(o=c.n()).done;){var l=o.value;s!==l.row&&(s=l.row,u=Lf(r,this.left+a,this.right-this.lineWidths[s])),l.top+=this.top+e+a,l.left=i.leftForLtr(i.x(u),l.width),u+=l.width+a}}catch(Nx){c.e(Nx)}finally{c.f()}}else{var d,f=0,p=Lf(r,this.top+e+a,this.bottom-this.columnSizes[f].height),m=(0,h.Z)(t);try{for(m.s();!(d=m.n()).done;){var v=d.value;v.col!==f&&(f=v.col,p=Lf(r,this.top+e+a,this.bottom-this.columnSizes[f].height)),v.top=p,v.left+=this.left+a,v.left=i.leftForLtr(i.x(v.left),v.width),p+=v.height+a}}catch(Nx){m.e(Nx)}finally{m.f()}}}}},{key:"isHorizontal",value:function(){return"top"===this.options.position||"bottom"===this.options.position}},{key:"draw",value:function(){if(this.options.display){var e=this.ctx;Ph(e,this),this._draw(),Dh(e)}}},{key:"_draw",value:function(){var e,t=this,n=this.options,r=this.columnSizes,a=this.lineWidths,i=this.ctx,o=n.align,s=n.labels,u=_h.color,c=Wm(n.rtl,this.left,this.width),l=Kh(s.font),d=s.color,f=s.padding,p=l.size,h=p/2;this.drawTitle(),i.textAlign=c.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;var m=tb(s,p),v=m.boxWidth,g=m.boxHeight,y=m.itemHeight,b=this.isHorizontal(),x=this._computeTitleHeight();e=b?{x:Lf(o,this.left+f,this.right-a[0]),y:this.top+f+x,line:0}:{x:this.left+f,y:Lf(o,this.top+x+f,this.bottom-r[0].height),line:0},Gm(this.ctx,n.textDirection);var k=y+f;this.legendItems.forEach((function(m,w){i.strokeStyle=m.fontColor||d,i.fillStyle=m.fontColor||d;var S=i.measureText(m.text).width,C=c.textAlign(m.textAlign||(m.textAlign=s.textAlign)),_=v+h+S,I=e.x,T=e.y;c.setWidth(t.width),b?w>0&&I+_+f>t.right&&(T=e.y+=k,e.line++,I=e.x=Lf(o,t.left+f,t.right-a[e.line])):w>0&&T+k>t.bottom&&(I=e.x=I+r[e.line].width+f,e.line++,T=e.y=Lf(o,t.top+x+f,t.bottom-r[e.line].height)),function(e,t,n){if(!(isNaN(v)||v<=0||isNaN(g)||g<0)){i.save();var r=Hf(n.lineWidth,1);if(i.fillStyle=Hf(n.fillStyle,u),i.lineCap=Hf(n.lineCap,"butt"),i.lineDashOffset=Hf(n.lineDashOffset,0),i.lineJoin=Hf(n.lineJoin,"miter"),i.lineWidth=r,i.strokeStyle=Hf(n.strokeStyle,u),i.setLineDash(Hf(n.lineDash,[])),s.usePointStyle){var a={radius:g*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:r},o=c.xPlus(e,v/2);Ah(i,a,o,t+h,v)}else{var l=t+Math.max((p-g)/2,0),d=c.leftForLtr(e,v),f=qh(n.borderRadius);i.beginPath(),Object.values(f).some((function(e){return 0!==e}))?zh(i,{x:d,y:l,w:v,h:g,radius:f}):i.rect(d,l,v,g),i.fill(),0!==r&&i.stroke()}i.restore()}}(c.x(I),T,m),I=function(e,t,n,r){return e===(r?"left":"right")?n:"center"===e?(t+n)/2:t}(C,I+v+h,b?I+_:t.right,n.rtl),function(e,t,n){Fh(i,n.text,e,t+y/2,l,{strikethrough:n.hidden,textAlign:c.textAlign(n.textAlign)})}(c.x(I),T,m),b?e.x+=_+f:e.y+=k})),Hm(this.ctx,n.textDirection)}},{key:"drawTitle",value:function(){var e=this.options,t=e.title,n=Kh(t.font),r=Xh(t.padding);if(t.display){var a,i=Wm(e.rtl,this.left,this.width),o=this.ctx,s=t.position,u=n.size/2,c=r.top+u,l=this.left,d=this.width;if(this.isHorizontal())d=Math.max.apply(Math,(0,v.Z)(this.lineWidths)),a=this.top+c,l=Lf(e.align,l,this.right-d);else{var f=this.columnSizes.reduce((function(e,t){return Math.max(e,t.height)}),0);a=c+Lf(e.align,this.top,this.bottom-f-e.labels.padding-this._computeTitleHeight())}var p=Lf(s,l,l+d);o.textAlign=i.textAlign(Ff(s)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=n.string,Fh(o,t.text,p,a,n)}}},{key:"_computeTitleHeight",value:function(){var e=this.options.title,t=Kh(e.font),n=Xh(e.padding);return e.display?t.lineHeight+n.height:0}},{key:"_getLegendItemAt",value:function(e,t){var n,r,a;if(Rp(e,this.left,this.right)&&Rp(t,this.top,this.bottom))for(a=this.legendHitBoxes,n=0;n<a.length;++n)if(Rp(e,(r=a[n]).left,r.left+r.width)&&Rp(t,r.top,r.top+r.height))return this.legendItems[n];return null}},{key:"handleEvent",value:function(e){var t=this.options;if(function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t)){var n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){var r=this._hoveredItem,a=function(e,t){return null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index}(r,n);r&&!a&&Xf(t.onLeave,[e,r,this],this),this._hoveredItem=n,n&&!a&&Xf(t.onHover,[e,n,this],this)}else n&&Xf(t.onClick,[e,n,this],this)}}}]),n}(Sg);var rb={id:"legend",_element:nb,start:function(e,t,n){var r=e.legend=new nb({ctx:e.ctx,options:n,chart:e});ig(e,r,n),rg(e,r)},stop:function(e){ag(e,e.legend),delete e.legend},beforeUpdate:function(e,t,n){var r=e.legend;ig(e,r,n),r.options=n},afterUpdate:function(e){var t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent:function(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick:function(e,t,n){var r=t.datasetIndex,a=n.chart;a.isDatasetVisible(r)?(a.hide(r),t.hidden=!0):(a.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:function(e){return e.chart.options.color},boxWidth:40,padding:10,generateLabels:function(e){var t=e.data.datasets,n=e.legend.options.labels,r=n.usePointStyle,a=n.pointStyle,i=n.textAlign,o=n.color;return e._getSortedDatasetMetas().map((function(e){var n=e.controller.getStyle(r?0:void 0),s=Xh(n.borderWidth);return{text:t[e.index].label,fillStyle:n.backgroundColor,fontColor:o,hidden:!e.visible,lineCap:n.borderCapStyle,lineDash:n.borderDash,lineDashOffset:n.borderDashOffset,lineJoin:n.borderJoinStyle,lineWidth:(s.width+s.height)/4,strokeStyle:n.borderColor,pointStyle:a||n.pointStyle,rotation:n.rotation,textAlign:i||n.textAlign,borderRadius:0,datasetIndex:e.index}}),this)}},title:{color:function(e){return e.chart.options.color},display:!1,position:"center",text:""}},descriptors:{_scriptable:function(e){return!e.startsWith("on")},labels:{_scriptable:function(e){return!["generateLabels","filter","sort"].includes(e)}}}},ab=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this)).chart=e.chart,r.options=e.options,r.ctx=e.ctx,r._padding=void 0,r.top=void 0,r.bottom=void 0,r.left=void 0,r.right=void 0,r.width=void 0,r.height=void 0,r.position=void 0,r.weight=void 0,r.fullSize=void 0,r}return(0,l.Z)(n,[{key:"update",value:function(e,t){var n=this.options;if(this.left=0,this.top=0,n.display){this.width=this.right=e,this.height=this.bottom=t;var r=Uf(n.text)?n.text.length:1;this._padding=Xh(n.padding);var a=r*Kh(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}else this.width=this.height=this.right=this.bottom=0}},{key:"isHorizontal",value:function(){var e=this.options.position;return"top"===e||"bottom"===e}},{key:"_drawArgs",value:function(e){var t,n,r,a=this.top,i=this.left,o=this.bottom,s=this.right,u=this.options,c=u.align,l=0;return this.isHorizontal()?(n=Lf(c,i,s),r=a+e,t=s-i):("left"===u.position?(n=i+e,r=Lf(c,o,a),l=-.5*cp):(n=s-e,r=Lf(c,a,o),l=.5*cp),t=o-a),{titleX:n,titleY:r,maxWidth:t,rotation:l}}},{key:"draw",value:function(){var e=this.ctx,t=this.options;if(t.display){var n=Kh(t.font),r=n.lineHeight/2+this._padding.top,a=this._drawArgs(r),i=a.titleX,o=a.titleY,s=a.maxWidth,u=a.rotation;Fh(e,t.text,0,0,n,{color:t.color,maxWidth:s,rotation:u,textAlign:Ff(t.align),textBaseline:"middle",translation:[i,o]})}}}]),n}(Sg);var ib={id:"title",_element:ab,start:function(e,t,n){!function(e,t){var n=new ab({ctx:e.ctx,options:t,chart:e});ig(e,n,t),rg(e,n),e.titleBlock=n}(e,n)},stop:function(e){var t=e.titleBlock;ag(e,t),delete e.titleBlock},beforeUpdate:function(e,t,n){var r=e.titleBlock;ig(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},ob=new WeakMap,sb={id:"subtitle",start:function(e,t,n){var r=new ab({ctx:e.ctx,options:n,chart:e});ig(e,r,n),rg(e,r),ob.set(e,r)},stop:function(e){ag(e,ob.get(e)),ob.delete(e)},beforeUpdate:function(e,t,n){var r=ob.get(e);ig(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},ub={average:function(e){if(!e.length)return!1;var t,n,r=0,a=0,i=0;for(t=0,n=e.length;t<n;++t){var o=e[t].element;if(o&&o.hasValue()){var s=o.tooltipPosition();r+=s.x,a+=s.y,++i}}return{x:r/i,y:a/i}},nearest:function(e,t){if(!e.length)return!1;var n,r,a,i=t.x,o=t.y,s=Number.POSITIVE_INFINITY;for(n=0,r=e.length;n<r;++n){var u=e[n].element;if(u&&u.hasValue()){var c=Tp(t,u.getCenterPoint());c<s&&(s=c,a=u)}}if(a){var l=a.tooltipPosition();i=l.x,o=l.y}return{x:i,y:o}}};function cb(e,t){return t&&(Uf(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function lb(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function db(e,t){var n=t.element,r=t.datasetIndex,a=t.index,i=e.getDatasetMeta(r).controller,o=i.getLabelAndValue(a),s=o.label,u=o.value;return{chart:e,label:s,parsed:i.getParsed(a),raw:e.data.datasets[r].data[a],formattedValue:u,dataset:i.getDataset(),dataIndex:a,datasetIndex:r,element:n}}function fb(e,t){var n=e.chart.ctx,r=e.body,a=e.footer,i=e.title,o=t.boxWidth,s=t.boxHeight,u=Kh(t.bodyFont),c=Kh(t.titleFont),l=Kh(t.footerFont),d=i.length,f=a.length,p=r.length,h=Xh(t.padding),m=h.height,v=0,g=r.reduce((function(e,t){return e+t.before.length+t.lines.length+t.after.length}),0);(g+=e.beforeBody.length+e.afterBody.length,d&&(m+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),g)&&(m+=p*(t.displayColors?Math.max(s,u.lineHeight):u.lineHeight)+(g-p)*u.lineHeight+(g-1)*t.bodySpacing);f&&(m+=t.footerMarginTop+f*l.lineHeight+(f-1)*t.footerSpacing);var y=0,b=function(e){v=Math.max(v,n.measureText(e).width+y)};return n.save(),n.font=c.string,Kf(e.title,b),n.font=u.string,Kf(e.beforeBody.concat(e.afterBody),b),y=t.displayColors?o+2+t.boxPadding:0,Kf(r,(function(e){Kf(e.before,b),Kf(e.lines,b),Kf(e.after,b)})),y=0,n.font=l.string,Kf(e.footer,b),n.restore(),{width:v+=h.width,height:m}}function pb(e,t,n,r){var a=n.x,i=n.width,o=e.width,s=e.chartArea,u=s.left,c=s.right,l="center";return"center"===r?l=a<=(u+c)/2?"left":"right":a<=i/2?l="left":a>=o-i/2&&(l="right"),function(e,t,n,r){var a=r.x,i=r.width,o=n.caretSize+n.caretPadding;return"left"===e&&a+i+o>t.width||"right"===e&&a-i-o<0||void 0}(l,e,t,n)&&(l="center"),l}function hb(e,t,n){var r=n.yAlign||t.yAlign||function(e,t){var n=t.y,r=t.height;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||pb(e,t,n,r),yAlign:r}}function mb(e,t,n,r){var a=e.caretSize,i=e.caretPadding,o=e.cornerRadius,s=n.xAlign,u=n.yAlign,c=a+i,l=qh(o),d=l.topLeft,f=l.topRight,p=l.bottomLeft,h=l.bottomRight,m=function(e,t){var n=e.x,r=e.width;return"right"===t?n-=r:"center"===t&&(n-=r/2),n}(t,s),v=function(e,t,n){var r=e.y,a=e.height;return"top"===t?r+=n:r-="bottom"===t?a+n:a/2,r}(t,u,c);return"center"===u?"left"===s?m+=c:"right"===s&&(m-=c):"left"===s?m-=Math.max(d,p)+a:"right"===s&&(m+=Math.max(f,h)+a),{x:Ap(m,0,r.width-t.width),y:Ap(v,0,r.height-t.height)}}function vb(e,t,n){var r=Xh(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-r.right:e.x+r.left}function gb(e){return cb([],lb(e))}function yb(e,t){var n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}var bb=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this)).opacity=0,r._active=[],r._eventPosition=void 0,r._size=void 0,r._cachedAnimations=void 0,r._tooltipItems=[],r.$animations=void 0,r.$context=void 0,r.chart=e.chart||e._chart,r._chart=r.chart,r.options=e.options,r.dataPoints=void 0,r.title=void 0,r.beforeBody=void 0,r.body=void 0,r.afterBody=void 0,r.footer=void 0,r.xAlign=void 0,r.yAlign=void 0,r.x=void 0,r.y=void 0,r.height=void 0,r.width=void 0,r.caretX=void 0,r.caretY=void 0,r.labelColors=void 0,r.labelPointStyles=void 0,r.labelTextColors=void 0,r}return(0,l.Z)(n,[{key:"initialize",value:function(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}},{key:"_resolveAnimations",value:function(){var e=this._cachedAnimations;if(e)return e;var t=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&t.options.animation&&n.animations,a=new ov(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}},{key:"getContext",value:function(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,Qh(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}},{key:"getTitle",value:function(e,t){var n=t.callbacks,r=n.beforeTitle.apply(this,[e]),a=n.title.apply(this,[e]),i=n.afterTitle.apply(this,[e]),o=[];return o=cb(o,lb(r)),o=cb(o,lb(a)),o=cb(o,lb(i))}},{key:"getBeforeBody",value:function(e,t){return gb(t.callbacks.beforeBody.apply(this,[e]))}},{key:"getBody",value:function(e,t){var n=this,r=t.callbacks,a=[];return Kf(e,(function(e){var t={before:[],lines:[],after:[]},i=yb(r,e);cb(t.before,lb(i.beforeLabel.call(n,e))),cb(t.lines,i.label.call(n,e)),cb(t.after,lb(i.afterLabel.call(n,e))),a.push(t)})),a}},{key:"getAfterBody",value:function(e,t){return gb(t.callbacks.afterBody.apply(this,[e]))}},{key:"getFooter",value:function(e,t){var n=t.callbacks,r=n.beforeFooter.apply(this,[e]),a=n.footer.apply(this,[e]),i=n.afterFooter.apply(this,[e]),o=[];return o=cb(o,lb(r)),o=cb(o,lb(a)),o=cb(o,lb(i))}},{key:"_createItems",value:function(e){var t,n,r=this,a=this._active,i=this.chart.data,o=[],s=[],u=[],c=[];for(t=0,n=a.length;t<n;++t)c.push(db(this.chart,a[t]));return e.filter&&(c=c.filter((function(t,n,r){return e.filter(t,n,r,i)}))),e.itemSort&&(c=c.sort((function(t,n){return e.itemSort(t,n,i)}))),Kf(c,(function(t){var n=yb(e.callbacks,t);o.push(n.labelColor.call(r,t)),s.push(n.labelPointStyle.call(r,t)),u.push(n.labelTextColor.call(r,t))})),this.labelColors=o,this.labelPointStyles=s,this.labelTextColors=u,this.dataPoints=c,c}},{key:"update",value:function(e,t){var n,r=this.options.setContext(this.getContext()),a=this._active,i=[];if(a.length){var o=ub[r.position].call(this,a,this._eventPosition);i=this._createItems(r),this.title=this.getTitle(i,r),this.beforeBody=this.getBeforeBody(i,r),this.body=this.getBody(i,r),this.afterBody=this.getAfterBody(i,r),this.footer=this.getFooter(i,r);var s=this._size=fb(this,r),u=Object.assign({},o,s),c=hb(this.chart,r,u),l=mb(r,u,c,this.chart);this.xAlign=c.xAlign,this.yAlign=c.yAlign,n={opacity:1,x:l.x,y:l.y,width:s.width,height:s.height,caretX:o.x,caretY:o.y}}else 0!==this.opacity&&(n={opacity:0});this._tooltipItems=i,this.$context=void 0,n&&this._resolveAnimations().update(this,n),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:t})}},{key:"drawCaret",value:function(e,t,n,r){var a=this.getCaretPosition(e,n,r);t.lineTo(a.x1,a.y1),t.lineTo(a.x2,a.y2),t.lineTo(a.x3,a.y3)}},{key:"getCaretPosition",value:function(e,t,n){var r,a,i,o,s,u,c=this.xAlign,l=this.yAlign,d=n.caretSize,f=qh(n.cornerRadius),p=f.topLeft,h=f.topRight,m=f.bottomLeft,v=f.bottomRight,g=e.x,y=e.y,b=t.width,x=t.height;return"center"===l?(s=y+x/2,"left"===c?(a=(r=g)-d,o=s+d,u=s-d):(a=(r=g+b)+d,o=s-d,u=s+d),i=r):(a="left"===c?g+Math.max(p,m)+d:"right"===c?g+b-Math.max(h,v)-d:this.caretX,"top"===l?(s=(o=y)-d,r=a-d,i=a+d):(s=(o=y+x)+d,r=a+d,i=a-d),u=o),{x1:r,x2:a,x3:i,y1:o,y2:s,y3:u}}},{key:"drawTitle",value:function(e,t,n){var r,a,i,o=this.title,s=o.length;if(s){var u=Wm(n.rtl,this.x,this.width);for(e.x=vb(this,n.titleAlign,n),t.textAlign=u.textAlign(n.titleAlign),t.textBaseline="middle",r=Kh(n.titleFont),a=n.titleSpacing,t.fillStyle=n.titleColor,t.font=r.string,i=0;i<s;++i)t.fillText(o[i],u.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+a,i+1===s&&(e.y+=n.titleMarginBottom-a)}}},{key:"_drawColorBox",value:function(e,t,n,r,a){var i=this.labelColors[n],o=this.labelPointStyles[n],s=a.boxHeight,u=a.boxWidth,c=a.boxPadding,l=Kh(a.bodyFont),d=vb(this,"left",a),f=r.x(d),p=s<l.lineHeight?(l.lineHeight-s)/2:0,h=t.y+p;if(a.usePointStyle){var m={radius:Math.min(u,s)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},g=r.leftForLtr(f,u)+u/2,y=h+s/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,Oh(e,m,g,y),e.strokeStyle=i.borderColor,e.fillStyle=i.backgroundColor,Oh(e,m,g,y)}else{e.lineWidth=jf(i.borderWidth)?Math.max.apply(Math,(0,v.Z)(Object.values(i.borderWidth))):i.borderWidth||1,e.strokeStyle=i.borderColor,e.setLineDash(i.borderDash||[]),e.lineDashOffset=i.borderDashOffset||0;var b=r.leftForLtr(f,u-c),x=r.leftForLtr(r.xPlus(f,1),u-c-2),k=qh(i.borderRadius);Object.values(k).some((function(e){return 0!==e}))?(e.beginPath(),e.fillStyle=a.multiKeyBackground,zh(e,{x:b,y:h,w:u,h:s,radius:k}),e.fill(),e.stroke(),e.fillStyle=i.backgroundColor,e.beginPath(),zh(e,{x:x,y:h+1,w:u-2,h:s-2,radius:k}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(b,h,u,s),e.strokeRect(b,h,u,s),e.fillStyle=i.backgroundColor,e.fillRect(x,h+1,u-2,s-2))}e.fillStyle=this.labelTextColors[n]}},{key:"drawBody",value:function(e,t,n){var r,a,i,o,s,u,c,l=this.body,d=n.bodySpacing,f=n.bodyAlign,p=n.displayColors,h=n.boxHeight,m=n.boxWidth,v=n.boxPadding,g=Kh(n.bodyFont),y=g.lineHeight,b=0,x=Wm(n.rtl,this.x,this.width),k=function(n){t.fillText(n,x.x(e.x+b),e.y+y/2),e.y+=y+d},w=x.textAlign(f);for(t.textAlign=f,t.textBaseline="middle",t.font=g.string,e.x=vb(this,w,n),t.fillStyle=n.bodyColor,Kf(this.beforeBody,k),b=p&&"right"!==w?"center"===f?m/2+v:m+2+v:0,o=0,u=l.length;o<u;++o){for(r=l[o],a=this.labelTextColors[o],t.fillStyle=a,Kf(r.before,k),i=r.lines,p&&i.length&&(this._drawColorBox(t,e,o,x,n),y=Math.max(g.lineHeight,h)),s=0,c=i.length;s<c;++s)k(i[s]),y=g.lineHeight;Kf(r.after,k)}b=0,y=g.lineHeight,Kf(this.afterBody,k),e.y-=d}},{key:"drawFooter",value:function(e,t,n){var r,a,i=this.footer,o=i.length;if(o){var s=Wm(n.rtl,this.x,this.width);for(e.x=vb(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=s.textAlign(n.footerAlign),t.textBaseline="middle",r=Kh(n.footerFont),t.fillStyle=n.footerColor,t.font=r.string,a=0;a<o;++a)t.fillText(i[a],s.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+n.footerSpacing}}},{key:"drawBackground",value:function(e,t,n,r){var a=this.xAlign,i=this.yAlign,o=e.x,s=e.y,u=n.width,c=n.height,l=qh(r.cornerRadius),d=l.topLeft,f=l.topRight,p=l.bottomLeft,h=l.bottomRight;t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(o+d,s),"top"===i&&this.drawCaret(e,t,n,r),t.lineTo(o+u-f,s),t.quadraticCurveTo(o+u,s,o+u,s+f),"center"===i&&"right"===a&&this.drawCaret(e,t,n,r),t.lineTo(o+u,s+c-h),t.quadraticCurveTo(o+u,s+c,o+u-h,s+c),"bottom"===i&&this.drawCaret(e,t,n,r),t.lineTo(o+p,s+c),t.quadraticCurveTo(o,s+c,o,s+c-p),"center"===i&&"left"===a&&this.drawCaret(e,t,n,r),t.lineTo(o,s+d),t.quadraticCurveTo(o,s,o+d,s),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}},{key:"_updateAnimationTarget",value:function(e){var t=this.chart,n=this.$animations,r=n&&n.x,a=n&&n.y;if(r||a){var i=ub[e.position].call(this,this._active,this._eventPosition);if(!i)return;var o=this._size=fb(this,e),s=Object.assign({},i,this._size),u=hb(t,e,s),c=mb(e,s,u,t);r._to===c.x&&a._to===c.y||(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=o.width,this.height=o.height,this.caretX=i.x,this.caretY=i.y,this._resolveAnimations().update(this,c))}}},{key:"_willRender",value:function(){return!!this.opacity}},{key:"draw",value:function(e){var t=this.options.setContext(this.getContext()),n=this.opacity;if(n){this._updateAnimationTarget(t);var r={width:this.width,height:this.height},a={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;var i=Xh(t.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&o&&(e.save(),e.globalAlpha=n,this.drawBackground(a,e,r,t),Gm(e,t.textDirection),a.y+=i.top,this.drawTitle(a,e,t),this.drawBody(a,e,t),this.drawFooter(a,e,t),Hm(e,t.textDirection),e.restore())}}},{key:"getActiveElements",value:function(){return this._active||[]}},{key:"setActiveElements",value:function(e,t){var n=this,r=this._active,a=e.map((function(e){var t=e.datasetIndex,r=e.index,a=n.chart.getDatasetMeta(t);if(!a)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:a.data[r],index:r}})),i=!Yf(r,a),o=this._positionChanged(a,t);(i||o)&&(this._active=a,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}},{key:"handleEvent",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;var r=this.options,a=this._active||[],i=this._getActiveElements(e,a,t,n),o=this._positionChanged(i,e),s=t||!Yf(i,a)||o;return s&&(this._active=i,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),s}},{key:"_getActiveElements",value:function(e,t,n,r){var a=this.options;if("mouseout"===e.type)return[];if(!r)return t;var i=this.chart.getElementsAtEventForMode(e,a.mode,a,n);return a.reverse&&i.reverse(),i}},{key:"_positionChanged",value:function(e,t){var n=this.caretX,r=this.caretY,a=this.options,i=ub[a.position].call(this,e,t);return!1!==i&&(n!==i.x||r!==i.y)}}]),n}(Sg);bb.positioners=ub;var xb={id:"tooltip",_element:bb,positioners:ub,afterInit:function(e,t,n){n&&(e.tooltip=new bb({chart:e,options:n}))},beforeUpdate:function(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset:function(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw:function(e){var t=e.tooltip;if(t&&t._willRender()){var n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",n))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent:function(e,t){if(e.tooltip){var n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:function(e,t){return t.bodyFont.size},boxWidth:function(e,t){return t.bodyFont.size},multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:Vf,title:function(e){if(e.length>0){var t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:Vf,beforeBody:Vf,beforeLabel:Vf,label:function(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;var t=e.dataset.label||"";t&&(t+=": ");var n=e.formattedValue;return Zf(n)||(t+=n),t},labelColor:function(e){var t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor:function(){return this.options.bodyColor},labelPointStyle:function(e){var t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Vf,afterBody:Vf,beforeFooter:Vf,footer:Vf,afterFooter:Vf}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:function(e){return"filter"!==e&&"itemSort"!==e&&"external"!==e},_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function kb(e,t,n,r){var a=e.indexOf(t);return-1===a?function(e,t,n,r){return"string"===typeof t?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n}(e,t,n,r):a!==e.lastIndexOf(t)?n:a}var wb=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this,e))._startValue=void 0,r._valueRange=0,r._addedLabels=[],r}return(0,l.Z)(n,[{key:"init",value:function(e){var t=this._addedLabels;if(t.length){var r,a=this.getLabels(),i=(0,h.Z)(t);try{for(i.s();!(r=i.n()).done;){var o=r.value,s=o.index,u=o.label;a[s]===u&&a.splice(s,1)}}catch(Nx){i.e(Nx)}finally{i.f()}this._addedLabels=[]}(0,hd.Z)((0,b.Z)(n.prototype),"init",this).call(this,e)}},{key:"parse",value:function(e,t){if(Zf(e))return null;var n=this.getLabels();return function(e,t){return null===e?null:Ap(Math.round(e),0,t)}(t=isFinite(t)&&n[t]===e?t:kb(n,e,Hf(t,e),this._addedLabels),n.length-1)}},{key:"determineDataLimits",value:function(){var e=this.getUserBounds(),t=e.minDefined,n=e.maxDefined,r=this.getMinMax(!0),a=r.min,i=r.max;"ticks"===this.options.bounds&&(t||(a=0),n||(i=this.getLabels().length-1)),this.min=a,this.max=i}},{key:"buildTicks",value:function(){var e=this.min,t=this.max,n=this.options.offset,r=[],a=this.getLabels();a=0===e&&t===a.length-1?a:a.slice(e,t+1),this._valueRange=Math.max(a.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(var i=e;i<=t;i++)r.push({value:i});return r}},{key:"getLabelForValue",value:function(e){var t=this.getLabels();return e>=0&&e<t.length?t[e]:e}},{key:"configure",value:function(){(0,hd.Z)((0,b.Z)(n.prototype),"configure",this).call(this),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}},{key:"getPixelForValue",value:function(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}},{key:"getPixelForTick",value:function(e){var t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}},{key:"getValueForPixel",value:function(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}},{key:"getBasePixel",value:function(){return this.bottom}}]),n}(Dg);function Sb(e,t){var n,r,a,i,o=[],s=e.bounds,u=e.step,c=e.min,l=e.max,d=e.precision,f=e.count,p=e.maxTicks,h=e.maxDigits,m=e.includeBounds,v=u||1,g=p-1,y=t.min,b=t.max,x=!Zf(c),k=!Zf(l),w=!Zf(f),S=(b-y)/(h+1),C=bp((b-y)/g/v)*v;if(C<1e-14&&!x&&!k)return[{value:y},{value:b}];(i=Math.ceil(b/C)-Math.floor(y/C))>g&&(C=bp(i*C/g/v)*v),Zf(d)||(n=Math.pow(10,d),C=Math.ceil(C*n)/n),"ticks"===s?(r=Math.floor(y/C)*C,a=Math.ceil(b/C)*C):(r=y,a=b),x&&k&&u&&function(e,t){var n=Math.round(e);return n-t<=e&&n+t>=e}((l-c)/u,C/1e3)?(C=(l-c)/(i=Math.round(Math.min((l-c)/C,p))),r=c,a=l):w?C=((a=k?l:a)-(r=x?c:r))/(i=f-1):i=kp(i=(a-r)/C,Math.round(i),C/1e3)?Math.round(i):Math.ceil(i);var _=Math.max(_p(C),_p(r));n=Math.pow(10,Zf(d)?_:d),r=Math.round(r*n)/n,a=Math.round(a*n)/n;var I=0;for(x&&(m&&r!==c?(o.push({value:c}),r<c&&I++,kp(Math.round((r+I*C)*n)/n,c,Cb(c,S,e))&&I++):r<c&&I++);I<i;++I)o.push({value:Math.round((r+I*C)*n)/n});return k&&m&&a!==l?o.length&&kp(o[o.length-1].value,l,Cb(l,S,e))?o[o.length-1].value=l:o.push({value:l}):k&&a!==l||o.push({value:a}),o}function Cb(e,t,n){var r=n.horizontal,a=Sp(n.minRotation),i=(r?Math.sin(a):Math.cos(a))||.001,o=.75*t*(""+e).length;return Math.min(t/i,o)}wb.id="category",wb.defaults={ticks:{callback:wb.prototype.getLabelForValue}};var _b=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this,e)).start=void 0,r.end=void 0,r._startValue=void 0,r._endValue=void 0,r._valueRange=0,r}return(0,l.Z)(n,[{key:"parse",value:function(e,t){return Zf(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}},{key:"handleTickRangeOptions",value:function(){var e=this.options.beginAtZero,t=this.getUserBounds(),n=t.minDefined,r=t.maxDefined,a=this.min,i=this.max,o=function(e){return a=n?a:e},s=function(e){return i=r?i:e};if(e){var u=yp(a),c=yp(i);u<0&&c<0?s(0):u>0&&c>0&&o(0)}if(a===i){var l=1;(i>=Number.MAX_SAFE_INTEGER||a<=Number.MIN_SAFE_INTEGER)&&(l=Math.abs(.05*i)),s(i+l),e||o(a-l)}this.min=a,this.max=i}},{key:"getTickLimit",value:function(){var e,t=this.options.ticks,n=t.maxTicksLimit,r=t.stepSize;return r?(e=Math.ceil(this.max/r)-Math.floor(this.min/r)+1)>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(r," would result generating up to ").concat(e," ticks. Limiting to 1000.")),e=1e3):(e=this.computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e}},{key:"computeTickLimit",value:function(){return Number.POSITIVE_INFINITY}},{key:"buildTicks",value:function(){var e=this.options,t=e.ticks,n=this.getTickLimit(),r=Sb({maxTicks:n=Math.max(2,n),bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&wp(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}},{key:"configure",value:function(){var e=this.ticks,t=this.min,r=this.max;if((0,hd.Z)((0,b.Z)(n.prototype),"configure",this).call(this),this.options.offset&&e.length){var a=(r-t)/Math.max(e.length-1,1)/2;t-=a,r+=a}this._startValue=t,this._endValue=r,this._valueRange=r-t}},{key:"getLabelForValue",value:function(e){return jm(e,this.chart.options.locale,this.options.ticks.format)}}]),n}(Dg),Ib=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n,[{key:"determineDataLimits",value:function(){var e=this.getMinMax(!0),t=e.min,n=e.max;this.min=Wf(t)?t:0,this.max=Wf(n)?n:1,this.handleTickRangeOptions()}},{key:"computeTickLimit",value:function(){var e=this.isHorizontal(),t=e?this.width:this.height,n=Sp(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,a.lineHeight/r))}},{key:"getPixelForValue",value:function(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}},{key:"getValueForPixel",value:function(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}]),n}(_b);function Tb(e){return 1===e/Math.pow(10,Math.floor(gp(e)))}Ib.id="linear",Ib.defaults={ticks:{callback:_g.formatters.numeric}};var Eb=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this,e)).start=void 0,r.end=void 0,r._startValue=void 0,r._valueRange=0,r}return(0,l.Z)(n,[{key:"parse",value:function(e,t){var n=_b.prototype.parse.apply(this,[e,t]);if(0!==n)return Wf(n)&&n>0?n:null;this._zero=!0}},{key:"determineDataLimits",value:function(){var e=this.getMinMax(!0),t=e.min,n=e.max;this.min=Wf(t)?Math.max(0,t):null,this.max=Wf(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}},{key:"handleTickRangeOptions",value:function(){var e=this.getUserBounds(),t=e.minDefined,n=e.maxDefined,r=this.min,a=this.max,i=function(e){return r=t?r:e},o=function(e){return a=n?a:e},s=function(e,t){return Math.pow(10,Math.floor(gp(e))+t)};r===a&&(r<=0?(i(1),o(10)):(i(s(r,-1)),o(s(a,1)))),r<=0&&i(s(a,-1)),a<=0&&o(s(r,1)),this._zero&&this.min!==this._suggestedMin&&r===s(this.min,0)&&i(s(r,-1)),this.min=r,this.max=a}},{key:"buildTicks",value:function(){var e=this.options,t=function(e,t){var n=Math.floor(gp(t.max)),r=Math.ceil(t.max/Math.pow(10,n)),a=[],i=Gf(e.min,Math.pow(10,Math.floor(gp(t.min)))),o=Math.floor(gp(i)),s=Math.floor(i/Math.pow(10,o)),u=o<0?Math.pow(10,Math.abs(o)):1;do{a.push({value:i,major:Tb(i)}),10===++s&&(s=1,u=++o>=0?1:u),i=Math.round(s*Math.pow(10,o)*u)/u}while(o<n||o===n&&s<r);var c=Gf(e.max,i);return a.push({value:c,major:Tb(i)}),a}({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&wp(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}},{key:"getLabelForValue",value:function(e){return void 0===e?"0":jm(e,this.chart.options.locale,this.options.ticks.format)}},{key:"configure",value:function(){var e=this.min;(0,hd.Z)((0,b.Z)(n.prototype),"configure",this).call(this),this._startValue=gp(e),this._valueRange=gp(this.max)-gp(e)}},{key:"getPixelForValue",value:function(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(gp(e)-this._startValue)/this._valueRange)}},{key:"getValueForPixel",value:function(e){var t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}]),n}(Dg);function Nb(e){var t=e.ticks;if(t.display&&e.display){var n=Xh(t.backdropPadding);return Hf(t.font&&t.font.size,_h.font.size)+n.height}return 0}function Ob(e,t,n,r,a){return e===r||e===a?{start:t-n/2,end:t+n/2}:e<r||e>a?{start:t-n,end:t}:{start:t,end:t+n}}function Ab(e){for(var t,n,r,a={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},i=Object.assign({},a),o=[],s=[],u=e._pointLabels.length,c=e.options.pointLabels,l=c.centerPointLabels?cp/u:0,d=0;d<u;d++){var f=c.setContext(e.getPointLabelContext(d));s[d]=f.padding;var p=e.getPointPosition(d,e.drawingArea+s[d],l),h=Kh(f.font),m=(t=e.ctx,n=h,r=Uf(r=e._pointLabels[d])?r:[r],{w:Th(t,n.string,r),h:r.length*n.lineHeight});o[d]=m;var v=Np(e.getIndexAngle(d)+l),g=Math.round(Cp(v));Rb(i,a,v,Ob(g,p.x,m.w,0,180),Ob(g,p.y,m.h,90,270))}e.setCenterPoint(a.l-i.l,i.r-a.r,a.t-i.t,i.b-a.b),e._pointLabelItems=function(e,t,n){for(var r=[],a=e._pointLabels.length,i=e.options,o=Nb(i)/2,s=e.drawingArea,u=i.pointLabels.centerPointLabels?cp/a:0,c=0;c<a;c++){var l=e.getPointPosition(c,s+o+n[c],u),d=Math.round(Cp(Np(l.angle+hp))),f=t[c],p=Bb(l.y,f.h,d),h=Pb(d),m=Db(l.x,f.w,h);r.push({x:l.x,y:p,textAlign:h,left:m,top:p,right:m+f.w,bottom:p+f.h})}return r}(e,o,s)}function Rb(e,t,n,r,a){var i=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n)),s=0,u=0;r.start<t.l?(s=(t.l-r.start)/i,e.l=Math.min(e.l,t.l-s)):r.end>t.r&&(s=(r.end-t.r)/i,e.r=Math.max(e.r,t.r+s)),a.start<t.t?(u=(t.t-a.start)/o,e.t=Math.min(e.t,t.t-u)):a.end>t.b&&(u=(a.end-t.b)/o,e.b=Math.max(e.b,t.b+u))}function Pb(e){return 0===e||180===e?"center":e<180?"left":"right"}function Db(e,t,n){return"right"===n?e-=t:"center"===n&&(e-=t/2),e}function Bb(e,t,n){return 90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t),e}function Mb(e,t,n,r){var a=e.ctx;if(n)a.arc(e.xCenter,e.yCenter,t,0,lp);else{var i=e.getPointPosition(0,t);a.moveTo(i.x,i.y);for(var o=1;o<r;o++)i=e.getPointPosition(o,t),a.lineTo(i.x,i.y)}}Eb.id="logarithmic",Eb.defaults={ticks:{callback:_g.formatters.logarithmic,major:{enabled:!0}}};var Fb=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this,e)).xCenter=void 0,r.yCenter=void 0,r.drawingArea=void 0,r._pointLabels=[],r._pointLabelItems=[],r}return(0,l.Z)(n,[{key:"setDimensions",value:function(){var e=this._padding=Xh(Nb(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}},{key:"determineDataLimits",value:function(){var e=this.getMinMax(!1),t=e.min,n=e.max;this.min=Wf(t)&&!isNaN(t)?t:0,this.max=Wf(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}},{key:"computeTickLimit",value:function(){return Math.ceil(this.drawingArea/Nb(this.options))}},{key:"generateTickLabels",value:function(e){var t=this;_b.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((function(e,n){var r=Xf(t.options.pointLabels.callback,[e,n],t);return r||0===r?r:""})).filter((function(e,n){return t.chart.getDataVisibility(n)}))}},{key:"fit",value:function(){var e=this.options;e.display&&e.pointLabels.display?Ab(this):this.setCenterPoint(0,0,0,0)}},{key:"setCenterPoint",value:function(e,t,n,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,r))}},{key:"getIndexAngle",value:function(e){return Np(e*(lp/(this._pointLabels.length||1))+Sp(this.options.startAngle||0))}},{key:"getDistanceFromCenterForValue",value:function(e){if(Zf(e))return NaN;var t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}},{key:"getValueForDistanceFromCenter",value:function(e){if(Zf(e))return NaN;var t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}},{key:"getPointLabelContext",value:function(e){var t=this._pointLabels||[];if(e>=0&&e<t.length){var n=t[e];return function(e,t,n){return Qh(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}},{key:"getPointPosition",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.getIndexAngle(e)-hp+n;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}},{key:"getPointPositionForValue",value:function(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}},{key:"getBasePosition",value:function(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}},{key:"getPointLabelPosition",value:function(e){var t=this._pointLabelItems[e];return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}},{key:"drawBackground",value:function(){var e=this.options,t=e.backgroundColor,n=e.grid.circular;if(t){var r=this.ctx;r.save(),r.beginPath(),Mb(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=t,r.fill(),r.restore()}}},{key:"drawGrid",value:function(){var e,t,n,r=this,a=this.ctx,i=this.options,o=i.angleLines,s=i.grid,u=this._pointLabels.length;if(i.pointLabels.display&&function(e,t){for(var n=e.ctx,r=e.options.pointLabels,a=t-1;a>=0;a--){var i=r.setContext(e.getPointLabelContext(a)),o=Kh(i.font),s=e._pointLabelItems[a],u=s.x,c=s.y,l=s.textAlign,d=s.left,f=s.top,p=s.right,h=s.bottom,m=i.backdropColor;if(!Zf(m)){var v=qh(i.borderRadius),g=Xh(i.backdropPadding);n.fillStyle=m;var y=d-g.left,b=f-g.top,x=p-d+g.width,k=h-f+g.height;Object.values(v).some((function(e){return 0!==e}))?(n.beginPath(),zh(n,{x:y,y:b,w:x,h:k,radius:v}),n.fill()):n.fillRect(y,b,x,k)}Fh(n,e._pointLabels[a],u,c+o.lineHeight/2,o,{color:i.color,textAlign:l,textBaseline:"middle"})}}(this,u),s.display&&this.ticks.forEach((function(e,n){if(0!==n){t=r.getDistanceFromCenterForValue(e.value);var a=s.setContext(r.getContext(n-1));!function(e,t,n,r){var a=e.ctx,i=t.circular,o=t.color,s=t.lineWidth;!i&&!r||!o||!s||n<0||(a.save(),a.strokeStyle=o,a.lineWidth=s,a.setLineDash(t.borderDash),a.lineDashOffset=t.borderDashOffset,a.beginPath(),Mb(e,n,i,r),a.closePath(),a.stroke(),a.restore())}(r,a,t,u)}})),o.display){for(a.save(),e=u-1;e>=0;e--){var c=o.setContext(this.getPointLabelContext(e)),l=c.color,d=c.lineWidth;d&&l&&(a.lineWidth=d,a.strokeStyle=l,a.setLineDash(c.borderDash),a.lineDashOffset=c.borderDashOffset,t=this.getDistanceFromCenterForValue(i.ticks.reverse?this.min:this.max),n=this.getPointPosition(e,t),a.beginPath(),a.moveTo(this.xCenter,this.yCenter),a.lineTo(n.x,n.y),a.stroke())}a.restore()}}},{key:"drawBorder",value:function(){}},{key:"drawLabels",value:function(){var e=this,t=this.ctx,n=this.options,r=n.ticks;if(r.display){var a,i,o=this.getIndexAngle(0);t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(o),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((function(o,s){if(0!==s||n.reverse){var u=r.setContext(e.getContext(s)),c=Kh(u.font);if(a=e.getDistanceFromCenterForValue(e.ticks[s].value),u.showLabelBackdrop){t.font=c.string,i=t.measureText(o.label).width,t.fillStyle=u.backdropColor;var l=Xh(u.backdropPadding);t.fillRect(-i/2-l.left,-a-c.size/2-l.top,i+l.width,c.size+l.height)}Fh(t,o.label,0,-a,c,{color:u.color})}})),t.restore()}}},{key:"drawTitle",value:function(){}}]),n}(_b);Fb.id="radialLinear",Fb.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:_g.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:function(e){return e},padding:5,centerPointLabels:!1}},Fb.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},Fb.descriptors={angleLines:{_fallback:"grid"}};var Lb={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Vb=Object.keys(Lb);function zb(e,t){return e-t}function Zb(e,t){if(Zf(t))return null;var n=e._adapter,r=e._parseOpts,a=r.parser,i=r.round,o=r.isoWeekday,s=t;return"function"===typeof a&&(s=a(s)),Wf(s)||(s="string"===typeof a?n.parse(s,a):n.parse(s)),null===s?null:(i&&(s="week"!==i||!xp(o)&&!0!==o?n.startOf(s,i):n.startOf(s,"isoWeek",o)),+s)}function Ub(e,t,n,r){for(var a=Vb.length,i=Vb.indexOf(e);i<a-1;++i){var o=Lb[Vb[i]],s=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-t)/(s*o.size))<=r)return Vb[i]}return Vb[a-1]}function jb(e,t,n){if(n){if(n.length){var r=$h(n,t),a=r.lo,i=r.hi;e[n[a]>=t?n[a]:n[i]]=!0}}else e[t]=!0}function Wb(e,t,n){var r,a,i=[],o={},s=t.length;for(r=0;r<s;++r)o[a=t[r]]=r,i.push({value:a,major:!1});return 0!==s&&n?function(e,t,n,r){var a,i,o=e._adapter,s=+o.startOf(t[0].value,r),u=t[t.length-1].value;for(a=s;a<=u;a=+o.add(a,1,r))(i=n[a])>=0&&(t[i].major=!0);return t}(e,i,o,n):i}var Gb=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this,e))._cache={data:[],labels:[],all:[]},r._unit="day",r._majorUnit=void 0,r._offsets={},r._normalized=!1,r._parseOpts=void 0,r}return(0,l.Z)(n,[{key:"init",value:function(e,t){var r=e.time||(e.time={}),a=this._adapter=new Fv._date(e.adapters.date);tp(r.displayFormats,a.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},(0,hd.Z)((0,b.Z)(n.prototype),"init",this).call(this,e),this._normalized=t.normalized}},{key:"parse",value:function(e,t){return void 0===e?null:Zb(this,e)}},{key:"beforeLayout",value:function(){(0,hd.Z)((0,b.Z)(n.prototype),"beforeLayout",this).call(this),this._cache={data:[],labels:[],all:[]}}},{key:"determineDataLimits",value:function(){var e=this.options,t=this._adapter,n=e.time.unit||"day",r=this.getUserBounds(),a=r.min,i=r.max,o=r.minDefined,s=r.maxDefined;function u(e){o||isNaN(e.min)||(a=Math.min(a,e.min)),s||isNaN(e.max)||(i=Math.max(i,e.max))}o&&s||(u(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||u(this.getMinMax(!1))),a=Wf(a)&&!isNaN(a)?a:+t.startOf(Date.now(),n),i=Wf(i)&&!isNaN(i)?i:+t.endOf(Date.now(),n)+1,this.min=Math.min(a,i-1),this.max=Math.max(a+1,i)}},{key:"_getLabelBounds",value:function(){var e=this.getLabelTimestamps(),t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}},{key:"buildTicks",value:function(){var e=this.options,t=e.time,n=e.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);var a=this.min,i=function(e,t,n){for(var r=0,a=e.length;r<a&&e[r]<t;)r++;for(;a>r&&e[a-1]>n;)a--;return r>0||a<e.length?e.slice(r,a):e}(r,a,this.max);return this._unit=t.unit||(n.autoSkip?Ub(t.minUnit,this.min,this.max,this._getLabelCapacity(a)):function(e,t,n,r,a){for(var i=Vb.length-1;i>=Vb.indexOf(n);i--){var o=Vb[i];if(Lb[o].common&&e._adapter.diff(a,r,o)>=t-1)return o}return Vb[n?Vb.indexOf(n):0]}(this,i.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(var t=Vb.indexOf(e)+1,n=Vb.length;t<n;++t)if(Lb[Vb[t]].common)return Vb[t]}(this._unit):void 0,this.initOffsets(r),e.reverse&&i.reverse(),Wb(this,i,this._majorUnit)}},{key:"afterAutoSkip",value:function(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((function(e){return+e.value})))}},{key:"initOffsets",value:function(e){var t,n,r=0,a=0;this.options.offset&&e.length&&(t=this.getDecimalForValue(e[0]),r=1===e.length?1-t:(this.getDecimalForValue(e[1])-t)/2,n=this.getDecimalForValue(e[e.length-1]),a=1===e.length?n:(n-this.getDecimalForValue(e[e.length-2]))/2);var i=e.length<3?.5:.25;r=Ap(r,0,i),a=Ap(a,0,i),this._offsets={start:r,end:a,factor:1/(r+1+a)}}},{key:"_generate",value:function(){var e,t,n=this._adapter,r=this.min,a=this.max,i=this.options,o=i.time,s=o.unit||Ub(o.minUnit,r,a,this._getLabelCapacity(r)),u=Hf(o.stepSize,1),c="week"===s&&o.isoWeekday,l=xp(c)||!0===c,d={},f=r;if(l&&(f=+n.startOf(f,"isoWeek",c)),f=+n.startOf(f,l?"day":s),n.diff(a,r,s)>1e5*u)throw new Error(r+" and "+a+" are too far apart with stepSize of "+u+" "+s);var p="data"===i.ticks.source&&this.getDataTimestamps();for(e=f,t=0;e<a;e=+n.add(e,u,s),t++)jb(d,e,p);return e!==a&&"ticks"!==i.bounds&&1!==t||jb(d,e,p),Object.keys(d).sort((function(e,t){return e-t})).map((function(e){return+e}))}},{key:"getLabelForValue",value:function(e){var t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}},{key:"_tickFormatFunction",value:function(e,t,n,r){var a=this.options,i=a.time.displayFormats,o=this._unit,s=this._majorUnit,u=o&&i[o],c=s&&i[s],l=n[t],d=s&&c&&l&&l.major,f=this._adapter.format(e,r||(d?c:u)),p=a.ticks.callback;return p?Xf(p,[f,t,n],this):f}},{key:"generateTickLabels",value:function(e){var t,n,r;for(t=0,n=e.length;t<n;++t)(r=e[t]).label=this._tickFormatFunction(r.value,t,e)}},{key:"getDecimalForValue",value:function(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}},{key:"getPixelForValue",value:function(e){var t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}},{key:"getValueForPixel",value:function(e){var t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}},{key:"_getLabelSize",value:function(e){var t=this.options.ticks,n=this.ctx.measureText(e).width,r=Sp(this.isHorizontal()?t.maxRotation:t.minRotation),a=Math.cos(r),i=Math.sin(r),o=this._resolveTickFontOptions(0).size;return{w:n*a+o*i,h:n*i+o*a}}},{key:"_getLabelCapacity",value:function(e){var t=this.options.time,n=t.displayFormats,r=n[t.unit]||n.millisecond,a=this._tickFormatFunction(e,0,Wb(this,[e],this._majorUnit),r),i=this._getLabelSize(a),o=Math.floor(this.isHorizontal()?this.width/i.w:this.height/i.h)-1;return o>0?o:1}},{key:"getDataTimestamps",value:function(){var e,t,n=this._cache.data||[];if(n.length)return n;var r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,t=r.length;e<t;++e)n=n.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}},{key:"getLabelTimestamps",value:function(){var e,t,n=this._cache.labels||[];if(n.length)return n;var r=this.getLabels();for(e=0,t=r.length;e<t;++e)n.push(Zb(this,r[e]));return this._cache.labels=this._normalized?n:this.normalize(n)}},{key:"normalize",value:function(e){return rm(e.sort(zb))}}]),n}(Dg);function Hb(e,t,n){var r,a,i,o,s=0,u=e.length-1;if(n){if(t>=e[s].pos&&t<=e[u].pos){var c=Jh(e,"pos",t);s=c.lo,u=c.hi}var l=e[s];r=l.pos,i=l.time;var d=e[u];a=d.pos,o=d.time}else{if(t>=e[s].time&&t<=e[u].time){var f=Jh(e,"time",t);s=f.lo,u=f.hi}var p=e[s];r=p.time,i=p.pos;var h=e[u];a=h.time,o=h.pos}var m=a-r;return m?i+(o-i)*(t-r)/m:i}Gb.id="time",Gb.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};var qb=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this,e))._table=[],r._minPos=void 0,r._tableRange=void 0,r}return(0,l.Z)(n,[{key:"initOffsets",value:function(){var e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Hb(t,this.min),this._tableRange=Hb(t,this.max)-this._minPos,(0,hd.Z)((0,b.Z)(n.prototype),"initOffsets",this).call(this,e)}},{key:"buildLookupTable",value:function(e){var t,n,r,a,i,o=this.min,s=this.max,u=[],c=[];for(t=0,n=e.length;t<n;++t)(a=e[t])>=o&&a<=s&&u.push(a);if(u.length<2)return[{time:o,pos:0},{time:s,pos:1}];for(t=0,n=u.length;t<n;++t)i=u[t+1],r=u[t-1],a=u[t],Math.round((i+r)/2)!==a&&c.push({time:a,pos:t/(n-1)});return c}},{key:"_getTimestampsForTable",value:function(){var e=this._cache.all||[];if(e.length)return e;var t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e}},{key:"getDecimalForValue",value:function(e){return(Hb(this._table,e)-this._minPos)/this._tableRange}},{key:"getValueForPixel",value:function(e){var t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return Hb(this._table,n*this._tableRange+this._minPos,!0)}}]),n}(Gb);qb.id="timeseries",qb.defaults=Gb.defaults;uy.register(vy,_y,Dy,Ty,Tv,Ev,Nv,Ov,Rv,Av,Pv,Dv,wb,Ib,Eb,Fb,Gb,qb,Fy,eb,rb,ib,xb,sb),n(8808),n(8832);var Xb=n(8377),Kb=new X;Kb.load(Fn),Kb.load(Pu);var Yb,Qb=function(){var e=(0,s.useState)(!1),t=(0,m.Z)(e,2),n=t[0],r=t[1],a=(0,s.useState)(!1),i=(0,m.Z)(a,2),o=i[0],u=i[1],c=Du.parse(window.location.search).room,l=window.location.href.split("/");l.pop();var d=l.join("/");function f(e,t,n){e.data.labels.push(t),e.data.datasets.forEach((function(e){e.data.push(n)})),e.update()}function p(e,t){var n=0,r=0,a=new uy(t,{type:"line",data:{datasets:[{fill:!1,borderColor:e,lineTension:0,data:[]}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:!1},legend:{display:!1},elements:{point:{radius:0}},tooltips:{enabled:!1},scales:{xAxes:{display:!1},y:{max:4,min:-4}}}});for(n=0;n<200;n++)n+=.1*Math.random(),r=Math.sin(180*n/Math.PI),f(a,n,r);setInterval((function(){var e;(e=a).data.labels.pop(),e.data.datasets.forEach((function(e){e.data.splice(0,1)})),e.update(),n+=.1*Math.random(),r=Math.sin(180*n/Math.PI),f(a,n,r)}),500)}(0,s.useEffect)((function(){o?(console.log("person detected!"),document.getElementById("personDetected").style.backgroundColor="rgb(116, 225, 140)"):document.getElementById("personDetected").style.backgroundColor="gray"}),[o]),(0,s.useEffect)((function(){p("red","myChart1"),p("blue","myChart2"),p("yellow","myChart3"),p("purple","myChart4"),p("green","myChart5"),p("brown","myChart6");var e=new pd,t=Rf();function n(e,t){var n=document.getElementById(t);n.srcObject=e,n.addEventListener("loadedmetadata",(function(){n.play()}))}navigator.mediaDevices.getUserMedia({video:!0}).then((function(r){n(r,"novideo-reflection"),t.on("userconnected",(function(t){console.log("someone answered our link! calling them."),e.call(t,r).on("stream",(function(e){n(e,"webcam")}))})),t.on("goodbye",(function(){console.log("someone left")})),e.on("call",(function(e){e.answer(r),console.log("getting called!"),e.on("stream",(function(e){n(e,"webcam")}))}))})),e.on("open",(function(e){console.log(e),t.emit("userjoined",c,e)}))}),[]),(0,s.useEffect)((function(){var e=document.getElementById("div-dropdown-copylink");e.style.display="none",setTimeout((function(){e.style.display="block",document.dropdownTip.style.animationName="example"}),2500)}),[]);var h=void 0;(0,s.useEffect)((function(){Xb.load().then((function(e){h=e,document.getElementById("modelprocessingstatus").style.backgroundColor="#74E18C"}))}));h=void 0;var v,g,y=[];function b(){var e=v.getBoundingClientRect(),t=e.top,n=e.left;h.detect(v).then((function(e){for(var r=0;r<y.length;r++)g.removeChild(y[r]);y.splice(0);for(var a=0;a<e.length;a++)if("person"==e[a].class?u(!0):u(!1),e[a].score>.66&&"person"==e[a].class){var i=document.createElement("p");i.innerText=e[a].class+" - with "+Math.round(100*parseFloat(e[a].score))+"% confidence.",i.style="left: "+(e[a].bbox[0]+n)+"px;top: "+(e[a].bbox[1]+t)+"px;width: "+(e[a].bbox[2]-10)+"px;";var o=document.createElement("div");o.setAttribute("class","highlighter"),o.style="left: "+(e[a].bbox[0]+n)+"px; top: "+(e[a].bbox[1]+t)+"px; width: "+e[a].bbox[2]+"px; height: "+e[a].bbox[3]+"px;",g.appendChild(o),g.appendChild(i),y.push(o),y.push(i)}window.requestAnimationFrame(b)}))}return(0,s.useEffect)((function(){v=document.getElementById("webcam"),g=document.getElementById("liveView")})),(0,Bu.jsx)(s.Fragment,{children:(0,Bu.jsxs)("div",{id:"div-dashboard-regular",style:{height:"100%",display:"flex"},children:[(0,Bu.jsxs)("div",{id:"div-dashboard-inner-regular-left",style:{width:"60%",height:"100%",display:"flex",backgroundColor:"white",flexFlow:"wrap",justifyContent:"center"},children:[(0,Bu.jsxs)("div",{style:{display:"flex",width:"100%",height:"50%",margin:"10px",justifyContent:"space-between"},children:[(0,Bu.jsxs)("div",{id:"div-model-processing",style:{width:"50%",height:"100%",alignContent:"center",zoom:"120%"},children:[(0,Bu.jsx)("div",{className:"status-text-big",id:"big",style:{margin:"2vw"},children:" Object Tracking "}),(0,Bu.jsxs)("div",{className:"div-status-container",style:{width:"100%",height:"fit-content",margin:"2vw"},children:[(0,Bu.jsx)("div",{id:"div-status-model",className:"status-text-small",children:" Model Processing Status:  "}),(0,Bu.jsx)("div",{id:"modelprocessingstatus",className:"status-light-green"})]}),(0,Bu.jsxs)("span",{style:{fontSize:"10px",fontFamily:"SF-pro-regular",textAlign:"center",width:"100%",margin:"2vw"},children:["NOTE: Activate Image Tracker button can only be pressed ",(0,Bu.jsx)("br",{})," after Model is finished processing and another person is in your call."]}),(0,Bu.jsx)("button",{id:"activate-image-button",onClick:function(){if(h){v.style.width="100%",v.style.objectFit="cover",b()}else alert("model is not ready. please wait.")},style:{margin:"2vw"},children:" Activate Image Tracker"})]}),(0,Bu.jsxs)("div",{id:"div-EEG-person-detector",style:{width:"50%",height:"100%",alignContent:"center"},children:[(0,Bu.jsx)("div",{className:"status-text-big",id:"big",style:{margin:"2vw",fontSize:"2.4vw"},children:" Person Tracking "}),(0,Bu.jsxs)("div",{className:"div-status-container",style:{width:"100%",margin:"4vw"},children:[(0,Bu.jsx)("div",{id:"div-status-person",className:"status-text-small",children:" Person Detected in Camera:  "}),(0,Bu.jsx)("div",{id:"personDetected",className:"status-light-green"})]}),(0,Bu.jsxs)("div",{className:"div-status-container",style:{width:"100%",margin:"4vw"},children:[(0,Bu.jsx)("div",{id:"div-status-person",className:"status-text-small",children:" Lighting Conditions:  "}),(0,Bu.jsx)("div",{className:"status-light-green"})]})]})]}),(0,Bu.jsxs)("div",{id:"div-EEG-graph-container",style:{height:"44%",width:"100%"},children:[(0,Bu.jsx)("div",{id:"div-dashboard-inner-regular-header",children:" EEG Readings "}),(0,Bu.jsx)("div",{style:{display:"flex",justifyContent:"center",width:"100%",marginBottom:"0.5vw",marginTop:"0.5vw"},children:(0,Bu.jsxs)("select",{id:"select-eeg-novalue",defaultValue:"synthetic",className:"option-eeg",onChange:function(e){!function(e){console.log(e.target.value),Kb.getUserDevice({label:e.target.value}).then((function(e){console.log("success")}))}(e)},children:[(0,Bu.jsx)("option",{value:"muse",children:" Muse 2"}),(0,Bu.jsx)("option",{value:"ganglion",children:" Ganglion "}),(0,Bu.jsx)("option",{value:"synthetic",children:" Synthetic Device"})]})}),(0,Bu.jsxs)("div",{className:"div-EEG-graph",children:[" ",(0,Bu.jsx)("canvas",{id:"myChart6"})," "]}),(0,Bu.jsxs)("div",{className:"div-EEG-graph",children:[" ",(0,Bu.jsx)("canvas",{id:"myChart5"})," "]}),(0,Bu.jsxs)("div",{className:"div-EEG-graph",children:[" ",(0,Bu.jsx)("canvas",{id:"myChart4"})," "]}),(0,Bu.jsxs)("div",{className:"div-EEG-graph",children:[" ",(0,Bu.jsx)("canvas",{id:"myChart3"})," "]}),(0,Bu.jsxs)("div",{className:"div-EEG-graph",children:[" ",(0,Bu.jsx)("canvas",{id:"myChart2"})," "]}),(0,Bu.jsxs)("div",{className:"div-EEG-graph",children:[" ",(0,Bu.jsx)("canvas",{id:"myChart1"})," "]})]})]}),(0,Bu.jsxs)("div",{id:"div-dashboard-inner-regular-right",style:{width:"40%",height:"100%",display:"flex",justifyContent:"center",backgroundColor:"#303030",flexFlow:"wrap"},children:[(0,Bu.jsx)("div",{id:"div-dropdown-copylink",style:{width:"35vw",height:"50px",display:"none",borderRadius:"5px",position:"fixed",top:"20px"},children:(0,Bu.jsxs)("div",{id:"span-dropdown-copylink",children:[" Press Here to Copy Join Link: ",(0,Bu.jsx)("div",{id:"div-dropdown-copylink-button",onClick:function(){navigator.clipboard.writeText("".concat(d,"/callpage?room=").concat(c))},children:" COPY "}),"  "]})}),(0,Bu.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end",alignItems:"flex-end"},id:"div-video-reflection",children:(0,Bu.jsx)("video",{style:{width:"190px",height:"190px",borderRadius:"5px",objectFit:"cover",backgroundColor:"black"},id:"novideo-reflection"})}),(0,Bu.jsx)("div",{style:{width:"95%",height:"fit-content",display:"flex",alignItems:"center",flexFlow:"wrap",flexDirection:"row-reverse",marginTop:"70px"},id:"div-video-regular",children:(0,Bu.jsx)("div",{id:"object-detector-wrapper",style:{width:"100%",display:"flex",justifyContent:"center",marginBottom:"20px"},children:(0,Bu.jsx)("div",{id:"liveView",className:"videoView",children:(0,Bu.jsx)("video",{id:"webcam",autoPlay:!0,style:{width:"100%"}})})})}),(0,Bu.jsxs)("div",{id:"videocontrols",style:{zoom:"120%"},children:[(0,Bu.jsx)("button",{id:"microphone",className:"videocontrol-button",onClick:function(){document.getElementById("novideo-reflection").muted=!n,document.getElementById("microphone").style.backgroundColor=n?"rgb(255, 0, 122)":"#636669",r(!n)},children:(0,Bu.jsx)("img",{style:{width:"15px",marginTop:"3px"},src:qu})}),(0,Bu.jsx)("button",{id:"chat",className:"videocontrol-button",children:(0,Bu.jsx)("img",{style:{width:"20px",marginTop:"3px"},src:Xu})}),(0,Bu.jsx)("button",{style:{backgroundColor:"#FF007A"},className:"videocontrol-button",children:(0,Bu.jsx)("img",{style:{width:"20px",marginTop:"5px"},src:Ku})})]})]})]})})};function $b(){return $b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$b.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(Yb||(Yb={}));var Jb=function(e){return e};var ex="beforeunload",tx="popstate";function nx(e){e.preventDefault(),e.returnValue=""}function rx(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function ax(){return Math.random().toString(36).substr(2,8)}function ix(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,a=void 0===r?"":r,i=e.hash,o=void 0===i?"":i;return a&&"?"!==a&&(n+="?"===a.charAt(0)?a:"?"+a),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function ox(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var sx=(0,s.createContext)(null);var ux=(0,s.createContext)(null);var cx=(0,s.createContext)({outlet:null,matches:[]});function lx(e,t){if(!e)throw new Error(t)}function dx(e,t,n){void 0===n&&(n="/");var r=yx(("string"===typeof t?ox(t):t).pathname||"/",n);if(null==r)return null;var a=fx(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(a);for(var i=null,o=0;null==i&&o<a.length;++o)i=vx(a[o],r);return i}function fx(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,a){var i={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};i.relativePath.startsWith("/")&&(i.relativePath.startsWith(r)||lx(!1),i.relativePath=i.relativePath.slice(r.length));var o=bx([r,i.relativePath]),s=n.concat(i);e.children&&e.children.length>0&&(!0===e.index&&lx(!1),fx(e.children,t,s,o)),(null!=e.path||e.index)&&t.push({path:o,score:mx(o,e.index),routesMeta:s})})),t}var px=/^:\w+$/,hx=function(e){return"*"===e};function mx(e,t){var n=e.split("/"),r=n.length;return n.some(hx)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!hx(e)})).reduce((function(e,t){return e+(px.test(t)?3:""===t?1:10)}),r)}function vx(e,t){for(var n=e.routesMeta,r={},a="/",i=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,c="/"===a?t:t.slice(a.length)||"/",l=gx({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},c);if(!l)return null;Object.assign(r,l.params);var d=s.route;i.push({params:r,pathname:bx([a,l.pathname]),pathnameBase:xx(bx([a,l.pathnameBase])),route:d}),"/"!==l.pathnameBase&&(a=bx([a,l.pathnameBase]))}return i}function gx(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):a+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(a,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=(0,m.Z)(n,2),a=r[0],i=r[1],o=t.match(a);if(!o)return null;var s=o[0],u=s.replace(/(.)\/+$/,"$1"),c=o.slice(1),l=i.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";u=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(c[n]||""),e}),{});return{params:l,pathname:s,pathnameBase:u,pattern:e}}function yx(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var bx=function(e){return e.join("/").replace(/\/\/+/g,"/")},xx=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")};function kx(){return null!=(0,s.useContext)(ux)}function wx(){return kx()||lx(!1),(0,s.useContext)(ux).location}function Sx(e,t){return void 0===t&&(t=[]),null==e?null:e.reduceRight((function(n,r,a){return(0,s.createElement)(cx.Provider,{children:void 0!==r.route.element?r.route.element:n,value:{outlet:n,matches:t.concat(e.slice(0,a+1))}})}),null)}function Cx(e){lx(!1)}function _x(e){var t=e.basename,n=void 0===t?"/":t,r=e.children,a=void 0===r?null:r,i=e.location,o=e.navigationType,u=void 0===o?Yb.Pop:o,c=e.navigator,l=e.static,d=void 0!==l&&l;kx()&&lx(!1);var f=xx(n),p=(0,s.useMemo)((function(){return{basename:f,navigator:c,static:d}}),[f,c,d]);"string"===typeof i&&(i=ox(i));var h=i,m=h.pathname,v=void 0===m?"/":m,g=h.search,y=void 0===g?"":g,b=h.hash,x=void 0===b?"":b,k=h.state,w=void 0===k?null:k,S=h.key,C=void 0===S?"default":S,_=(0,s.useMemo)((function(){var e=yx(v,f);return null==e?null:{pathname:e,search:y,hash:x,state:w,key:C}}),[f,v,y,x,w,C]);return null==_?null:(0,s.createElement)(sx.Provider,{value:p},(0,s.createElement)(ux.Provider,{children:a,value:{location:_,navigationType:u}}))}function Ix(e){var t=e.children,n=e.location;return function(e,t){kx()||lx(!1);var n,r=(0,s.useContext)(cx).matches,a=r[r.length-1],i=a?a.params:{},o=(a&&a.pathname,a?a.pathnameBase:"/"),u=(a&&a.route,wx());if(t){var c,l="string"===typeof t?ox(t):t;"/"===o||(null==(c=l.pathname)?void 0:c.startsWith(o))||lx(!1),n=l}else n=u;var d=n.pathname||"/",f=dx(e,{pathname:"/"===o?d:d.slice(o.length)||"/"});return Sx(f&&f.map((function(e){return Object.assign({},e,{params:Object.assign({},i,e.params),pathname:bx([o,e.pathname]),pathnameBase:"/"===e.pathnameBase?o:bx([o,e.pathnameBase])})})),r)}(Tx(t),n)}function Tx(e){var t=[];return s.Children.forEach(e,(function(e){if((0,s.isValidElement)(e))if(e.type!==s.Fragment){e.type!==Cx&&lx(!1);var n={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(n.children=Tx(e.props.children)),t.push(n)}else t.push.apply(t,Tx(e.props.children))})),t}function Ex(e){var t=e.basename,n=e.children,r=e.window,a=(0,s.useRef)();null==a.current&&(a.current=function(e){void 0===e&&(e={});var t=e.window,n=void 0===t?document.defaultView:t,r=n.history;function a(){var e=n.location,t=e.pathname,a=e.search,i=e.hash,o=r.state||{};return[o.idx,Jb({pathname:t,search:a,hash:i,state:o.usr||null,key:o.key||"default"})]}var i=null;n.addEventListener(tx,(function(){if(i)d.call(i),i=null;else{var e=Yb.Pop,t=a(),n=t[0],r=t[1];if(d.length){if(null!=n){var o=u-n;o&&(i={action:e,location:r,retry:function(){g(-1*o)}},g(o))}}else v(e)}}));var o=Yb.Pop,s=a(),u=s[0],c=s[1],l=rx(),d=rx();function f(e){return"string"===typeof e?e:ix(e)}function p(e,t){return void 0===t&&(t=null),Jb($b({pathname:c.pathname,hash:"",search:""},"string"===typeof e?ox(e):e,{state:t,key:ax()}))}function h(e,t){return[{usr:e.state,key:e.key,idx:t},f(e)]}function m(e,t,n){return!d.length||(d.call({action:e,location:t,retry:n}),!1)}function v(e){o=e;var t=a();u=t[0],c=t[1],l.call({action:o,location:c})}function g(e){r.go(e)}null==u&&(u=0,r.replaceState($b({},r.state,{idx:u}),""));var y={get action(){return o},get location(){return c},createHref:f,push:function e(t,a){var i=Yb.Push,o=p(t,a);if(m(i,o,(function(){e(t,a)}))){var s=h(o,u+1),c=s[0],l=s[1];try{r.pushState(c,"",l)}catch(d){n.location.assign(l)}v(i)}},replace:function e(t,n){var a=Yb.Replace,i=p(t,n);if(m(a,i,(function(){e(t,n)}))){var o=h(i,u),s=o[0],c=o[1];r.replaceState(s,"",c),v(a)}},go:g,back:function(){g(-1)},forward:function(){g(1)},listen:function(e){return l.push(e)},block:function(e){var t=d.push(e);return 1===d.length&&n.addEventListener(ex,nx),function(){t(),d.length||n.removeEventListener(ex,nx)}}};return y}({window:r}));var i=a.current,o=(0,s.useState)({action:i.action,location:i.location}),u=(0,m.Z)(o,2),c=u[0],l=u[1];return(0,s.useLayoutEffect)((function(){return i.listen(l)}),[i]),(0,s.createElement)(_x,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:i})}u.createRoot(document.getElementById("root")).render((0,Bu.jsx)(Ex,{children:(0,Bu.jsxs)(Ix,{children:[(0,Bu.jsx)(Cx,{path:"/",element:(0,Bu.jsx)(Hu,{})}),(0,Bu.jsx)(Cx,{path:"/callpage",element:(0,Bu.jsx)(Qb,{})})]})}))}()}();
//# sourceMappingURL=main.e8af6276.js.map